<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Latexå…¥é—¨</title>
    <url>/2020/07/01/latex-ru-men/</url>
    <content><![CDATA[<h1 id="1-Latexæ¡†æ¶å’Œæ€»ä½“è®¾ç½®"><a href="#1-Latexæ¡†æ¶å’Œæ€»ä½“è®¾ç½®" class="headerlink" title="1. Latexæ¡†æ¶å’Œæ€»ä½“è®¾ç½®"></a>1. Latexæ¡†æ¶å’Œæ€»ä½“è®¾ç½®</h1><h2 id="1-1-æ¡†æ¶"><a href="#1-1-æ¡†æ¶" class="headerlink" title="1.1 æ¡†æ¶"></a>1.1 æ¡†æ¶</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\documentclass[UTF8,a4paper,12pt]{ctexart}
\title{LaTeXå…¥é—¨æ•™ç¨‹}
\date{} %ä¸æ˜¾ç¤ºæ—¶é—´

\begin{document}
  \maketitle
  ä¸­æ–‡å†…å®¹
\end{document}
</code></pre>
<h1 id="1-2-æ ‡é¢˜-section"><a href="#1-2-æ ‡é¢˜-section" class="headerlink" title="1.2 æ ‡é¢˜ section"></a>1.2 æ ‡é¢˜ section</h1><h3 id="1-2-1-ä¸€çº§æ ‡é¢˜"><a href="#1-2-1-ä¸€çº§æ ‡é¢˜" class="headerlink" title="1.2.1 ä¸€çº§æ ‡é¢˜"></a>1.2.1 ä¸€çº§æ ‡é¢˜</h3><pre class=" language-lang-latex"><code class="language-lang-latex">\section{ä¸€çº§æ ‡é¢˜}  % æœ‰åºå·
\section*{ä¸€çº§æ ‡é¢˜} % æ— åºå·
</code></pre>
<h3 id="1-2-2-äºŒçº§æ ‡é¢˜"><a href="#1-2-2-äºŒçº§æ ‡é¢˜" class="headerlink" title="1.2.2 äºŒçº§æ ‡é¢˜"></a>1.2.2 äºŒçº§æ ‡é¢˜</h3><pre class=" language-lang-latex"><code class="language-lang-latex">\subsection{äºŒçº§æ ‡é¢˜}  % æœ‰åºå·
\subsection*{äºŒçº§æ ‡é¢˜} % æ— åºå·
</code></pre>
<h3 id="1-2-3-æ ‡é¢˜label"><a href="#1-2-3-æ ‡é¢˜label" class="headerlink" title="1.2.3 æ ‡é¢˜label"></a>1.2.3 æ ‡é¢˜label</h3><pre class=" language-lang-latex"><code class="language-lang-latex">\section{System} % ç« èŠ‚æ ‡é¢˜
    \label{sec:system} %æ ‡é¢˜çš„æ ‡ç­¾

\ref{sec:conclusions} %åœ¨æ­£æ–‡ä¸­å¼•ç”¨è¿™ä¸ªæ ‡é¢˜å
</code></pre>
<h2 id="1-3-æ ‡é¢˜å½¢å¼"><a href="#1-3-æ ‡é¢˜å½¢å¼" class="headerlink" title="1.3 æ ‡é¢˜å½¢å¼"></a>1.3 æ ‡é¢˜å½¢å¼</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% ç« èŠ‚åºå· å’Œ åºå·å­—ä½“å¤§å°
\renewcommand{\thesection}{{\zihao{4} \chinese{section}.}} % ä¸€.
\renewcommand{\thesubsection}{{\zihao{-4}\arabic{section}.\arabic{subsection}}} % 1.1

\arabic (1, 2, 3, ...)
\alph (a, b, c, ...)
\Alph (A, B, C, ...)
\roman (i, ii, iii, ...)
\Roman (I, II, III, ...)
\chinese (ä¸€ï¼ŒäºŒï¼Œä¸‰ï¼Œå››ï¼Œ...)
</code></pre>
<h2 id="1-4-å­—ä½“å­—å·"><a href="#1-4-å­—ä½“å­—å·" class="headerlink" title="1.4 å­—ä½“å­—å·"></a>1.4 å­—ä½“å­—å·</h2><pre class=" language-lang-latex"><code class="language-lang-latex">{\songti ä½ å¥½} % å®‹ä½“
{\heiti ä½ å¥½}  % é»‘ä½“
\textbf{ä½ å¥½}  % åŠ ç²—
</code></pre>
<pre><code>{\zihao{4} ä½ å¥½} % å››å·å­—ä½“
{\zihao{-4} ä½ å¥½} % å°å››å·å­—ä½“
</code></pre><h2 id="1-5-è¡Œè·"><a href="#1-5-è¡Œè·" class="headerlink" title="1.5 è¡Œè·"></a>1.5 è¡Œè·</h2><p>åœ¨å¯¼è¨€éƒ¨åˆ†</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">% è¡Œè·ï¼Œå•å€è¡Œè·
\usepackage{setspace}
\setstretch{1}
1ï¼šå•å€è¡Œè·
1.2ï¼š1.5å€è¡Œè·
1.6ï¼š2å€è¡Œè·
</code></pre>
<p>æˆ–è€…</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">\linespread{1}
1ï¼šå•å€è¡Œè·
1.2ï¼š1.5å€è¡Œè·
1.6ï¼š2å€è¡Œè·
</code></pre>
<h2 id="1-6-é¡µçœ‰é¡µè„š"><a href="#1-6-é¡µçœ‰é¡µè„š" class="headerlink" title="1.6 é¡µçœ‰é¡µè„š"></a>1.6 é¡µçœ‰é¡µè„š</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% é¡µçœ‰é¡µè„š
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\cfoot{\thepage} % é¡µè„šå±…ä¸­å†™é¡µç 
\fancyhead[R]{\textbf{å‚èµ›é˜Ÿå· $\#\,6794$}} % é¡µè„šå†™é˜Ÿå
</code></pre>
<h2 id="1-7-å›¾è¡¨å…¬å¼çš„ç¼–å·å½¢å¼"><a href="#1-7-å›¾è¡¨å…¬å¼çš„ç¼–å·å½¢å¼" class="headerlink" title="1.7 å›¾è¡¨å…¬å¼çš„ç¼–å·å½¢å¼"></a>1.7 å›¾è¡¨å…¬å¼çš„ç¼–å·å½¢å¼</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% å›¾ã€è¡¨ã€å…¬å¼çš„ç¼–å·
\renewcommand{\thefigure}{\arabic{section}-\arabic{figure}} # 5-1
\renewcommand{\thetable}{\arabic{section}-\arabic{table}} # 5-1
\renewcommand{\theequation}{\arabic{section}-\arabic{equation}} # 5-1

% å•ç‹¬ä¸€ä¸ªå›¾çš„å¼•ç”¨
å¦‚å›¾ \ref{Fig:character}æ‰€ç¤º % å¦‚å›¾5-1æ‰€ç¤º
% å¯¹å¤šä¸ªå›¾ä¸­çš„å­—å›¾çš„å¼•ç”¨
å¦‚å›¾ \arabic{section}-\ref{Fig:character:a}æ‰€ç¤º % å¦‚å›¾5-1(a)æ‰€ç¤º
</code></pre>
<h2 id="1-8-å­—ä½“"><a href="#1-8-å­—ä½“" class="headerlink" title="1.8 å­—ä½“"></a>1.8 å­—ä½“</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\textbf{å­—ä½“} % ç²—ä½“
\textit{å­—ä½“} % æ–œä½“
\emph{é‡ç‚¹}   % å¼ºè°ƒ
</code></pre>
<h2 id="1-9-é¢œè‰²"><a href="#1-9-é¢œè‰²" class="headerlink" title="1.9 é¢œè‰²"></a>1.9 é¢œè‰²</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\definecolor{Red}{RGB}{225,0,0}
\definecolor{Green}{RGB}{0,225,0}
\definecolor{Blue}{RGB}{0,0,225}


\textcolor{Red}{text}
\textcolor{Green}{text}
\textcolor{Blue}{text}
</code></pre>
<h2 id="1-10-ç©ºæ ¼"><a href="#1-10-ç©ºæ ¼" class="headerlink" title="1.10 ç©ºæ ¼"></a>1.10 ç©ºæ ¼</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\quad
\qquad
\,
\ (ç©ºæ ¼)
\/
</code></pre>
<h1 id="2-æ’å…¥å›¾ç‰‡"><a href="#2-æ’å…¥å›¾ç‰‡" class="headerlink" title="2. æ’å…¥å›¾ç‰‡"></a>2. æ’å…¥å›¾ç‰‡</h1><h2 id="2-1-å•ä¸ªå›¾ç‰‡"><a href="#2-1-å•ä¸ªå›¾ç‰‡" class="headerlink" title="2.1 å•ä¸ªå›¾ç‰‡"></a>2.1 å•ä¸ªå›¾ç‰‡</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% æ·»åŠ åŒ…
% figure 1
\usepackage{graphicx}
\usepackage{float}

% éœ€è¦æ·»åŠ å›¾ç‰‡çš„åœ°æ–¹
\begin{figure}[H] % æ­¤å¤„éœ€è¦ç”¨åˆ°å®åŒ… float
\centering % å›¾ç‰‡å±…ä¸­
\includegraphics[width = 8.3cm]{figures/figure_1.png}
\caption{The caption of this figure.}
\label{fig:figure1label}
\end{figure}

% åœ¨ä¸­æ–‡ä¸­éœ€è¦å¼•ç”¨å›¾ç‰‡çš„åœ°æ–¹
å¦‚å›¾ \ref{fig:figure1label} æ‰€ç¤º
</code></pre>
<h2 id="2-2-ä¸¤ä¸ªå›¾ç‰‡å¹¶åˆ—"><a href="#2-2-ä¸¤ä¸ªå›¾ç‰‡å¹¶åˆ—" class="headerlink" title="2.2 ä¸¤ä¸ªå›¾ç‰‡å¹¶åˆ—"></a>2.2 ä¸¤ä¸ªå›¾ç‰‡å¹¶åˆ—</h2><h3 id="2-2-1-ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬æ ‡é¢˜"><a href="#2-2-1-ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬æ ‡é¢˜" class="headerlink" title="2.2.1 ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬æ ‡é¢˜"></a>2.2.1 ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬æ ‡é¢˜</h3><pre class=" language-lang-latex"><code class="language-lang-latex">% ä½¿ç”¨çš„å®åŒ…
\begin{minipage}[t]{0.5\linewidth}
\end{minipage}
</code></pre>
<pre class=" language-lang-latex"><code class="language-lang-latex">\begin{figure}[H]
        \begin{minipage}[t]{0.5\linewidth}
            \centering
            \includegraphics[width=6cm]{figures/butterfly.jpg}
            \caption{left}
            \label{Fig:left}
        \end{minipage}
        \begin{minipage}[t]{0.5\linewidth}
            \centering
            \includegraphics[width=6cm]{figures/butterfly.jpg}
            \caption{right}
            \label{Fig:right}
        \end{minipage}
    \end{figure}
</code></pre>
<h3 id="2-2-2-ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬å°æ ‡é¢˜ï¼Œå…±äº«å¤§æ ‡é¢˜"><a href="#2-2-2-ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬å°æ ‡é¢˜ï¼Œå…±äº«å¤§æ ‡é¢˜" class="headerlink" title="2.2.2 ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬å°æ ‡é¢˜ï¼Œå…±äº«å¤§æ ‡é¢˜"></a>2.2.2 ä¸¤ä¸ªå¹¶æ’å›¾ç‰‡ï¼Œå•ç‹¬å°æ ‡é¢˜ï¼Œå…±äº«å¤§æ ‡é¢˜</h3><pre class=" language-lang-latex"><code class="language-lang-latex">% ä½¿ç”¨å®åŒ…
\subfigure[å°æ ‡é¢˜]{}
</code></pre>
<pre class=" language-lang-latex"><code class="language-lang-latex">% æ·»åŠ çº¢åŒ… \usepackage{subfigure}
\begin{figure}[H]
        \subfigure[left]{
        \begin{minipage}[t]{0.5\linewidth}
            \centering
            \includegraphics[width=6cm]{figures/butterfly.jpg}
            \label{Fig:left}
        \end{minipage}
        }
        \subfigure[right]{
        \begin{minipage}[t]{0.5\linewidth}
            \centering
            \includegraphics[width=6cm]{figures/butterfly.jpg}
            \label{Fig:right}
        \end{minipage}
        }
        \caption{G1 after first step of algorithm.}
\end{figure}
</code></pre>
<h1 id="3-æ’å…¥è¡¨æ ¼"><a href="#3-æ’å…¥è¡¨æ ¼" class="headerlink" title="3. æ’å…¥è¡¨æ ¼"></a>3. æ’å…¥è¡¨æ ¼</h1><h2 id="3-1-ç”Ÿæˆè¡¨æ ¼"><a href="#3-1-ç”Ÿæˆè¡¨æ ¼" class="headerlink" title="3.1 ç”Ÿæˆè¡¨æ ¼"></a>3.1 ç”Ÿæˆè¡¨æ ¼</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\usepackage{booktabs} % ç»˜åˆ¶ä¸‰çº¿è¡¨
</code></pre>
<pre class=" language-lang-latex"><code class="language-lang-latex">\begin{table}[htp]
    \centering
    \caption{å¸¸ç”¨ç¬¦å·è¯´æ˜}
    \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}ll}%è¡¨æ ¼ä¸¤è¾¹é¡¶æ ¼
        \toprule
        ç¬¦å·             & è¯´æ˜ \\
        \midrule
        $s(x)$           & å¾„å‘åŸºå‡½æ•°      \\
        $I_1,I_2$        & ä¸åŒçº¹ç†ç‰¹å¾çš„å›¾åƒ\\
        \bottomrule
    \end{tabular*}
    \label{tab:symbol}
\end{table}
</code></pre>
<ul>
<li>latexè¡¨æ ¼ç”Ÿæˆç½‘ç«™:<a href="http://www.tablesgenerator.com/" target="_blank" rel="noopener">http://www.tablesgenerator.com/</a></li>
<li>excelè½¬latex:<a href="https://tableconvert.com/" target="_blank" rel="noopener">https://tableconvert.com/</a></li>
</ul>
<h2 id="3-2-è¡¨æ ¼å¼•ç”¨"><a href="#3-2-è¡¨æ ¼å¼•ç”¨" class="headerlink" title="3.2 è¡¨æ ¼å¼•ç”¨"></a>3.2 è¡¨æ ¼å¼•ç”¨</h2><pre class=" language-lang-latex"><code class="language-lang-latex">å¦‚è¡¨æ ¼ \ref{tab:DH}æ‰€ç¤ºã€‚
</code></pre>
<h1 id="4-æ•°å­¦å…¬å¼"><a href="#4-æ•°å­¦å…¬å¼" class="headerlink" title="4. æ•°å­¦å…¬å¼"></a>4. æ•°å­¦å…¬å¼</h1><h2 id="4-0-åŒ…"><a href="#4-0-åŒ…" class="headerlink" title="4.0 åŒ…"></a>4.0 åŒ…</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\usepackage{amsmath}
\usepackage{bm} % æ•°å­¦å…¬å¼ä¸­ä½¿ç”¨çš„é»‘ä½“ \bm{R}
</code></pre>
<h2 id="4-1-å•ä¸ªæ–¹ç¨‹"><a href="#4-1-å•ä¸ªæ–¹ç¨‹" class="headerlink" title="4.1 å•ä¸ªæ–¹ç¨‹"></a>4.1 å•ä¸ªæ–¹ç¨‹</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\begin{equation}
y = ax+b
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
\begin{equation}
y = ax+b
\end{equation}</script><h2 id="4-2-æ–¹ç¨‹ç»„"><a href="#4-2-æ–¹ç¨‹ç»„" class="headerlink" title="4.2 æ–¹ç¨‹ç»„"></a>4.2 æ–¹ç¨‹ç»„</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% å·¦å¤§æ‹¬å·
\begin{equation}
    \begin{cases}
    y_1 = a_1x + b_1\\
    y_2 = a_2x + b_2
    \end{cases}
\end{equation}

% ä¸¤ä¸ªæ–¹ç¨‹æ˜¯ä¸€ç»„(ä½¿ç”¨1ä¸ªç¼–å·)ï¼Œæ²¡æœ‰å·¦å¤§æ‹¬å·
\begin{equation}
    \begin{gathered}
    y_1 = a_1x + b_1\\
    y_2 = a_2x + b_2
    \end{gathered}
\end{equation}

% ä¸¤ä¸ªæ–¹ç¨‹æ˜¯ä¸€ç»„(ä½¿ç”¨1ä¸ªç¼–å·)ï¼Œæœ‰å·¦å¤§æ‹¬å·
\begin{equation}
    \left \{
        \begin{gathered}
            y_1 = a_1x + b_1\\
            y_2 = a_2x + b_2
        \end{gathered}
    \right .
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
% å·¦å¤§æ‹¬å·
\begin{equation}
    \begin{cases}
    y_1 = a_1x + b_1\\
    y_2 = a_2x + b_2
    \end{cases}
\end{equation}</script><script type="math/tex; mode=display">
% ä¸¤ä¸ªæ–¹ç¨‹æ˜¯ä¸€ç»„(ä½¿ç”¨1ä¸ªç¼–å·)ï¼Œæ²¡æœ‰å·¦å¤§æ‹¬å·
\begin{equation}
    \begin{gathered}
    y_1 = a_1x + b_1\\
    y_2 = a_2x + b_2
    \end{gathered}
\end{equation}</script><script type="math/tex; mode=display">
% ä¸¤ä¸ªæ–¹ç¨‹æ˜¯ä¸€ç»„(ä½¿ç”¨1ä¸ªç¼–å·)ï¼Œæœ‰å·¦å¤§æ‹¬å·
\begin{equation}
    \left \{
        \begin{gathered}
            y_1 = a_1x + b_1\\
            y_2 = a_2x + b_2
        \end{gathered}
    \right .
\end{equation}</script><h2 id="4-3-æ‹†åˆ†å•ä¸ªå…¬å¼"><a href="#4-3-æ‹†åˆ†å•ä¸ªå…¬å¼" class="headerlink" title="4.3 æ‹†åˆ†å•ä¸ªå…¬å¼"></a>4.3 æ‹†åˆ†å•ä¸ªå…¬å¼</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% å°†ä¸€ä¸ªé•¿çš„å…¬å¼åˆ†ä¸¤è¡Œå†™
\begin{equation}
    \begin{split}
    y =& a + b + c\\
       & + d + e
    \end{split}
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
% å°†ä¸€ä¸ªé•¿çš„å…¬å¼åˆ†ä¸¤è¡Œå†™
\begin{equation}
    \begin{split}
    y =& a + b + c\\
       & + d + e
    \end{split}
\end{equation}</script><h2 id="4-4-åˆ†æ®µå‡½æ•°"><a href="#4-4-åˆ†æ®µå‡½æ•°" class="headerlink" title="4.4 åˆ†æ®µå‡½æ•°"></a>4.4 åˆ†æ®µå‡½æ•°</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\begin{equation}
T=
    \begin{cases}
        0       & a<2\\
        1       & a=2\\
        3       & a>2
    \end{cases}
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
\begin{equation}
T=
    \begin{cases}
        0       & a<2\\
        1       & a=2\\
        3       & a>2
    \end{cases}
\end{equation}</script><h2 id="4-5-çŸ©é˜µ"><a href="#4-5-çŸ©é˜µ" class="headerlink" title="4.5 çŸ©é˜µ"></a>4.5 çŸ©é˜µ</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\begin{equation}
    \begin{bmatrix}
        a & b\\
        c & d
    \end{bmatrix}
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
\begin{equation}
    \begin{bmatrix}
        a & b\\
        c & d
    \end{bmatrix}
\end{equation}</script><h2 id="4-6-åˆ†å­åˆ†æ¯"><a href="#4-6-åˆ†å­åˆ†æ¯" class="headerlink" title="4.6 åˆ†å­åˆ†æ¯"></a>4.6 åˆ†å­åˆ†æ¯</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\begin{equation}
    \frac{a+b}{c+d}
\end{equation}
</code></pre>
<script type="math/tex; mode=display">
\begin{equation}
    \frac{a+b}{c+d}
\end{equation}</script><h2 id="4-7-å¸Œè…Šå­—æ¯"><a href="#4-7-å¸Œè…Šå­—æ¯" class="headerlink" title="4.7 å¸Œè…Šå­—æ¯"></a>4.7 å¸Œè…Šå­—æ¯</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% å°å†™å¸Œè…Šå­—æ¯(å¤§å†™å¸Œè…Šå­—æ¯æ—¶ï¼Œé¦–å­—æ¯å¤§å†™å³å¯)
\alpha
\beta
\gamma
\delta
\epsilon
\eta
\theta
\lambda
\mu
\sigma
\tau
\phi
\varphi
\chi
\psi
\omega
</code></pre>
<script type="math/tex; mode=display">
% å°å†™å¸Œè…Šå­—æ¯(å¤§å†™å¸Œè…Šå­—æ¯æ—¶ï¼Œé¦–å­—æ¯å¤§å†™å³å¯)
\alpha
\beta
\gamma
\delta
\epsilon
\eta
\theta
\lambda
\mu
\sigma
\tau
\phi
\varphi
\chi
\psi
\omega</script><h2 id="4-8-æ•°å­¦ç®—å­"><a href="#4-8-æ•°å­¦ç®—å­" class="headerlink" title="4.8 æ•°å­¦ç®—å­"></a>4.8 æ•°å­¦ç®—å­</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\sum     % æ±‚å’Œ
\prod    % ä¹˜ç§¯
\partial % å¾®åˆ†
\int     % ç§¯åˆ†
\iint    % äºŒçº§ç§¯åˆ†
\iiint   % ä¸‰çº§ç§¯åˆ†
</code></pre>
<script type="math/tex; mode=display">
\sum     \\ % æ±‚å’Œ 
\prod    \\ % ä¹˜ç§¯ 
\partial \\ % å¾®åˆ†
\int     \\ % ç§¯åˆ†
\iint    \\ % äºŒçº§ç§¯åˆ†
\iiint   \\ % ä¸‰çº§ç§¯åˆ†</script><h1 id="5-ä¸€äº›ç¬¦å·"><a href="#5-ä¸€äº›ç¬¦å·" class="headerlink" title="5. ä¸€äº›ç¬¦å·"></a>5. ä¸€äº›ç¬¦å·</h1><h2 id="5-1-åº¦"><a href="#5-1-åº¦" class="headerlink" title="5.1 åº¦"></a>5.1 åº¦</h2><pre class=" language-lang-latex"><code class="language-lang-latex">90^{\circ}
</code></pre>
<script type="math/tex; mode=display">
90^{\circ}</script><h2 id="5-2-è§’"><a href="#5-2-è§’" class="headerlink" title="5.2 è§’"></a>5.2 è§’</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\angle A = 90^{\circ}
</code></pre>
<script type="math/tex; mode=display">
\angle A = 90^{\circ}</script><h2 id="5-3-å•å¼•å·ï¼ŒåŒå¼•å·"><a href="#5-3-å•å¼•å·ï¼ŒåŒå¼•å·" class="headerlink" title="5.3 å•å¼•å·ï¼ŒåŒå¼•å·"></a>5.3 å•å¼•å·ï¼ŒåŒå¼•å·</h2><pre class=" language-lang-latex"><code class="language-lang-latex">'å•å¼•å·'\\
''åŒå¼•å·''
</code></pre>
<script type="math/tex; mode=display">
'å•å¼•å·'\\
''åŒå¼•å·''</script><h2 id="5-4-æ¨ªæ "><a href="#5-4-æ¨ªæ " class="headerlink" title="5.4 æ¨ªæ "></a>5.4 æ¨ªæ </h2><pre class=" language-lang-latex"><code class="language-lang-latex">-   \\ % è¿å­—ç¬¦
--  \\ % æ•°å­—èŒƒå›´
--- \\ % ç ´æŠ˜å·
</code></pre>
<h2 id="5-5-ä¸‹åˆ’çº¿"><a href="#5-5-ä¸‹åˆ’çº¿" class="headerlink" title="5.5 ä¸‹åˆ’çº¿"></a>5.5 ä¸‹åˆ’çº¿</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\underline{è®ºæ–‡} % å•ä¸‹åˆ’çº¿
\uuline{è®ºæ–‡}    % åŒä¸‹åˆ’çº¿
</code></pre>
<h1 id="6-åˆ—è¡¨"><a href="#6-åˆ—è¡¨" class="headerlink" title="6. åˆ—è¡¨"></a>6. åˆ—è¡¨</h1><h2 id="6-1-åˆ—è¡¨"><a href="#6-1-åˆ—è¡¨" class="headerlink" title="6.1 åˆ—è¡¨"></a>6.1 åˆ—è¡¨</h2><pre class=" language-lang-latex"><code class="language-lang-latex">% åˆ—è¡¨é‡Œé¢åµŒå¥—åˆ—è¡¨
\begin{enumerate}
    \item [1.] å¤§å­¦
        \begin{enumerate}
            \item [1.1] å¤§ä¸€
            \item [1.2] å¤§äºŒ
            \item [1.3] å¤§ä¸‰
            \item [1.4] å¤§å››
        \end{enumerate}
    \item [2.] ç ”ç©¶ç”Ÿ
\end{enumerate}
</code></pre>
<h1 id="7-æ’å…¥ä»£ç "><a href="#7-æ’å…¥ä»£ç " class="headerlink" title="7. æ’å…¥ä»£ç "></a>7. æ’å…¥ä»£ç </h1><h2 id="7-1-åŒ…"><a href="#7-1-åŒ…" class="headerlink" title="7.1 åŒ…"></a>7.1 åŒ…</h2><pre class=" language-lang-latex"><code class="language-lang-latex">\usepackage{listings} % æ’å…¥ä»£ç çš„åŒ…
\usepackage{xcolor} %é¢œè‰²åŒ…

\lstset{ %
    language=Matlab,                % the language of the code
    basicstyle=\zihao{-4},       % the size of the fonts that are used for the code
    numbers=left,                   % where to put the line-numbers
    numberstyle=\tiny\color{gray},  % the style that is used for the line-numbers
    stepnumber=1,                   % the step between two line-numbers. If it is 1, each line will be numbered
    numbersep=5pt,                  % how far the line-numbers are from the code
    backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
    showspaces=false,               % show spaces adding particular underscores
    showstringspaces=false,         % underline spaces within strings
    showtabs=false,                 % show tabs within strings adding particular underscores
    frame=single,                   % adds a frame around the code
    rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
    tabsize=2,                      % sets default tabsize to 2 spaces
    captionpos=b,                   % sets the caption-position to bottom
    breaklines=true,                % sets automatic line breaking
    breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
    title=\lstname,                 % show the filename of files included with \lstinputlisting;
    % also try caption instead of title
    keywordstyle=\color{blackred},          % keyword style
    commentstyle=\color{dkgreen},   % comment style
    stringstyle=\color{MidnightBlue},         % string literal style
    escapeinside={\%*}{*)},         % if you want to add LaTeX within your code
    morekeywords={*,...},           % if you want to add more keywords to the set
    escapechar=`,                    % ä¸­æ–‡æ³¨é‡Š
    columns=flexible                % éç­‰æ¬¾è¾“å‡º
}
</code></pre>
<h2 id="7-2-ä»£ç "><a href="#7-2-ä»£ç " class="headerlink" title="7.2 ä»£ç "></a>7.2 ä»£ç </h2><pre class=" language-lang-latex"><code class="language-lang-latex">% å…ˆå®šä¹‰é¢œè‰²
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{MidnightBlue}{RGB}{25,25,112}
\definecolor{blackred}{RGB}{199,21,133} % å…³é”®å­—é¢œè‰²

% ä»£ç 
\begin{lstlisting}[language = Matlab]
  function [W, Z, mu, mse] = pcaEm(X, m)
  % Perform EM-like algorithm for PCA (by Sam Roweis).
  % Input:
  %   X: d x n data matrix
  %   m: dimension of target space
  % Output:
  %   W: d x m weight matrix
  %   Z: m x n projected data matrix
  %   mu: d x 1 mean vector
  %   mse: mean square error
  % Reference: 
  %   Pattern Recognition and Machine Learning by Christopher M. Bishop 
  %   EM algorithms for PCA and SPCA by Sam Roweis 
  % Written by Mo Chen (sth4nth@gmail.com).
  d = size(X,1);
  mu = mean(X,2);
  X = bsxfun(@minus,X,mu);
  W = rand(d,m); 

  tol = 1e-6;
  mse = inf;
  maxIter = 200;
  for iter = 1:maxIter
      Z = (W'*W)\(W'*X);             % 12.58
      W = (X*Z')/(Z*Z');              % 12.59

  %...
\end{lstlisting}
</code></pre>
<h1 id="8-æ–‡çŒ®å¼•ç”¨"><a href="#8-æ–‡çŒ®å¼•ç”¨" class="headerlink" title="8. æ–‡çŒ®å¼•ç”¨"></a>8. æ–‡çŒ®å¼•ç”¨</h1><h2 id="8-1-æ–‡çŒ®çš„ä¸‹è½½"><a href="#8-1-æ–‡çŒ®çš„ä¸‹è½½" class="headerlink" title="8.1 æ–‡çŒ®çš„ä¸‹è½½"></a>8.1 æ–‡çŒ®çš„ä¸‹è½½</h2><p>è°·æ­Œå­¦æœ¯ä¸Šä¸‹è½½æ–‡çŒ®å,ç‚¹å‡»å¦‚ä¸‹å›¾æ ‡:</p>
<p><img src="image-20200111205436290.png" alt="è°·æ­Œå­¦æœ¯ä¸Šä¸‹è½½æ–‡çŒ®"></p>
<p>å¾—åˆ°å¦‚ä¸‹æ–‡æœ¬:</p>
<pre class=" language-lang-tex"><code class="language-lang-tex">@article{æå¾·æ¯…2004ä¸ç¡®å®šæ€§äººå·¥æ™ºèƒ½,
  title={ä¸ç¡®å®šæ€§äººå·¥æ™ºèƒ½},
  author={æå¾·æ¯… and åˆ˜å¸¸æ˜± and æœé¹¢ and éŸ©æ—­},
  journal={è½¯ä»¶å­¦æŠ¥},
  volume={15},
  number={11},
  year={2004}
}
</code></pre>
<p>å¤åˆ¶åˆ°å‰ªåˆ‡æ¿,æ‰“å¼€zotero,æ–‡ä»¶=&gt;ä»å‰ªåˆ‡æ¿å¯¼å…¥:</p>
<p><img src="image-20200111205718228.png" alt="å‰ªåˆ‡æ¿å¯¼å…¥æ–‡æœ¬"></p>
<p>å³é”®è¯¥æ¡ç›®,æ·»åŠ é™„ä»¶=&gt;é™„åŠ æ–‡ä»¶å‰¯æœ¬,å¯ä»¥å°†æ–‡ä»¶æ·»åŠ å…¥å†…:</p>
<p><img src="image-20200111205910856.png" alt="æ·»åŠ æ–‡ä»¶å‰¯æœ¬"></p>
<p>å½“æœ‰å¤šæ¡çš„æ—¶å€™,å°†éœ€è¦çš„é€‰ä¸­,ç„¶åå³é”®å¯¼å‡ºæ¡ç›®.å¯ä»¥å°†æ‰€æœ‰é€‰ä¸­æ¡ç›®å¯¼å‡ºä¸ºbibtex(.bib)æ–‡ä»¶:</p>
<p><img src="image-20200111210233332.png" alt="å¯¼å‡ºä¸ºbibtex"></p>
<h2 id="8-2-bibtexæ–‡ä»¶çš„ä½¿ç”¨"><a href="#8-2-bibtexæ–‡ä»¶çš„ä½¿ç”¨" class="headerlink" title="8.2 bibtexæ–‡ä»¶çš„ä½¿ç”¨"></a>8.2 bibtexæ–‡ä»¶çš„ä½¿ç”¨</h2><p>latexæ–‡ä»¶ä½¿ç”¨citeåŒ…:</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">\usepackage{cite}
</code></pre>
<p>æ–‡æ¡£çš„ç»“å°¾ä½¿ç”¨è¿™ä¸¤å¥è¯:</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">\bibliographystyle{plain}
\bibliography{ref}
</code></pre>
<p>å…¶ä¸­refæ˜¯bibtexæ–‡ä»¶çš„åå­—(æ­¤ä»£ç å¤„ä¸ºref.bib)</p>
<p>å½“ä¸Šé¢çš„æ–‡ç« éœ€è¦ä½¿ç”¨bibtexä¸­çš„æ–‡ä»¶,ä½¿ç”¨:</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">\cite{__2004}
</code></pre>
<p>å…¶ä¸­â€__2004â€æ˜¯ä½ è¦å¼•ç”¨çš„æ¡ç›®çš„ç¬¬ä¸€å¥è¯,ä¾‹å¦‚æœ¬ref.bibæ–‡ä»¶å¦‚ä¸‹:</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">@article{__2004,
    title = {ä¸ç¡®å®šæ€§äººå·¥æ™ºèƒ½},
    volume = {15},
    number = {11},
    journal = {è½¯ä»¶å­¦æŠ¥},
    author = {{æå¾·æ¯…} and {åˆ˜å¸¸æ˜±} and {æœé¹¢} and {éŸ©æ—­}},
    year = {2004},
    file = {æå¾·æ¯… ç­‰ã€‚ - 2004 - ä¸ç¡®å®šæ€§äººå·¥æ™ºèƒ½.pdf:C\:\\Users\\25648\\Zotero\\storage\\TV4IWQII\\æå¾·æ¯… ç­‰ã€‚ - 2004 - ä¸ç¡®å®šæ€§äººå·¥æ™ºèƒ½.pdf:application/pdf}
}

@article{__2012,
    title = {äººå·¥æ™ºèƒ½åŠå…¶å‘å±•åº”ç”¨},
    volume = {12},
    number = {2},
    journal = {ä¿¡æ¯ç½‘ç»œå®‰å…¨},
    author = {{é‚¹è•¾} and {å¼ å…ˆé”‹}},
    year = {2012},
    pages = {0--0},
    file = {é‚¹è•¾ å’Œ å¼ å…ˆé”‹ - 2012 - äººå·¥æ™ºèƒ½åŠå…¶å‘å±•åº”ç”¨.pdf:C\:\\Users\\25648\\Zotero\\storage\\3U4NZ6YF\\é‚¹è•¾ å’Œ å¼ å…ˆé”‹ - 2012 - äººå·¥æ™ºèƒ½åŠå…¶å‘å±•åº”ç”¨.pdf:application/pdf}
}
</code></pre>
<p>æ‰€ä»¥â€__2004â€æ˜¾ç¤ºåå°±æ˜¯å¦‚ä¸‹æ•ˆæœ:</p>
<p>ä»£ç éƒ¨åˆ†:</p>
<pre class=" language-lang-latex"><code class="language-lang-latex">æå¾·æ¯…çš„æ–‡ç« \cite{__2004}
\bibliographystyle{plain}
\bibliography{ref}
</code></pre>
<p>æ•ˆæœ:</p>
<p><img src="image-20200111211644798.png" alt="æ•ˆæœ"></p>
<p>æ³¨æ„,åœ¨æ²¡æœ‰å‰æ–‡å¼•ç”¨çš„æƒ…å†µä¸‹,æ–‡çŒ®æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„,å¦‚ä¸Šé¢çš„&lt;&lt;äººå·¥æ™ºèƒ½åŠå…¶å‘å±•åº”ç”¨&gt;&gt;æ²¡æœ‰è¢«å¼•ç”¨æ‰€ä»¥æ²¡æœ‰å¯¹åº”çš„æ¡ç›®.</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>latex</category>
        <category>å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>latex</tag>
      </tags>
  </entry>
  <entry>
    <title>manimå­¦ä¹ --Containerç±»</title>
    <url>/2020/03/30/manim-xue-xi-container-lei/</url>
    <content><![CDATA[<h2 id="1-Containerçš„æ´¾ç”Ÿç±»"><a href="#1-Containerçš„æ´¾ç”Ÿç±»" class="headerlink" title="1. Containerçš„æ´¾ç”Ÿç±»"></a>1. Containerçš„æ´¾ç”Ÿç±»</h2><p><img src="Container.png" alt="Container"></p>
<h2 id="2-containerç±»çš„ä½œç”¨"><a href="#2-containerç±»çš„ä½œç”¨" class="headerlink" title="2. containerç±»çš„ä½œç”¨"></a>2. containerç±»çš„ä½œç”¨</h2><p>ä»£ç æ³¨é‡Šæœ‰æ®µè¯: å½“å‰ï¼Œè¿™ä»…é€‚ç”¨äºSceneå’ŒMobject.å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨è¿™é‡ŒæŠ½è±¡å…¶åŠŸèƒ½ï¼Œå°½ç®¡çº¯ç²¹æ˜¯åä¹‰ä¸Šçš„.ç›®å‰ï¼Œæ‰€æœ‰å®ç°éƒ½å¿…é¡»ç”±æ´¾ç”Ÿç±»å¤„ç†ã€‚</p>
<p>ä¸Šé¢çš„æ³¨é‡Šè¯´æ˜äº†3B1Bæ­£åœ¨è§„èŒƒä»£ç ,ä½¿ä»£ç çš„é˜…è¯»è€…æ›´å¥½çš„è¯»æ‡‚ä»£ç ä¸è‡ªå·±åˆ›å»ºä»£ç åˆ†æ”¯</p>
<h2 id="3-å°ç»“"><a href="#3-å°ç»“" class="headerlink" title="3. å°ç»“"></a>3. å°ç»“</h2><p>containerç±»ä»…ä»…æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,åªæœ‰addå’ŒremoveæŠ½è±¡æ–¹æ³•,æ²¡æœ‰å¾ˆå¤§çš„å®é™…ç”¨é€”,é™¤éè‡ªå·±å¼€å‘ä»£ç ,ä¸ç„¶ä¸ä¼šç”¨åˆ°è¿™ä¸ªç±».</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>manim</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>manim</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/03/26/hello-world/</url>
    <content><![CDATA[<p>å¤§å®¶å¥½,è¿™ä¸ªæ˜¯æˆ‘çš„ä¸ªäººåšå®¢<br>ç¬¬ä¸€æ¬¡éƒ¨ç½²åšå®¢å¯èƒ½æœ‰ç‚¹ç”Ÿç–,è€Œä¸”è¿™ä¸ªåšå®¢ä»…ä»…æ˜¯æˆ‘æ­¦æ±‰ç–«æƒ…æœŸé—´çš„æ— èŠæ¶ˆé£çš„æ—¶å€™æ­å»ºçš„<br>å¦‚æœåšçš„ä¸å¥½å¤§å®¶å°±è°…è§£ä¸€ä¸‹å§</p>
<h2 id="ä»¥ä¸‹æ˜¯åšå®¢åŠŸèƒ½çš„æµ‹è¯•"><a href="#ä»¥ä¸‹æ˜¯åšå®¢åŠŸèƒ½çš„æµ‹è¯•" class="headerlink" title="ä»¥ä¸‹æ˜¯åšå®¢åŠŸèƒ½çš„æµ‹è¯•:"></a>ä»¥ä¸‹æ˜¯åšå®¢åŠŸèƒ½çš„æµ‹è¯•:</h2><ol>
<li>è§†é¢‘æ’­æ”¾: <div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;box-shadow: 10px 10px 5px #888888;">
     <iframe src="//player.bilibili.com/player.html?aid=3746956&amp;bvid=BV1ys411X7Gt&amp;cid=6008537&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;border-radius: 8px;">
      </iframe>
 </div>



</li>
</ol>
<ol>
<li><p>åµŒå…¥æ•°å­¦å…¬å¼çš„ä¹¦å†™<br> æ¬§æ‹‰å…¬å¼:$e^{i\pi}+1=0$éå¸¸æ¼‚äº®</p>
</li>
<li><p>æ•°å­¦å…¬å¼</p>
<script type="math/tex; mode=display">
 \sum_{n=1}^{\infty}\frac{1}{n^2}=\frac{1}{1^2}+\frac{1}{2^2}+\frac{1}{3^2}+...=\frac{\pi^{2}}{6}</script></li>
<li><p>åµŒå…¥ä»£ç </p>
<pre class=" language-lang-python"><code class="language-lang-python"> while(True):
         print("hello world!!")
</code></pre>
</li>
</ol>
<h2 id="æ­å»ºçš„å‚è€ƒèµ„æ–™"><a href="#æ­å»ºçš„å‚è€ƒèµ„æ–™" class="headerlink" title="æ­å»ºçš„å‚è€ƒèµ„æ–™:"></a>æ­å»ºçš„å‚è€ƒèµ„æ–™:</h2><ol>
<li>åŸºæœ¬çš„æ­å»º:<br> <a href="https://www.jianshu.com/p/a1a4ebf0e5fc" target="_blank" rel="noopener">https://www.jianshu.com/p/a1a4ebf0e5fc</a><br> <a href="https://www.jianshu.com/p/e995fd69c519" target="_blank" rel="noopener">https://www.jianshu.com/p/e995fd69c519</a></li>
<li>markdownæ·»åŠ å›¾ç‰‡é‡åˆ°å‘:<br> <a href="https://www.jianshu.com/p/db02d775aed0" target="_blank" rel="noopener">https://www.jianshu.com/p/db02d775aed0</a><br> <a href="https://blog.csdn.net/xjm850552586/article/details/84101345" target="_blank" rel="noopener">https://blog.csdn.net/xjm850552586/article/details/84101345</a></li>
<li>æ¯é¡µçš„front-matterè®¾ç½®:<br> <a href="https://www.dazhuanlan.com/2019/11/30/5de154d0810af/" target="_blank" rel="noopener">https://www.dazhuanlan.com/2019/11/30/5de154d0810af/</a></li>
<li>æ–‡ç« å­—æ•°ç»Ÿè®¡ä¸é˜…è¯»æ—¶é•¿:<br> <a href="https://www.jianshu.com/p/f615e79a50d7" target="_blank" rel="noopener">https://www.jianshu.com/p/f615e79a50d7</a></li>
<li>åˆ†ç±»åŠæ ‡ç­¾:<br> <a href="https://www.jianshu.com/p/e17711e44e00" target="_blank" rel="noopener">https://www.jianshu.com/p/e17711e44e00</a></li>
<li>é‚®ç®±é“¾æ¥:<br> <a href="https://blog.csdn.net/qq_42893625/article/details/102671013" target="_blank" rel="noopener">https://blog.csdn.net/qq_42893625/article/details/102671013</a></li>
<li>è‡ªé€‚åº”BiliBiliè§†é¢‘å¤§å°:<br> <a href="https://teamssix.com/year/190614-111512.html" target="_blank" rel="noopener">https://teamssix.com/year/190614-111512.html</a></li>
<li>è¯„è®ºç³»ç»Ÿâ€”Gitalk:<br><a href="https://www.jianshu.com/p/656e6101bf0f" target="_blank" rel="noopener">https://www.jianshu.com/p/656e6101bf0f</a></li>
<li>codingä¸githubåŒéƒ¨ç½²:<br><a href="https://blog.csdn.net/qq_41890607/article/details/104338125" target="_blank" rel="noopener">https://blog.csdn.net/qq_41890607/article/details/104338125</a></li>
</ol>
<h2 id="ç‰¹åˆ«æ„Ÿè°¢"><a href="#ç‰¹åˆ«æ„Ÿè°¢" class="headerlink" title="ç‰¹åˆ«æ„Ÿè°¢"></a>ç‰¹åˆ«æ„Ÿè°¢</h2><p>ä¸»é¢˜å¼€å‘è€…: <a href="https://jerryc.me/" target="_blank" rel="noopener">https://jerryc.me/</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
  </entry>
  <entry>
    <title>manimå­¦ä¹ --cameraç±»(ä¸€)</title>
    <url>/2020/07/02/manim-xue-xi-camera-lei/</url>
    <content><![CDATA[<h2 id="1-cameraçš„æ‰€æœ‰å­ç±»ä»¥åŠç›¸å…³çš„ç±»"><a href="#1-cameraçš„æ‰€æœ‰å­ç±»ä»¥åŠç›¸å…³çš„ç±»" class="headerlink" title="1. cameraçš„æ‰€æœ‰å­ç±»ä»¥åŠç›¸å…³çš„ç±»"></a>1. cameraçš„æ‰€æœ‰å­ç±»ä»¥åŠç›¸å…³çš„ç±»</h2><p><img src="Camera.png" alt="Camera"></p>
<h2 id="2-cameraä¸»è¦çš„å˜é‡ä¸å±æ€§"><a href="#2-cameraä¸»è¦çš„å˜é‡ä¸å±æ€§" class="headerlink" title="2. cameraä¸»è¦çš„å˜é‡ä¸å±æ€§"></a>2. cameraä¸»è¦çš„å˜é‡ä¸å±æ€§</h2><h3 id="2-1-CONFIG"><a href="#2-1-CONFIG" class="headerlink" title="2.1 CONFIG"></a>2.1 CONFIG</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "background_image": None,
        "pixel_height": DEFAULT_PIXEL_HEIGHT,
        "pixel_width": DEFAULT_PIXEL_WIDTH,
        "frame_rate": DEFAULT_FRAME_RATE,
        # Note: å¸§çš„é«˜åº¦å’Œå®½åº¦å°†è¢«è°ƒæ•´å¤§å°ä»¥åŒ¹é…åƒç´ é•¿å®½æ¯”
        #         è¿™ä¸ªåœ¨constant.pyä¸­å¯ä»¥çœ‹åˆ°ï¼š
        #         FRAME_WIDTH = FRAME_HEIGHT * DEFAULT_PIXEL_WIDTH / DEFAULT_PIXEL_HEIGHT
        "frame_height": FRAME_HEIGHT,
        "frame_width": FRAME_WIDTH,
        "frame_center": ORIGIN,
        "background_color": BLACK,
        "background_opacity": 1,
        # vectorized mobjectsçš„ç‚¹åœ¨å¤§äºä¸‹é¢çš„èŒƒå›´æ—¶å€™ä¼šç¼©å°
        "max_allowable_norm": FRAME_WIDTH,
        # å›¾åƒçš„æ¨¡å¼ï¼Œæ­¤å¤„é»˜è®¤æ˜¯RGBAï¼Œå‚è§æ•°å­—å›¾åƒå¤„ç†
        "image_mode": "RGBA",
        # å›¾åƒé€šé“ï¼Œå‚è§æ•°å­—å›¾åƒå¤„ç†
        "n_channels": 4,
        "pixel_array_dtype": 'uint8',
        # z_buff_func is only used if the flag above is set to True.
        # æ¯”è¾ƒæ—¶å°†zåæ ‡èˆå…¥åˆ°æœ€æ¥è¿‘çš„ç™¾åˆ†ä¹‹ä¸€
        "z_buff_func": lambda m: np.round(m.get_center()[2], 2),
        "cairo_line_width_multiple": 0.01,
    }
</code></pre>
<h3 id="2-2-init-å‡½æ•°"><a href="#2-2-init-å‡½æ•°" class="headerlink" title="2.2__init__()å‡½æ•°"></a>2.2<code>__init__()</code>å‡½æ•°</h3><ul>
<li><p><code>rgb_max_val</code>RGBè‰²å½©çš„å–å€¼çš„æœ€å¤§å€¼ï¼Œé»˜è®¤çš„<code>uint8</code>å–å€¼æœ€å¤§å€¼æ˜¯255</p>
</li>
<li><p><code>pixel_array_to_cairo_context</code>å°†åƒç´ å˜æˆcairoèƒ½å¤„ç†çš„å½¢å¼</p>
</li>
</ul>
<h2 id="3-cameraçš„ä¸»è¦æ–¹æ³•"><a href="#3-cameraçš„ä¸»è¦æ–¹æ³•" class="headerlink" title="3. cameraçš„ä¸»è¦æ–¹æ³•"></a>3. cameraçš„ä¸»è¦æ–¹æ³•</h2><ol>
<li><p><code>reset_pixel_shape(new_height, new_width)</code>è®¾ç½®å¸§çš„åƒç´ å®½ä¸é«˜</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Test_pixel(ThreeDScene):
    def construct(self):
        axes = ThreeDAxes()
        cube = Cube(fill_color=GREEN).scale([2, 0.5, 0.5])

        theta_0 = 0 # èµ·å§‹è§’åº¦
        theta =  -120 * DEGREES # ç›®æ ‡è§’åº¦

        self.set_camera(ThreeDCamera(background_color=BLUE))
        self.camera.reset_pixel_shape(854,854)
        self.set_camera_orientation(60 * DEGREES, theta=theta_0)
        self.add(axes, cube)
        self.wait()
        dt = 1/15
        delta_theta = (theta - theta_0) / 60
        for i in range(60):
            theta_0 += delta_theta
            self.set_camera_orientation(theta=theta_0)
            self.wait(dt)
        self.wait(2)
</code></pre>
<p>ä¸Šé¢ä»£ç è®¾ç½®å®½é«˜ä¸º854*854ï¼Œæœ€åå°±ä¼šäº§ç”Ÿå¤§å°ä¸º854*854çš„è§†é¢‘ï¼š</p>
<p><img src="Test_pixel.gif" alt="Test_pixel"></p>
</li>
<li><p>ä¸€äº›get,setå‡½æ•°ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">    def get_pixel_height(self):
        return self.pixel_height

    def get_pixel_width(self):
        return self.pixel_width

    def get_frame_height(self):
        return self.frame_height

    def get_frame_width(self):
        return self.frame_width

    def get_frame_center(self):
        return self.frame_center

    def set_frame_height(self, frame_height):
        self.frame_height = frame_height

    def set_frame_width(self, frame_width):
        self.frame_width = frame_width

    def set_frame_center(self, frame_center):
        self.frame_center = frame_center
</code></pre>
<p>frameå’Œpixelçš„åŒºåˆ«æ˜¯ï¼šä¸€ä¸ªæ˜¯å°†å¸§åˆ†ä¸ºå¤šå°‘æ ¼ï¼Œä¸€ä¸ªæ˜¯å°†å¸§çš„å¤§å°è®¾ç½®ä¸ºå¤šå°‘ï¼Œå‰è€…ä»…ä»…ä¼šæ”¹å˜åæ ‡çš„é—´éš”ï¼Œåè€…ä¼šæ”¹å˜è§†é¢‘çš„å®½é«˜</p>
<p>åŸå§‹çš„é»˜è®¤ä¸ºframe_width=14ï¼Œframe_height=8ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Set_frame1(Scene):
    def construct(self):
        numberplane = NumberPlane()
        numberplane.add_coordinates()
        text = Text("frame_width=14\nframe_height=8").shift(LEFT*5+UP*3)
        self.add(numberplane,text)
        self.wait(2)
</code></pre>
<p><img src="set_frame14.png" alt="set_frame14"></p>
<p>é‡æ–°è®¾ç½®frame_width:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Set_frame1(Scene):
    def construct(self):
        numberplane = NumberPlane()
        numberplane.add_coordinates()
        self.camera.set_frame_width(8)
        text = Text("frame_width=8\nframe_height=8").shift(UP*3)
        self.add(numberplane,text)
        self.wait(2)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å®½ä¹Ÿè¢«æ‹‰é•¿äº†ï¼š</p>
<p><img src="set_frame8.png" alt="set_frame8"></p>
</li>
<li><p><code>resize_frame_shape(fixed_dimension=0)</code>:</p>
<p>æ›´æ”¹frame_shapeä»¥åŒ¹é…åƒç´ çš„é•¿å®½æ¯”ï¼Œå…¶ä¸­fixed_dimensionç¡®å®šframe_heightæˆ–frame_widthæ˜¯å¦ä¿æŒå›ºå®šï¼Œè€Œå…¶ä»–å€¼åˆ™ç›¸åº”æ”¹å˜ã€‚</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Set_frame1(Scene):
    def construct(self):
        numberplane = NumberPlane()
        numberplane.add_coordinates()
        self.camera.set_frame_width(8)
        self.camera.resize_frame_shape()
        text = Text("frame_width=8")
        self.add(numberplane,text)
        self.wait(2)
</code></pre>
<p><img src="resize_frame_shape.png" alt="resize_frame_shape"></p>
</li>
<li><p><code>get_image(pixel_array=None)</code></p>
<p>è¿”å›<code>pixel_array</code>å¯¹åº”çš„Imageç±»å‹çš„å¯¹è±¡ï¼Œå¦‚æœ<code>pixel_array</code>ä¸ºç©º,åˆ™è¿”å›è‡ªèº«çš„<code>pixel_array</code>å¯¹åº”çš„Imageå›¾åƒ,æ­¤å‡½æ•°ä¸€èˆ¬ä¸ç”¨</p>
</li>
<li><p><code>get_pixel_array()</code></p>
<p>è¿”å›è‡ªèº«çš„<code>pixel_array</code></p>
</li>
<li><p><code>convert_pixel_array(pixel_array, convert_from_floats=False)</code></p>
<p>å°†æ ¼å¼ä¸º<code>PIL</code> çš„<code>pixel_array</code>å›¾ç‰‡è½¬æ¢ä¸º<code>np.array</code>çš„æ ¼å¼</p>
<p>å…¶ä¸­<code>pixel_array</code>çš„å½¢å¼å¯èƒ½æœ‰ä¸¤ç§,ç¬¬ä¸€ç§æ˜¯RGBçš„æ ¼å¼è¿›è¡Œè¡¨ç¤º,ç¬¬äºŒç§æ˜¯è¢«å½’ä¸€åŒ–åˆ°[0,1]çš„å°æ•°å½¢å¼,æ­¤æ—¶éœ€è¦å¯ç”¨<code>convert_from_floats=True</code></p>
</li>
<li><p><code>set_pixel_array(pixel_array, convert_from_floats=False)</code></p>
<p>è®¾ç½®cameraçš„<code>pixel_array</code>ä¸ºå‚æ•°ä¸­çš„pixel_array,å¯¹åº”çš„é€‰é¡¹åŒç†äº`convert_pixel_array</p>
</li>
<li><p><code>set_background(pixel_array, convert_from_floats=False)</code></p>
<p>è®¾ç½®èƒŒæ™¯(æœ¬äººæ²¡æœ‰æˆåŠŸå°è¯•å‡ºæ¥æ¢èƒŒæ™¯å›¾ç‰‡ä¸çŸ¥é“å‡ºäº†ä»€ä¹ˆé—®é¢˜,ä»£ç å¦‚ä¸‹)</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Set_background(Scene):
    def construct(self):
        image = Image.open(r"XXX.png")
        self.camera.set_background(image)
        # self.camera.init_background()
        numberplane = NumberPlane()
        numberplane.add_coordinates()
        self.add(numberplane)
        self.wait(2)
</code></pre>
<p>ä¸Šé¢å°±æ˜¯éšä¾¿åŠ äº†ä¸ªç‰©ä½“,ä¸çŸ¥é“ä¸ºä»€ä¹ˆå‡ºç°è¿™ä¸ªé—®é¢˜</p>
</li>
<li><p><code>make_background_from_func(coords_to_colors_func)</code></p>
<p>å¦ä¸€ä¸ªå‡½æ•°æ˜¯<code>set_background_from_func(coords_to_colors_func)</code>åŠŸèƒ½ä¸€æ ·</p>
<p>ä½¿ç”¨coords_to_colors_funcè®¾ç½®èƒŒæ™¯ä»¥ç¡®å®šæ¯ä¸ªåƒç´ çš„é¢œè‰²ã€‚ coords_to_colors_funcçš„æ¯ä¸ªè¾“å…¥åœ¨ç©ºé—´ä¸­éƒ½æ˜¯ï¼ˆxï¼Œyï¼‰å¯¹ï¼ˆåœ¨frameå¯¹åº”çš„æ™®é€šç©ºé—´åæ ‡,ä¸æ˜¯åƒç´ åæ ‡ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªè¾“å‡ºåº”ä¸º4ä¸ªæµ®ç‚¹æ•°çš„RGBAæ•°ç»„ã€‚</p>
<pre class=" language-lang-python"><code class="language-lang-python">def coords_to_colors_func(point):
    return (int)(255*(point[0]+7)/17),(int)(255*(point[1]+4)/8),(int)(255*(point[0]+11)/22),1

class Set_bacground_func(Scene):
    def construct(self):
        self.camera.set_background_from_func(coords_to_colors_func)
        square = Square()
        self.add(square)
        self.wait(2)
</code></pre>
<p><img src="set_background_func.jpg" alt="set_background_func"></p>
</li>
<li><p><code>reset()</code></p>
<p>é‡è®¾èƒŒæ™¯</p>
</li>
<li><p><code>get_mobjects_to_display()</code></p>
<p>å¾—åˆ°è¦å±•ç¤ºçš„mobject</p>
</li>
<li><p><code>is_in_frame(mobject)</code></p>
<p>åˆ¤æ–­mobjectæ˜¯å¦åœ¨frameé‡Œé¢</p>
</li>
<li><p><code>points_to_pixel_coords(mobject, points)</code></p>
<p>å°†æ™®é€šåæ ‡,è½¬æ¢ä¸ºåƒç´ åæ ‡</p>
</li>
</ol>
<p>å…¶ä»–çš„å‡½æ•°æœ¬äººä¹Ÿæ²¡æœ‰å¾ˆç†è§£,è€Œä¸”æ¶‰åŠåˆ°cairoåº“çš„å­¦ä¹ ,ä¸ªäººè§‰å¾—æ²¡æœ‰å¿…è¦æ·±å…¥äº†è§£å…¶ä»–çš„å‡½æ•°,å› ä¸ºæœ‰çš„å‡½æ•°3b1bä»…ä»…æ˜¯ç”¨æ¥å­ç±»å®ç°æˆ–è€…æ ¹æœ¬æ²¡æœ‰ç”¨è¿‡,å¦‚æœéœ€è¦è¯·è‡ªè¡Œé˜…è¯»æºç </p>
<h2 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h2><p>æœ¬æ¬¡å­¦ä¹ cameraå¾ˆå¤šå‡½æ•°åäºåº•å±‚,æˆ‘ä»¬å¹³æ—¶ç»˜åˆ¶çš„æ—¶å€™åº”è¯¥ç”¨ä¸ä¸Š,cameraçš„å¾ˆå¤šå…³äºèƒŒæ™¯(background)çš„å‡½æ•°æ„Ÿè§‰å¾ˆå¤šéƒ½éš¾ä»¥ä½¿ç”¨æˆ–è€…æœ‰å„ç§bug(ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘è‡ªå·±ä¸ä¼šç”¨çš„åŸå› ),å¦‚æœæœ‰äººå‘ç°é”™è¯¯æ¬¢è¿è¯„è®ºç•™è¨€<span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">ğŸ˜„</span></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>manim</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>manim</tag>
      </tags>
  </entry>
  <entry>
    <title>manimå­¦ä¹ --Mobjectç±»(ä¸€)</title>
    <url>/2020/03/30/manim-xue-xi-mobject-lei/</url>
    <content><![CDATA[<h2 id="1-Mobjectæ‰€æ´¾ç”Ÿçš„å­ç±»"><a href="#1-Mobjectæ‰€æ´¾ç”Ÿçš„å­ç±»" class="headerlink" title="1. Mobjectæ‰€æ´¾ç”Ÿçš„å­ç±»"></a>1. Mobjectæ‰€æ´¾ç”Ÿçš„å­ç±»</h2><p><img src="Mobject-1586013786368.png" alt="Mobject"></p>
<h2 id="2-Mobjectçš„ä¸»è¦å˜é‡ä¸å±æ€§"><a href="#2-Mobjectçš„ä¸»è¦å˜é‡ä¸å±æ€§" class="headerlink" title="2. Mobjectçš„ä¸»è¦å˜é‡ä¸å±æ€§"></a>2. Mobjectçš„ä¸»è¦å˜é‡ä¸å±æ€§</h2><h3 id="2-1-CONFIG"><a href="#2-1-CONFIG" class="headerlink" title="2.1 CONFIG"></a>2.1 CONFIG</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "color": WHITE,
        "name": None,
        "dim": 3,
        "target": None,
    }
</code></pre>
<h3 id="2-2-init-å‡½æ•°"><a href="#2-2-init-å‡½æ•°" class="headerlink" title="2.2 __init__()å‡½æ•°:"></a>2.2 <code>__init__()</code>å‡½æ•°:</h3><ul>
<li><p><code>submobjects = []</code>:æ¯ä¸ªMobjectéƒ½æœ‰è‡ªå·±çš„submobjectsåˆ—è¡¨,åˆ—è¡¨é‡Œé¢çš„æ¯ä¸ªå…ƒç´ ä¹Ÿæ˜¯Mobject,è¿™æ ·æœ‰åˆ©äºå¯¹åµŒå¥—çš„Mobjectè¿›è¡Œæ•´ä½“æ“ä½œ,å¦‚å¯¹ä¸€ç¾¤å›¾å½¢ä¸€èµ·å¹³ç§»ç­‰ç­‰åŠ¨ç”»çš„å®ç°</p>
</li>
<li><p><code>updaters = []</code>:ä¸€ç³»åˆ—çš„æ›´æ–°å‡½æ•°ç»„æˆ,å¦‚:</p>
<pre class=" language-lang-python"><code class="language-lang-python"> def update_text(obj):
            obj.next_to(dot,RIGHT,buff=SMALL_BUFF)
</code></pre>
<p>å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªupdater,æœ‰<code>add_updater()</code>æ–¹æ³•è¿›è¡Œæ·»åŠ :</p>
<pre class=" language-lang-python"><code class="language-lang-python"># author:TB,ç”±äº3b1bçš„å‡½æ•°æœ‰æ”¹è¿›,æœ¬ä»£ç è¿›è¡Œäº†ä¿®æ”¹
class AddUpdater(Scene):
    def construct(self):
        dot = Dot()
        text = TextMobject("Label").next_to(dot,RIGHT,buff=SMALL_BUFF)

        self.add(dot,text)

        # Update function æ›´æ–°å‡½æ•°
        def update_text(obj):
            obj.next_to(dot,RIGHT,buff=SMALL_BUFF)

        # Add update function to the objects
        # æŠŠæ›´æ–°å‡½æ•°åŠ ç»™å¯¹è±¡
        text.add_updater(update_text)

        # å¦‚æœæƒ³ç®€æ´ï¼Œlambdaè¡¨è¾¾å¼å¦‚ä¸‹ï¼š
        # text.add_updater(lambda m: m.next_to(dot,RIGHT,buff=SMALL_BUFF))
        # æ­¤æ—¶ä¸‹é¢çš„remove_updater(update_text)ä¸èƒ½ç»§ç»­ä½¿ç”¨ï¼Œéœ€è¦æ”¹ä¸ºclear_updaters

        self.play(dot.shift,UP*2)
        # Remove update function
        text.remove_updater(update_text)

        self.wait()
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹:</p>
<p><img src="AddUpdater-1586013786369.gif" alt="AddUpdater"></p>
<p>è¯¦ç»†è§ä¸‹é¢3.3.2çš„ä»‹ç»</p>
</li>
<li><p><code>updating_suspended = False</code>:æ˜¯å¦æš‚åœæ›´æ–°</p>
</li>
<li><p><code>points = np.zeros((0, self.dim))</code>:åæ ‡,é»˜è®¤ä¸ºåŸç‚¹,ç»´åº¦ç”±å±æ€§<code>dim</code>å†³å®š</p>
</li>
</ul>
<h3 id="2-3-å…¶ä»–å‡½æ•°é‡Œé¢äº§ç”Ÿçš„å˜é‡"><a href="#2-3-å…¶ä»–å‡½æ•°é‡Œé¢äº§ç”Ÿçš„å˜é‡" class="headerlink" title="2.3 å…¶ä»–å‡½æ•°é‡Œé¢äº§ç”Ÿçš„å˜é‡"></a>2.3 å…¶ä»–å‡½æ•°é‡Œé¢äº§ç”Ÿçš„å˜é‡</h3><ul>
<li><code>saved_state</code>:è‡ªå·±çš„ä¸€ä»½å¤‡ä»½,å¯ä»¥ç”¨æ¥æ¢å¤ä¹‹å‰çš„çŠ¶æ€</li>
<li><code>array_attr</code>:åˆå§‹ä¸º<code>["points"]</code>åˆ—è¡¨</li>
<li><code>z_index_group</code>:æš‚æ—¶ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</li>
</ul>
<h3 id="2-4-Mobjectçš„ä¸€äº›æŠ½è±¡æ¦‚å¿µ"><a href="#2-4-Mobjectçš„ä¸€äº›æŠ½è±¡æ¦‚å¿µ" class="headerlink" title="2.4 Mobjectçš„ä¸€äº›æŠ½è±¡æ¦‚å¿µ"></a>2.4 Mobjectçš„ä¸€äº›æŠ½è±¡æ¦‚å¿µ</h3><ul>
<li><p>family:å¦‚æœå°†Mobjectçœ‹ä½œçˆ¶èŠ‚ç‚¹,submobjectsåˆ—è¡¨ä¸­çš„Mobjectçœ‹ä½œå­èŠ‚ç‚¹,åˆ™å¯¹æ¯ä¸ªMobjectséƒ½ä¼šäº§ç”Ÿä¸€æ£µæ ‘,è¿™ä¸ªæ ‘é‡Œé¢çš„æ‰€æœ‰èŠ‚ç‚¹æˆä¸ºè¿™ä¸ªMobjectçš„family</p>
<p>familyæ²¡æœ‰çœŸæ­£çš„å®ä½“,ä½†æ˜¯Mobjectå†…æœ‰ä¸€ä¸ªå‡½æ•°å«<code>get_family()</code>å¯ä»¥è¿”å›è¿™ä¸ªæ¦‚å¿µ:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def get_family(self):
        # å¦‚æœå¯¹mapå‡½æ•°ä¸ç†è§£,è¯·è‡ªè¡ŒæŸ¥æ‰¾Python map()å‡½æ•°
        # é€’å½’å¾—åˆ°submobjects,ä»£ç éå¸¸ç®€æ´
        sub_families = list(map(Mobject.get_family, self.submobjects))
        # ä½¿ç”¨chainçš„åŸå› æ˜¯å¯èƒ½æ¯ä¸ªsubmobjectå¯èƒ½æ˜¯ä¸åŒçš„ç±»å‹
        all_mobjects = [self] + list(it.chain(*sub_families))
        # å»é‡
        return remove_list_redundancies(all_mobjects)
</code></pre>
<p>Mobjectçš„å¾ˆå¤šå‡½æ•°ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªæ¦‚å¿µ</p>
</li>
</ul>
<h3 id="2-5-Mobjectçš„å±æ€§"><a href="#2-5-Mobjectçš„å±æ€§" class="headerlink" title="2.5 Mobjectçš„å±æ€§"></a>2.5 Mobjectçš„å±æ€§</h3><ol>
<li><p>è‡ªèº«å¯è¿­ä»£</p>
<p>å‡å¦‚æœ‰Mobjectå˜é‡mob,åˆ™mob[0]æ˜¯selfæœ¬èº«,mob[1]ä»¥åŠæ›´å¤§çš„ç´¢å¼•æ˜¯subMobject</p>
</li>
<li><p>è‡ªèº«æœ‰é•¿åº¦</p>
<p>è‡ªèº«é•¿åº¦ä¸ºsubmobjectåˆ—è¡¨é•¿åº¦+1</p>
</li>
</ol>
<h2 id="3-Mobjectçš„ä¸»è¦æ–¹æ³•"><a href="#3-Mobjectçš„ä¸»è¦æ–¹æ³•" class="headerlink" title="3. Mobjectçš„ä¸»è¦æ–¹æ³•"></a>3. Mobjectçš„ä¸»è¦æ–¹æ³•</h2><h3 id="3-1-å±æ€§çš„å¤„ç†"><a href="#3-1-å±æ€§çš„å¤„ç†" class="headerlink" title="3.1 å±æ€§çš„å¤„ç†"></a>3.1 å±æ€§çš„å¤„ç†</h3><ol>
<li><p><code>reset_points()</code></p>
<p>self.points = np.zeros((0, self.dim))</p>
</li>
<li><p><code>add(*mobjects)</code></p>
<p>å°†è‡ªå·±çš„submobjectsåˆ—è¡¨ä¸­åŠ å…¥mobjects</p>
<p><strong>æ³¨æ„:ä¸èƒ½åŠ å…¥è‡ªå·±</strong></p>
</li>
<li><p><code>add_to_back(*mobjects)</code></p>
<p>å°†è‡ªå·±çš„submobjectsåˆ—è¡¨æœ«å°¾åŠ å…¥mobjects</p>
<p><strong>æ³¨æ„:å¦‚æœåŠ å…¥çš„mobjectsä¸­æœ‰çš„åœ¨è‡ªå·±çš„åˆ—è¡¨ä¸­å·²ç»å­˜åœ¨,åˆ™æŒ‰ç…§åŠ å…¥çš„mobjectsé¡ºåºå­˜æ”¾</strong></p>
</li>
<li><p><code>remove(*mobjects)</code></p>
<p>submobjectsåˆ—è¡¨ç§»é™¤å¯¹åº”çš„mobjects</p>
<p><strong>æ³¨æ„:å¦‚æœmobjectsæŸäº›å…ƒç´ ä¸åœ¨submobjectsåˆ—è¡¨åˆ™ä¸ä¼šæœ‰ä»»ä½•ååº”</strong></p>
</li>
<li></li>
</ol>
<h3 id="3-2-å›¾åƒé™æ€æ˜¾ç¤º"><a href="#3-2-å›¾åƒé™æ€æ˜¾ç¤º" class="headerlink" title="3.2 å›¾åƒé™æ€æ˜¾ç¤º"></a>3.2 å›¾åƒé™æ€æ˜¾ç¤º</h3><ol>
<li><p><code>get_image(camera=None)</code></p>
<p>æ ¹æ®ä¼ å…¥çš„cameraç±»å¯¹åº”çš„å‚æ•°(å¦‚è§’åº¦,è·ç¦»ç­‰ç­‰)è¿”å›ä¸€ä¸ªå›¾åƒ(ä»¥PIL.Imageçš„æ ¼å¼)</p>
<p><strong>æ³¨æ„:åº”è¯¥ç”¨ä¸åˆ°è¿™ä¸ª(å¦‚æœä¸æ˜¯è‡ªå·±å¼€å‘ä»£ç )</strong></p>
</li>
<li><p><code>show(camera=None)</code></p>
<p>æ— åŠ¨ç”»æ ¹æ®ä¼ å…¥çš„cameraç±»å¯¹åº”çš„å‚æ•°(å¦‚è§’åº¦,è·ç¦»ç­‰ç­‰)æ˜¾ç¤ºè‡ªå·±</p>
</li>
<li><p><code>save_image(name=None)</code></p>
<p>å°†è‡ªå·±å›¾åƒä¿å­˜åˆ°å®å®šä¹‰<code>VIDEO_DIR</code>ä½ç½®,åå­—ä¸º<code>name</code>å¦‚æœæœªä¼ å…¥åå­—,åˆ™é»˜è®¤åå­—ä¸ºè‡ªå·±çš„stræ–¹æ³•å¾—åˆ°çš„æ•°å€¼</p>
</li>
<li><p><code>deepcopy()</code></p>
</li>
</ol>
<p>è¿”å›ä¸€ä¸ªè‡ªå·±çš„å‰¯æœ¬,å‰¯æœ¬çš„æ”¹å˜ä¸ä¸ä¼šå½±å“åˆ°è‡ªå·±</p>
<ol>
<li><code>copy()</code></li>
</ol>
<p>æµ…æ‹·è´,ä¸æ·±æ‹·è´å¯¹åº”</p>
<ol>
<li><code>generate_target(use_deepcopy=False)</code></li>
</ol>
<h3 id="3-3-æ›´æ–°-è·Ÿè¸ª-å‡½æ•°"><a href="#3-3-æ›´æ–°-è·Ÿè¸ª-å‡½æ•°" class="headerlink" title="3.3 æ›´æ–°(è·Ÿè¸ª)å‡½æ•°"></a>3.3 æ›´æ–°(è·Ÿè¸ª)å‡½æ•°</h3><ol>
<li><p>$ ^{^*}$<code>update(dt=0, recursive=True)</code></p>
<p><em>åº•å±‚å‡½æ•°,ä¸€èˆ¬åˆ¶ä½œçš„æ—¶å€™ç”¨ä¸åˆ°,ä½†æ˜¯ä»ç„¶åˆ—ä¸¾å‡ºæ¥ä»¥å¤‡ä¸æ—¶ä¹‹éœ€</em></p>
<ul>
<li><p>å‚æ•°å«ä¹‰</p>
<p><code>dt</code>:æ¯å¸§è¿åŠ¨é€Ÿç‡æ˜¯å¤šå°‘</p>
<p><code>recursive</code>:é€’å½’è¿›è¡Œsubmobjectsåˆ—è¡¨çš„Mobjectçš„<code>update</code>å‡½æ•°</p>
</li>
<li><p>æ‰§è¡Œè¿‡ç¨‹</p>
<p>å¦‚æœupdatersçš„æŸä¸€é¡¹<code>update_function</code>åˆ—è¡¨é‡Œé¢æœ‰å‚æ•°<code>dt</code>,åˆ™æ‰§è¡Œupdate_function(dt),å¦åˆ™æ‰§è¡Œupdate_function(),å¹¶æ ¹æ®recursiveåˆ¤æ–­æ˜¯å¦é€’å½’åˆ°submobjectsåˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹</p>
</li>
</ul>
</li>
<li><p><code>get_updaters()</code>:</p>
<p>å¾—åˆ°updaters[]</p>
</li>
<li><p><code>get_family_updaters()</code>:</p>
<p>å¾—åˆ°familyçš„æ‰€æœ‰updaters</p>
</li>
<li><p><code>add_updater(update_function, index=None, call_updater=True)</code></p>
<ul>
<li><p>å‚æ•°å«ä¹‰</p>
<p><code>update_function</code>:æ›´æ–°å‡½æ•°</p>
<p><code>index</code>:æ›´æ–°å‡½æ•°çš„ç´¢å¼•</p>
<p><code>call_updater</code>:æˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªæœ‰å•¥ç”¨(Â¦3[â–“â–“],3b1bçš„ä»£ç ä¹Ÿæ²¡æ‰¾åˆ°ä¸€ä¸ªç”¨è¿‡è¿™ä¸ªå‚æ•°çš„</p>
<p><em>TODO:<code>call_updater</code>ä»€ä¹ˆæ„æ€,æ¬¢è¿ç•™è¨€</em></p>
</li>
<li><p>æ‰§è¡Œè¿‡ç¨‹</p>
<p>å°†è‡ªå·±çš„<code>updaters</code>åˆ—è¡¨åŠ å…¥<code>update_function</code>,ä½ç½®åœ¨<code>index</code>,æ’å…¥æ–¹æ³•åŒpythonåˆ—è¡¨çš„insertæ–¹æ³•,å¹¶å†³å®šæ˜¯å¦ç«‹å³æ‰§è¡Œ</p>
<p>ä¾‹å­:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class UpdateFunctionWithDt(Scene):
     def construct(self):
         sun = Dot(color=RED).scale(3)

         earthOrbit=Circle(color=WHITE).scale(2)
         earth=Dot(color=BLUE).scale(2)
         earth.move_to(earthOrbit.point_from_proportion(0))
         self.earthOffset=0

         moonOrbit= Circle(color=WHITE).move_to(earth)
         moon =Dot(color=YELLOW)
         moon.move_to(moonOrbit.point_from_proportion(0))
         self.moonOffset=0

         def update_earth(mob,dt):
             rate=dt*0.1
             mob.move_to(earthOrbit.point_from_proportion((self.earthOffset + rate)%1))
             self.earthOffset += rate

         def update_moonOrbit(mob):
             mob.move_to(earth)

         def update_moon(mob,dt):
             rate=dt*0.2
             mob.move_to(moonOrbit.point_from_proportion((self.moonOffset + rate)%1))
             self.moonOffset += rate

         earth.add_updater(update_earth)
         moonOrbit.add_updater(update_moonOrbit)
         moon.add_updater(update_moon)
         self.add(earthOrbit,moonOrbit,sun,earth,moon)
         self.wait(5)
         self.wait()
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹:</p>
<p><img src="UpdateFunctionWithDt-1586013786369.gif" alt="UpdateFunctionWithDt"></p>
<p>dtçš„å†³å®šé€Ÿåº¦:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class WhatIsDt(Scene):
    def construct(self):
        sun = Dot(color=RED).scale(3)
        earthOrbit=Circle(color=WHITE).scale(2)

        earths = [Dot(color=i).scale(2) for i in[RED,BLUE]]
        earths = VGroup(*earths)
        earths.move_to(earthOrbit.point_from_proportion(0))
        self.earthOffsets = [0]*2
        texts = VGroup(*[Text("dt*0.%d"%i,size=0.5,font="Lucida Console") for i in [1,2]])

        def update_earth_factory(index):
            def update_earth(mob,dt):
                rate = dt*0.1*(index+1)
                mob.move_to(earthOrbit.point_from_proportion((self.earthOffsets[index] + rate)%1))
                self.earthOffsets[index] += rate
            return update_earth

        def update_text_factory(index):
            def update_text(mob):
                mob.next_to(earths[index],LEFT,SMALL_BUFF)
            return update_text

        for i in [0,1]:
            earths[i].add_updater(update_earth_factory(i))
            texts[i].add_updater(update_text_factory(i))
        self.add(earthOrbit,sun,earths,texts)
        self.wait(5)
</code></pre>
<p><img src="WhatIsDt-1586013786370.gif" alt="WhatIsDt"></p>
</li>
</ul>
</li>
<li><p><code>remove_updater(update_function)</code>:</p>
<p>å¾ˆæ˜æ˜¾ä¸<code>add_updater</code>ç›¸å</p>
</li>
<li><p><code>clear_updaters(recursive=True)</code>:</p>
<p>æ¸…é™¤æ‰€æœ‰çš„<code>update_function</code>,å¦‚æœ<code>recursive</code>ä¸º<code>True</code>åˆ™submobjectsåˆ—è¡¨çš„æ‰€æœ‰<code>update_function</code>æ¸…é™¤</p>
<p><strong>å­˜ç–‘:<code>recursive</code>ä¸º<code>True</code>è²Œä¼¼å¦‚æœsubMobjectsé‡Œé¢è¿˜å¥—æœ‰subMobjects,åˆ™å†…å±‚çš„ä¸èƒ½è¢«æ¸…é™¤?</strong></p>
</li>
<li><p><code>match_updaters(mobject)</code>:</p>
<p>å°†mobjectçš„updaterå…¨éƒ¨å¤åˆ¶ç»™è‡ªå·±(è‡ªå·±çš„åŸæ¥çš„updaterså¤±æ•ˆ)</p>
</li>
<li><p><code>suspend_updating(recursive=True)</code>:</p>
<p>ç•¥</p>
</li>
<li><p><code>resume_updating(recursive=True)</code></p>
<p>ç•¥</p>
</li>
<li><p><code>get_time_based_updaters()</code>:</p>
<p>å¾—åˆ°å‚æ•°å«æœ‰<code>dt</code>çš„updater</p>
</li>
<li><p><code>has_time_based_updater()</code>:</p>
<p>æœ‰å‚æ•°å«æœ‰<code>dt</code>çš„updater</p>
</li>
</ol>
<h3 id="3-4-å˜æ¢å‡½æ•°"><a href="#3-4-å˜æ¢å‡½æ•°" class="headerlink" title="3.4 å˜æ¢å‡½æ•°"></a>3.4 å˜æ¢å‡½æ•°</h3><ol>
<li><p><code>apply_to_family(func)</code>:</p>
<p>å¯¹æ¯ä¸ªå®¶åº­æˆå‘˜å®è¡Œfuncå‡½æ•°</p>
</li>
<li><p><code>shift(*vectors)</code>:</p>
<p>å¹³ç§»,vectorçš„ç»´æ•°ä¸ºdim,å¦‚æœè¾“å…¥å¤šä¸ªvectoråˆ™å¹³ç§»çš„ç»ˆç‚¹ä¸ºè¿™å‡ ä¸ªvectorçš„å‘é‡å’Œ</p>
<p>å¦‚<code>.shift(UP*2,LEFT)</code>å’Œ<code>shift(UP*2+LEFT)</code>æ˜¯ä¸€ä¸ªæ•ˆæœ</p>
</li>
<li><p><code>scale(scale_factor, **kwargs)</code>:</p>
<ul>
<li><p>å‚æ•°:</p>
<p><code>scale_factor</code>:ç¼©æ”¾å› å­</p>
<p><code>**kwargs</code>:</p>
<p>é»˜è®¤è¡Œä¸ºæ˜¯å›´ç»•mobjectçš„ä¸­å¿ƒè¿›è¡Œç¼©æ”¾ã€‚å‚æ•°about_edgeå¯ä»¥æ˜¯å‘é‡ï¼ŒæŒ‡è¦å›´ç»•mobjectçš„å“ªä¸€ä¾§è¿›è¡Œç¼©æ”¾,å¦åˆ™ï¼Œå¦‚æœç»™about_pointä¸€ä¸ªå€¼ï¼Œåˆ™ç›¸å¯¹äºè¯¥ç‚¹è¿›è¡Œç¼©æ”¾ã€‚</p>
<ul>
<li><p><code>about_edge</code>:ç›¸å¯¹è¾¹</p>
<pre class=" language-lang-python"><code class="language-lang-python">class AddUpdater(Scene):
    def construct(self):
        circles = [Circle(arc_center = LEFT*i*2) for i in range(3)]
        vg = VGroup(*circles)
        line = Line(np.array([-10,vg.get_top()[1],0]),np.array([10,vg.get_top()[1],0]))
        text = TextMobject("about\_edge")
        text.next_to(line,UP,buff=SMALL_BUFF)
        self.add(line,vg,text)
        self.play(vg.scale,2,{"about_edge":UP})
        self.wait()
</code></pre>
<p><img src="about_edge-1586013786370.gif" alt="about_edge"></p>
<p>å¦‚æœ<code>about_edge</code>ä¸ºæ–¹å‘çš„çº¿æ€§ç»„åˆ,åˆ™ä¼šæŒ‰ç…§å¯¹åº”çš„è¾¹è¿›è¡Œé˜»éš”,ä»¥UP+RIGHTä¸ºä¾‹å­:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class AddUpdater(Scene):
    def construct(self):
        circles = [Circle(arc_center = LEFT*i*2) for i in range(3)]
        vg = VGroup(*circles)
        line = Line(np.array([-10,vg.get_top()[1],0]),np.array([10,vg.get_top()[1],0]))
        line1 = Line(np.array([vg.get_right()[0],-10,0]),np.array([vg.get_right()[0],10,0]))
        text = TextMobject("about\_edge1")
        text.next_to(line,UP,buff=SMALL_BUFF)
        text1 = TextMobject("about\_edge2")
        text1.next_to(line1,RIGHT,buff=SMALL_BUFF)
        self.add(line,line1,vg,text,text1)
        self.play(vg.scale,2,{"about_edge":np.array(UP+RIGHT)})
        self.wait()
</code></pre>
<p><img src="UP_RIGHT-1586013786370.gif" alt="UP_RIGHT"></p>
</li>
<li><p><code>about_point</code>:ç›¸å¯¹ç‚¹</p>
<pre class=" language-lang-python"><code class="language-lang-python">class AddUpdater(Scene):
    def construct(self):
        circles = [Circle(arc_center = LEFT*i*2) for i in range(3)]
        vg = VGroup(*circles)
        dot = Dot(point=circles[0].get_center())
        text = TextMobject("about\_point")
        text.next_to(dot,DOWN,buff=SMALL_BUFF)
        self.add(dot,vg,text)
        self.play(vg.scale,2,{"about_point":dot.get_center()})
        self.wait()
</code></pre>
<p><img src="about_point-1586013786370.gif" alt="about_point"></p>
</li>
</ul>
</li>
<li><p>æ‰§è¡Œè¿‡ç¨‹</p>
<p>æ”¾å¤§æˆ–ç¼©å°æŒ‡å®šçš„å› å­</p>
</li>
</ul>
</li>
<li><p><code>rotate(angle, axis=OUT, **kwargs)</code>:</p>
<p>å­¦è¿‡åˆä¸­ç‰©ç†å°±åº”è¯¥çŸ¥é“å³æ‰‹å®šåˆ™,åœ¨æ•°å­¦,ç‰©ç†ä¸­,æ—‹è½¬çš„æ–¹å‘å°±æ˜¯å³æ‰‹å®šåˆ™ä¸­çš„(å¤§æ‹‡æŒ‡)æ–¹å‘</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myRotateScene(ThreeDScene):
    def construct(self):
     dot = Dot()
        text = TextMobject("about\_point",color=RED)
        text.next_to(dot,DOWN,buff=SMALL_BUFF)
        axes = ThreeDAxes()
        self.add(dot,text,axes)
        self.set_camera_orientation(theta=-PI/4,phi=PI/4)           
        self.play(text.rotate,PI/2,{"axis":OUT})
        self.wait()
</code></pre>
<p><img src="Rotate-1586013786370.gif" alt="Rotate"></p>
<p>ä¸Šå›¾textçš„èµ·å§‹å¹³é¢æ˜¯X-Yå¹³é¢,UPä¸ºyè½´æ­£æ–¹å‘,å¤§å®¶å¯ä»¥è‡ªè¡Œå°è¯•æ›´æ”¹axisæ–¹å‘(æ³¨æ„self.playå‡½æ•°ä¸ä»£è¡¨è§’åº¦ä»0åˆ°PI/2çš„æ¸è¿‘å˜åŒ–æ‰€ä»¥åªè¦çœ‹èµ·å§‹å¸§å’Œç»ˆæ­¢å¸§)</p>
<p><code>**kwargs</code>è¿˜å¯ä»¥æ¥å—ç›¸å¯¹ç‚¹<code>about_point</code>:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myRotateScene(ThreeDScene):
    def construct(self):
        dot = Dot()
        text = TextMobject("about\_point",color=RED)
        text.next_to(dot,DOWN,buff=SMALL_BUFF)
        axes = ThreeDAxes()
        self.add(dot,text,axes)
        self.set_camera_orientation(theta=-PI/4,phi=PI/4)           
        self.play(text.rotate,PI,{"axis":OUT,"about_point":dot.get_center()})
        self.wait()
</code></pre>
<p>è¿™ä¸ªç›¸å¯¹ç‚¹æ—‹è½¬å…¶å®æ˜¯çº¿æ€§ä»£æ•°é‡Œé¢çš„æ—‹è½¬çŸ©é˜µé€ æˆçš„ç»“æœ,å¦‚æœè§’åº¦æ˜¯180åº¦,æ•ˆæœæ˜¯å…³äºè¿™ä¸ªç‚¹å¯¹ç§°</p>
<p><img src="rotateAboutPoint-1586013786370.gif" alt="rotateAboutPoint"></p>
</li>
<li><p><code>flip(axis=UP, **kwargs)</code>:</p>
<p>ç¿»è½¬,å…¶å®å°±æ˜¯<code>rotate</code>180åº¦,å…¶ä»–å‚æ•°åŒ<code>rotate</code></p>
</li>
<li><p><code>stretch(factor, dim, **kwargs)</code>:</p>
<p>åœ¨å¯¹åº”çš„ç»´åº¦ä¼¸ç¼©<code>factor</code>å€</p>
<p>è¿™ä¸ªå‡½æ•°ä¸<code>scale</code>çš„ç”¨æ³•ä¸€æ ·,ä¹Ÿä¼šæœ‰<code>about_point</code>å’Œ<code>about_edge</code></p>
<pre class=" language-lang-python"><code class="language-lang-python">class Stretch(Scene):
    def construct(self):
        text = Text("stretch")
        self.play(text.stretch,2,1)
        self.wait(2)
</code></pre>
</li>
<li><p><code>apply_function(function, **kwargs)</code>:</p>
<p>å¯¹æ‰€æœ‰familyæˆå‘˜çš„ç‚¹åæ ‡éƒ½è¿›è¡Œ<code>function</code>å¤„ç†,æ‰€ä»¥functionå¿…é¡»æ˜¯ä¸€ä¸ªå¤„ç†ä¸€ä¸ªç‚¹çš„å‡½æ•°</p>
<p>ä¾‹å¦‚å¯¹äºäºŒç»´å›¾å½¢:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myScene(Scene):
    def func(self,point):
        return point*2

    def construct(self):
        circle = Circle()
        circle2 = Circle()
        self.add(circle,circle2)  
        circle.apply_function(self.func)
        self.play(Write(circle))
        self.wait()
</code></pre>
<p>é»˜è®¤çš„<code>about_point</code>ä¸º<code>ORIGIN</code>,å¯ä»¥çœ‹å‡ºæ¥å®ç°äº†<code>apply_function</code>çš„ä¼šå¤§ä¸€å€</p>
<p><img src="applyFunc-1586013786370.gif" alt="applyFunc"></p>
</li>
<li><p><code>apply_function_to_position(function)</code>:</p>
<p>ç§»åŠ¨å›¾åƒä¸­å¿ƒåˆ°function(self.get_center())</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myWag(Scene):
    def x2(self,x):
        return x*2

    def construct(self):
        circle = Circle()
        circle.move_to(RIGHT)
        self.add(circle)
        self.play(circle.apply_function_to_position,{"function":self.x2})
        self.wait()
</code></pre>
</li>
<li><p><code>apply_function_to_submobject_positions(function)</code>:</p>
<p>ç•¥</p>
</li>
<li><p><code>apply_matrix(matrix, **kwargs)</code>:</p>
<p><code>matrix</code>ä¸ºå˜æ¢çŸ©é˜µ,è¿™ä¸ªå°±æ˜¯å¯¹Mobjectç‚¹å¯¹åº”çš„å‘é‡ä¹˜ä»¥<code>matrix</code>å˜æ¢çŸ©é˜µ,å­¦è¿‡çº¿æ€§ä»£æ•°æˆ–è€…è®¡ç®—æœºè§†è§‰æˆ–è€…çœ‹è¿‡3b1bçš„çº¿æ€§ä»£æ•°çš„äººåº”è¯¥ä¸é™Œç”Ÿ</p>
</li>
<li><p><code>apply_complex_function(function, **kwargs)</code>:</p>
<p>åŒç†äº<code>apply_function(function, **kwargs)</code>,åªä¸è¿‡è¿™é‡Œçš„<code>function</code>æ¥å—ä¸€ä¸ªå¹³é¢å¤æ•°,å³<code>complex(x, y)</code></p>
</li>
<li><p><code>wag(direction=RIGHT, axis=DOWN, wag_factor=1.0)</code>:</p>
<p>åˆ†ææºç å¾—åˆ°å¦‚ä¸‹å¤„ç†æ­¥éª¤:</p>
<ol>
<li><p>å¯¹æ‰€æœ‰å«æœ‰åæ ‡å±æ€§å®¶åº­æˆå‘˜è¿›è¡Œæ­¥éª¤2åˆ°5çš„æ“ä½œ</p>
</li>
<li><p>å‘axiså¯¹åº”ç»´åº¦æŠ•å½±,å¦‚axis=UP/DOWNåˆ™å‘yè½´æŠ•å½±,å³ä¿ç•™yå€¼ä¸å˜,å¾—åˆ°å¯¹åº”ç»´åº¦çš„å‘é‡åˆ—è¡¨alphas</p>
</li>
<li><p>å°†å‘é‡åˆ—è¡¨alphaså½’ä¸€åŒ–åˆ°[0,1],å½’ä¸€æ–¹æ³•å¦‚ä¸‹:</p>
<script type="math/tex; mode=display">
\vec{alphas'}_i = \frac{\vec{alphas}_i-min(\vec{alphas})}{max(\vec{alphas})-min(\vec{alphas})}</script></li>
<li><p>æ‰§è¡Œå¹‚è¿ç®—</p>
<script type="math/tex; mode=display">
\vec{alphas}_i^{"}=(\vec{alphas'})^{wag\_factor}</script></li>
<li><p>æ¯ä¸ªç‚¹åœ¨directionæ–¹å‘å¹³ç§»$\vec{alphas}_i^{â€œ}$</p>
</li>
</ol>
<p>ä¾‹å­:</p>
<p>factor=1</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myWag(Scene):
    def construct(self):
        squares = [Square() for i in range(3)]
        for i in range(-1,2):
            squares[1+i].move_to(RIGHT*3*i)
        self.add(*squares) 
        self.play(squares[0].wag,{"direction":UP,"axis":RIGHT,"wag_factor":0.1},
                  squares[1].wag,{"direction":UP,"axis":RIGHT,"wag_factor":1},
                  squares[2].wag,{"direction":UP,"axis":RIGHT,"wag_factor":2})
        self.wait()
</code></pre>
<p><img src="myWag1-1585643241928-1586013786370.gif" alt="myWag1"></p>
<p>ä»å·¦åˆ°å³factorä¾æ¬¡ä¸º0.1,1,2,éƒ½æ˜¯å‘ä¸Šwagçš„,å…·ä½“æ€ä¹ˆç†è§£å¤§å®¶å¯ä»¥è‡ªå·±ç†è§£,æ¯”è¾ƒéš¾ä»¥è¡¨è¿°</p>
</li>
<li><p><code>reverse_points()</code>:</p>
<p>è°ƒæ¢ç‚¹çš„é¡ºåº:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class myWag(Scene):
    def construct(self):
        circle = Circle().scale(2)
        texts = [TextMobject("p"+str(i)).scale(0.5) for i in range(len(circle.points))]
        def update_factory(index):
            def update_func(mob):
                mob.move_to(circle.points[index])
            return update_func
        for i in range(len(texts)):
            texts[i].add_updater(update_factory(i))

        self.add(circle,*texts)
        self.wait(1)
        self.play(circle.reverse_points)
        self.wait(2)
</code></pre>
<p><img src="ReversePoint-1586013786371.gif" alt="ReversePoint"></p>
<p>æ³¨æ„playå‡½æ•°ä¸èƒ½å¾ˆå¥½è¡¨ç°reverseçš„ç°è±¡,å¦‚æœçœ‹é¡ºåº,ä¸Šå›¾é¡ºåºä»é€†æ—¶é’ˆå˜æˆäº†é¡ºæ—¶é’ˆ</p>
</li>
<li><p><code>repeat(count)</code>:</p>
<p>ä¼šå‡ºç°é‡å½±çš„ç‰¹æ•ˆ</p>
<p><img src="Repeat-1586013786371.gif" alt="Repeat"></p>
</li>
<li><p><code>apply_points_function_about_point(func, about_point=None, about_edge=None)</code>:</p>
<p>ç›¸å¯¹ç‚¹æˆ–è¾¹å¯¹è‡ªå·±çš„æ‰€æœ‰ç‚¹å·¦è¾¹åº”ç”¨å‡½æ•°</p>
</li>
</ol>
<h3 id="3-5-ä½ç½®å‡½æ•°"><a href="#3-5-ä½ç½®å‡½æ•°" class="headerlink" title="3.5 ä½ç½®å‡½æ•°"></a>3.5 ä½ç½®å‡½æ•°</h3><ol>
<li><p><code>center()</code>:</p>
<p>æ­¤å¤„centerä¸ºåŠ¨è¯:åˆ°ä¸­å¿ƒ</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Repeat(Scene):
    def construct(self):
        square = Square()
        dot=Dot()
        self.add(square,dot)
        self.play(square.shift,RIGHT)
        self.play(square.shift,RIGHT)
        self.play(square.shift,UP)
        self.play(square.center)
        self.wait()
</code></pre>
<p><img src="Center-1586013786371.gif" alt="Center"></p>
</li>
<li><p><code>align_on_border(direction, buff=DEFAULT_MOBJECT_TO_EDGE_BUFFER)</code>:</p>
<p>åœ¨è¾¹ç•Œå¯¹é½,buffä¸ºå’Œè¾¹ç•Œçš„è·ç¦»</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Align(Scene):
    def construct(self):
        square = Square()
        self.play(square.align_on_border,LEFT+UP)
        self.wait(2)
</code></pre>
<p><img src="Align-1586013786371.gif" alt="Align"></p>
</li>
<li><p><code>to_corner(corner=LEFT + DOWN, buff=DEFAULT_MOBJECT_TO_EDGE_BUFFER)</code>:</p>
<p>åˆ°æŸä¸€ä¸ªè§’</p>
<p><img src="to-1586013786371.png" alt="to_corner author:Elteoremadebeethoven"></p>
</li>
<li><p><code>to_edge(edge=LEFT, buff=DEFAULT_MOBJECT_TO_EDGE_BUFFER)</code>:</p>
<p>åˆ°æŸä¸€è¾¹</p>
</li>
<li><p><code>next_to(mobject_or_point,direction=RIGHT, buff=DEFAULT_MOBJECT_TO_MOBJECT_BUFFER,aligned_edge=ORIGIN,submobject_to_align=None,index_of_submobject_to_align=None, coor_mask=np.array([1, 1, 1]),)</code>:</p>
<p>å‚æ•°åˆ†æ:</p>
<ul>
<li><code>mobject_or_point</code>:Mobjectæˆ–è€…ä¸€ä¸ªç‚¹åæ ‡</li>
<li><code>direction</code>:æ–¹å‘</li>
<li><code>buff</code>:ç›¸èšçš„è·ç¦»</li>
<li><code>aligned_edge</code>:å¯¹é½çš„è¾¹</li>
<li><code>submobject_to_align</code>:å¯¹é½çš„å­Mobject,æ­¤å‚æ•°è¦æ±‚Mobjectæ˜¯ä¸€ä¸ªåˆ—è¡¨æ€§è´¨çš„Mobject</li>
<li><code>index_of_submobject_to_align</code>:å¦‚æœ<code>submobject_to_align</code>ä¸ä¸ºç©º,åˆ™éœ€è¦æŒ‡å®šå¯¹åº”çš„æ˜¯å“ªä¸€ä¸ªMobject</li>
</ul>
</li>
</ol>
<ul>
<li><code>coor_mask</code>:æ©è†œ,æœ¯è¯­æ¥è‡ªæ•°å­—ä¿¡å·å¤„ç†/æ•°å­—å›¾åƒå¤„ç†,ä¸æ‡‚å¯ä»¥è‡ªè¡Œæœç´¢,åœ¨è¿™é‡Œå³ä¸º1çš„åœ°æ–¹æ‰è¿›è¡Œnext_to,å¦‚æœä¸º0,åˆ™å¯¹åº”çš„åæ ‡ä¸è¿›è¡Œnext_toå˜æ¢</li>
</ul>
<p>æ‰§è¡Œè¿‡ç¨‹:</p>
<p>   å¦‚æœ<code>mobject_or_point</code>æ˜¯ç‚¹åˆ™next_toçš„å¯¹è±¡å°±æ˜¯ç‚¹,å¦åˆ™ä¸ºç”±å‚æ•°å†³å®šçš„Mobjectçš„ä¸­å¿ƒ</p>
<ol>
<li><p><code>shift_onto_screen(**kwargs)</code>:</p>
</li>
<li><p><code>is_off_screen()</code>:</p>
<p>æ˜¯å¦è¶…å‡ºå±å¹•èŒƒå›´</p>
</li>
<li><p><code>rescale_to_fit(length, dim, stretch=False, **kwargs)</code>:</p>
<p>å°†æŸä¸€ä¸ªæ–¹å‘çš„é•¿åº¦æ‹‰ä¼¸è‡³length,å¯ä»¥æŒ‰ç…§scaleæ–¹å¼æ‹‰é•¿æˆ–è€…stretchæ–¹å¼æ‹‰é•¿</p>
<pre class=" language-lang-python"><code class="language-lang-python">class RescaleToFit(Scene):
    def construct(self):
        ellipse = Ellipse()
        length = ellipse.length_over_dim(0)
        self.play(ellipse.rescale_to_fit,length,1,{"stretch":True})
        self.wait(2)
</code></pre>
<p><img src="RescaleToFit-1586013786371.gif" alt="RescaleToFit"></p>
<ul>
<li><code>stretch_to_fit_width(width, **kwargs)</code></li>
<li><code>stretch_to_fit_height(height, **kwargs)</code></li>
<li><code>stretch_to_fit_depth(depth, **kwargs)</code></li>
<li><code>set_width(width, stretch=False, **kwargs)</code></li>
<li><code>set_height(height, stretch=False, **kwargs)</code></li>
<li><code>set_depth(depth, stretch=False, **kwargs)</code></li>
</ul>
</li>
<li><p><code>set_coord(value, dim, direction=ORIGIN)</code>:</p>
<p>å°†dimå¯¹åº”çš„åæ ‡è®¾ç½®ä¸ºvalue,directionè¡¨ç¤ºè®¾ç½®ä»€ä¹ˆçš„åæ ‡,å¦‚directionä¸ºRIGHTåˆ™è¡¨ç¤ºè®¾ç½®å›¾åƒçš„æœ€å³ç«¯ç‚¹çš„dimç»´åº¦çš„åæ ‡ä¸ºvalue</p>
<ul>
<li><code>set_x(x, direction=ORIGIN)</code></li>
<li><code>set_y(y, direction=ORIGIN)</code></li>
<li><code>set_z(z, direction=ORIGIN)</code></li>
</ul>
</li>
<li><p><code>space_out_submobjects(factor=1.5, **kwargs)</code>:</p>
<p>è‡ªå·±scale factorå€,å­mobjectç¼©å°1/factorå€</p>
</li>
<li><p><code>move_to(point_or_mobject, aligned_edge=ORIGIN,coor_mask=np.array([1, 1, 1]))</code>:</p>
<p>ä¸next_toç›¸è¿‘,ä¸è¿‡åŒºåˆ«æ˜¯:next_toè¡¨ç¤ºçš„æ˜¯è¾¹ç•Œçš„è·ç¦»ï¼Œè€Œä¸æ˜¯ä¸­å¿ƒè·ç¦»</p>
<p><img src="move_next_to-1586013786372.png" alt="move_next_to author:Elteoremadebeethoven"></p>
</li>
<li><p><code>replace(mobject, dim_to_match=0, stretch=False)</code>:</p>
<p>å°†ä½ç½®ç§»åŠ¨åˆ°mobject,å¹¶ä¸”å¤§å°åšä¸€äº›æ”¹å˜,å…·ä½“çœ‹æºç </p>
</li>
<li><p><code>surround(mobject,dim_to_match=0,stretch=False,buff=MED_SMALL_BUFF)</code>:</p>
<p>åŒ…å›´(é»˜è®¤æƒ…å†µä¸‹,ç­‰è¾¹é•¿çš„æ­£å¤šè¾¹å½¢è§„åˆ™ç‰©ä½“æ•ˆæœå¾ˆå¥½,å¯¹äºä¸ç­‰å˜é•¿çš„å½¢çŠ¶æœ€å¥½å¯ç”¨stretch)</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Surround(Scene):
    def construct(self):
        circle = Circle()
        square = Square().shift(UP*2)
        self.add(circle,square)
        self.play(circle.surround,square)
        self.wait(2)
</code></pre>
<p><img src="Surround-1586013786372.gif" alt="Surround"></p>
</li>
<li><p><code>put_start_and_end_on(start, end)</code>:</p>
<p>å°†èµ·ç‚¹ç»ˆç‚¹é‡ç½®ä¸ºstart,end</p>
<pre class=" language-lang-python"><code class="language-lang-python">class PutStartAndEndOn(Scene):
    def construct(self):
        arc = Arc(PI/3)
        texts = [TexMobject(i,color=RED) for i in ["startPoint","endPoint"]]
        texts[0].add_updater(lambda x: x.move_to(arc.get_start()))
        texts[1].add_updater(lambda x: x.move_to(arc.get_end()))
        self.add(arc, *texts)
        self.play(arc.put_start_and_end_on,ORIGIN,(UP+RIGHT)*2)
        self.wait()
</code></pre>
<p><img src="PutStartAndEndOn-1586013786372.gif" alt="PutStartAndEndOn"></p>
</li>
<li><p><code>add_background_rectangle(color=BLACK, opacity=0.75, **kwargs)</code>:</p>
<p>å¢åŠ èƒŒæ™¯æ–¹å—,æ­¤æ–¹å—æ˜¯å¯ä»¥éšç€Mobjectå˜åŒ–è€Œå˜åŒ–çš„</p>
<pre class=" language-lang-python"><code class="language-lang-python">class BackgroundRectangle(Scene):
    def construct(self):
        circle = Circle(color=RED)
        circle.add_background_rectangle(color=BLUE,opacity=0.4)
        self.add(circle)
        self.play(circle.stretch,2,1)
        self.wait()
</code></pre>
<p><img src="BackgroundRectangle-1586013786372.gif" alt="BackgroundRectangle"></p>
</li>
<li><p><code>add_background_rectangle_to_submobjects(**kwargs)</code>:</p>
<p>ç•¥</p>
</li>
<li><p><code>add_background_rectangle_to_family_members_with_points(**kwargs)</code>:</p>
<p>ç•¥</p>
</li>
</ol>
<h3 id="3-6-é¢œè‰²å‡½æ•°"><a href="#3-6-é¢œè‰²å‡½æ•°" class="headerlink" title="3.6 é¢œè‰²å‡½æ•°"></a>3.6 é¢œè‰²å‡½æ•°</h3><ol>
<li><p><code>set_color(color=YELLOW_C, family=True)</code>:</p>
<p>è®¾ç½®é¢œè‰²,familyæŒ‡å®¶åº­æˆå‘˜æ˜¯å¦ä¹Ÿè·Ÿç€å˜è‰²</p>
</li>
<li><p><code>set_color_by_gradient(*colors)</code>:</p>
<p>æ¸å˜è‰²,å¯ä»¥æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªé¢œè‰²çš„åˆ—è¡¨</p>
<pre class=" language-lang-python"><code class="language-lang-python">class main(Scene):
    def construct(self):
        qed = TexMobject('This is a Text').scale(1.25)
        qed.set_color_by_gradient(RED,YELLOW,GREEN,BLUE)
        self.play(Write(qed))
        self.wait(3)
</code></pre>
<p><img src="image-20200403201147347-1586013786372.png" alt="gradientColor"></p>
</li>
<li><p><code>set_colors_by_radial_gradient(center=None, radius=1, inner_color=WHITE, outer_color=BLACK)</code>:</p>
<p>è¾å°„çŠ¶æ¸å˜é¢œè‰²,åŠå¾„ä¸ºradius</p>
</li>
<li><p><code>set_submobject_colors_by_gradient(*colors)</code>:</p>
<p>ç»™å­Mobjectè®¾ç½®æ¸å˜é¢œè‰²</p>
</li>
<li><p><code>set_submobject_colors_by_radial_gradient(center=None, radius=1, inner_color=WHITE, outer_color=BLACK)</code>:</p>
<p>åŒç†,ç•¥</p>
</li>
<li><p><code>fade_to(color, alpha, family=True)</code>:</p>
<p>è¤ªè‰²ä¸ºæŸä¸€ä¸ªé¢œè‰²,alphaä¸ºæ’å€¼ç³»æ•°,alphaåœ¨[0,1]ä¹‹é—´,è¶Šæ¥è¿‘1,è¤ªè‰²è¶Šå‰å®³</p>
<pre class=" language-lang-python"><code class="language-lang-python">class FadeTo(Scene):
    def construct(self):
        text = TexMobject("This is a Text")
        self.add(text)
        self.play(text.set_colors_by_radial_gradient,{"inner_color":WHITE,"outer_color":RED})
        self.play(text.fade_to,BLUE,1)
        self.wait()
</code></pre>
<p><img src="FadeTo-1586013786373.gif" alt="FadeTo"></p>
</li>
<li><p><code>get_color()</code>:</p>
<p>è¿”å›é¢œè‰²</p>
</li>
<li><p><code>fade(darkness=0.5, family=True)</code>:</p>
<p>è¤ªè‰²ä¸ºé»‘è‰²,darknessä¸ºç°åº¦</p>
</li>
</ol>
<h3 id="3-7-æ¢å¤å‡½æ•°"><a href="#3-7-æ¢å¤å‡½æ•°" class="headerlink" title="3.7 æ¢å¤å‡½æ•°"></a>3.7 æ¢å¤å‡½æ•°</h3><ol>
<li><p><code>save_state(use_deepcopy=False)</code>:</p>
<p>ä¿å­˜çŠ¶æ€,å¹¶ç¡®å®šæ˜¯å¦ä½¿ç”¨æ·±æ‹·è´</p>
</li>
<li><p><code>restore()</code>:</p>
<p>æ¢å¤ä¹‹å‰çŠ¶æ€</p>
</li>
</ol>
<h3 id="3-8-å…¶ä»–çš„getteræ–¹æ³•"><a href="#3-8-å…¶ä»–çš„getteræ–¹æ³•" class="headerlink" title="3.8 å…¶ä»–çš„getteræ–¹æ³•"></a>3.8 å…¶ä»–çš„getteræ–¹æ³•</h3><ol>
<li><p><code>reduce_across_dimension(points_func, reduce_func, dim)</code>:</p>
</li>
<li><p><code>nonempty_submobjects()</code>:</p>
<p>è¿”å›Submobjectçš„subSubMobjectä¸ä¸ºç©ºçš„Submobject</p>
</li>
<li><p><code>get_merged_array(array_attr)</code>:</p>
<p>å¾—åˆ°Mobjectä»¥åŠå…¶å­Mobjectçš„array_attrå±æ€§çš„åˆ—è¡¨</p>
</li>
<li><p><code>get_all_points()</code>:</p>
<p>å¾—åˆ°Mobjectä¸å…¶å­Mobjectå±æ€§æ‰€æœ‰çš„ç‚¹</p>
</li>
<li><p><code>get_num_points()</code>:</p>
<p>å¾—åˆ°è‡ªå·±çš„ç‚¹çš„æ•°é‡(ä¸åŒ…å«å­Mobject)</p>
</li>
<li><p><code>get_extremum_along_dim(points=None, dim=0, key=0)</code>:</p>
<p>æ²¿ç€dimæ–¹å‘(dimä¸º0è¡¨ç¤ºxæ–¹å‘,1è¡¨ç¤ºyæ–¹å‘â€¦.),ç»™å‡ºåæ ‡çš„æå€¼,key&lt;0è¡¨ç¤ºå¾—åˆ°æœ€å°å€¼,key&gt;0è¡¨ç¤ºå¾—åˆ°æœ€å¤§å€¼,key=0è¡¨ç¤ºå¾—åˆ°ä¸­å€¼</p>
</li>
<li><p><code>get_critical_point(direction)</code>:</p>
<p>ç”»ä¸€ä¸ªæ¡†ï¼Œæ¡†ä½mobjectã€‚ è¿™æ ·çš„ç›’å­æœ‰9ä¸ªâ€œå…³é”®ç‚¹â€ï¼š4ä¸ªè§’ï¼Œ4ä¸ªè¾¹ç¼˜ä¸­å¿ƒï¼Œä¸­å¿ƒã€‚ è¿™å°†è¿”å›å…¶ä¸­ä¹‹ä¸€ã€‚</p>
<p>directionä»€ä¹ˆæ–¹å‘å°±è¿”å›ä»€ä¹ˆ</p>
<p>å¯¹å…¶è¿›è¡Œå°è£…æœ‰å¦‚ä¸‹çš„å‡½æ•°:</p>
<ul>
<li><code>get_edge_center</code><ul>
<li><code>get_top</code></li>
<li><code>get_bottom</code></li>
<li><code>get_right</code></li>
<li><code>get_left</code></li>
<li><code>get_zenith</code></li>
<li><code>get_nadir</code></li>
</ul>
</li>
<li><code>get_corner</code></li>
<li><code>get_center</code></li>
</ul>
</li>
<li><p><code>get_boundary_point(direction)</code>:</p>
<p>å¾—åˆ°æŸä¸ªæ–¹å‘çš„æœ€è¿œçš„ç‚¹</p>
<pre class=" language-lang-python"><code class="language-lang-python">class FadeTo(Scene):
    def construct(self):
        square = Square()
        circle = Circle().shift(2 * RIGHT + 1 * DOWN)
        shapeGroup = VGroup(square,circle)
        points = []
        nums = 10
        for i in range(nums):
            points.append(shapeGroup.get_boundary_point(np.array((np.cos(2*PI*i/nums),np.sin(2*PI*i/nums),0))))
        polygon = Polygon(*points,color=BLUE)
        dots = [Dot(point=i) for i in points]
        self.add(shapeGroup,*dots)
        self.play(Write(polygon))
        self.wait(2)
</code></pre>
<p><img src="image-20200404172800256-1586013786373.png" alt="boundary_points"></p>
</li>
<li><p><code>length_over_dim(dim)</code>:</p>
<p>dimæ–¹å‘çš„é•¿åº¦</p>
<p>æ­¤æ–¹æ³•å°è£…çš„æ–¹æ³•:</p>
<ul>
<li><code>get_width</code></li>
<li><code>get_height</code></li>
<li><code>get_depth</code></li>
</ul>
</li>
<li><p><code>get_coord(dim, direction=ORIGIN)</code>:</p>
<p>åœ¨dimæ–¹å‘å¾—åˆ°directionå¯¹åº”çš„æå€¼,ç›´æ¥ä½¿ç”¨æ„ä¹‰ä¸å¤§</p>
<ul>
<li><code>get_x(direction=ORIGIN)</code></li>
<li><code>get_y(direction=ORIGIN)</code></li>
<li><code>get_z(direction=ORIGIN)</code></li>
</ul>
</li>
<li><p><code>get_start</code>,<code>get_end</code>,<code>get_start_and_end</code>:</p>
<p>å¾—åˆ°ç‚¹çš„èµ·ç‚¹ç»ˆç‚¹,èµ·ç‚¹å’Œç»ˆç‚¹</p>
</li>
<li><p><code>has_points</code>,<code>has_no_points</code>:</p>
<p>æ˜¯å¦æœ‰ç‚¹è¿™å±æ€§</p>
</li>
</ol>
<h3 id="3-9-åŒ¹é…å‡½æ•°"><a href="#3-9-åŒ¹é…å‡½æ•°" class="headerlink" title="3.9 åŒ¹é…å‡½æ•°"></a>3.9 åŒ¹é…å‡½æ•°</h3><ol>
<li><p><code>match_color(mobject)</code>:</p>
<p>åŒ¹é…mobjectçš„é¢œè‰²</p>
</li>
<li><p><code>match_dim_size(mobject, dim, **kwargs)</code>:</p>
<p>åŒ¹é…dimæ–¹å‘çš„é•¿åº¦,<code>**kwargs</code>å’Œ<code>rescale_to_fit()</code>ä½¿ç”¨æ–¹æ³•ç›¸åŒ</p>
<ul>
<li><code>match_width</code></li>
<li><code>match_height</code></li>
<li><code>match_depth</code></li>
</ul>
</li>
<li><p><code>match_coord(mobject, dim, direction=ORIGIN)</code>:</p>
<p>æŒ‰ç…§get_coord()å¾—åˆ°å¯¹åº”çš„Mobjectåæ ‡,ç„¶åè®¾ç½®</p>
<ul>
<li><code>match_x</code></li>
<li><code>match_y</code></li>
<li><code>match_z</code></li>
</ul>
</li>
</ol>
<h3 id="3-10-æ’åˆ—å‡½æ•°"><a href="#3-10-æ’åˆ—å‡½æ•°" class="headerlink" title="3.10 æ’åˆ—å‡½æ•°"></a>3.10 æ’åˆ—å‡½æ•°</h3><ol>
<li><p><code>arrange(direction=RIGHT, center=True, **kwargs)</code>:</p>
<p>submobjectåˆ—è¡¨çš„å…¨éƒ¨å˜é‡è¿›è¡Œæ’é˜Ÿ,æŒ‰ç…§directionçš„æ–¹å¼æ’é˜Ÿ,centerå†³å®šäº†æ˜¯å¦æ’å®Œé˜Ÿè·‘åˆ°ä¸­å¿ƒ</p>
<p><code>**kwargs</code>å‚è€ƒnext_to</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Arrange(Scene):
    def construct(self):
        square = Square()
        square.add(Dot(point=np.array([-1,-2,0])))
        square.add(Square().move_to(np.array([3,0,0])))
        square.add(Circle().move_to(np.array([5, 2, 0])))
        self.add(square)
        self.play(square.arrange,{"center":False})
        self.wait(2)
        self.play(square.arrange,{"direction":UP,"center":False})
        self.wait(2)
</code></pre>
<p><img src="Arrange-1586013786373.gif" alt="Arrange"></p>
</li>
<li><p><code>arrange_in_grid(n_rows=None, n_cols=None, **kwargs)</code>:</p>
<p>å¯¹submobjectåˆ—è¡¨é‡æ‹åˆ—</p>
<p>å¦‚æœé»˜è®¤æ— å‚æ•°,é‡æ‹åˆ—è‡³æ–¹é˜µ,å¦åˆ™n_rowså’Œn_colsæœ€å¤šé€‰ä¸€ä¸ª,æ’åˆ—ä¸ºå¯¹åº”çš„è¡Œæˆ–åˆ—,å¦‚æœéƒ½å¡«,åˆ™æ’åˆ—ä¸ºn_rowsè¡Œ</p>
<p><code>**kwargs</code>å‚è€ƒnext_toå‡½æ•°</p>
<pre class=" language-lang-python"><code class="language-lang-python">class ArrangeInGrid(Scene):
    def construct(self):
        square = Square()
        square.add(Circle().move_to(np.array([-1,-2,0])))
        square.add(Circle().move_to(np.array([3,0,0])))
        square.add(Circle().move_to(np.array([5, 2, 0])))
        square.add(Circle().move_to(np.array([5, -3, 0])))
        self.add(square)
        self.play(square.arrange_in_grid)
        self.wait(2)
</code></pre>
<p><img src="ArrangeInGrid-1586013786373.gif" alt="ArrangeInGrid"></p>
</li>
<li><p><code>sort(point_to_num_func=lambda p: p[0], submob_func=None)</code>:</p>
<p>å¯¹ç‚¹è¿›è¡Œæ’åº,è¿™ä¸ªä¸€èˆ¬æ„ä¹‰ä¸å¤§,å¯ä»¥è‡ªå·±ç¼–å†™æ’åºæ–¹æ³•</p>
</li>
<li><p><code>shuffle(recursive=False)</code>:</p>
<p>æ‰“ä¹±submobjectçš„åˆ—è¡¨æ’åº,ä»¥åŠæ˜¯å¦é€’å½’è¿›è¡Œ</p>
</li>
</ol>
<h3 id="3-11-å¯¹é½å‡½æ•°"><a href="#3-11-å¯¹é½å‡½æ•°" class="headerlink" title="3.11 å¯¹é½å‡½æ•°"></a>3.11 å¯¹é½å‡½æ•°</h3><ol>
<li><p><code>align_to(mobject_or_point, direction=ORIGIN, alignment_vect=UP)</code>:</p>
<p>å¯¹é½,directionè¡¨ç¤ºå¯¹é½çš„è¾¹æ˜¯å“ªè¾¹</p>
<p>mob1.align_toï¼ˆmob2ï¼ŒUPï¼‰å‚ç›´ç§»åŠ¨mob1ï¼Œä»¥ä¾¿å…¶é¡¶éƒ¨è¾¹ç¼˜ä¸mob2çš„é¡¶éƒ¨è¾¹ç¼˜å¯¹é½ã€‚ mob1.align_toï¼ˆmob2ï¼Œalignment_vect = RIGHTï¼‰æ°´å¹³ç§»åŠ¨mob1ï¼Œä½¿å…¶ä¸­å¿ƒä½äºmob2ä¸­å¿ƒçš„æ­£ä¸Šæ–¹/æ­£ä¸‹æ–¹</p>
<pre class=" language-lang-python"><code class="language-lang-python">class AlighTo(Scene):
    def construct(self):
        square = Square()
        circle = Circle().shift(2 * RIGHT + 1 * DOWN).scale(2)
        self.add(square,circle)
        self.play(circle.align_to,square,RIGHT)
        self.wait(2)
</code></pre>
<p><img src="AlighTo-1586013786373.gif" alt="AlighTo"></p>
</li>
<li><p><code>add_n_more_submobjects(n)</code>:</p>
<p>åŠ å…¥nä¸ªsubmoject</p>
</li>
</ol>
<h3 id="3-12-æŠ½è±¡æ–¹æ³•"><a href="#3-12-æŠ½è±¡æ–¹æ³•" class="headerlink" title="3.12 æŠ½è±¡æ–¹æ³•"></a>3.12 æŠ½è±¡æ–¹æ³•</h3><ol>
<li><p><code>align_data(mobject)</code>:</p>
</li>
<li><p><code>align_points(mobject)</code>:</p>
</li>
<li><p><code>align_submobjects(mobject)</code>:</p>
<p>å¯¹é½submobjects</p>
</li>
<li><p><code>null_point_align(mobject)</code>:</p>
</li>
<li><p><code>get_point_mobject(center=None)</code></p>
</li>
<li><p><code>align_points_with_larger(larger_mobject)</code></p>
</li>
<li><p><code>interpolate_color(mobject1, mobject2, alpha)</code>:</p>
<p>é¢œè‰²æ’å€¼</p>
</li>
<li><p><code>interpolate(mobject1,mobject2,alpha, path_func=straight_path)</code>:</p>
<p>Mobjectæ’å€¼</p>
</li>
<li><p><code>become_partial(mobject, a, b)</code>:</p>
<p>ä»¥ä»…æˆä¸ºmobjectä¸€éƒ¨åˆ†çš„æ–¹å¼è®¾ç½®ç‚¹ã€‚ è¾“å…¥0 &lt;= a &lt;b &lt;= 1ç¡®å®šè¦æˆä¸ºmobjectçš„å“ªä¸€éƒ¨åˆ†ã€‚</p>
</li>
<li><p><code>become(mobject, copy_submobjects=True)</code>:</p>
<p>å˜æˆå¦ä¸€ä¸ªçš„æ ·å¼</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Become(Scene):
    def construct(self):
        square = Square()
        square.submobjects.append(Circle().move_to(np.array([-1,-2,0])))
        square.submobjects.append(Circle().move_to(np.array([3,0,0])))
        square.submobjects.append(Circle().move_to(np.array([5, 2, 0])))
        square.submobjects.append(Circle().move_to(np.array([5, -3, 0])))
        text = Text("text")
        self.add(square)
        self.play(square.become,text)
        self.play(text.shift,UP)
        self.wait(2)
</code></pre>
<p><img src="Become-1586013786373.gif" alt="Become"></p>
</li>
</ol>
<h2 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h2><p>Mobjectçš„ç”¨æ³•è¿˜æ˜¯å¾ˆå¤šçš„,ç©ºé—²æ—¶é—´å†™äº†å¾ˆå¤šå¤©æ‰å†™å®Œ,å¸Œæœ›è‡ªå·±èƒ½ç”¨ç†Ÿç»ƒ</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>manim</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>manim</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql5.7+vså®‰è£…æºç è°ƒè¯•ç¯å¢ƒ</title>
    <url>/2020/07/03/mysql5-7-vs-an-zhuang-yuan-ma-diao-shi-huan-jing/</url>
    <content><![CDATA[<h1 id="1-æºç ä»¥åŠè½¯ä»¶ä¸‹è½½"><a href="#1-æºç ä»¥åŠè½¯ä»¶ä¸‹è½½" class="headerlink" title="1. æºç ä»¥åŠè½¯ä»¶ä¸‹è½½"></a>1. æºç ä»¥åŠè½¯ä»¶ä¸‹è½½</h1><ol>
<li>Visual Code community 2019</li>
<li>MySQLæºç 5.7.19</li>
<li>ä¸MySQL5.7.19é…å¥—çš„boost_1_59_0-msvc-14.0-64</li>
<li>ActivePerl-5.28</li>
<li>cmake-3.18.0</li>
</ol>
<h1 id="2-æºç çš„ç¼–è¯‘"><a href="#2-æºç çš„ç¼–è¯‘" class="headerlink" title="2. æºç çš„ç¼–è¯‘"></a>2. æºç çš„ç¼–è¯‘</h1><p><img src="image-20200626142031305.png" alt="æºç çš„ç¼–è¯‘"></p>
<h1 id="3-VSç¼–è¯‘é‡åˆ°çš„æŠ¥é”™é—®é¢˜"><a href="#3-VSç¼–è¯‘é‡åˆ°çš„æŠ¥é”™é—®é¢˜" class="headerlink" title="3. VSç¼–è¯‘é‡åˆ°çš„æŠ¥é”™é—®é¢˜"></a>3. VSç¼–è¯‘é‡åˆ°çš„æŠ¥é”™é—®é¢˜</h1><h2 id="3-1-Call-Stack-most-recent-call-first-cmake-boost-cmake-238-COULD-NOT-FIND-BOOST-CMakeList"><a href="#3-1-Call-Stack-most-recent-call-first-cmake-boost-cmake-238-COULD-NOT-FIND-BOOST-CMakeList" class="headerlink" title="3.1 Call Stack (most recent call first): cmake/boost.cmake:238 (COULD_NOT_FIND_BOOST) CMakeList"></a>3.1 Call Stack (most recent call first): cmake/boost.cmake:238 (COULD_NOT_FIND_BOOST) CMakeList</h2><p>boostçš„ç‰ˆæœ¬ä¸å¯¹,æ”¹ä¸ºboost_1_59_0å°±æˆåŠŸç¼–è¯‘</p>
<h2 id="3-2-â€œå¯¹COM-ç»„ä»¶çš„è°ƒç”¨è¿”å›äº†é”™è¯¯-HRESULT-E-FAILâ€æ— æ³•åŠ è½½é¡¹ç›®"><a href="#3-2-â€œå¯¹COM-ç»„ä»¶çš„è°ƒç”¨è¿”å›äº†é”™è¯¯-HRESULT-E-FAILâ€æ— æ³•åŠ è½½é¡¹ç›®" class="headerlink" title="3.2 â€œå¯¹COM ç»„ä»¶çš„è°ƒç”¨è¿”å›äº†é”™è¯¯ HRESULT E_FAILâ€æ— æ³•åŠ è½½é¡¹ç›®"></a>3.2 â€œå¯¹COM ç»„ä»¶çš„è°ƒç”¨è¿”å›äº†é”™è¯¯ HRESULT E_FAILâ€æ— æ³•åŠ è½½é¡¹ç›®</h2><ol>
<li><p><img src="20200607002041265.png" alt="1"></p>
</li>
<li><p><img src="20200607002123675.png" alt="2"></p>
</li>
<li><p><img src="20200607002217417.png" alt="3"></p>
</li>
</ol>
<h2 id="3-3-â€œè¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ-936-ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º-Unicode-æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±â€"><a href="#3-3-â€œè¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ-936-ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º-Unicode-æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±â€" class="headerlink" title="3.3 â€œè¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ(936)ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º Unicode æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±â€"></a>3.3 â€œè¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ(936)ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º Unicode æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±â€</h2><p><a href="https://www.cnblogs.com/leokale-zz/p/11423953.html" target="_blank" rel="noopener">https://www.cnblogs.com/leokale-zz/p/11423953.html</a></p>
<h2 id="3-4-è¿è¡ŒæŠ¥é”™"><a href="#3-4-è¿è¡ŒæŠ¥é”™" class="headerlink" title="3.4 è¿è¡ŒæŠ¥é”™"></a>3.4 è¿è¡ŒæŠ¥é”™</h2><p>mysql.cc æ–‡ä»¶ä¸­å‡½æ•°test_lc_time_sz æœ€åçš„DBUG_ASSERT(0); éœ€è¦æ”¹æˆDBUG_ASSERT(1);</p>
<h2 id="3-5-ç¼–è¯‘æˆåŠŸåè¿è¡Œï¼šmysqld-Could-not-create-or-access-the-registry-key-needed-for-the-MySQL-app"><a href="#3-5-ç¼–è¯‘æˆåŠŸåè¿è¡Œï¼šmysqld-Could-not-create-or-access-the-registry-key-needed-for-the-MySQL-app" class="headerlink" title="3.5 ç¼–è¯‘æˆåŠŸåè¿è¡Œï¼šmysqld: Could not create or access the registry key needed for the MySQL app"></a>3.5 ç¼–è¯‘æˆåŠŸåè¿è¡Œï¼šmysqld: Could not create or access the registry key needed for the MySQL app</h2><p>ä»¥ç®¡ç†å‘˜æ–¹å¼è¿›è¡Œè¿è¡Œç¨‹åº</p>
<p><a href="https://blog.csdn.net/zeqi1991/article/details/96195127" target="_blank" rel="noopener">https://blog.csdn.net/zeqi1991/article/details/96195127</a></p>
<h2 id="3-6-è¿è¡ŒæŠ¥é”™Table-â€˜mysql-pluginâ€™-doesnâ€™t-exist"><a href="#3-6-è¿è¡ŒæŠ¥é”™Table-â€˜mysql-pluginâ€™-doesnâ€™t-exist" class="headerlink" title="3.6 è¿è¡ŒæŠ¥é”™Table â€˜mysql.pluginâ€™ doesnâ€™t exist"></a>3.6 è¿è¡ŒæŠ¥é”™Table â€˜mysql.pluginâ€™ doesnâ€™t exist</h2><ol>
<li><p>åˆ é™¤dataçš„æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰çš„å†…å®¹</p>
</li>
<li><p>sql \Debug \ .\mysqld â€”initialize</p>
<p><img src="image-20200627012830324.png" alt="sql \Debug \ .\mysqld --initialize"></p>
</li>
</ol>
<h1 id="4-ç»“æœ"><a href="#4-ç»“æœ" class="headerlink" title="4. ç»“æœ"></a>4. ç»“æœ</h1><p><img src="image-20200626150116025.png" alt="ç»“æœ"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlæºç --mainå‡½æ•°</title>
    <url>/2020/07/03/mysql-yuan-ma-main-han-shu/</url>
    <content><![CDATA[<h1 id="1-mainå‡½æ•°çš„ç†è§£"><a href="#1-mainå‡½æ•°çš„ç†è§£" class="headerlink" title="1. mainå‡½æ•°çš„ç†è§£"></a>1. mainå‡½æ•°çš„ç†è§£</h1><p>å‡½æ•°çš„å…¥å£åœ¨<code>mysqld/main.cc</code>é‡Œé¢ï¼š</p>
<p><img src="image-20200627163326858.png" alt="mysqld/main.cc"></p>
<p>è€Œé‡Œé¢çš„å‡½æ•°åœ¨ä¸¤ä¸ªåœ°æ–¹å‡ºç°ï¼š</p>
<p><img src="image-20200627163411816.png" alt="vsç»ˆç«¯æ˜¾ç¤º"></p>
<p>ç¬¬ä¸€å¤„åœ¨<code>mysqld.cc</code>çš„4364è¡Œå‡ºç°ï¼š</p>
<p><img src="image-20200627165111499.png" alt="ç¬¬ä¸€å¤„"></p>
<p>ä»ä¸Šå¾ˆæ˜æ˜¾çœ‹å‡ºï¼Œå¦‚æœæ˜¯WIN32ç³»ç»Ÿï¼Œåˆ™å‡½æ•°åå­—æ˜¯<code>win_main</code>,è€Œæˆ‘çš„ç³»ç»Ÿæ˜¯64ä½çš„ç³»ç»Ÿï¼Œæ‰€ä»¥å‡½æ•°æ‰ä¼šè¢«å‘½åä¸º<code>mysqld_main</code>.</p>
<p>ç¬¬äºŒä¸ª<code>mysqld_main</code>æ˜¯åœ¨WIN32ç³»ç»Ÿä¸­å®šä¹‰çš„ï¼Œåœ¨æ­¤ä¸è€ƒè™‘ï¼š</p>
<p><img src="image-20200627165736272.png" alt="ç¬¬äºŒå¤„"></p>
<p>æŸ¥é˜…èµ„æ–™å‘ç°ï¼ŒMysqlä¸ºäº†å®ç°å¯ä»¥åœ¨win32å¹³å°ä¸ç±»Uninxå¹³å°ä»£ç å…±ç”¨ï¼Œå°†ä¸€äº›å…¬ç”¨çš„å‡½æ•°æŠ½è±¡å‡ºæ¥ï¼Œä½†æ˜¯win32å’Œç±»unixå¹³å°å¯åŠ¨æ–¹å¼ä¸ä¸€æ ·ã€‚ç»†çœ‹win32çš„mysqld_mainè°ƒç”¨äº†mysql_serviceï¼Œmysql_serviceåˆè°ƒç”¨äº†win_mainå‡½æ•°ï¼Œç»è¿‡ç‰¹æ®Šæ“ä½œå¤„ç†ååˆå›åˆ°äº†å‡½æ•°çš„å…¬å…±å®šä¹‰å†…å®¹ï¼š</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">//win32çš„mysqld_main
int mysqld_main(int argc, char **argv)
{
    //...
    mysql_service(NULL);
    //...
}
int mysql_service(void *p)
{
    //...
    if (use_opt_args)
        win_main(opt_argc, opt_argv);
      else
        win_main(Service.my_argc, Service.my_argv);
    //...
}
//æ­¤win_mainï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªmysqld_mainçš„ä»£ç å†…å®¹
</code></pre>
<h1 id="2-mainå‡½æ•°çš„æµç¨‹"><a href="#2-mainå‡½æ•°çš„æµç¨‹" class="headerlink" title="2. mainå‡½æ•°çš„æµç¨‹"></a>2. mainå‡½æ•°çš„æµç¨‹</h1><h2 id="2-1å‡†å¤‡"><a href="#2-1å‡†å¤‡" class="headerlink" title="2.1å‡†å¤‡"></a>2.1å‡†å¤‡</h2><ol>
<li><p>æ‰§è¡ŒåŸºæœ¬çš„çº¿ç¨‹åº“å’Œmallocåˆå§‹åŒ–ï¼Œè¯»å–é»˜è®¤æ–‡ä»¶å’Œè§£æé€‰é¡¹ã€‚</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">if (load_defaults(MYSQL_CONFIG_NAME, load_default_groups, &argc, &argv))
  {
    flush_error_log_messages();
    return 1;
  }
</code></pre>
</li>
<li><p>æ˜¯å¦ä½¿ç”¨PERFORMANCE_SCHEMAå­˜å‚¨å¼•æ“</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">#ifdef WITH_PERFSCHEMA_STORAGE_ENGINE
  /*
    Initialize the array of performance schema instrument configurations.
  */
  init_pfs_instrument_array();
#endif /* WITH_PERFSCHEMA_STORAGE_ENGINE */
</code></pre>
<p><img src="image-20200627203915117.png" alt="mysqlæ¶æ„"><br>å›¾æºè‡ª:<a href="https://draven.co/" target="_blank" rel="noopener">https://draven.co/</a></p>
</li>
<li><p>é»˜è®¤é…ç½®æ–‡ä»¶çš„åŠ è½½</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">load_defaults(MYSQL_CONFIG_NAME, load_default_groups, &argc, &argv)
</code></pre>
<p>my.iniæ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Œå®ƒä¼šè¿™æ ·åŠ è½½ï¼š<br>C:/WINDOWS/my.cnfã€€C:/WINDOWS/my.iniã€€C:/my.cnf ã€€C:/my.ini</p>
<p>å¦‚æœæŒ‡å®šäº†MYSQL_HOMEï¼Œåœ¨æ‰¾ä¸åˆ°å‰è¾¹4ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒä¼šå»æŸ¥æ‰¾$MYSQL_HOME$/my.cnfæˆ–my.ini</p>
<p>å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">char fname_buffer[FN_REFLEN];
//C:/WINDOWS/my.cnf
if (my_get_system_windows_directory(fname_buffer, sizeof(fname_buffer)))
   errors += add_directory(alloc, fname_buffer, dirs);
//C:/WINDOWS/my.ini
if (GetWindowsDirectory(fname_buffer, sizeof(fname_buffer)))
   errors += add_directory(alloc, fname_buffer, dirs);

//C:/my.cnf
errors += add_directory(alloc, "C:/", dirs);
//C:/my.ini
if (my_get_module_parent(fname_buffer, sizeof(fname_buffer)) != NULL)
   errors += add_directory(alloc, fname_buffer, dirs);
//ã€‚ã€‚ã€‚å¦‚æœæ˜¯Linuxç³»ç»Ÿã€‚ã€‚ã€‚
//å¦‚æœä¸Šé¢çš„å››ä¸ªä½ç½®æ‰¾ä¸åˆ°ï¼Œåˆ™è¿›è¡Œä¸‹é¢æŸ¥æ‰¾
if ((env= getenv("MYSQL_HOME")))
    errors += add_directory(alloc, env, dirs);

  /* Placeholder for --defaults-extra-file=<path> */
  errors += add_directory(alloc, "", dirs);
</code></pre>
</li>
</ol>
<h2 id="2-1WITH-PERFSCHEMA-STORAGE-ENGINEå®å®šä¹‰"><a href="#2-1WITH-PERFSCHEMA-STORAGE-ENGINEå®å®šä¹‰" class="headerlink" title="2.1WITH_PERFSCHEMA_STORAGE_ENGINEå®å®šä¹‰"></a>2.1<code>WITH_PERFSCHEMA_STORAGE_ENGINE</code>å®å®šä¹‰</h2><pre class=" language-lang-C++"><code class="language-lang-C++">#ifdef WITH_PERFSCHEMA_STORAGE_ENGINE
  /*
    Initialize the array of performance schema instrument configurations.
  */
  init_pfs_instrument_array();
#endif /* WITH_PERFSCHEMA_STORAGE_ENGINE */
</code></pre>
<p>å¯¹åº”çš„ç¼–è¯‘çš„å‚æ•°ä¸º<code>-DWITH_ARCHIVE_STORAGE_ENGINE=1</code>ï¼Œå¯¹åº”çš„è¯¦ç»†ä¿¡æ¯åœ¨ï¼š</p>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/performance-schema.html</a></p>
<p><img src="image-20200628123338750.png" alt="æ–‡ä»¶ä½ç½®"></p>
<ol>
<li><p>åˆå§‹åŒ–ä¸€äº›çº¿ç¨‹ä¼šç”¨åˆ°çš„é”ã€ä¿¡å·é‡ã€å˜é‡ç­‰ï¼Œå…¶ä¸­å°è£…äº†ä¸€äº›pthreadçš„å‡½æ•°</p>
<p>æ¥äº†ä¸‹æ¥è°ƒç”¨äº†å„ç§çº¿ç¨‹çš„åˆå§‹åŒ–ï¼Œè¿‡ç¨‹æ„Ÿè§‰ä¸æ˜¯é‡ç‚¹ï¼Œæ²¡æœ‰ç»§ç»­çœ‹ä¸‹å»</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">if (my_init())
  {
    sql_print_error("my_init() failed.");
    flush_error_log_messages();
    return 1;
  }
</code></pre>
</li>
<li><p>åˆå§‹åŒ–SQL statement</p>
<p><code>init_sql_statement_names();</code></p>
</li>
<li><p>åˆå§‹åŒ–ç³»ç»Ÿå˜é‡</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">int sys_var_init()
{
  DBUG_ENTER("sys_var_init");

  /* Must be already initialized. */
  DBUG_ASSERT(system_charset_info != NULL);

  if (my_hash_init(&system_variable_hash, system_charset_info, 100, 0,
                   0, (my_hash_get_key) get_sys_var_length, 0, HASH_UNIQUE,
                   PSI_INSTRUMENT_ME))
    goto error;

  if (mysql_add_sys_var_chain(all_sys_vars.first))
    goto error;

  DBUG_RETURN(0);

error:
  my_message_local(ERROR_LEVEL, "failed to initialize system variables");
  DBUG_RETURN(1);
}
</code></pre>
<p><code>system_variable_hash</code>æ˜¯ä¸€ä¸ªç”¨äºä¿å­˜<code>sys_var</code>çš„å“ˆå¸Œè¡¨</p>
<p><code>mysql_add_sys_var_chain</code>è¿™ä¸ªå‡½æ•°çš„æœ¬æ„åº”è¯¥æ˜¯å°†<code>all_sys_vars</code>ä¸­çš„æ•°æ®éƒ½åŠ å…¥<code>system_variable_hash</code>è¿™ä¸ªå“ˆå¸Œè¡¨ä¸­</p>
</li>
<li><p>è°ƒæ•´ç›¸å…³çš„é€‰é¡¹</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">adjust_related_options(&requested_open_files);
</code></pre>
<p>å…·ä½“çš„å†…å®¹ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œçœ‹æ–¹æ³•åçŒœæµ‹æ˜¯è°ƒæ•´å‡½æ•°åå­—å¯¹åº”çš„å‡ ä¸ªå‚æ•°ï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">void adjust_related_options(ulong *requested_open_files)
{
  /* In bootstrap, disable grant tables (we are about to create them) */
  if (opt_bootstrap)
    opt_noacl= 1;

  /* The order is critical here, because of dependencies. */
  adjust_open_files_limit(requested_open_files);
  adjust_max_connections(*requested_open_files);
  adjust_table_cache_size(*requested_open_files);
  adjust_table_def_size();
}
</code></pre>
<p>æ‰“å¼€æ–‡ä»¶çš„æ•°é‡ï¼Œæœ€å¤§è¿æ¥æ•°ï¼Œè¡¨ç¼“å­˜å¤§å°ç­‰ç­‰</p>
<ul>
<li><p>open_files_limitå€¼ï¼š</p>
<p>my.cnfé‡Œå¦‚æœé…ç½®äº†open_files_limitï¼Œopen_files_limitæœ€åå–å€¼ä¸º é…ç½®æ–‡ä»¶ open_files_limitï¼Œmax_connections*5ï¼Œ wanted_files= 10+max_connections+table_cache_size*2 ä¸‰è€…ä¸­çš„æœ€å¤§å€¼ã€‚</p>
<p>å¦‚æœmy.cnfé‡Œå¦‚æœæ²¡é…ç½®open_files_limitï¼Œopen_files_limitæœ€åå–å€¼ä¸ºmax_connections*5ï¼Œ10+max_connections+table_cache_size*2ï¼Œulimit -nä¸­çš„æœ€å¤§è€…</p>
</li>
<li><p>max_connectionsçš„é™åˆ¶ï¼š</p>
<p>å› ä¸ºMySQLçš„æœ€å¤§è¿æ¥æ•°å—åˆ°äº†å®‰è£…å¹³å°çš„çº¿ç¨‹åº“ã€å¯ç”¨å†…å­˜ã€æ¯ä¸ªè¿æ¥éœ€è¦ä½¿ç”¨çš„å†…å­˜ã€æ¯ä¸ªè¿æ¥çš„å·¥ä½œé‡ã€å“åº”æ—¶é—´çš„å½±å“ï¼Œlinuxå¤§æ¦‚èƒ½æ‰¿å—500ï½1000å¹¶å‘è¯·æ±‚ï¼Œè€ŒWindowsç”±äºPosixé€šç”¨æ¥å£å±‚çš„é™åˆ¶ï¼Œå¿…é¡»æ»¡è¶³(open tables Ã— 2 + open connections) &lt; 2048</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">void adjust_max_connections(ulong requested_open_files)
{
  ulong limit;

  limit= requested_open_files - 10 - TABLE_OPEN_CACHE_MIN * 2;

  if (limit < max_connections)
  {
    sql_print_warning("Changed limits: max_connections: %lu (requested %lu)",
                      limit, max_connections);

    // This can be done unprotected since it is only called on startup.
    max_connections= limit;
  }
}
</code></pre>
<p>TABLE_OPEN_CACHE_MINæ˜¯å†™æ­»çš„å®ï¼š400</p>
</li>
<li><p>table_open_cache</p>
<p>table_open_cacheå—åˆ°äº†max_connectionsçš„é™åˆ¶ï¼Œè‡³å°‘éœ€è¦è¿æ¥æ•°*è¯¥é“¾æ¥æ‰§è¡Œçš„joinè¡¨çš„ä¸ªæ•°</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">void adjust_table_cache_size(ulong requested_open_files)
{
  ulong limit;

  limit= max<ulong>((requested_open_files - 10 - max_connections) / 2,
                    TABLE_OPEN_CACHE_MIN);

  if (limit < table_cache_size)
  {
    sql_print_warning("Changed limits: table_open_cache: %lu (requested %lu)",
                      limit, table_cache_size);

    table_cache_size= limit;
  }

  table_cache_size_per_instance= table_cache_size / table_cache_instances;
}
</code></pre>
</li>
<li><p>table_definition_cache</p>
<p>table_definition_cacheæ˜¯èƒ½æ”¾åœ¨ç¼“å­˜ä¸­çš„è¡¨çš„å®šä¹‰çš„æ•°é‡ï¼Œè¡¨çš„å®šä¹‰åœ¨ç¼“å­˜ä¸­çš„æ—¶å€™èƒ½å¤ŸåŠ å¿«æ‰“å¼€è¡¨çš„é€Ÿåº¦ï¼Œé»˜è®¤æ˜¯400 + (table_open_cache / 2)</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">default_value= min<ulong> (400 + table_cache_size / 2, 2000);
  var= intern_find_sys_var(STRING_WITH_LEN("table_definition_cache"));
  DBUG_ASSERT(var != NULL);
  var->update_default(default_value);
</code></pre>
</li>
</ul>
</li>
<li><p>å¯¹ç›¸å…³çš„é…ç½®è¿›è¡Œç”Ÿæ•ˆ</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">if (ho_error == 0)
  {
    if (!opt_help && !opt_bootstrap)
    {
      /* Add sizing hints from the server sizing parameters. */
      pfs_param.m_hints.m_table_definition_cache= table_def_size;
      pfs_param.m_hints.m_table_open_cache= table_cache_size;
      pfs_param.m_hints.m_max_connections= max_connections;
      pfs_param.m_hints.m_open_files_limit= requested_open_files;
      pfs_param.m_hints.m_max_prepared_stmt_count= max_prepared_stmt_count;

      PSI_hook= initialize_performance_schema(&pfs_param);
      if (PSI_hook == NULL && pfs_param.m_enabled)
      {
        pfs_param.m_enabled= false;
        sql_print_warning("Performance schema disabled (reason: init failed).");
      }
    }
  }
</code></pre>
</li>
</ol>
<h2 id="2-2HAVE-PSI-INTERFACEå®å®šä¹‰"><a href="#2-2HAVE-PSI-INTERFACEå®å®šä¹‰" class="headerlink" title="2.2HAVE_PSI_INTERFACEå®å®šä¹‰"></a>2.2<code>HAVE_PSI_INTERFACE</code>å®å®šä¹‰</h2><p>PSIä»£è¡¨ï¼šPerformance schema instrumentation interfaceæ€§èƒ½æ¨¡å¼æ£€æµ‹æ¥å£</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">#ifdef HAVE_PSI_INTERFACE
  /*
    è·å–å½“å‰çš„æ€§èƒ½æ¨¡å¼æ£€æµ‹æ¥å£ï¼Œå¦‚æœå¯ä¾›ä½¿ç”¨çš„è¯ã€‚
  */
  if (PSI_hook)
  {
    PSI *psi_server= (PSI*) PSI_hook->get_interface(PSI_CURRENT_VERSION);
    if (likely(psi_server != NULL))
    {
      set_psi_server(psi_server);

      /*
        2.1è§£æäº†å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶ä¸”å·²ç»åˆå§‹åŒ–äº†æ€§èƒ½æ¨¡å¼(performance schema instrument)ï¼Œæ¥ä¸‹æ¥æ³¨å†Œæ‰€æœ‰æœåŠ¡å™¨æ£€æµ‹
      */
      init_server_psi_keys();
      /* æ£€æµ‹ä¸»è¦çš„çº¿ç¨‹ */
      PSI_thread *psi= PSI_THREAD_CALL(new_thread)(key_thread_main, NULL, 0);
      PSI_THREAD_CALL(set_thread_os_id)(psi);
      PSI_THREAD_CALL(set_thread)(psi);

      /*
        ä¸€äº›æ£€æµ‹å·²ç»åˆ°ä½,é‡æ–°åˆå§‹åŒ–åœ¨ä¹‹å‰å·²ç»åˆå§‹åŒ–çš„å¯¹è±¡,ä»¥ä¾¿æ›´å¥½çš„æ£€æµ‹.
      */
      my_thread_global_reinit();
    }
  }
#endif /* HAVE_PSI_INTERFACE */
</code></pre>
<h2 id="2-3-queryæ—¥å¿—åˆå§‹åŒ–"><a href="#2-3-queryæ—¥å¿—åˆå§‹åŒ–" class="headerlink" title="2.3 queryæ—¥å¿—åˆå§‹åŒ–"></a>2.3 queryæ—¥å¿—åˆå§‹åŒ–</h2><pre class=" language-lang-C++"><code class="language-lang-C++">init_error_log();

  /* Initialize audit interface globals. Audit plugins are inited later. */
  mysql_audit_initialize();

#ifndef EMBEDDED_LIBRARY
  Srv_session::module_init();
#endif

  /*
    æ‰§è¡ŒåŸºæœ¬æŸ¥è¯¢æ—¥å¿—åˆå§‹åŒ–ã€‚ åº”è¯¥åœ¨MY_INITä¹‹åè°ƒç”¨ï¼Œå› ä¸ºå®ƒä¼šåˆå§‹åŒ–äº’æ–¥é‡ã€‚
  */
  query_logger.init();
</code></pre>
<h2 id="2-4-å¦‚æœé”™è¯¯åˆ™é€€å‡º"><a href="#2-4-å¦‚æœé”™è¯¯åˆ™é€€å‡º" class="headerlink" title="2.4 å¦‚æœé”™è¯¯åˆ™é€€å‡º"></a>2.4 å¦‚æœé”™è¯¯åˆ™é€€å‡º</h2><pre class=" language-lang-C++"><code class="language-lang-C++">  if (ho_error)
  {
    /*
     è§£æå‘½ä»¤è¡Œé€‰é¡¹å¤±è´¥ï¼Œç”±äºæ²¡æœ‰å¯è¡Œçš„å‰©ä¸‹çš„_argc / remaining_argvæ¥ç»§ç»­æœåŠ¡å™¨åˆå§‹åŒ–ï¼Œå› æ­¤ä»£ç å·²å°½å…¶æ‰€èƒ½ã€‚
       è¿™æ˜¯è®°å½•æœ‰æ„ä¹‰æ¶ˆæ¯çš„æœ€å¤§åŠªåŠ›ï¼š
       -æ¶ˆæ¯å°†æ‰“å°åˆ°stderrï¼Œä½†å°šæœªé‡å®šå‘ï¼Œ
       -å¯¹äºWindowsï¼Œæ¶ˆæ¯å°†æ‰“å°åœ¨NTäº‹ä»¶æ—¥å¿—ä¸­ã€‚
    */
    flush_error_log_messages();
    /*
      Not enough initializations for unireg_abort()
      Using exit() for windows.
    */
    exit (MYSQLD_ABORT_EXIT);
  }

  if (init_common_variables())
    unireg_abort(MYSQLD_ABORT_EXIT);        // å¦‚æœåˆå§‹åŒ–å¤±è´¥å°±ç›´æ¥é€€å‡ºSQL

  my_init_signals();
</code></pre>
<h2 id="2-5-å †æ ˆçš„å¤§å°åˆå§‹åŒ–"><a href="#2-5-å †æ ˆçš„å¤§å°åˆå§‹åŒ–" class="headerlink" title="2.5 å †æ ˆçš„å¤§å°åˆå§‹åŒ–"></a>2.5 å †æ ˆçš„å¤§å°åˆå§‹åŒ–</h2><pre class=" language-lang-C++"><code class="language-lang-C++">my_thread_attr_setstacksize(&connection_attrib,
                            my_thread_stack_size + guardize);

  {
    /* Retrieve used stack size;  Needed for checking stack overflows */
    size_t stack_size= 0;
    my_thread_attr_getstacksize(&connection_attrib, &stack_size);

    /* We must check if stack_size = 0 as Solaris 2.9 can return 0 here */
    if (stack_size && stack_size < (my_thread_stack_size + guardize))
    {
      sql_print_warning("Asked for %lu thread stack, but got %ld",
                        my_thread_stack_size + guardize, (long) stack_size);
#if defined(__ia64__) || defined(__ia64)
      my_thread_stack_size= stack_size / 2;
#else
      my_thread_stack_size= static_cast<ulong>(stack_size - guardize);
#endif
    }
  }
</code></pre>
<h2 id="2-6-å¼€å¯binlogä¼šæ£€æŸ¥server-id"><a href="#2-6-å¼€å¯binlogä¼šæ£€æŸ¥server-id" class="headerlink" title="2.6 å¼€å¯binlogä¼šæ£€æŸ¥server_id"></a>2.6 å¼€å¯binlogä¼šæ£€æŸ¥server_id</h2><pre class=" language-lang-python"><code class="language-lang-python">if (opt_bin_log && !(server_id_supplied) )
  {
    sql_print_error("You have enabled the binary log, but you haven't provided "
                    "the mandatory server-id. Please refer to the proper "
                    "server start-up parameters documentation");
    unireg_abort(MYSQLD_ABORT_EXIT);
  }
</code></pre>
<p>å¦‚æœå¼€å¯äºŒè¿›åˆ¶æ—¥å¿—ä½†æ˜¯æ²¡æœ‰æä¾›æ“ä½œæœåŠ¡å™¨IDå°±ä¼šæŠ¥é”™å¹¶é€€å‡º</p>
<h2 id="2-7-æœåŠ¡å™¨ç»„ä»¶åˆå§‹åŒ–"><a href="#2-7-æœåŠ¡å™¨ç»„ä»¶åˆå§‹åŒ–" class="headerlink" title="2.7 æœåŠ¡å™¨ç»„ä»¶åˆå§‹åŒ–"></a>2.7 æœåŠ¡å™¨ç»„ä»¶åˆå§‹åŒ–</h2><pre class=" language-lang-c++"><code class="language-lang-c++">if (init_server_components())
    unireg_abort(MYSQLD_ABORT_EXIT);
</code></pre>
<h2 id="2-8æ£€æŸ¥dataç›®å½•ä¸‹æ˜¯å¦æœ‰auto-cnf"><a href="#2-8æ£€æŸ¥dataç›®å½•ä¸‹æ˜¯å¦æœ‰auto-cnf" class="headerlink" title="2.8æ£€æŸ¥dataç›®å½•ä¸‹æ˜¯å¦æœ‰auto.cnf"></a>2.8æ£€æŸ¥dataç›®å½•ä¸‹æ˜¯å¦æœ‰auto.cnf</h2><pre class=" language-lang-c++"><code class="language-lang-c++">  /*
    Each server should have one UUID. We will create it automatically, if it
    does not exist.
   */
  if (init_server_auto_options())
  {
    sql_print_error("Initialization of the server's UUID failed because it could"
                    " not be read from the auto.cnf file. If this is a new"
                    " server, the initialization failed because it was not"
                    " possible to generate a new UUID.");
    unireg_abort(MYSQLD_ABORT_EXIT);
  }
</code></pre>
<h2 id="2-9å°†uuidåŠ å…¥sid-map-ä¸­"><a href="#2-9å°†uuidåŠ å…¥sid-map-ä¸­" class="headerlink" title="2.9å°†uuidåŠ å…¥sid_map()ä¸­"></a>2.9å°†uuidåŠ å…¥sid_map()ä¸­</h2><pre class=" language-lang-c++"><code class="language-lang-c++">  /*
    Add server_uuid to the sid_map.  This must be done after
    server_uuid has been initialized in init_server_auto_options and
    after the binary log (and sid_map file) has been initialized in
    init_server_components().

    No error message is needed: init_sid_map() prints a message.

    Strictly speaking, this is not currently needed when
    opt_bin_log==0, since the variables that gtid_state->init
    initializes are not currently used in that case.  But we call it
    regardless to avoid possible future bugs if gtid_state ever
    needs to do anything else.
  */
  global_sid_lock->wrlock();
  int gtid_ret= gtid_state->init();
  global_sid_lock->unlock();

  if (gtid_ret)
    unireg_abort(MYSQLD_ABORT_EXIT);
</code></pre>
<h2 id="2-10åˆå§‹åŒ–gtid-stateå¯¹è±¡ä»¥åŠå¯¹åº”çš„æ“ä½œ"><a href="#2-10åˆå§‹åŒ–gtid-stateå¯¹è±¡ä»¥åŠå¯¹åº”çš„æ“ä½œ" class="headerlink" title="2.10åˆå§‹åŒ–gtid_stateå¯¹è±¡ä»¥åŠå¯¹åº”çš„æ“ä½œ"></a>2.10åˆå§‹åŒ–gtid_stateå¯¹è±¡ä»¥åŠå¯¹åº”çš„æ“ä½œ</h2><pre class=" language-lang-c++"><code class="language-lang-c++">  // Initialize executed_gtids from mysql.gtid_executed table.
  if (gtid_state->read_gtid_executed_from_table() == -1)
    unireg_abort(1);
</code></pre>
<p>GTID (Global Transaction ID)æ˜¯å…¨å±€äº‹åŠ¡ID,å½“åœ¨ä¸»åº“ä¸Šæäº¤äº‹åŠ¡æˆ–è€…è¢«ä»åº“åº”ç”¨æ—¶ï¼Œå¯ä»¥å®šä½å’Œè¿½è¸ªæ¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå¯¹DBAæ¥è¯´æ„ä¹‰å°±å¾ˆå¤§äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€‚å½“çš„è§£æ”¾å‡ºæ¥ï¼Œä¸ç”¨æ‰‹å·¥å»å¯ä»¥æ‰¾åç§»é‡çš„å€¼äº†ï¼Œè€Œæ˜¯é€šè¿‡CHANGE MASTER TO MASTER_HOST=â€™xxxâ€™, MASTER_AUTO_POSITION=1çš„å³å¯æ–¹ä¾¿çš„æ­å»ºä»åº“ï¼Œåœ¨æ•…éšœä¿®å¤ä¸­ä¹Ÿå¯ä»¥é‡‡ç”¨MASTER_AUTO_POSITION=â€˜Xâ€™çš„æ–¹å¼ã€‚</p>
<p>åœ¨ä»¥ä¸‹å››ç§æƒ…å†µä¸‹ï¼Œå°†æœªä¿å­˜çš„GTIDä¿å­˜åˆ°gtid_exectedè¡¨ä¸­ï¼š</p>
<ol>
<li>å‡çº§</li>
<li>ä»ä¸»æœåŠ¡å™¨çš„å¤‡ä»½ä¸­é…ç½®äº†ä¸€ä¸ªä»æœåŠ¡å™¨ï¼Œå¹¶ä¸”åœ¨æ­¤ä¹‹å‰é€šè¿‡RESET MASTERå’ŒRESET SLAVEæ¸…é™¤äº†ä»æœåŠ¡å™¨ã€‚</li>
<li>åœ¨å´©æºƒå‰ä»æœåŠ¡å™¨ä¸Šçš„æœ€åä¸€ä¸ªRESET MASTERæ²¡æœ‰å‘ç”ŸäºŒè¿›åˆ¶æ—¥å¿—è½®æ¢</li>
<li>å¦‚æœæœåŠ¡å™¨å´©æºƒï¼Œåˆ™æœ€åä¸€ä¸ªbinlogçš„GTIDé›†ä¸ä¼šä¿å­˜åˆ°gtid_exectedè¡¨ä¸­ï¼Œå› æ­¤åœ¨ä»å´©æºƒä¸­æ¢å¤æœŸé—´ï¼Œæˆ‘ä»¬å°†å…¶ä¿å­˜åˆ°gtid_executedè¡¨å’Œexecute_gtidsä¸­ã€‚</li>
</ol>
<p>å…¶ä¸­çš„ä»£ç æˆ‘æ²¡æœ‰ä»”ç»†ç ”ç©¶</p>
<h2 id="2-11-ç½‘ç»œè¿æ¥"><a href="#2-11-ç½‘ç»œè¿æ¥" class="headerlink" title="2.11 ç½‘ç»œè¿æ¥"></a>2.11 ç½‘ç»œè¿æ¥</h2><ul>
<li><p>SSLæ”¯æŒä¸ç½‘ç»œçš„åˆå§‹åŒ–</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">  if (init_ssl())
    unireg_abort(MYSQLD_ABORT_EXIT);
  if (network_init())
    unireg_abort(MYSQLD_ABORT_EXIT);
</code></pre>
<p>network_initä¸»è¦åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<blockquote>
<p><a href="https://blog.csdn.net/Martin201609/article/details/100747413" target="_blank" rel="noopener">https://blog.csdn.net/Martin201609/article/details/100747413</a></p>
</blockquote>
<p>set_ports() è¿›è¡Œç›¸åº”çš„åˆå§‹åŒ–ç«¯å£,åˆ›å»ºç›‘å¬å¯¹è±¡Mysqld_socket_listenerï¼Œå¹¶å¯¹å…¶è¿›è¡Œç›¸åº”çš„åˆå§‹åŒ–æ“ä½œã€‚ç„¶åå¯¹listenerè¿›è¡Œç›¸åº”çš„ä¾¦å¬åŠ¨ä½œ</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">static bool network_init(void)
{
  if (opt_bootstrap)
    return false;

  set_ports(); //ç«¯å£è®¾ç½®
  //...
 Mysqld_socket_listener *mysqld_socket_listener=
      new (std::nothrow) Mysqld_socket_listener(bind_addr_str,
                                                mysqld_port, back_log,
                                                mysqld_port_timeout,
                                                unix_sock_name);
}//ç›‘å¬å¯¹è±¡
// ...
mysqld_socket_acceptor=
      new (std::nothrow) Connection_acceptor<Mysqld_socket_listener>(mysqld_socket_listener);//
//...
    if (mysqld_socket_acceptor->init_connection_acceptor())//å®ä¾‹åŒ–å¹¶ç›‘å¬
      return true; // mysqld_socket_acceptor would be freed in unireg_abort.
</code></pre>
<p><code>set_port()</code>:</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">static void set_ports()
{
  char  *env;
  if (!mysqld_port && !opt_disable_networking)
  {         // Get port if not from commandline
    mysqld_port= MYSQL_PORT;

    /*
      å¦‚æœæ„å»ºå™¨æ˜ç¡®è¦æ±‚ä½¿ç”¨é»˜è®¤ç«¯å£ï¼Œåˆ™ä½¿ç”¨è¯¥ç«¯å£ï¼ˆå³ä½¿å®ƒä¸é»˜è®¤å€¼ä¸€è‡´ï¼‰ã€‚ åªæœ‰åœ¨ä»–ä»¬æ²¡æœ‰è¿™æ ·åšçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰        æ£€æŸ¥/etc/servicesï¼ˆå¦‚æœå¤±è´¥ï¼Œåˆ™é€€å›åˆ°å‡ºå‚é»˜è®¤å€¼3306ï¼‰ã€‚ è¿™ä¸¤ä¸ªé»˜è®¤å€¼éƒ½å¯ä»¥è¢«ç¯å¢ƒå˜é‡MYSQL_TCP_PORT        è¦†ç›–ï¼Œè€Œç¯å¢ƒå˜é‡åˆå¯ä»¥ç”±å‘½ä»¤è¡Œé€‰é¡¹è¦†ç›–ã€‚
    */

#if MYSQL_PORT_DEFAULT == 0 //è¿™ä¸ªå‚æ•°æ˜¯åœ¨makeç¼–è¯‘ç”Ÿæˆä¹‹åï¼Œåœ¨include/mysql_version.hç”Ÿæˆï¼Œå…¶å€¼ä¸º #define MYSQL_PORT_DEFAULT          @MYSQL_TCP_PORT_DEFAULT@
    //MYSQL_TCP_PORT_DEFAULTè¿™ä¸ªå€¼æ˜¯åœ¨cmake/mysql_version.cmakeçš„æ–‡ä»¶ä¸­é…ç½®çš„
    /*
    [root@pcserver mysql-5.7.27]# grep -rn "MYSQL_TCP_PORT_DEFAULT" *
    cmake/mysql_version.cmake:88:SET(MYSQL_TCP_PORT_DEFAULT "3306")
    cmake/mysql_version.cmake:91:  SET(MYSQL_TCP_PORT ${MYSQL_TCP_PORT_DEFAULT})
    cmake/mysql_version.cmake:92:  SET(MYSQL_TCP_PORT_DEFAULT "0")
    cmake/mysql_version.cmake:93:ELSEIF(MYSQL_TCP_PORT EQUAL MYSQL_TCP_PORT_DEFAULT)
    cmake/mysql_version.cmake:94:  SET(MYSQL_TCP_PORT_DEFAULT "0")
    include/mysql_version.h.in:18:#define MYSQL_PORT_DEFAULT          @MYSQL_TCP_PORT_DEFAULT@
    scripts/mysql_config.pl.in:161:if ( '@MYSQL_TCP_PORT_DEFAULT@' == 0 ) {
    scripts/mysql_config.sh:106:if [ @MYSQL_TCP_PORT_DEFAULT@ -eq 0 ]; then

    */
    struct  servent *serv_ptr;
    if ((serv_ptr= getservbyname("mysql", "tcp")))
      mysqld_port= ntohs((u_short) serv_ptr->s_port); /* purecov: inspected */
#endif
    if ((env = getenv("MYSQL_TCP_PORT"))) 
      mysqld_port= (uint) atoi(env);    /* purecov: inspected é€šè¿‡getenvè·å–å¯åŠ¨é…ç½®å‘½ä»¤è¡Œçš„ç«¯å£*/
  }
  if (!mysqld_unix_port)
  {
#ifdef _WIN32
    mysqld_unix_port= (char*) MYSQL_NAMEDPIPE;
#else
    mysqld_unix_port= (char*) MYSQL_UNIX_ADDR;
#endif
    if ((env = getenv("MYSQL_UNIX_PORT")))
      mysqld_unix_port= env;      /* purecov: inspected */
  }
}
</code></pre>
<p>åˆ›å»ºç›‘å¬:</p>
<p>åˆ›å»º Mysqld_socket_listener ç±»å‹å¯¹è±¡</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">Mysqld_socket_listener *mysqld_socket_listener=
      new (std::nothrow) Mysqld_socket_listener(bind_addr_str,
                                                mysqld_port, back_log,
                                                mysqld_port_timeout,
                                                unix_sock_name);
</code></pre>
<p>é€šè¿‡Connection_acceptoræ¨¡æ¿è¿›è¡ŒMysqld_socket_listenerçš„åˆå§‹åŒ–ï¼Œé€šè¿‡å¾ªç¯ç›‘æ§ä¸åŒç±»å‹çš„client connection eventçš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯æ¥çš„è¿æ¥</p>
<p>åˆ›å»ºmysql_socket_acceptorå¯¹è±¡ï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">mysqld_socket_acceptor=
      new (std::nothrow) Connection_acceptor<Mysqld_socket_listener>(mysqld_socket_listener);
</code></pre>
<p>åˆå§‹åŒ–listenerï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++"> if (mysqld_socket_acceptor->init_connection_acceptor())
      return true; // mysqld_socket_acceptor would be freed in unireg_abort.
</code></pre>
<p>æŸ¥çœ‹Mysqld_socket_listenerä¸­çš„setup_listener()å…·ä½“çš„å®ç°ï¼š<br>é€šè¿‡ä»¥ä¸‹å…³é”®å˜é‡æ¥è®°å½•listenerçš„ä¸»è¦ä¿¡æ¯<br><strong>m_tcp_port</strong>:è®°å½•tcp socketè¿æ¥<br><strong>m_unix_sockname</strong>: ä½¿ç”¨çš„æ˜¯std::stringç±»å‹è®°å½•å¦‚æœä½¿ç”¨socketæ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶åï¼ˆè·¯å¾„+æ–‡ä»¶ï¼‰<br>é€šè¿‡ä½¿ç”¨m_socket_mapæ¥åŒºåˆ†æ‰€ä½¿ç”¨çš„è¿æ¥æ˜¯tcp_socketè¿˜æ˜¯unix socketçš„è¿æ¥æ–¹å¼</p>
<p>é€šè¿‡ä¸¤ä¸ªifåˆ¤æ–­ï¼Œåˆ†åˆ«åˆ¤æ–­æ˜¯å¦tcpè¿˜æ˜¯socketæ–‡ä»¶è¿æ¥ï¼Œå¹¶è®°å½•äºm_socket_mapä¸­ç„¶åé€šè¿‡è¿­ä»£å™¨å¾ªç¯å®ç°ç›‘å¬äº‹ä»¶çš„è®°å½•ï¼Œä»£ç é€šè¿‡pool_info_tå®ç°ç›‘å¬ç›¸åº”çš„äº‹ä»¶</p>
</li>
<li><p>UDPåˆå§‹åŒ–</p>
<pre class=" language-lang-C++"><code class="language-lang-C++">udf_init();
</code></pre>
</li>
<li><p>slaveåˆå§‹åŒ–</p>
</li>
</ul>
<pre class=" language-lang-c++"><code class="language-lang-c++">if (server_id != 0)
      init_slave(); /* Ignoring errors while configuring replication. */
</code></pre>
<h2 id="2-12-åˆå§‹åŒ–çº¿ç¨‹"><a href="#2-12-åˆå§‹åŒ–çº¿ç¨‹" class="headerlink" title="2.12 åˆå§‹åŒ–çº¿ç¨‹"></a>2.12 åˆå§‹åŒ–çº¿ç¨‹</h2><pre class=" language-lang-C++"><code class="language-lang-C++">#ifdef _WIN32
  create_shutdown_thread();
#endif
  start_handle_manager();

  create_compress_gtid_table_thread();

  sql_print_information(ER_DEFAULT(ER_STARTUP),
                        my_progname,
                        server_version,
#ifdef HAVE_SYS_UN_H
                        (opt_bootstrap ? (char*) "" : mysqld_unix_port),
#else
                        (char*) "",
#endif
                         mysqld_port,
                         MYSQL_COMPILATION_COMMENT);
#if defined(_WIN32)
  Service.SetRunning();
#endif
start_processing_signals();
</code></pre>
<h2 id="2-13å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯"><a href="#2-13å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯" class="headerlink" title="2.13å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯"></a>2.13å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯</h2><p><strong>æ­¤å¤„å¾ªç¯ç›‘å¬å®¢æˆ·ç«¯,ç›´åˆ°å®¢æˆ·ç«¯é€‰æ‹©é€€å‡ºå†è¿›è¡Œåç»­çš„æ“ä½œ,æ‰€ä»¥æ­¤å‡½æ•°ä¸€èˆ¬æƒ…å†µæ˜¯SQLçš„è€—æ—¶æœ€å¤š,æ‰§è¡Œä»£ç æœ€å¤šçš„åœ°æ–¹,ä¹Ÿæ˜¯mysqlçš„æ ¸å¿ƒç®—æ³•çš„ä»£ç </strong></p>
<p>æ­¤æ—¶è¦åˆ†ä¸ºä¸¤ç§ç³»ç»Ÿè®¨è®º:windowså’ŒLinux</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">#if defined(_WIN32)
  setup_conn_event_handler_threads();
#else
  mysql_mutex_lock(&LOCK_socket_listener_active);
  // Make it possible for the signal handler to kill the listener.
  socket_listener_active= true;
  mysql_mutex_unlock(&LOCK_socket_listener_active);

  if (opt_daemonize)
    mysqld::runtime::signal_parent(pipe_write_fd,1);

  mysqld_socket_acceptor->connection_event_loop();
#endif /* _WIN32 */
</code></pre>
<h3 id="2-13-1-linuxç³»ç»Ÿ"><a href="#2-13-1-linuxç³»ç»Ÿ" class="headerlink" title="2.13.1 linuxç³»ç»Ÿ"></a>2.13.1 linuxç³»ç»Ÿ</h3><pre class=" language-lang-c++"><code class="language-lang-c++">  mysql_mutex_lock(&LOCK_socket_listener_active);
  // Make it possible for the signal handler to kill the listener.
  socket_listener_active= true;
  //ä»è¿™é‡Œå¼€å§‹ï¼ŒæœåŠ¡å™¨å¯åŠ¨çº¿ç¨‹ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°shutdownåï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ
  mysql_mutex_unlock(&LOCK_socket_listener_active);

  if (opt_daemonize)
    mysqld::runtime::signal_parent(pipe_write_fd,1);

  mysqld_socket_acceptor->connection_event_loop();
</code></pre>
<p>é€šè¿‡nysqld_socket_acceptorå˜é‡å¼•ç”¨connect_event_loop()æ–¹æ³•ï¼Œå¾ªç¯ç›‘å¬å®¢æˆ·ç«¯æ¥çš„è¿æ¥ã€‚é€šè¿‡æ¨¡æ¿è°ƒç”¨å¦‚ä¸‹ ï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">/**
    Connection acceptor loop to accept connections from clients.
  */
  void connection_event_loop()
  {
    Connection_handler_manager *mgr= Connection_handler_manager::get_instance();
    while (!abort_loop)
    {
      Channel_info *channel_info= m_listener->listen_for_connection_event();
      if (channel_info != NULL)
        mgr->process_new_connection(channel_info);
    }
  }
</code></pre>
<p>é€šè¿‡æŸ¥çœ‹Mysqld_socket_listenerç±»ä¸­listen_for_connection_event()æ¥å¾—åˆ°Channel_infoä¿¡æ¯ï¼Œç„¶åé€šè¿‡process_new_connectionåˆ›å»ºæ–°çš„è¿æ¥æ¥ã€‚å†è¿›ä¸€æ­¥æŸ¥çœ‹Connection_handler_managerçš„process_new_connectionçš„æ–¹æ³•ï¼Œå‘ç°æœ‰m_connection_handler-&gt;add_connection(channel_info)åœ¨connection_handlerä¸­å¢åŠ ä¸€ä¸ªconnection,å¹¶è®°å½•æ•°é‡å¢åŠ :</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">void Connection_handler_manager::process_new_connection(Channel_info* channel_info)
{
  if (abort_loop || !check_and_incr_conn_count())
  {
    channel_info->send_error_and_close_channel(ER_CON_COUNT_ERROR, 0, true);
    delete channel_info;
    return;
  }

  if (m_connection_handler->add_connection(channel_info)) //å¢åŠ ä¸€ä¸ªconnection
  {
    inc_aborted_connects(); //è®°å½•æ•°é‡å¢åŠ 
    delete channel_info;
  }
}
</code></pre>
<p>å¯¹äºm_connection_handlerçš„add_connectionå¢åŠ connectionï¼Œçœ‹å…·ä½“çš„å®ç°ï¼š</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">bool Per_thread_connection_handler::add_connection(Channel_info* channel_info)
{
  int error= 0;
  my_thread_handle id;

  DBUG_ENTER("Per_thread_connection_handler::add_connection");

  // Simulate thread creation for test case before we check thread cache
  DBUG_EXECUTE_IF("fail_thread_create", error= 1; goto handle_error;);

  if (!check_idle_thread_and_enqueue_connection(channel_info))
    DBUG_RETURN(false);

  /*
    There are no idle threads avaliable to take up the new
    connection. Create a new thread to handle the connection
  */
  channel_info->set_prior_thr_create_utime();
  error= mysql_thread_create(key_thread_one_connection, &id,
                             &connection_attrib,
                             handle_connection,
                             (void*) channel_info);//ç»™å®šä¿¡æ¯ï¼Œåˆ›å»ºthreadè¿›ç¨‹

#ifndef DBUG_OFF
handle_error:
#endif // !DBUG_OFF

  if (error)
  {
    connection_errors_internal++;
    if (!create_thd_err_log_throttle.log())
      sql_print_error("Can't create thread to handle new connection(errno= %d)",
                      error);
    channel_info->send_error_and_close_channel(ER_CANT_CREATE_THREAD,
                                               error, true);
    Connection_handler_manager::dec_connection_count();
    DBUG_RETURN(true);
  }

  Global_THD_manager::get_instance()->inc_thread_created();
  DBUG_PRINT("info",("Thread created"));
  DBUG_RETURN(false);
}
</code></pre>
<p>åˆ›å»ºmysql_thread_createåˆ›å»ºthreadï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªæ–¹æ³•å‚æ•° handle_connectionï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°:</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">extern "C" void *handle_connection(void *arg)
{
//...
 THD *thd= init_new_thd(channel_info); //åˆ›å»ºçº¿ç¨‹å¯¹è±¡
 //...
mysql_thread_set_psi_id(thd->thread_id()); //åˆå§‹åŒ–çº¿ç¨‹ä¿¡æ¯ç­‰
    mysql_thread_set_psi_THD(thd);
    mysql_socket_set_thread_owner(
      thd->get_protocol_classic()->get_vio()->mysql_socket);

    thd_manager->add_thd(thd);//å‘çº¿ç¨‹ç®¡ç†å™¨å¢åŠ ä¸€ä¸ªçº¿ç¨‹ä¿¡æ¯

    if (thd_prepare_connection(thd))
      handler_manager->inc_aborted_connects();
    else
    {
      while (thd_connection_alive(thd))//å¾ªç¯æ£€æµ‹çº¿ç¨‹çŠ¶æ€
      {
        if (do_command(thd)) // æ‰§è¡Œç›¸å…³å‚æ•°å‘½ä»¤
          break;
      }
      end_connection(thd);
    }
    close_connection(thd, 0, false, false);

    thd->get_stmt_da()->reset_diagnostics_area();
    thd->release_resources();

//...
}
</code></pre>
<blockquote>
<p><a href="https://www.itread01.com/content/1546137727.html" target="_blank" rel="noopener">https://www.itread01.com/content/1546137727.html</a></p>
</blockquote>
<p>åœ¨handle_connectionä¸­,é€šè¿‡whileå›åœˆå‘¼å«sql_parse.ccä¸­çš„do_command()ï¼Œå›åœˆçš„ä½œç”¨æ˜¯ä»ä½¿ç”¨è€…è¾“å…¥çš„å¤šä¸ªå‘½ä»¤ä¸­ä¾æ¬¡é€‰æ‹©ä¸€ä¸ªå‘½ä»¤å»æ‰§è¡Œ.åœ¨do_command()ä¸­ï¼Œå‘¼å«Protocol_classic::get_command()ï¼Œè¿›å…¥Protocol_classic::parse_packet()è¯»å–ä¸€ä¸ªæ•°æ®åŒ…ï¼Œè§£æä¸ºcommandå‘½ä»¤,commandå‘½ä»¤æœ‰COM_QUERYã€ COM_FIELD_LISTã€COM_STMT_EXECUTEç­‰ã€‚åœ¨åœ¨do_command()ä¸­ç»§ç»­å‘¼å«sql_parse()æ¡£æ¡ˆä¸­çš„dispatch_command().åœ¨dispatch_command()ä¸­åŒ…å«äº†å„ç§å‹åˆ«çš„commandæ€ä¹ˆå¤„ç†çš„switch caseã€‚æ¯”å¦‚selectçš„è¿›å…¥case COM_QUERY.å…ˆalloc_query()å¤åˆ¶æ‰§è¡Œç»ªæ‰§è¡Œç»ªè¿‡æ¥çš„æŸ¥è¯¢å‘½ä»¤ã€‚å†è¿›å…¥sql_parse.ccæ¡£æ¡ˆä¸­çš„mysql_parse()æ–¹æ³•,å¼€å§‹sqlè¯­æ³•è§£æ.</p>
<p><strong>sqlè¯­æ³•è§£æé˜¶æ®µ</strong>:</p>
<ul>
<li>åœ¨mysql_parse()ä¸­,ä¸»è¦å®Œæˆä¸‰ä¸ªå·¥ä½œã€‚æ£€æŸ¥æŸ¥è¯¢å¿«å–é‡Œæ˜¯å¦æœ‰ä»¥å‰æ‰§è¡Œè¿‡çš„æŸä¸ªæŸ¥è¯¢ã€‚å‘¼å«è¯æ³•è§£æå™¨(é€šè¿‡parse_sql()æ–¹æ³•)ï¼Œå‘¼å«æŸ¥è¯¢ä¼˜åŒ–å™¨(é€šè¿‡mysql_execute_command()æ–¹æ³•).</li>
<li>ä¾æ¬¡è¿›å…¥sql_parse.ccä¸­çš„parse_sql(),è¿›å…¥sql_class.ccä¸­çš„THD::sql_parser() ,è¿›å…¥MYSQLparse().MYSQLparseæ˜¯ä¸ªå·¨é›†å®šä¹‰,ä¸º#define yyparse MYSQLparse.è¿™æ—¶è¿›å…¥yaccçš„sql_yacc.ccæ¡£æ¡ˆä¸­çš„è¯­æ³•è§£æå™¨å‡½å¼yyparse()å¼€å§‹è¯­æ³•è§£æ.è§£æå™¨åŸºäºsql_yacc.yyæ¡£æ¡ˆé€šè¿‡yaccç”Ÿæˆ.Mysqlçš„è¯æ³•è§£æå™¨æ²¡æœ‰ç”¨flex,è‡ªå·±ç¼–å†™çš„ã€‚è¯­æ³•è§£æå™¨ç”¨çš„Bison.</li>
<li>åœ¨mysql_parse()ä¸­ç»§ç»­å‘¼å«sql_parse()æ¡£æ¡ˆä¸­çš„mysql_execute_command()æ–¹æ³•,ä¸ºsqlä¼˜åŒ–åšå‡†å¤‡.åœ¨è¯¥æ–¹æ³•ä¸­,é€šè¿‡switch caseä¸ºå„ç§sqlå‘½ä»¤ä¼˜åŒ–åšå‡†å¤‡.å¦‚æœæ˜¯selectæŸ¥è¯¢ï¼Œè¿›å…¥case SQLCOM_SELECTï¼Œè¿›å…¥Sql_cmd_dml::execute()æ–¹æ³•.åœ¨execute()æ–¹æ³•ä¸­,å…ˆå‘¼å«precheck()æŸ¥è¯¢æ˜¯å¦æœ‰è®¸å¯æƒï¼Œç„¶åå‘¼å«open_tables_for_query()å¼€å¯è¦æŸ¥è¯¢çš„è¡¨ï¼Œç„¶åå‘¼å«lock_tables()é”å®šç›¸å…³çš„è¡¨ï¼Œç„¶åå‘¼å«Sql_cmd_dml::execute_inner(),è¿›å…¥çœŸæ­£çš„æŸ¥è¯¢ä¼˜åŒ–.</li>
</ul>
<p><strong>sqlæŸ¥è¯¢ä¼˜åŒ–é˜¶æ®µ</strong>:</p>
<ul>
<li>åœ¨Sql_cmd_dml::execute_inner()æ–¹æ³•ä¸­ï¼Œå…ˆè¿›å…¥sql_optimizer.ccæ¡£æ¡ˆä¸­çš„JOIN::optimize(),å†è¿›å…¥sql_executor.ccæ¡£æ¡ˆä¸­çš„JOIN::exec()å¼€å§‹æŸ¥è¯¢æ‰§è¡Œå™¨ã€‚</li>
</ul>
<p><strong>sqlæŸ¥è¯¢æ‰§è¡Œå™¨</strong>:</p>
<ul>
<li>åœ¨sql_executor.ccæ¡£æ¡ˆä¸­çš„JOIN::exec()ä¸­.å…ˆå‘¼å«send_result_set_metadata()ç”ŸæˆæŸ¥è¯¢æ ‡é¢˜ï¼Œå†è¿›å…¥sql_executor.ccä¸­çš„do_select()ç”ŸæˆæŸ¥è¯¢ç»“æœ.åœ¨do_select()ä¸­å‘¼å«sub_select ().åœ¨sub_select()ä¸­ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€æ¡è®°å½•.ç„¶åwhileå›åœˆæ¯æ¬¡è¯»å–ä¸€æ¡è®°å½•ã€‚</li>
</ul>
<p><strong>sqlæŸ¥è¯¢ä¼˜åŒ–é˜¶æ®µ</strong>:</p>
<ul>
<li>åœ¨Sql_cmd_dml::execute_inner()æ–¹æ³•ä¸­ï¼Œå…ˆè¿›å…¥sql_optimizer.ccæ¡£æ¡ˆä¸­çš„JOIN::optimize(),å†è¿›å…¥sql_executor.ccæ¡£æ¡ˆä¸­çš„JOIN::exec()å¼€å§‹æŸ¥è¯¢æ‰§è¡Œå™¨ã€‚</li>
</ul>
<p><strong>sqlæŸ¥è¯¢æ‰§è¡Œå™¨</strong>:</p>
<ul>
<li>åœ¨sql_executor.ccæ¡£æ¡ˆä¸­çš„JOIN::exec()ä¸­.å…ˆå‘¼å«send_result_set_metadata()ç”ŸæˆæŸ¥è¯¢æ ‡é¢˜ï¼Œå†è¿›å…¥sql_executor.ccä¸­çš„do_select()ç”ŸæˆæŸ¥è¯¢ç»“æœ.åœ¨do_select()ä¸­å‘¼å«sub_select ().åœ¨sub_select()ä¸­ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€æ¡è®°å½•.ç„¶åwhileå›åœˆæ¯æ¬¡è¯»å–ä¸€æ¡è®°å½•ã€‚</li>
</ul>
<h3 id="2-13-2-windowsç³»ç»Ÿ"><a href="#2-13-2-windowsç³»ç»Ÿ" class="headerlink" title="2.13.2 windowsç³»ç»Ÿ"></a>2.13.2 windowsç³»ç»Ÿ</h3><p>è°ƒç”¨å‡½æ•°<code>setup_conn_event_handler_threads();</code>,æ­¤æ—¶åˆ›å»ºç›‘å¬çº¿ç¨‹,å¯åŠ¨ä¸‰ä¸ªå•ç‹¬çº¿ç¨‹å¤„ç†ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œå³Mysqld_socket_listener/Named_pipe_listener/Shared_mem_listener,å‡½æ•°æ‰§è¡Œäº†çš„æ“ä½œå¦‚ä¸‹:</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">void setup_conn_event_handler_threads()
{
  my_thread_handle hThread;

  //...

  //äº’æ–¥é”
  mysql_mutex_lock(&LOCK_handler_count);
  handler_count=0;

  //ç±»ä¼¼äºä¸Šé¢Linuxçš„`å¯¹äºm_connection_handlerçš„add_connectionå¢åŠ connection`
  if (opt_enable_named_pipe)
  {
    int error= mysql_thread_create(key_thread_handle_con_namedpipes,
                                   &hThread, &connection_attrib,
                                   named_pipe_conn_event_handler,
                                   named_pipe_acceptor);
    if (!error)
      handler_count++;
    else
      sql_print_warning("Can't create thread to handle named pipes"
                        " (errno= %d)", error);
  }

  if (have_tcpip && !opt_disable_networking)
  {
    int error= mysql_thread_create(key_thread_handle_con_sockets,
                                   &hThread, &connection_attrib,
                                   socket_conn_event_handler,
                                   mysqld_socket_acceptor);
    if (!error)
      handler_count++;
    else
      sql_print_warning("Can't create thread to handle TCP/IP (errno= %d)",
                        error);
  }

  if (opt_enable_shared_memory)
  {
    int error= mysql_thread_create(key_thread_handle_con_sharedmem,
                                   &hThread, &connection_attrib,
                                   shared_mem_conn_event_handler,
                                   shared_mem_acceptor);
    if (!error)
      handler_count++;
    else
      sql_print_warning("Can't create thread to handle shared memory"
                        " (errno= %d)", error);
  }

  // Block until all connection listener threads have exited.
  while (handler_count > 0)
    mysql_cond_wait(&COND_handler_count, &LOCK_handler_count);
  mysql_mutex_unlock(&LOCK_handler_count);
  DBUG_VOID_RETURN;
}
</code></pre>
<p>æ‹¿ç¬¬ä¸€ä¸ª<code>opt_enable_named_pipe</code>ä¸ºä¾‹,è°ƒç”¨äº†â€™æ­»â€™å¾ªç¯å‡½æ•°<code>named_pipe_conn_event_handler</code>:</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">extern "C" void *named_pipe_conn_event_handler(void *arg)
{
  my_thread_init();

  Connection_acceptor<Named_pipe_listener> *conn_acceptor=
    static_cast<Connection_acceptor<Named_pipe_listener>*>(arg);
  conn_acceptor->connection_event_loop();

  decrement_handler_count();
  my_thread_end();
  return 0;
}
</code></pre>
<p>å’ŒLinuxåˆ†æä¸€æ ·,<code>conn_acceptor-&gt;connection_event_loop();</code>è¿›è¡Œâ€™é€šè¿‡nysqld_socket_acceptorå˜é‡å¼•ç”¨connect_event_loop()æ–¹æ³•ï¼Œå¾ªç¯ç›‘å¬å®¢æˆ·ç«¯æ¥çš„è¿æ¥â€™,æ¥ç€å°±å›åˆ°äº†Linuxçš„åˆ†æ</p>
<h2 id="2-14-åç»­çš„ç»“æŸæ”¶å°¾å·¥ä½œ"><a href="#2-14-åç»­çš„ç»“æŸæ”¶å°¾å·¥ä½œ" class="headerlink" title="2.14 åç»­çš„ç»“æŸæ”¶å°¾å·¥ä½œ"></a>2.14 åç»­çš„ç»“æŸæ”¶å°¾å·¥ä½œ</h2><p>ç•¥</p>
<h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>æœ¬æ¬¡æºç çš„åˆ†æä¸»è¦æ˜¯é’ˆå¯¹mainå‡½æ•°çš„åˆ†æ,åˆæ­¥äº†è§£äº†mainå‡½æ•°çš„å·¥ä½œæµç¨‹,åç»­å°†ä¼šä¸»è¦é’ˆå¯¹Innodbå¼•æ“è¿›è¡Œåˆ†æ</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>manimTutorial</title>
    <url>/2020/03/26/manimtutorial/</url>
    <content><![CDATA[<h1 id="manimåŸºç¡€æ•™ç¨‹"><a href="#manimåŸºç¡€æ•™ç¨‹" class="headerlink" title="manimåŸºç¡€æ•™ç¨‹"></a>manimåŸºç¡€æ•™ç¨‹</h1><p>æ³¨æ„ï¼š  </p>
<ol>
<li><p>æœ¬æ–‡å‚è€ƒYouTubeä¸»Theorem of Beethovençš„è§†é¢‘ä¸ä»£ç ç„¶åè‡ªå·±ç»§ç»­ç ”ç©¶å¾—åˆ°çš„ï¼Œæœ‰äº›å›¾ç‰‡æ˜¯taè§†é¢‘æˆªå›¾å¾—åˆ°çš„ï¼Œå¯ä»¥è¯´æ˜¯ä»–çš„æ•™ç¨‹æ–‡å­—åŒ–åçš„æ±‰åŒ–ç‰ˆï¼Œæ ¹æ®GitHubä¸»é¡µï¼Œä»–æ¥è‡ªå¢¨è¥¿å“¥å›½ç«‹è‡ªæ²»å¤§å­¦ï¼Œæ„Ÿè°¢å¤–å›½å¤§ä½¬çš„åŠ›é‡ï¼Œé™¤äº†è‡ªå·±å†™çš„éƒ¨åˆ†çš„ä»£ç ï¼Œæœ‰äº›ä»£ç æ¥è‡ªTAçš„è§†é¢‘ä¸GitHubï¼Œå…¶äºº<a href="https://github.com/Elteoremadebeethoven" target="_blank" rel="noopener">GitHubä¸»é¡µ</a>ï¼Œå¤§å®¶æœ‰æ¡ä»¶å¯ä»¥æ”¯æŒä¸€ä¸‹ä»–çš„YouTube<br>å…¶æ•™ç¨‹ä¹Ÿè¢«æ¬è¿åˆ°Bç«™:</p>
<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;box-shadow: 10px 10px 5px #888888;">
       <iframe src="//player.bilibili.com/player.html?aid=64023740&amp;bvid=BV1W4411Z7Zt&amp;cid=158849334&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;border-radius: 8px;">
       </iframe>
   </div>
</li>
<li><p>æœ¬äººå°†äº2019å¹´9æœˆ2æ—¥å¼€å­¦ï¼Œåˆ°æ—¶å€™å¯èƒ½å¿™äºå­¦ä¸šï¼Œä¸èƒ½åšåˆ°è·Ÿè¿›è§†é¢‘æ›´æ–°æ•™ç¨‹ï¼Œå…¶å®ç›®å‰æ•™ç¨‹å·²ç»å¤§æ¦‚æ¶µç›–70%çš„ä¸œè¥¿ï¼Œåˆ°åé¢ä¸»è¦æ˜¯è‡ªå·±è¯»æºä»£ç è‡ªå·±åˆ†æï¼ŒpythonåŸºç¡€å¾ˆé‡è¦ï¼Œæœ‰æ—¶é—´æˆ‘è¿˜æ˜¯ä¼šå°½é‡æ›´æ–°çš„  </p>
</li>
<li>æ­¤æ•™ç¨‹è™½åœ¨å¼€æºç¤¾åŒºï¼Œä½†æ˜¯è¯·å‹¿æœªç»æˆ‘å…è®¸è½¬è½½ï¼Œå¸Œæœ›å¤§å®¶èƒ½å…±åŒç»´æŠ¤ä¸ªäººåŠ³åŠ¨æˆæœä¸å¼€æºç²¾ç¥</li>
<li>å¦‚æœæ–‡æ¡£æœ‰é”™è¯¯æˆ–æ¼æ´ï¼Œæˆ–è€…æœ‰é—®é¢˜ï¼Œæ¬¢è¿åœ¨issueä¸­æå‡ºï¼Œå¤§å®¶ä¸€èµ·è®¨è®ºï¼Œå…±åŒåˆ›å»ºè‰¯å¥½çš„å­¦ä¹ ç¯å¢ƒ</li>
</ol>
<h2 id="1-æ–‡ä»¶çš„æ‰§è¡Œ"><a href="#1-æ–‡ä»¶çš„æ‰§è¡Œ" class="headerlink" title="1. æ–‡ä»¶çš„æ‰§è¡Œ"></a>1. æ–‡ä»¶çš„æ‰§è¡Œ</h2><p><strong>å‘½ä»¤è¡Œæ‰§è¡Œï¼špython -m manim \path\to\yourfile.py [className] [-params]</strong></p>
<p><em>usage: manim.py [-h] [-p] [-w] [-s] [-l] [-m] [â€”high_quality] [-g] [-i] [-f]</em><br>                <em>[-t] [-q] [-a] [-o FILE_NAME] [-n START_AT_ANIMATION_NUMBER]</em><br>                <em>[-r RESOLUTION] [-c COLOR] [â€”sound] [â€”leave_progress_bars]</em><br>                <em>[â€”media_dir MEDIA_DIR]</em><br>                <em>[â€”video_dir VIDEO_DIR | â€”video_output_dir VIDEO_OUTPUT_DIR]</em><br>                <em>[â€”tex_dir TEX_DIR] [â€”livestream] [â€”to-twitch]</em><br>                <em>[â€”with-key TWITCH_KEY]</em><br>                <em>[file] [scene_names [scene_names â€¦]]</em></p>
<p><em>positional arguments:</em><br>  <em>file                  path to file holding the python code for the scene</em><br>  <em>scene_names           Name of the Scene class you want to see</em></p>
<p><em>optional arguments:</em><br>  <em>-h, â€”help            show this help message and exit</em><br>  <em>-p, â€”preview         Automatically open the saved file once its done</em><br>  <em>-w, â€”write_to_movie  Render the scene as a movie file</em><br>  <em>-s, â€”save_last_frame</em>  <em>Save the last frame</em><br>  <em>-l, â€”low_quality     Render at a low quality (for faster rendering)</em><br>  <em>-m, â€”medium_quality  Render at a medium quality</em><br>  <em>â€”high_quality        Render at a high quality</em><br>  <em>-g, â€”save_pngs       Save each frame as a png</em><br>  <em>-i, â€”save_as_gif     Save the video as gif</em><br>  <em>-f, â€”show_file_in_finder</em> <em>Show the output file in finder</em><br>  <em>-t, â€”transparent     Render to a movie file with an alpha channel</em><br>  <em>-q, â€”quiet</em><br>  <em>-a, â€”write_all       Write all the scenes from a file</em><br>  <em>-o FILE_NAME, â€”file_name FILE_NAME</em>  <em>Specify the name of the output file, ifit should be</em><br>                        <em>different from the scene class name</em><br>  <em>-n START_AT_ANIMATION_NUMBER, â€”start_at_animation_number     START_AT_ANIMATION_NUMBER</em><br>                        <em>Start rendering not from the first animation,   butfrom another, specified by its index. If you passin two comma separated values, e.g. â€œ3,6â€, it will end the rendering at the second value</em><br>  <em>-r RESOLUTION, â€”resolution RESOLUTION</em> <em>Resolution, passed as â€œheight,widthâ€</em><br>  <em>-c COLOR, â€”color COLOR</em>  <em>Background color</em><br>  <em>â€”sound               Play a success/failure sound</em><br>  <em>â€”leave_progress_bars</em> <em>Leave progress bars displayed in terminal</em><br>  <em>â€”media_dir MEDIA_DIR</em> <em>directory to write media</em><br>  <em>â€”video_dir VIDEO_DIR</em> <em>directory to write file tree for video</em><br>  <em>â€”video_output_dir VIDEO_OUTPUT_DIR</em>  <em>directory to write video</em><br>  <em>â€”tex_dir TEX_DIR     directory to write tex</em><br>  <em>â€”livestream          Run in streaming mode</em><br>  <em>â€”to-twitch           Stream to twitch</em><br>  <em>â€”with-key TWITCH_KEY     Stream key for twitch</em>  </p>
<h3 id="1-1-ä¿å­˜ä¸ºè§†é¢‘å¹¶ç«‹å³æ’­æ”¾"><a href="#1-1-ä¿å­˜ä¸ºè§†é¢‘å¹¶ç«‹å³æ’­æ”¾" class="headerlink" title="1.1 ä¿å­˜ä¸ºè§†é¢‘å¹¶ç«‹å³æ’­æ”¾"></a>1.1 <strong>ä¿å­˜ä¸ºè§†é¢‘å¹¶ç«‹å³æ’­æ”¾</strong></h3><p>å‚æ•°-p</p>
<p>å¦‚æœæœ‰å¤šä¸ªç»˜å›¾ç±»ä¼šå‡ºç°åˆ—è¡¨è®©ä½ é€‰æ‹©</p>
<p>ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šç±»å(ç¤ºä¾‹ä¸ºExampleç±»)ç”Ÿæˆå¯¹åº”çš„ç±»åçš„è§†é¢‘</p>
<ul>
<li><p>fps = 15,å®½854ï¼Œé«˜480ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -pl
</code></pre>
</li>
<li><p>fps = 30,å®½1280ï¼Œé«˜720ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -pm
</code></pre>
</li>
<li><p>fps = 60,å®½2560ï¼Œé«˜1440ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -p
</code></pre>
</li>
</ul>
<h3 id="1-2-ä¿ç•™å¸§"><a href="#1-2-ä¿ç•™å¸§" class="headerlink" title="1.2 ä¿ç•™å¸§"></a>1.2 <strong>ä¿ç•™å¸§</strong></h3><p>-sä¿ç•™æœ€åä¸€å¸§</p>
<p>å½“æœ‰å¤šä¸ªç±»çš„æ—¶å€™ä¼šå‡ºç°é€‰æ‹©é¡¹è®©ä½ é€‰æ‹©ä¿ç•™å“ªå‡ ä¸ªç»˜å›¾ç±»çš„æœ€åä¸€å¸§</p>
<ul>
<li><p>ä¿ç•™æœ€åä¸€å¸§å¹¶ç«‹å³æŸ¥çœ‹ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -ps
</code></pre>
</li>
<li><p>ä¿ç•™å…¨éƒ¨ç»˜å›¾ç±»ä¸ºè§†é¢‘ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -al
python -m manim \path\to\yourfile.py Example -am
python -m manim \path\to\yourfile.py Example -a
</code></pre>
</li>
<li><p>ä¿ç•™å…¨éƒ¨ç»˜å›¾ç±»æœ€åä¸€å¸§ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -as
</code></pre>
</li>
</ul>
<h3 id="1-3-è§†é¢‘å°ºå¯¸"><a href="#1-3-è§†é¢‘å°ºå¯¸" class="headerlink" title="1.3 è§†é¢‘å°ºå¯¸"></a>1.3 <strong>è§†é¢‘å°ºå¯¸</strong></h3><p>-r HEIGHT WIDTH</p>
<ul>
<li><p>é«˜åº¦500 å®½åº¦600</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -plr 500 600
</code></pre>
</li>
<li><p>é»˜è®¤ä¸º16/9å› æ­¤é»˜è®¤å¯ä»¥ä»…è®¾ç½®é«˜åº¦ä¸éœ€è¦è®¾ç½®å®½åº¦</p>
<p>é«˜åº¦ä¸º500çš„è§†é¢‘ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">python -m manim \path\to\yourfile.py Example -plr 500
</code></pre>
</li>
</ul>
<h3 id="1-4-è§†é¢‘é€šé“"><a href="#1-4-è§†é¢‘é€šé“" class="headerlink" title="1.4 è§†é¢‘é€šé“"></a>1.4 <strong>è§†é¢‘é€šé“</strong></h3><p>-t, â€”transparent         alphaé€šé“ï¼Œæ‰©å±•åä¸ºmov</p>
<h3 id="1-5-ä¿ç•™è¿›åº¦æ˜¾ç¤ºæ¡"><a href="#1-5-ä¿ç•™è¿›åº¦æ˜¾ç¤ºæ¡" class="headerlink" title="1.5 ä¿ç•™è¿›åº¦æ˜¾ç¤ºæ¡"></a>1.5 <strong>ä¿ç•™è¿›åº¦æ˜¾ç¤ºæ¡</strong></h3><p>  â€”leave_progress_barsï¼š</p>
<pre><code>python -m manim \path\to\yourfile.py Example -pl --leave_progress_bars
Media will be written to ./media\. You can change this behavior with the --media_dir flag.
Animation 0: WriteTextMobject, etc.: 100%|##############################################################################################| 15/15 [00:00&lt;00:00, 32.48it/s] 

File ready at \path\to\video.mp4

Played 2 animations
</code></pre><h3 id="1-6-ä»æŸä¸€ä¸ªåŠ¨ç”»çŠ¶æ€ï¼ˆanimationï¼‰å¼€å§‹å­˜ä¸ºè§†é¢‘"><a href="#1-6-ä»æŸä¸€ä¸ªåŠ¨ç”»çŠ¶æ€ï¼ˆanimationï¼‰å¼€å§‹å­˜ä¸ºè§†é¢‘" class="headerlink" title="1.6 ä»æŸä¸€ä¸ªåŠ¨ç”»çŠ¶æ€ï¼ˆanimationï¼‰å¼€å§‹å­˜ä¸ºè§†é¢‘"></a>1.6 ä»æŸä¸€ä¸ªåŠ¨ç”»çŠ¶æ€ï¼ˆanimationï¼‰å¼€å§‹å­˜ä¸ºè§†é¢‘</h3><p> -n START_AT_ANIMATION_NUMBER, â€”start_at_animation_number START_AT_ANIMATION_NUMBER</p>
<p>ä¸æ˜¯ä»ç¬¬ä¸€ä¸ªåŠ¨ç”»å¼€å§‹æ¸²æŸ“ï¼Œè€Œæ˜¯ä»ç´¢å¼•æŒ‡å®šçš„å¦ä¸€ä¸ªåŠ¨ç”»å¼€å§‹æ¸²æŸ“ã€‚ å¦‚æœæ‚¨ä¼ å…¥ä¸¤ä¸ªé€—å·åˆ†éš”å€¼ï¼Œä¾‹å¦‚ â€œ3,6â€ï¼Œå®ƒå°†ä»¥ç¬¬äºŒä¸ªå€¼æ¸²æŸ“</p>
<pre class=" language-lang-python"><code class="language-lang-python">class ShowGraph(Scene): 
    def construct(self): 
        print("dot = Dot()")
        dot = Dot()
        self.wait(2)

        print("dot.to_edge(UL)")
        dot.to_edge(UL)
        self.play(FadeIn(dot))
        self.wait(2)

        print("text = TextMobject(\"text\")")
        text = TextMobject("text")
        self.wait(2)

        print("text.to_corner(UP)")
        text.to_corner(UP)
        self.play(Write(text))
        self.wait(2)
</code></pre>
<p>ä¸åŠ èµ·å§‹æ¸²æŸ“è¿è¡Œå¦‚ä¸‹ï¼š</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">PS E:\programing-engineering\manim-tutorial\manim> python -m manim .\1_text_format.py ShowGraph -pl --leave_progress_bars      
Media will be written to ./media\. You can change this behavior with the --media_dir flag.
dot = Dot()
dot.to_edge(UL)
Animation 1: FadeInDot: 100%|###########################################################################################################| 15/15 [00:00<00:00, 64.27it/s] 
text = TextMobject("text")
text.to_corner(UP)
Animation 4: WriteTextMobject: 100%|####################################################################################################| 15/15 [00:00<00:00, 39.79it/s] 

File ready at E:\programing-engineering\manim-tutorial\manim\media\videos\1_text_format\480p15\ShowGraph.mp4

Played 6 animations
</code></pre>
<p>å¢åŠ èµ·å§‹æ¸²æŸ“ï¼š</p>
<p>ä»åˆšæ‰çš„æ²¡æœ‰æ¸²æŸ“çš„è¾“å‡ºå¯ä»¥çœ‹å‡ºanimation 1æ˜¯dot.to_edge(UL)åçš„FadeInDotåŠ¨ç”»ï¼Œæ‰€ä»¥å¦‚æœ-n 2åˆ™ä»animation 2å¼€å§‹ï¼Œæ‰€ä»¥å¼€å§‹dotå°±å·²ç»æ˜¾ç¤ºåœ¨å±å¹•ä¸Šé¢äº†</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">PS E:\programing-engineering\manim-tutorial\manim> python -m manim .\1_text_format.py ShowGraph -pl -n 2  --leave_progress_bars
Media will be written to ./media\. You can change this behavior with the --media_dir flag.
dot = Dot()
dot.to_edge(UL)
Animation 1: FadeInDot: 100%|###########################################################################################################| 15/15 [00:00<00:00, 84.02it/s] 
text = TextMobject("text")
text.to_corner(UP)
Animation 4: WriteTextMobject: 100%|####################################################################################################| 15/15 [00:00<00:00, 58.52it/s] 

File ready at E:\programing-engineering\manim-tutorial\manim\media\videos\1_text_format\480p15\ShowGraph.mp4

Played 6 animations
</code></pre>
<p><img src="1565761708445.png" alt="1565761708445"></p>
<p>å…¶ä»–çš„å‚æ•°ä¸ä¸€ä¸€ä»‹ç»ï¼Œè‡ªè¡ŒæŸ¥çœ‹è‹±æ–‡è¯´æ˜</p>
<h3 id="1-7-é»˜è®¤æ˜¾ç¤ºè¿›åº¦æ¡"><a href="#1-7-é»˜è®¤æ˜¾ç¤ºè¿›åº¦æ¡" class="headerlink" title="1.7 é»˜è®¤æ˜¾ç¤ºè¿›åº¦æ¡"></a>1.7 é»˜è®¤æ˜¾ç¤ºè¿›åº¦æ¡</h3><p>é»˜è®¤è®¾ç½®åœ¨manimlib/config.pyï¼Œmanimlib/extract_secne.pyä¸manimlib/scene.pyé‡Œè¿›è¡Œå®šä¹‰ï¼Œå¯ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶è¿›è¡Œä¿®æ”¹é»˜è®¤é…ç½®,æ³¨æ„å› ä¸ºä¿®æ”¹æºç æ‰€ä»¥è¦å°å¿ƒ</p>
<p>ä¾‹å¦‚ï¼šåœ¨ä¸Šé¢çš„ä¸‰ä¸ªæ–‡ä»¶é‡Œï¼š</p>
<p>å°†é‡Œé¢æ‰€æœ‰çš„â€œâ€”leave_progress_barsâ€å’Œâ€œleave_progress_barsâ€ä¿®æ”¹ä¸ºâ€œâ€”remove_progress_barsâ€ä¸â€œremove__progress_barsâ€,åŒæ—¶å°†</p>
<p><img src="1567668580431.png" alt="1567668580431"></p>
<p>æ­¤å¤„çš„actionæ”¹æˆä¸æ˜¾ç¤º</p>
<p>è¿™æ ·å¦‚æœåŠ ä¸Šâ€”remove_progress_barså°±ä¸ä¼šæ˜¾ç¤ºè¿›åº¦æ¡äº†ï¼Œè€Œé»˜è®¤æ˜¯æ˜¾ç¤ºè¿›åº¦æ¡çš„</p>
<h3 id="1-8-æ”¹å˜è§†é¢‘å­˜æ”¾ä½ç½®"><a href="#1-8-æ”¹å˜è§†é¢‘å­˜æ”¾ä½ç½®" class="headerlink" title="1.8 æ”¹å˜è§†é¢‘å­˜æ”¾ä½ç½®"></a>1.8 æ”¹å˜è§†é¢‘å­˜æ”¾ä½ç½®</h3><p>æ”¹å˜<em>manimlib/constants.py</em>ä¸­çš„ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">if not os.path.isdir(MEDIA_DIR):
    MEDIA_DIR = "./media"
</code></pre>
<p> æ”¹<code>./media</code>ä¸ºä½ æƒ³è¦å­˜æ”¾çš„ä½ç½®</p>
<h3 id="1-9-å­˜ä¸ºgif"><a href="#1-9-å­˜ä¸ºgif" class="headerlink" title="1.9 å­˜ä¸ºgif"></a>1.9 å­˜ä¸ºgif</h3><p>You can use <code>python -m manim animation.py name_scene -im</code> to render gif medium quality, or <code>python -m manim animation.py name_scene -gm</code> to render all frames as images, the images are saved in a folder</p>
<h2 id="2-æ˜¾ç¤ºæ“ä½œ"><a href="#2-æ˜¾ç¤ºæ“ä½œ" class="headerlink" title="2. æ˜¾ç¤ºæ“ä½œ"></a>2. æ˜¾ç¤ºæ“ä½œ</h2><h3 id="2-1-åŸºæœ¬æ­¥éª¤ï¼ˆä»¥TextMobjectä¸ºä¾‹ï¼‰"><a href="#2-1-åŸºæœ¬æ­¥éª¤ï¼ˆä»¥TextMobjectä¸ºä¾‹ï¼‰" class="headerlink" title="2.1 åŸºæœ¬æ­¥éª¤ï¼ˆä»¥TextMobjectä¸ºä¾‹ï¼‰"></a>2.1 åŸºæœ¬æ­¥éª¤ï¼ˆä»¥TextMobjectä¸ºä¾‹ï¼‰</h3><pre class=" language-lang-python"><code class="language-lang-python">from manimlib.imports import *

class WriteText(Scene): 
    def construct(self): 
        text = TextMobject("A Text")
        text.to_edge(UP)
        text.move_to(1*UP+0.1*RIGHT)
          //ä»¥playä¸ºä¾‹
        self.play(SomeWriteMethod(text),run_time = seconds)
        self.wait(seconds)
        self.remove(text)
</code></pre>
<h3 id="2-5-ä½ç½®ç›¸å…³çš„å‡½æ•°"><a href="#2-5-ä½ç½®ç›¸å…³çš„å‡½æ•°" class="headerlink" title="2.5 ä½ç½®ç›¸å…³çš„å‡½æ•°"></a>2.5 ä½ç½®ç›¸å…³çš„å‡½æ•°</h3><h4 id="2-5-1to-edge-å’Œto-corner"><a href="#2-5-1to-edge-å’Œto-corner" class="headerlink" title="2.5.1to_edge()å’Œto_corner()"></a><strong>2.5.1</strong>to_edge()å’Œto_corner()</h4><p><strong>someObject.to_edge(DIRECTIONçš„çº¿æ€§ç»„åˆ,buff = number)</strong></p>
<p><strong>someObject.to_corner(DIRECTIONçš„å››ä¸ªç»„åˆæ–¹å‘,buff = number)</strong></p>
<p>to_edgeå‚æ•°å¯ä»¥æ˜¯<strong>ä»»æ„æ–¹å‘</strong>(æ–¹å‘æœ‰å“ªäº›è§é™„å½•ä¸­æ–¹å‘å¸¸æ•°åˆ—è¡¨)ä»¥åŠå®ƒä»¬çš„çº¿æ€§ç»„åˆï¼Œå¦‚<strong>0.1*RIGHT+0.2*UP</strong>ï¼Œbuff ä¸¤è€…çš„è¾¹ç¼˜çš„è·ç¦»</p>
<p>to_cornerä»…æ¥å—ç»„åˆæ–¹å‘<strong>URï¼ŒULï¼ŒDRï¼ŒDL</strong></p>
<p><img src="1565752494266.png" alt="1565752494266"></p>
<ul>
<li>å¦‚æœæ²¡æœ‰to_edgeå’Œto_centeré»˜è®¤ä¸ºä¸­é—´ï¼ˆ<strong>ORIGIN</strong>ï¼‰</li>
<li><strong>someObject.to_edge(UP+RIGHT)</strong>å®Œå…¨ç­‰æ•ˆäº<strong>someObject.to_corner(UR)</strong>,å…¶ä½™å››ä¸ªæ–¹å‘åŒç†</li>
</ul>
<h4 id="2-5-2-move-to"><a href="#2-5-2-move-to" class="headerlink" title="2.5.2 move_to()"></a>2.5.2 move_to()</h4><p><strong>someObject.move_to(DIRECTIONçš„çº¿æ€§ç»„åˆ or numpyçš„å‘é‡)</strong></p>
<p>åœ¨å½“å‰ä½ç½®ç§»åŠ¨åˆ°å¯¹åº”çš„ä½ç½®</p>
<p>å‚æ•°å¯ä»¥æ˜¯<strong>UPï¼ŒDOWNï¼ŒLEFTï¼ŒRIGHTç­‰</strong>çš„å€æ•°ï¼Œå¯ä»¥éæ•´æ•°ï¼Œå•ä½å®½åº¦å¤§æ¦‚æ˜¯4å€é»˜è®¤å­—ä½“çš„è¡Œé«˜ï¼Œ<strong>ä¸‹é¢åªè¦è·Ÿè¿™å…«ä¸ªä¸ªå›ºå®šå€¼æœ‰å…³çš„å‡æ˜¯å¦‚æ­¤</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">someObject.move_to(UP+2*RIGHT)
</code></pre>
<p>å‚æ•°ä¹Ÿå¯ä»¥æ˜¯numpyå‘é‡ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">vec = np.array([1,2,0])
someObject.move_to(vec)
</code></pre>
<p>å› ä¸ºå›¾æ¡ˆçš„ä½ç½®å‘é‡å¯ä»¥ç”±get_centerå¾—åˆ°ï¼Œæ‰€ä»¥å¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">someObject.move_to(someObject2.get_center()+2*RIGHT)
</code></pre>
<p>å‚æ•°è¿˜å¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªå›¾æ¡ˆï¼Œè¡¨ç¤ºçš„ä½ç½®æ˜¯è¯¥å›¾æ¡ˆçš„å‡ ä½•ä¸­å¿ƒï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">someObject.move_to(someObject2)
</code></pre>
<h4 id="2-5-3-next-to"><a href="#2-5-3-next-to" class="headerlink" title="2.5.3 next_to()"></a>2.5.3 next_to()</h4><p><strong>someObject1.next_to(someObject2,DIRECTION,buff=number)</strong> </p>
<p>someObject1å¯¹äºsomeObject2çš„ç›¸å¯¹ä½ç½®</p>
<p>ä¸move_toçš„åŒºåˆ«åœ¨äºï¼Œnext_toè¡¨ç¤ºçš„æ˜¯è¾¹ç•Œçš„è·ç¦»ï¼Œè€Œä¸æ˜¯ä¸­å¿ƒè·ç¦»</p>
<p><img src="1565755487243.png" alt="1565755487243"></p>
<p>å¦‚ï¼štext1.next_to(text2,LEFT,buff=2) ï¼š</p>
<p><img src="1565702556749.png" alt="1565702556749"></p>
<h4 id="2-5-4-shift"><a href="#2-5-4-shift" class="headerlink" title="2.5.4 shift()"></a>2.5.4 shift()</h4><p><strong>someObject.shift(DIRECTION*number)ï¼š</strong></p>
<p>è‡ªå·±å‚ç›´æ–¹å‘å¹³ç§»</p>
<h4 id="2-5-5-rotate"><a href="#2-5-5-rotate" class="headerlink" title="2.5.5 rotate()"></a>2.5.5 rotate()</h4><p><strong>someObject.rotate(PI*numberæˆ–è€…numberï¼Œpoint)ï¼š</strong> </p>
<p>é€†æ—¶é’ˆæ—‹è½¬</p>
<p>å¦‚æœç›¸å¯¹å›¾æ¡ˆä¸ºç©ºï¼Œåˆ™è‡ªæ—‹</p>
<p>å¦‚ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class RotateObject(Scene):
    def construct(self):
        textM = TextMobject("Text")
        textC = TextMobject("Reference text")
        textM.shift(UP)
        textM.rotate(PI/4) 
        self.play(Write(textM),Write(textC))
        self.wait(2)
</code></pre>
<p><img src="1565702942360.png" alt="1565702942360"></p>
<p>å¦åˆ™ç›¸å¯¹ ç›¸å¯¹å›¾æ¡ˆæ—‹è½¬ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class RotateObject(Scene):
    def construct(self):
        textM = TextMobject("Text")
        textC = TextMobject("Reference text")
        textM.rotate(PI/4,textC) 
        self.play(Write(textM),Write(textC))
        self.wait(2)
</code></pre>
<h4 id="2-5-6-flip"><a href="#2-5-6-flip" class="headerlink" title="2.5.6 flip()"></a>2.5.6 flip()</h4><p><strong>someObject.flip(DIRECTION)ï¼š</strong></p>
<p>æŒ‰ç…§çŸ¢é‡é‡æ–¹å‘ç¿»è½¬180åº¦ï¼Œéµå¾ªå³æ‰‹å®šåˆ™ã€‚</p>
<p>å¦‚text.flip(UP)ï¼š</p>
<p><img src="1565703056789.png" alt="1565703056789"></p>
<h3 id="2-6-æ’­æ”¾åŠ¨ç”»"><a href="#2-6-æ’­æ”¾åŠ¨ç”»" class="headerlink" title="2.6 æ’­æ”¾åŠ¨ç”»"></a>2.6 æ’­æ”¾åŠ¨ç”»</h3><h4 id="2-6-1-play"><a href="#2-6-1-play" class="headerlink" title="2.6.1 play()"></a>2.6.1 <strong>play</strong>()</h4><p>åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥æ˜¯å¤šä¸ªtextï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å¤šçº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å°±ä¼šè¿›å…¥ä¸‹ä¸€è¡Œæ“ä½œ</p>
<p><em>ï¼ˆå¦‚æœä¸‹ä¸€ä¸ªæ“ä½œæ˜¯removeæ‰textè€Œæ²¡æœ‰ä½¿ç”¨waitå‡½æ•°è¿›è¡Œç­‰å¾…ï¼Œæœ€ç»ˆæ•ˆæœä¼šå˜æˆç«‹å³é”€æ¯textå³æ²¡æœ‰æ˜¾ç¤ºtextï¼Œä¸‹é¢çš„addä¹ŸåŒç†ï¼‰</em></p>
<ol>
<li><p><strong>play(SomePlayMethod(someObject),run_time = seconds)ï¼š</strong>æ’­æ”¾æŸç§åŠ¨ç”»æ–¹æ³•</p>
<p>å¦‚æœå¸Œæœ›å¹¶è¡ŒåŒæ—¶æ’­æ”¾å¤šä¸ªåŠ¨ç”»ï¼Œä»…ä»…æ˜¯pythonè¯­æ³•é—®é¢˜ï¼Œç»™å‡ºå¦‚ä¸‹ä¾‹å­æ¨¡æ¿ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class concurrent(Scene):
    def construct(self):
        dot1 = Dot()
        dot2 = Dot()
        dot2.shift(UP)
        dot3 = Dot()
        dot3.shift(DOWN)

        # å•ä¸ªåŠ¨ç”»çš„æ¼”ç¤º
        self.play(Write(dot1))
        # å¤šä¸ªåŠ¨ç”»æ¼”ç¤º
        self.play(*[
            Transform(i.copy(),j) for i,j in zip([dot1,dot1],[dot2,dot3])
            ])# æ•…æ„ä½¿ç”¨i,jæ˜¯ä¸ºäº†æ˜¾ç¤ºzipçš„ä½¿ç”¨

        self.wait()
</code></pre>
</li>
<li><p><strong>play(someObjectX.functionX,functionParamX,</strong></p>
<p>â€‹     <strong>someObjectX.functionX,functionParamX,</strong></p>
<p><strong>â€¦â€¦</strong></p>
<p><strong>run_time=seconds):åŒæ—¶æ”¹å˜æŸç§æˆ–å¤šç§å±æ€§</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">class ChangeColorAndSizeAnimation(Scene):
    def construct(self):
        text = TextMobject("Text")
        text.scale(2)
        text.shift(LEFT*2)
        self.play(Write(text))
        self.wait()
        self.play(
                text.shift, RIGHT*2,
                text.scale, 2,
                text.set_color, RED,
                run_time=2,
            )
        self.wait()
</code></pre>
</li>
</ol>
<h5 id="2-6-1-1-æ˜¾ç¤ºåŠ¨ç”»å‡½æ•°SomePlayMethods"><a href="#2-6-1-1-æ˜¾ç¤ºåŠ¨ç”»å‡½æ•°SomePlayMethods" class="headerlink" title="2.6.1.1 æ˜¾ç¤ºåŠ¨ç”»å‡½æ•°SomePlayMethods"></a>2.6.1.1 æ˜¾ç¤ºåŠ¨ç”»å‡½æ•°SomePlayMethods</h5><p>åŠ¨ç”»å‡½æ•°ï¼Œä¸»è¦åŒ…å«ä¸‹åˆ—å‡ ä¸ªï¼š</p>
<ul>
<li><p><em>\manimlib\animation\fading.py</em>ï¼šæ¸å˜æ•ˆæœ </p>
<p><strong>FadeXXX(someObject)</strong></p>
<ul>
<li>åŒ…å«FadeInï¼ŒFadeInFromDownï¼ŒFadeOutAndShiftDownï¼ŒFadeInFromPointï¼ŒFadeInFromLargeç­‰ç­‰</li>
<li>è§£é‡Šï¼šfade in/out æ¸å…¥/å‡ºï¼›shift down å‚ç›´ä¸‹é™</li>
</ul>
</li>
<li><p><em>\manimlib\animation\creation.py</em>ï¼šä¹¦å†™æ•ˆæœ</p>
<p><strong>ShowCreation(someObject)</strong></p>
<ul>
<li>æ— æ³•æ¸…æ¥šè¡¨è¾¾ï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œå°è¯•çœ‹æ•ˆæœ</li>
</ul>
<p><strong>UnCreate(someObject)</strong></p>
<ul>
<li>å€’æ”¾ShowCreationåŠ¨ç”»æ•ˆæœ</li>
</ul>
<p><strong>DrawBorderThenFill(someObject)</strong></p>
<ul>
<li>ç”»å‡ºè¾¹ç•Œç„¶åå¡«å……</li>
</ul>
<p><strong>Write(someObject)</strong></p>
<ul>
<li>ç»§æ‰¿è‡ªDrawBorderThenFillï¼Œå¢åŠ ä»å·¦å¾€å³é€æ¸æ˜¾ç¤ºçš„æ•ˆæœ</li>
</ul>
</li>
<li><p><em>\manimlib\animation\transform.py</em>ä»ä¸€ä¸ªæ¸å˜æˆå¦ä¸€ä¸ª</p>
<ul>
<li><strong>Transform(someObject1,someObject2)</strong></li>
<li><strong>ReplacementTransform(someObject1,someObject2)</strong></li>
</ul>
<p>ä¸¤è€…çš„å¼‚åŒï¼š</p>
<p><strong>å…±åŒç‚¹ï¼š</strong>æ˜¾ç¤ºç‰¹æ•ˆç›¸åŒ</p>
<p><strong>ä¸åŒç‚¹ï¼š</strong> <strong>Transform</strong>æ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Šçš„objectæ°¸è¿œæ˜¯someObject1</p>
<p>ä¼ªä»£ç ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">Transform(someObject1,someObject2):
    show someObject1 on screen
    show the transform course of someObject1 to someObject2
    someObject1 = someObject2
    show updated someObject1 on screen
</code></pre>
<p>â€‹                <strong>ReplacementTransform</strong>æ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Šçš„ä»someObject1å˜æˆäº†someObject2</p>
<p>ä¼ªä»£ç ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">ReplacementTransform(someObject1,someObject2):
    show someObject1 on screen
    show the transform course of someObject1 to someObject2
    someObject1 = someObject2
    show someObject2 on screen    # ä¸åŒç‚¹åœ¨æ­¤
    remove someObject1 from screen # ä¸æ˜¯ä»å†…å­˜åˆ é™¤ï¼Œä»…ä»…ä¸å¯è§
</code></pre>
<p>ç”¨ä¸¤æ®µä»£ç æ¥çœ‹çœ‹æ•ˆæœï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class TextArray(Scene):
    def construct(self):
        text = TextMobject("tex1","text2","text3")
        text[0].shift(2*LEFT)
        text[0].set_color(RED)
        text[1].shift(LEFT)
        text[1].set_color(BLUE)
        self.play(Write(text[0]))
        self.wait(2)
        # æ˜¾ç¤ºçš„è¿˜æ˜¯text[0]åªæ˜¯text[0]å€¼å˜æˆäº†text[1]
        self.play(Transform(text[0],text[1]))
        # æ­¤æ—¶æ²¡æœ‰è®©text[0]æ¶ˆå¤±ï¼Œä½†è®©text[1]æ˜¾ç°å¹¶è½¬æ¢ä¸ºtext[2]
        # æœ€ç»ˆtext[0]çš„å€¼ä¸ºåˆå§‹text[1]çš„å€¼ï¼Œtext[1]çš„å€¼ä¸ºåˆå§‹text[2]çš„å€¼
        self.play(Transform(text[1],text[2]))
        # æœ€ç»ˆå±å¹•ä¸Šæ˜¾ç¤ºçš„æ˜¯text[0]å’Œtext[1]
        self.wait(3)
</code></pre>
<p><img src="1565773952504.png" alt="1565773952504"></p>
<p><img src="1565773963920.png" alt="1565773963920"></p>
<p><img src="1565773975419.png" alt="1565773975419"></p>
<p>å°†ä¸Šé¢çš„æ›¿æ¢æˆReplacementTransformï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class TextArray(Scene):
    def construct(self):
        text = TextMobject("tex1","text2","text3")
        text[0].shift(2*LEFT)
        text[0].set_color(RED)
        text[1].shift(LEFT)
        text[1].set_color(BLUE)
        self.play(Write(text[0]))
        self.wait(2)
        # æ˜¾ç¤ºçš„æ˜¯text[1]ä½†æ˜¯text[0]å€¼ä¹Ÿå˜æˆäº†text[1]ï¼Œtext[0]æ¶ˆå¤±
        self.play(ReplacementTransform(text[0],text[1]))
        # æ˜¾ç¤ºtext[2],text[1]å€¼ä¹Ÿå˜æˆäº†text[2]ï¼Œtext[1]æ¶ˆå¤±
        # æœ€ç»ˆtext[0]çš„å€¼ä¸ºåˆå§‹text[1]çš„å€¼ï¼Œtext[1]çš„å€¼ä¸ºåˆå§‹text[2]çš„å€¼
        self.play(ReplacementTransform(text[1],text[2]))
        # æœ€ç»ˆæ˜¾ç¤ºçš„æ˜¯text[2]
        self.wait(3)
</code></pre>
<p>æœ€åä¸€å¹…å›¾ä¸ä¸€æ ·ï¼š</p>
<p><img src="1565774075040.png" alt="1565774075040"></p>
<p><strong>å¦‚æœå¸Œæœ›ä¸è¦æ”¹å˜someObject1çš„å€¼å¯ä»¥ä½¿ç”¨ï¼šsomeObject1.copy()è¿›è¡Œæ·±åº¦æ‹·è´</strong></p>
<p>someObject1.copy()æ‰§è¡Œçš„ä¼ªä»£ç ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">someObject1.copy():
    new object
    object.allValue = self.allValue
    return object
</code></pre>
</li>
<li><p><strong>MoveToTarget(someObject):</strong></p>
<p>ä»…å¯¹è‡ªèº«äº§ç”Ÿå˜åŒ–</p>
<p>æ¯”è¾ƒç®€å•ï¼Œç”¨ç¤ºä¾‹ä»£ç å³å¯ä»¥çœ‹æ‡‚ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class ChangeColorAndSizeAnimation(Scene):
    def construct(self):
         text = TextMobject("Text")
         self.play(Write(text))

         text.generate_target()
         text.target = TextMobject("Target")
         text.target.set_color(RED)
         text.target.scale(2)
         text.target.shift(LEFT)

         self.play(MoveToTarget(text),run_time = 2)
         self.wait()
</code></pre>
</li>
<li><p><em>\manimlib\animation\growing.py</em></p>
<ul>
<li><p><strong>GrowFromXXX(someObject)</strong></p>
<p>GrowFromCenter,GrowFromPoint,GrowFromEdge,GrowArrowç­‰ç­‰</p>
</li>
</ul>
</li>
<li><p><em>manimlib\animation\update.py</em></p>
<ul>
<li><p><strong>UpdateFromFunc(obj,update_function)</strong></p>
<p>åŒæ­¥æ’­æ”¾,å¾ˆå¥½ç†è§£ï¼Œè§ä¾‹å­ï¼š</p>
<p>æ›´å¤šåŒæ­¥å¹¶å‘çš„æ’­æ”¾è§<strong>2.9</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">class Updater(Scene):
    def construct(self):
        dot = Dot()
        text = TextMobject("Label")\
               .next_to(dot,RIGHT,buff=SMALL_BUFF)

        self.add(dot,text)

        def update_text(obj):
            obj.next_to(dot,RIGHT,buff=SMALL_BUFF)

        # Only works in play
        self.play(
                dot.shift,UP*2,
                UpdateFromFunc(text,update_text)
            )

        self.wait()
</code></pre>
</li>
</ul>
</li>
</ul>
<h5 id="2-6-1-2-run-time"><a href="#2-6-1-2-run-time" class="headerlink" title="2.6.1.2 run_time"></a>2.6.1.2 run_time</h5><p>åŠ¨ç”»ä»å¼€å§‹åˆ°ç»“æŸæ‰€ç”¨çš„æ—¶é—´ï¼Œå†³å®šäº†<strong>åŠ¨ç”»çš„å¿«æ…¢</strong>ï¼ˆåŠ¨ç”»writeçš„å¿«æ…¢æ˜¯å›ºå®šçš„ä¸ç”±runtimeå†³å®šï¼Œä½†æ˜¯åˆ°è¾¾äº†runtimeåˆæ²¡æœ‰åé¢çš„waitï¼Œwriteä¼šè¢«æˆªæ–­ï¼‰ï¼Œè€ŒéåŠ¨ç”»æ’­æ”¾å®Œäº†ç»§ç»­ç­‰å¾…åˆ°run_timeæŒ‡å®šçš„æ—¶é—´ï¼Œæ³¨æ„å¦‚æœruntimeå¤ªçŸ­å¯èƒ½å¯¼è‡´åŠ¨ç”»write</p>
<h4 id="2-6-1-3-rate-func"><a href="#2-6-1-3-rate-func" class="headerlink" title="2.6.1.3 rate_func"></a>2.6.1.3 rate_func</h4><p>ç›´è¯‘ä¸ºé€Ÿåº¦å‡½æ•°ï¼Œå³å†…å®šçš„åŠ¨ç”»å‡½æ•°</p>
<p>åˆ†ä¸ºä¸‰ä¸ªå€¼ï¼š<strong>there_and_backæ¥å›ï¼Œlinearä¸€å»ä¸å¤è¿”ï¼Œsmoothå¹³æ»‘</strong>ï¼ˆé€Ÿåº¦å…ˆä¸º0ï¼Œç„¶ååŠ å¿«ï¼Œåˆ°äº†ä¸­é—´å‡é€Ÿæœ€ååˆ°è¾¾ç»ˆç‚¹ä¸º0ï¼‰</p>
<p>ä¾‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python"> self.play(
                triangle.shift,RIGHT*2,
                rate_func=smooth, # Change this with: linear,smooth
                run_time=5
            )
</code></pre>
<h4 id="2-6-2-add"><a href="#2-6-2-add" class="headerlink" title="2.6.2 add()"></a>2.6.2 add()</h4><p><strong>add(someObject1,someObject2,â€¦)</strong></p>
<p>æ— åŠ¨ç”»æ·»åŠ æ–‡å­—ï¼Œå¯ä»¥æ˜¯å¤šä¸ªtext</p>
<h4 id="2-6-3-wait"><a href="#2-6-3-wait" class="headerlink" title="2.6.3 wait()"></a>2.6.3 wait()</h4><p><strong>wait(int seconds)ï¼š</strong></p>
<p>ç­‰å¾…åŠ¨ç”»åœç•™æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°åˆ™é»˜è®¤ç­‰å¾…åˆ°å°†åŠ¨ç”»æ’­æ”¾å®Œä¸ºæ­¢</p>
<h4 id="2-6-4-remove"><a href="#2-6-4-remove" class="headerlink" title="2.6.4 remove()"></a>2.6.4 remove()</h4><p><strong>remove(someObject1,someObject2,â€¦)ï¼š</strong></p>
<p>ç§»é™¤textï¼Œå¯ä»¥æ˜¯å¤šä¸ªtextï¼Œæ³¨æ„FadeOutç±»çš„åŠ¨ç”»è™½ç„¶è‡ªå¸¦æ¶ˆå¤±æ•ˆæœä½†æ˜¯è¯¥å˜é‡è¿˜æ˜¯ä¼šåœç•™åœ¨å†…å­˜ä¸­</p>
<h3 id="2-7-è®¾ç½®é¢œè‰²"><a href="#2-7-è®¾ç½®é¢œè‰²" class="headerlink" title="2.7 è®¾ç½®é¢œè‰²"></a>2.7 è®¾ç½®é¢œè‰²</h3><p><strong>someObject.set_color(COLOR)</strong></p>
<p>COLORæœ‰å“ªäº›è§é™„å½•çš„é¢œè‰²ä¸€æ ï¼ŒCOLORæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ‰€ä»¥å¯ä»¥è‡ªå®šä¹‰å­—ç¬¦ä¸²ä¼ å…¥ï¼š</p>
<p><strong>someObject.set_color(string)</strong></p>
<p>å¦‚ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">someObject.set_color("#0000FF")
</code></pre>
<h3 id="2-8-ç¼©æ”¾å¤§å°"><a href="#2-8-ç¼©æ”¾å¤§å°" class="headerlink" title="2.8 ç¼©æ”¾å¤§å°"></a>2.8 ç¼©æ”¾å¤§å°</h3><p><strong>someObject.scale(number)</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">class TextArray(Scene):
    def construct(self):
        dot1 = Dot()
        dot1.scale(3)
        dot1.shift(UP)
        dot2 = Dot()
        self.add(dot1,dot2)
        self.wait(3)
</code></pre>
<p><img src="1565769895077.png" alt="1565769895077"></p>
<h3 id="2-9-åŒæ­¥æ’­æ”¾åŠ¨ç”»"><a href="#2-9-åŒæ­¥æ’­æ”¾åŠ¨ç”»" class="headerlink" title="2.9 åŒæ­¥æ’­æ”¾åŠ¨ç”»"></a>2.9 åŒæ­¥æ’­æ”¾åŠ¨ç”»</h3><p>TODOï¼š<strong>æš‚æ—¶æ²¡æœ‰æ—¶é—´ç†è§£æºç </strong></p>
<p>è®©æŸä¸€ä¸ªç‰©ä½“ï¼ˆmobjectï¼‰è·Ÿéšå¦ä¸€ä¸ªç‰©ä½“çš„ç§»åŠ¨è€Œå¹¶è¡Œç§»åŠ¨ï¼ˆä½¿ç”¨å…¶ä»–ç§»åŠ¨æ–¹å¼ï¼Œè·¯å¾„ï¼‰</p>
<p><em>manimlib\mobject\mobject.py</em></p>
<ul>
<li><p><strong>add_updater(update_function, index=None, call_updater=True)</strong></p>
<ul>
<li>update_functionï¼šæ›´æ–°å‡½æ•°ï¼Œå‡½æ•°ä¼ å…¥ä¸€ä¸ªobjectå¯¹è±¡ï¼Œå‡½æ•°å†…éƒ¨æœ‰ä¸€ç³»åˆ—å¯¹è¯¥å¯¹è±¡å’Œå·²çŸ¥çš„å¯¹è±¡è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œå¯ä»¥æ˜¯lambdaè¡¨è¾¾å¼</li>
</ul>
<p>ä¾‹å­ï¼šè®©ä¸€ä¸ªç‚¹åœ¨â€œlabelâ€æ–‡å­—å³è¾¹ï¼Œéšç€æ–‡å­—çš„ç§»åŠ¨ï¼Œå§‹ç»ˆä¿æŒåœ¨å…¶å³ä¾§</p>
</li>
</ul>
<pre class=" language-lang-python"><code class="language-lang-python"># author:TB
class AddUpdater1(Scene):
    def construct(self):
        dot = Dot()
        text = TextMobject("Label")\
               .next_to(dot,RIGHT,buff=SMALL_BUFF)

        self.add(dot,text)

        # Update function æ›´æ–°å‡½æ•°
        def update_text(obj):
            obj.next_to(dot,RIGHT,buff=SMALL_BUFF)

        # Add update function to the objects
        # æŠŠæ›´æ–°å‡½æ•°åŠ ç»™å¯¹è±¡
        text.add_updater(update_text)

        # å¦‚æœæƒ³ç®€æ´ï¼Œlambdaè¡¨è¾¾å¼å¦‚ä¸‹ï¼š
        # text.add_updater(lambda m: m.next_to(dot,RIGHT,buff=SMALL_BUFF))
        # æ­¤æ—¶ä¸‹é¢çš„remove_updater(update_text)ä¸èƒ½ç»§ç»­ä½¿ç”¨ï¼Œéœ€è¦æ”¹ä¸ºclear_updaters

        # Add the object again é‡æ–°åŠ å…¥text
        # æ³¨æ„è¿™ä¸ªæ­¥éª¤ä¸èƒ½å°‘ï¼Œå¦åˆ™çœ‹ä¸åˆ°ï¼ï¼ï¼
        # å³ä½¿ä¹‹å‰åŠ å…¥è¿‡ï¼Œç°åœ¨è¿˜æ˜¯è¦é‡æ–°åŠ å…¥
        self.add(text)

        self.play(dot.shift,UP*2)

        # Remove update function
        text.remove_updater(update_text)

        self.wait()
</code></pre>
<ul>
<li><p><strong>remove_updater(update_function)</strong>å–æ¶ˆå¹¶è¡Œæ’­æ”¾å‡½æ•°</p>
</li>
<li><p><strong>clear_updaters(recursive=True)</strong>å–æ¶ˆæ‰€æœ‰çš„å¹¶è¡Œæ’­æ”¾å‡½æ•°</p>
</li>
<li><p><strong>UpdateFromFunc(Animation)</strong></p>
<p>è§<strong>2.6.1.1</strong>,æ³¨æ„è¿™ä¸ªå‡½æ•°ä»…åœ¨playå‡½æ•°ä¸­ç”Ÿæ•ˆï¼Œplayç»“æŸåå°±ä¸ä¼šç»§ç»­åŒæ­¥</p>
</li>
</ul>
<p>æ›´å¤šä¾‹å­ï¼ˆæœ‰æ—¶é—´å†è¡¥å……ï¼‰ï¼š<a href="https://github.com/Elteoremadebeethoven/AnimationsWithManim/blob/master/English/update_successions/update_successions.py" target="_blank" rel="noopener">TBçš„æ›´æ–°å‡½æ•°é¡µé¢</a></p>
<h2 id="3-textæ•°ç»„"><a href="#3-textæ•°ç»„" class="headerlink" title="3. textæ•°ç»„"></a>3. textæ•°ç»„</h2><p>åœ¨2ä¸­æ‰€æœ‰çš„æ˜¾ç¤ºæ–¹æ³•å‡ ä¹éƒ½å¯ä»¥å¯¹æ•°ç»„æˆç«‹ï¼Œ</p>
<p>å¦‚æ–‡å­—ä¸²ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class TextArray(Scene):
    def construct(self):
        text = TextMobject("A","B","C","D","E","F")
        text[0].set_color(RED)
        text[1].set_color(ORANGE)
        text[2].set_color(YELLOW)
        text[3].set_color(GREEN)
        text[4].set_color(BLUE) #Hexadecimal color
        self.play(Write(text))
        self.wait(2)
</code></pre>
<p><img src="1565768302203.png" alt="1565768302203"></p>
<p>è¿˜å¯ä»¥æ‹¼æ¥ä¸ºLaTeXä¸²(æ­¤å¤„ä¸èƒ½ç”¨TextMobjectä»£æ›¿ï¼Œå¦åˆ™æŠ¥é”™)ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class TexArray(Scene):
    def construct(self):
        text = TexMobject("A","{B","\\over","C}","D","E")
        text[0].set_color(RED)
        text[1].set_color(ORANGE)
        text[2].set_color(YELLOW)
        text[3].set_color(GREEN)
        text[4].set_color(BLUE)
        text[5].set_color(BLUE)
        self.play(Write(text))
        self.wait(2)
</code></pre>
<p><img src="1565769578088.png" alt="1565769578088"></p>
<p>å¯¹äºæ•°ç»„å¯ä»¥ç›´æ¥å¦‚åŒå¯¹å•ä¸ªobjectæ“ä½œ,å¦‚ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python"> text.shift(UP)
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p><strong>text = TextMobject(stringï¼‰æ˜¯ä¸€ç»´æ•°ç»„</strong></p>
<p><strong>å½“text = TextMobject(string1ï¼Œstring2ï¼Œâ€¦.)ä¸­æ‰€æœ‰çš„stringå‡ä¸ºå­—æ¯çš„æ—¶å€™ï¼Œtextä¸ºäºŒç»´æ•°ç»„ä½†æ˜¯æ¯ä¸€ä¸ªå­æ•°ç»„å¤§å°ä»…ä¸º1</strong></p>
<p><strong>å¦‚æœæœ‰ä»»æ„ä¸€ä¸ªstringæ˜¯å¤šä¸ªå­—æ¯åˆ™textæ˜¯äºŒç»´æ•°ç»„</strong></p>
<h2 id="4-åŸºç¡€åŠ¨ç”»ç±»-Scene"><a href="#4-åŸºç¡€åŠ¨ç”»ç±»-Scene" class="headerlink" title="4. åŸºç¡€åŠ¨ç”»ç±» Scene"></a>4. åŸºç¡€åŠ¨ç”»ç±» Scene</h2><p>æ‰€æœ‰çš„åŠ¨ç”»å‡æ˜¯sceneç±»çš„å­ç±»äº§ç”Ÿçš„ï¼Œå› æ­¤sceneçš„åŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œä¸»è¦æ˜¯å¯¹ä¸€äº›åŸºç¡€çš„å±æ€§è¿›è¡Œé…ç½®</p>
<p><strong><em>\manimlib\scene\scene.py</em></strong></p>
<p>å˜é‡çš„å€¼å¾—åˆå§‹å®šä¹‰è§ä¸‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python"># \manimlib\scene\scene.py
CONFIG = {
        "camera_class": Camera,
        "camera_config": {},
        "file_writer_config": {},
        "skip_animations": False,
        "always_update_mobjects": False,
        "random_seed": 0,
        "start_at_animation_number": None,
        "end_at_animation_number": None,
        "leave_progress_bars": False,
    }
</code></pre>
<p>å…¶ä¸­<strong>camera_config</strong>æ˜¯å¯¹è§†é¢‘çš„å¤„ç†ï¼Œç”±<strong>cameraç±»</strong>å®Œæˆ:    </p>
<p><strong><em>\manimlib\camera\camera.py</em></strong></p>
<pre class=" language-lang-python"><code class="language-lang-python"># \manimlib\camera\camera.py
CONFIG = {
# èƒŒæ™¯é¢œè‰²
        "background_image": None,
# è§†é¢‘çš„é«˜å®½ä¸å¸§ç‡
        "pixel_height": DEFAULT_PIXEL_HEIGHT,
        "pixel_width": DEFAULT_PIXEL_WIDTH,
        "frame_rate": DEFAULT_FRAME_RATE,
# Note: frame height and width will be resized to match
# the pixel aspect ratio
# FRAME_HEIGHT = 8.0
# FRAME_WIDTH = FRAME_HEIGHT * DEFAULT_PIXEL_WIDTH /                         DEFAULT_PIXEL_HEIGHT
        "frame_height": FRAME_HEIGHT,
        "frame_width": FRAME_WIDTH,
# é»˜è®¤æ–¹å‘
        "frame_center": ORIGIN,
# èƒŒæ™¯é¢œè‰²
        "background_color": BLACK,
        "background_opacity": 1,
# Points in vectorized mobjects with norm greater
# than this value will be rescaled.
        "max_allowable_norm": FRAME_WIDTH,
        "image_mode": "RGBA",
        "n_channels": 4,
        "pixel_array_dtype": 'uint8',
# z_buff_func is only used if the flag above is set to True.
# round z coordinate to nearest hundredth when comparring
        "z_buff_func": lambda m: np.round(m.get_center()[2], 2),
        "cairo_line_width_multiple": 0.01,
    }
</code></pre>
<p>æ‰€æœ‰çš„åŠ¨ç”»éƒ½æ˜¯ç»§æ‰¿è‡ªScene,æ‰€ä»¥åŠ¨ç”»çš„æŸäº›ç‰¹å®šçš„å±æ€§å¯ä»¥é€šè¿‡CONFIGä¿®æ”¹ï¼š</p>
<p>ä¾‹å­ï¼š</p>
<p>æ’å…¥èƒŒæ™¯å›¾ç‰‡</p>
<pre class=" language-lang-python"><code class="language-lang-python">class TextLike1DArrays(Scene):
    CONFIG={
        "camera_config": {
            "background_image": r"1.png",
        },
    }
    def construct(self):
        self.add(TextMobject("Text").set_color(RED))
        self.wait()
</code></pre>
<p><img src="1565833717545.png" alt="1565833717545"></p>
<h2 id="5-äºŒç»´åæ ‡ç±»-GraphScene"><a href="#5-äºŒç»´åæ ‡ç±»-GraphScene" class="headerlink" title="5. äºŒç»´åæ ‡ç±» GraphScene"></a>5. äºŒç»´åæ ‡ç±» GraphScene</h2><p><strong>\manimlib\scene\graph_scene.py</strong></p>
<p>ç»§æ‰¿è‡ªSceneç±»ï¼Œç”¨æ¥ç»˜åˆ¶åæ ‡</p>
<p>å±æ€§å¦‚ä¸‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "x_min": -1,
        "x_max": 10,
        "x_axis_width": 9,
        "x_tick_frequency": 1,
        "x_leftmost_tick": None,  # Change if different from x_min
        "x_labeled_nums": None,
        "x_axis_label": "$x$",
        "y_min": -1,
        "y_max": 10,
        "y_axis_height": 6,
        "y_tick_frequency": 1,
        "y_bottom_tick": None,  # Change if different from y_min
        "y_labeled_nums": None,
        "y_axis_label": "$y$",
        "axes_color": GREY,
        "graph_origin": 2.5 * DOWN + 4 * LEFT,
        "exclude_zero_label": True,
        "default_graph_colors": [BLUE, GREEN, YELLOW],
        "default_derivative_color": GREEN,
        "default_input_color": YELLOW,
        "default_riemann_start_color": BLUE,
        "default_riemann_end_color": GREEN,
        "area_opacity": 0.8,
        "num_rects": 50,
    }
</code></pre>
<p>ä¸€èˆ¬æµç¨‹æ˜¯ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Graph2D(GraphScene):
    def x_2(self, x):
        return x**2

    def construct(self):
        self.setup_axes(animate=True)
        graph = self.get_graph(self.x_2,color = GREEN,x_min = 2,x_max = 4)
        self.play(ShowCreation(graph),run_time = 2)
        self.wait()
</code></pre>
<p><img src="1565835900946.png" alt="1565835900946"></p>
<h3 id="5-1-setup-axes"><a href="#5-1-setup-axes" class="headerlink" title="5.1 setup_axes()"></a>5.1 setup_axes()</h3><p><strong>setup_axes(animate=Bool)ï¼š</strong></p>
<p>é»˜è®¤æ²¡æœ‰åŠ¨ç”»æ•ˆæœï¼Œsetup_axes(animate=True)åˆ™ä¼šæ˜¾ç¤ºåŠ¨ç”» </p>
<h3 id="5-2-get-graph"><a href="#5-2-get-graph" class="headerlink" title="5.2 get_graph()"></a>5.2 get_graph()</h3><p><strong>get_graph(func, color=None,x_min=None,x_max=None, **kwargs)</strong></p>
<p>å¾—åˆ°åæ ‡ç³»çš„å¥æŸ„ï¼Œå¹¶è®¾ç½®å€¼</p>
<h3 id="5-3-coords-to-point"><a href="#5-3-coords-to-point" class="headerlink" title="5.3 coords_to_point()"></a>5.3 coords_to_point()</h3><p><strong>coords_to_point(x, y)</strong></p>
<p>åæ ‡å˜æˆå¯¹åº”çš„å¸§ä¸­çš„ç‚¹</p>
<h3 id="5-4-point-to-coords"><a href="#5-4-point-to-coords" class="headerlink" title="5.4 point_to_coords()"></a>5.4 point_to_coords()</h3><p><strong>point_to_coords(point)</strong></p>
<p>å¸§ä¸­çš„ç‚¹è½¬æ¢ä¸ºåæ ‡ï¼Œè¿”å›x,yç»„æˆçš„å…ƒç»„</p>
<h3 id="5-5-get-graph-label"><a href="#5-5-get-graph-label" class="headerlink" title="5.5 get_graph_label()"></a>5.5 get_graph_label()</h3><p><strong>get_graph_label(graph,label=â€f(x)â€, x_val=None,direction=RIGHT, buff=MED_SMALL_BUFF, color=None)</strong></p>
<p>graphï¼šä»graphä¸­è·å¾—åæ ‡æ ‡ç­¾</p>
<p>labelé»˜è®¤ä¸ºâ€œf(x)â€,å¯ä»¥æ”¹æˆè‡ªå·±æƒ³è¦çš„å‡½æ•°</p>
<p>x_valï¼šxçš„å–å€¼èŒƒå›´</p>
<p>buffï¼šè·ç¦»è¾¹ç•Œçš„è·ç¦»</p>
<p>colorï¼šé¢œè‰²</p>
<h3 id="5-6-get-vertical-line-to-graph"><a href="#5-6-get-vertical-line-to-graph" class="headerlink" title="5.6 get_vertical_line_to_graph()"></a>5.6 get_vertical_line_to_graph()</h3><p><strong>get_vertical_line_to_graph(x, graph,line_class=Line,**line_kwargs)</strong></p>
<p>å¾—åˆ°ç«–ç›´çº¿ï¼Œèµ·ç‚¹ä¸º(x,0)ç»ˆç‚¹ä¸º(x,f(x))</p>
<p>è¿”å›line_classç±»å‹çš„å›¾åƒ</p>
<h3 id="5-7-get-vertical-lines-to-graph"><a href="#5-7-get-vertical-lines-to-graph" class="headerlink" title="5.7 get_vertical_lines_to_graph()"></a>5.7 get_vertical_lines_to_graph()</h3><p><strong>get_vertical_lines_to_graph( graph,x_min=None,x_max=None, num_lines=20, **kwargs)</strong></p>
<p>åŒæ—¶å¾—åˆ°ç”»å¤šæ¡ç«–ç›´çº¿</p>
<p>è¿”å›line_classç±»å‹çš„VGroup</p>
<h3 id="5-8-æ”¹å˜åæ ‡æ ‡ç­¾çš„é¢œè‰²"><a href="#5-8-æ”¹å˜åæ ‡æ ‡ç­¾çš„é¢œè‰²" class="headerlink" title="5.8 æ”¹å˜åæ ‡æ ‡ç­¾çš„é¢œè‰²"></a>5.8 æ”¹å˜åæ ‡æ ‡ç­¾çš„é¢œè‰²</h3><blockquote>
<p><a href="https://github.com/Elteoremadebeethoven/AnimationsWithManim/blob/master/English/6a_plots_2D/change_label_colors.md#change-labels-colors-in-graphscene" target="_blank" rel="noopener">https://github.com/Elteoremadebeethoven/AnimationsWithManim/blob/master/English/6a_plots_2D/change_label_colors.md#change-labels-colors-in-graphscene</a></p>
<p>Change labels colors in <code>GraphScene</code></p>
<p>Add this to the <code>CONFIG</code> dictionary:åœ¨CONFIGä¸­åŠ å…¥ï¼š</p>
<pre><code> "x_label_color":RED,
 "y_label_color":BLUE
</code></pre><p>In the <code>setup_axes</code> method change the linesï¼šåœ¨æºç çš„setup_axesä¸­çš„ä¸¤å¥ï¼š</p>
<pre><code>         x_label = TextMobject(self.x_axis_label)
         # and
         y_label = TextMobject(self.y_axis_label)
</code></pre><p>withæ”¹ä¸º</p>
<pre><code>         x_label = TextMobject(self.x_axis_label,color=self.x_label_color)
         # and
         y_label = TextMobject(self.x_axis_label,color=self.y_label_color)
</code></pre></blockquote>
<p>æ•ˆæœï¼š</p>
<p><img src="ChanceColorLabels.png" alt="img"></p>
<h2 id="6-æ–‡æœ¬ç±»-TextMobject"><a href="#6-æ–‡æœ¬ç±»-TextMobject" class="headerlink" title="6. æ–‡æœ¬ç±» TextMobject"></a>6. æ–‡æœ¬ç±» TextMobject</h2><ol>
<li><p><strong>TextMobject(string)ï¼š</strong>ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<p>å­—ç¬¦ä¸²å¯ä»¥æ˜¯æ™®é€šå­—ç¬¦ä¸²æˆ–LaTeXæ ¼å¼æˆ–ä¸¤è€…æ··åˆï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">TextMobject("This is a regular text")
</code></pre>
<pre class=" language-lang-python"><code class="language-lang-python">TextMobject("\\displaystyle\\frac{x}{y}") # displaystyleä½¿å­—ä½“èƒ½æ˜¾ç¤ºæ­£å¸¸å¤§å°
</code></pre>
<p>ä¸¤è€…æ··åˆåˆ™éœ€è¦ä½¿ç”¨â€œ$$â€æˆ–è€…â€œ$â€åŒ…æ‹¬ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">TextMobject("""
            This is a regular text,
            $\\displaystyle\\frac{x}{y}$,
            $$x^2+y^2=a^2$$
            """)
</code></pre>
<p><img src="1565700699069.png" alt="1565700699069"></p>
<p>è‡ªç„¶åœ°ï¼Œå¯ä»¥ç”¨LaTeXè°ƒæ•´å­—ä½“å¤§å°ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python"> class SizeTextOnLaTeX(Scene):
    def construct(self):
        textHuge = TextMobject("{\\Huge Huge Text 012.\\#!?} Text")
        texthuge = TextMobject("{\\huge huge Text 012.\\#!?} Text")
        textLARGE = TextMobject("{\\LARGE LARGE Text 012.\\#!?} Text")
        textLarge = TextMobject("{\\Large Large Text 012.\\#!?} Text")
        textlarge = TextMobject("{\\large large Text 012.\\#!?} Text")
        textNormal = TextMobject("{\\normalsize normal Text 012.\\#!?} Text")
        textsmall = TextMobject("{\\small small Text 012.\\#!?} Texto normal")
        textfootnotesize = TextMobject("{\\footnotesize footnotesize Text 012.\\#!?} Text")
        textscriptsize = TextMobject("{\\scriptsize scriptsize Text 012.\\#!?} Text")
        texttiny = TextMobject("{\\tiny tiny Texto 012.\\#!?} Text normal")
        textHuge.to_edge(UP)
        texthuge.next_to(textHuge,DOWN,buff=0.1)
        textLARGE.next_to(texthuge,DOWN,buff=0.1)
        textLarge.next_to(textLARGE,DOWN,buff=0.1)
        textlarge.next_to(textLarge,DOWN,buff=0.1)
        textNormal.next_to(textlarge,DOWN,buff=0.1)
        textsmall.next_to(textNormal,DOWN,buff=0.1)
        textfootnotesize.next_to(textsmall,DOWN,buff=0.1)
        textscriptsize.next_to(textfootnotesize,DOWN,buff=0.1)
        texttiny.next_to(textscriptsize,DOWN,buff=0.1)
        self.add(textHuge,texthuge,textLARGE,textLarge,textlarge,textNormal,textsmall,textfootnotesize,textscriptsize,texttiny)
        self.wait(3)
</code></pre>
<p><img src="1565704370228.png" alt="1565704370228"></p>
</li>
<li><p><strong>TextMobject(string1,string2,string3,â€¦)ï¼š</strong>ä¼ å…¥å¤šä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›TextMobjectæ•°ç»„ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹è¡¨ç´¢å¼•æ•°ç»„çš„å€¼</p>
</li>
</ol>
<h2 id="7-LaTeXæ–‡æœ¬ç±»-TexMobject"><a href="#7-LaTeXæ–‡æœ¬ç±»-TexMobject" class="headerlink" title="7. LaTeXæ–‡æœ¬ç±» TexMobject"></a>7. LaTeXæ–‡æœ¬ç±» TexMobject</h2><p><strong><em>\manimlib\mobject\svg\tex_mobject.py</em></strong></p>
<p>æ˜¾ç¤ºä¸ºLaTeXæ ¼å¼(åœ¨æƒ³è¦LaTeXå­—ç¬¦ä¸²æŒ‰ç…§æ•°ç»„æ˜¾ç¤ºæ—¶å¿…é¡»ä½¿ç”¨è¿™ä¸ªå®ç°)</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "template_tex_file_body": TEMPLATE_TEX_FILE_BODY,
        # ç¬”ç”»å®½åº¦
        "stroke_width": 0,
        # å¡«å……ä¸é€æ˜åº¦
        "fill_opacity": 1.0,
        # ç¬”ç”»çš„æè¾¹å®½åº¦
        "background_stroke_width": 1,
        # ç¬”ç”»çš„æè¾¹é¢œè‰²
        "background_stroke_color": BLACK,
        "should_center": True,
        "height": None,
        "organize_left_to_right": False,
        "alignment": "",
    }
</code></pre>
<p>ä¾‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Formula(Scene): 
    def construct(self): 
        formula = TexMobject("This is a sentence")
        self.play(Write(formula))
        self.wait(3)
</code></pre>
<p><img src="1565769340216.png" alt="1565769340216"></p>
<h2 id="8-äºŒç»´å›¾å½¢ç±»"><a href="#8-äºŒç»´å›¾å½¢ç±»" class="headerlink" title="8. äºŒç»´å›¾å½¢ç±»"></a>8. äºŒç»´å›¾å½¢ç±»</h2><p><strong><em>\manimlib\mobject\geometry.py</em></strong></p>
<p>TODOï¼šå¾…å®Œå–„</p>
<h3 id="8-1-ç‚¹Dot"><a href="#8-1-ç‚¹Dot" class="headerlink" title="8.1 ç‚¹Dot"></a>8.1 ç‚¹Dot</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "radius": DEFAULT_DOT_RADIUS,
        "stroke_width": 0,
        "fill_opacity": 1.0,
        "color": WHITE
    }
</code></pre>
<h3 id="8-2-åœ†å½¢Circle"><a href="#8-2-åœ†å½¢Circle" class="headerlink" title="8.2 åœ†å½¢Circle"></a>8.2 åœ†å½¢Circle</h3><p>ç»§æ‰¿è‡ªArc</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "color": RED,
        "close_new_points": True,
        "anchors_span_full_range": False
    }
</code></pre>
<h3 id="8-3-ç¯Annulus"><a href="#8-3-ç¯Annulus" class="headerlink" title="8.3 ç¯Annulus"></a>8.3 ç¯Annulus</h3><p>ç»§æ‰¿è‡ªåœ†å½¢</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "inner_radius": 1,
        "outer_radius": 2,
        "fill_opacity": 1,
        "stroke_width": 0,
        "color": WHITE,
        "mark_paths_closed": False,
    }
</code></pre>
<h3 id="8-4-é•¿æ–¹å½¢Rectangle"><a href="#8-4-é•¿æ–¹å½¢Rectangle" class="headerlink" title="8.4 é•¿æ–¹å½¢Rectangle"></a>8.4 é•¿æ–¹å½¢Rectangle</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "color": WHITE,
        "height": 2.0,
        "width": 4.0,
        "mark_paths_closed": True,
        "close_new_points": True,
    }
</code></pre>
<h3 id="8-5-æ–¹å½¢Square"><a href="#8-5-æ–¹å½¢Square" class="headerlink" title="8.5 æ–¹å½¢Square"></a>8.5 æ–¹å½¢Square</h3><p>ç»§æ‰¿è‡ªé•¿æ–¹å½¢</p>
<pre class=" language-lang-python"><code class="language-lang-python"> CONFIG = {
         # è¾¹é•¿
        "side_length": 2.0,
    }
</code></pre>
<h3 id="8-6-æ¤­åœ†Ellipse"><a href="#8-6-æ¤­åœ†Ellipse" class="headerlink" title="8.6 æ¤­åœ†Ellipse"></a>8.6 æ¤­åœ†Ellipse</h3><p>ç»§æ‰¿è‡ªåœ†å½¢</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "width": 2,
        "height": 1
    }
</code></pre>
<h3 id="8-7-å¼§Arc"><a href="#8-7-å¼§Arc" class="headerlink" title="8.7 å¼§Arc"></a>8.7 å¼§Arc</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "radius": 1.0,
        "num_components": 9,
        "anchors_span_full_range": True,
        "arc_center": ORIGIN,
    }
</code></pre>
<h3 id="8-8-çº¿Line"><a href="#8-8-çº¿Line" class="headerlink" title="8.8 çº¿Line"></a>8.8 çº¿Line</h3><p><strong>Line(start=LEFT, end=RIGHT, **kwargs)</strong></p>
<p>start,end:èµ·ç‚¹ç»ˆç‚¹ï¼Œå½¢å¼æ˜¯npå‘é‡</p>
<p>kwargsä¸ºé…ç½®ä¿¡æ¯ï¼Œç»§æ‰¿è‡ªVMobject</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "fill_color": None,
        "fill_opacity": 0.0,
        "stroke_color": None,
        "stroke_opacity": 1.0,
        "stroke_width": DEFAULT_STROKE_WIDTH,
        # The purpose of background stroke is to have
        # something that won't overlap the fill, e.g.
        # For text against some textured background
        "background_stroke_color": BLACK,
        "background_stroke_opacity": 1.0,
        "background_stroke_width": 0,
        # When a color c is set, there will be a second color
        # computed based on interpolating c to WHITE by with
        # sheen_factor, and the display will gradient to this
        # secondary color in the direction of sheen_direction.
        "sheen_factor": 0.0,
        "sheen_direction": UL,
        # Indicates that it will not be displayed, but
        # that it should count in parent mobject's path
        "close_new_points": False,
        "pre_function_handle_to_anchor_scale_factor": 0.01,
        "make_smooth_after_applying_functions": False,
        "background_image_file": None,
        "shade_in_3d": False,
        # This is within a pixel
        # TODO, do we care about accounting for
        # varying zoom levels?
        "tolerance_for_point_equality": 1e-6,
        "n_points_per_cubic_curve": 4,
    }
</code></pre>
<h2 id="9-ä¸‰ç»´å›¾å½¢ç±»"><a href="#9-ä¸‰ç»´å›¾å½¢ç±»" class="headerlink" title="9. ä¸‰ç»´å›¾å½¢ç±»"></a>9. ä¸‰ç»´å›¾å½¢ç±»</h2><p><strong><em>\manimlib\mobject\three_dimensions.py</em></strong></p>
<h3 id="9-1-çƒ-Sphere"><a href="#9-1-çƒ-Sphere" class="headerlink" title="9.1 çƒ Sphere"></a>9.1 çƒ Sphere</h3><p>ç»§æ‰¿è‡ªParametricSurface,å®ç°é€šè¿‡ç»˜åˆ¶ä¸‰ç»´å¤šè¾¹å½¢æ›²é¢å®ç°çš„ï¼Œå…·ä½“çœ‹æºç </p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "resolution": (12, 24),
        "radius": 1,
        "u_min": 0.001,
        "u_max": PI - 0.001,
        "v_min": 0,
        "v_max": TAU,
    }
</code></pre>
<h3 id="9-2-ç«‹æ–¹-Cube"><a href="#9-2-ç«‹æ–¹-Cube" class="headerlink" title="9.2 ç«‹æ–¹ Cube"></a>9.2 ç«‹æ–¹ Cube</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "fill_opacity": 0.75,
        "fill_color": BLUE,
        "stroke_width": 0,
        "side_length": 2,
    }
</code></pre>
<h3 id="9-3-æ£±æŸ±Prism"><a href="#9-3-æ£±æŸ±Prism" class="headerlink" title="9.3 æ£±æŸ±Prism"></a>9.3 æ£±æŸ±Prism</h3><p>ç»§æ‰¿è‡ªcube</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "dimensions": [3, 2, 1]
    }
</code></pre>
<h3 id="9-4-å‚æ•°æ›²é¢-ParametricSurface"><a href="#9-4-å‚æ•°æ›²é¢-ParametricSurface" class="headerlink" title="9.4 å‚æ•°æ›²é¢ ParametricSurface"></a>9.4 å‚æ•°æ›²é¢ ParametricSurface</h3><p>å‚æ•°æ–¹ç¨‹è¡¨è¾¾çš„æ›²é¢</p>
<p><strong>ParametricSurface(func, **kwargs)</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python"> CONFIG = {
        "u_min": 0,
        "u_max": 1,
        "v_min": 0,
        "v_max": 1,
        "resolution": 32,
        "surface_piece_config": {},
        "fill_color": BLUE_D,
        "fill_opacity": 1.0,
        "checkerboard_colors": [BLUE_D, BLUE_E],
        "stroke_color": LIGHT_GREY,
        "stroke_width": 0.5,
        "should_make_jagged": False,
        "pre_function_handle_to_anchor_scale_factor": 0.00001,
    }
</code></pre>
<p>func:è‡ªå®šä¹‰çš„æ–¹ç¨‹ï¼Œæ­¤æ–¹ç¨‹ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸‰ç»´å‘é‡ï¼Œæ¯ä¸€ä¸ªåˆ†é‡å‡æ˜¯ä¼ å…¥ä¸¤ä¸ªè‡ªå˜é‡çš„è¡¨è¾¾å¼</p>
<p>å¦‚ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">def func(x, y):
    return np.array([x**2,y+2,x**2 - y**2])
</code></pre>
<p>ç»˜åˆ¶ä¸‰ç»´æ›²é¢çš„ä¾‹å­ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class SurfacesAnimation(ThreeDScene):
    def construct(self):
        axes = ThreeDAxes()
        cylinder = ParametricSurface(
            lambda u, v: np.array([
                np.cos(TAU * v),
                np.sin(TAU * v),
                2 * (1 - u)
            ]),
            resolution=(6, 32)).fade(0.5) #Resolution of the surfaces

        paraboloid = ParametricSurface(
            lambda u, v: np.array([
                np.cos(v)*u,
                np.sin(v)*u,
                u**2
            ]),v_max=TAU,
            checkerboard_colors=[PURPLE_D, PURPLE_E],
            resolution=(10, 32)).scale(2)

        para_hyp = ParametricSurface(
            lambda u, v: np.array([
                u,
                v,
                u**2-v**2
            ]),v_min=-2,v_max=2,u_min=-2,u_max=2,checkerboard_colors=[BLUE_D, BLUE_E],
            resolution=(15, 32)).scale(1)

        cone = ParametricSurface(
            lambda u, v: np.array([
                u*np.cos(v),
                u*np.sin(v),
                u
            ]),v_min=0,v_max=TAU,u_min=-2,u_max=2,checkerboard_colors=[GREEN_D, GREEN_E],
            resolution=(15, 32)).scale(1)

        hip_one_side = ParametricSurface(
            lambda u, v: np.array([
                np.cosh(u)*np.cos(v),
                np.cosh(u)*np.sin(v),
                np.sinh(u)
            ]),v_min=0,v_max=TAU,u_min=-2,u_max=2,checkerboard_colors=[YELLOW_D, YELLOW_E],
            resolution=(15, 32))

        ellipsoid=ParametricSurface(
            lambda u, v: np.array([
                1*np.cos(u)*np.cos(v),
                2*np.cos(u)*np.sin(v),
                0.5*np.sin(u)
            ]),v_min=0,v_max=TAU,u_min=-PI/2,u_max=PI/2,checkerboard_colors=[TEAL_D, TEAL_E],
            resolution=(15, 32)).scale(2)

        sphere = ParametricSurface(
            lambda u, v: np.array([
                1.5*np.cos(u)*np.cos(v),
                1.5*np.cos(u)*np.sin(v),
                1.5*np.sin(u)
            ]),v_min=0,v_max=TAU,u_min=-PI/2,u_max=PI/2,checkerboard_colors=[RED_D, RED_E],
            resolution=(15, 32)).scale(2)


        self.set_camera_orientation(phi=75 * DEGREES)
        self.begin_ambient_camera_rotation(rate=0.2)


        self.add(axes)
        self.play(Write(sphere))
        self.wait()
        self.play(ReplacementTransform(sphere,ellipsoid))
        self.wait()
        self.play(ReplacementTransform(ellipsoid,cone))
        self.wait()
        self.play(ReplacementTransform(cone,hip_one_side))
        self.wait()
        self.play(ReplacementTransform(hip_one_side,para_hyp))
        self.wait()
        self.play(ReplacementTransform(para_hyp,paraboloid))
        self.wait()
        self.play(ReplacementTransform(paraboloid,cylinder))
        self.wait()
        self.play(FadeOut(cylinder))
</code></pre>
<h3 id="9-5-å‚æ•°æ›²çº¿-ParametricFunction"><a href="#9-5-å‚æ•°æ›²çº¿-ParametricFunction" class="headerlink" title="9.5 å‚æ•°æ›²çº¿ ParametricFunction"></a>9.5 å‚æ•°æ›²çº¿ ParametricFunction</h3><p><strong>ParametricSurface(func, **kwargs)</strong></p>
<p>func:è‡ªå®šä¹‰çš„æ–¹ç¨‹ï¼Œæ­¤æ–¹ç¨‹ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸‰ç»´å‘é‡ï¼Œæ¯ä¸€ä¸ªåˆ†é‡å‡æ˜¯ä¼ å…¥è‡ªå˜é‡çš„è¡¨è¾¾å¼</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "t_min": 0,
        "t_max": 1,
        "step_size": 0.01,  # Use "auto" (lowercase) for automatic step size
        "dt": 1e-8,
        # TODO, be smarter about figuring these out?
        "discontinuities": [],
    }
</code></pre>
<p>ä¾‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class ParametricCurve2(ThreeDScene):
    def construct(self):
        curve1=ParametricFunction(
                lambda u : np.array([
                1.2*np.cos(u),
                1.2*np.sin(u),
                u/2
            ]),color=RED,t_min=-TAU,t_max=TAU,
            )
        curve2=ParametricFunction(
                lambda u : np.array([
                1.2*np.cos(u),
                1.2*np.sin(u),
                u
            ]),color=RED,t_min=-TAU,t_max=TAU,
            )

        curve1.set_shade_in_3d(True)
        curve2.set_shade_in_3d(True)

        axes = ThreeDAxes()

        self.add(axes)

        self.set_camera_orientation(phi=80 * DEGREES,theta=-60*DEGREES)
        self.begin_ambient_camera_rotation(rate=0.1) 
        self.play(ShowCreation(curve1))
        self.wait()
        self.play(Transform(curve1,curve2),rate_func=there_and_back,run_time=3)
        self.wait()
</code></pre>
<h2 id="10-ç¾¤ç»„ç±»VGroup"><a href="#10-ç¾¤ç»„ç±»VGroup" class="headerlink" title="10. ç¾¤ç»„ç±»VGroup"></a>10. ç¾¤ç»„ç±»VGroup</h2><p>å¯ä»¥å°†å¤šä¸ªå›¾åƒåˆå¹¶ä¸ºä¸€ä¸ªç»„è¿›è¡Œæ‰¹é‡åŒæ­¥æ“ä½œ(è‡ªæˆ‘ç†è§£ä¸ºVector Groupçš„ç¼©å†™)</p>
<p><strong>someObjectGroup = VGroup(someObject1,someObject2,â€¦)</strong></p>
<h3 id="10-1-arrange"><a href="#10-1-arrange" class="headerlink" title="10.1 arrange()"></a>10.1 arrange()</h3><p><strong>someObjectGroup.arrange(DIRECTION,aligned_edge = DIRECTION,buff=number)</strong></p>
<p><strong>DIRECTIONï¼š</strong>ä»¥someObject1,someObject2,â€¦é¡ºåºæŒ‰ç…§æ­¤æ–¹å‘æ’åˆ—</p>
<p><strong>aligned_edgeï¼š</strong>å¯¹é½</p>
<p><strong>buffï¼š</strong>æˆå‘˜ä¹‹é—´çš„è·ç¦»</p>
<p>ä¾‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class ArrangeObjects(Scene):
    def construct(self):
        text1 = TextMobject("text1")
        text2 = TextMobject("text2 text2")
        text3 = TextMobject("text3 text3 text3")
        textgroup = VGroup(text1,text2,text3)
        textgroup.arrange(
            UP,
            aligned_edge = LEFT,
            buff=0.4
        )
        self.add(textgroup)
        self.wait()
</code></pre>
<p><img src="1565844643807.png" alt="1565844643807"></p>
<p>åŠ¨ç”»æ•ˆæœï¼š</p>
<p>å› ä¸ºarrangeç¬¬ä¸€ä¸ªå‚æ•°ä¸åœ¨configé‡Œé¢ï¼Œéœ€è¦å•ç‹¬æ”¾åœ¨å¤–é¢</p>
<pre class=" language-lang-python"><code class="language-lang-python">self.play(
            text_group.arrange,
            UP,
            {"aligned_edge":RIGHT,"buff":2}
        )
</code></pre>
<h2 id="11-ç›¸æœºå‚æ•°"><a href="#11-ç›¸æœºå‚æ•°" class="headerlink" title="11. ç›¸æœºå‚æ•°"></a>11. ç›¸æœºå‚æ•°</h2><p>ç›¸æœºæ˜¯é’ˆå¯¹3DåŠ¨ç”»ç±»(<strong>ThreeDScene</strong>)çš„æ–¹æ³•</p>
<p><strong>\manimlib\scene\three_d_scene.py</strong></p>
<p>å°†è§†é¢‘çš„è§†çª—çœ‹åšç›¸æœºï¼Œå°±å¯ä»¥é€šè¿‡è°ƒæ•´ç›¸æœºçš„è¿œè¿‘ï¼Œè§’åº¦æ¥è§‚å¯Ÿä¸‰ç»´ç‰©ä½“ï¼Œè¿™å°±æ˜¯ç›¸æœºç±»çš„ä½œç”¨</p>
<h3 id="11-1-set-camera-orientation"><a href="#11-1-set-camera-orientation" class="headerlink" title="11.1 set_camera_orientation"></a>11.1 set_camera_orientation</h3><p><strong>threeDScene.set_camera_orientation(phi=degrees1,theta=degrees2,gamma=degrees3,distance=number)</strong></p>
<p>è®¾ç½®ç›¸æœºçš„è§’åº¦</p>
<h3 id="11-2-move-camera"><a href="#11-2-move-camera" class="headerlink" title="11.2 move_camera"></a>11.2 move_camera</h3><p><strong>threeDScene.move_camera(phi=None,theta=None, distance=None, gamma=None, frame_center=None,added_anims=[],**kwargs)</strong></p>
<p>ä¾‹å­ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class MoveCamera2(ThreeDScene):
    def construct(self):
        axes = ThreeDAxes()
        circle=Circle()
        self.set_camera_orientation(phi=80 * DEGREES)           
        self.play(ShowCreation(circle),ShowCreation(axes))
        #Start move camera
        self.begin_ambient_camera_rotation(rate=0.1)            
        self.wait(5)
        #Stop move camera
        self.stop_ambient_camera_rotation()                     
        #Return the position of the camera
        self.move_camera(phi=80*DEGREES,theta=-PI/2)            
        self.wait()
</code></pre>
<h3 id="11-3-set-to-default-angled-camera-orientation"><a href="#11-3-set-to-default-angled-camera-orientation" class="headerlink" title="11.3 set_to_default_angled_camera_orientation"></a>11.3 set_to_default_angled_camera_orientation</h3><p>è¿˜åŸä¸ºé»˜è®¤è§’åº¦</p>
<h3 id="11-4-add-fixed-in-frame-mobjects"><a href="#11-4-add-fixed-in-frame-mobjects" class="headerlink" title="11.4 add_fixed_in_frame_mobjects"></a>11.4 add_fixed_in_frame_mobjects</h3><p>åŠ å…¥å›ºå®šåœ¨å±å¹•çš„å›¾åƒï¼Œæ­¤å›¾åƒä¸éšç›¸æœºå˜åŒ–è€Œå˜åŒ–</p>
<p><strong>add_fixed_in_frame_mobjects(*mobjects)</strong></p>
<p>ä¾‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Text3D3(ThreeDScene):
    def construct(self):
        axes = ThreeDAxes()
        self.set_camera_orientation(phi=75 * DEGREES,theta=-45*DEGREES)
        text3d=TextMobject("This is a 3D text")

        self.add_fixed_in_frame_mobjects(text3d) #<----- Add this
        text3d.to_corner(UL)

        self.add(axes)
        self.begin_ambient_camera_rotation()
        self.play(Write(text3d))

        sphere = ParametricSurface(
            lambda u, v: np.array([
                1.5*np.cos(u)*np.cos(v),
                1.5*np.cos(u)*np.sin(v),
                1.5*np.sin(u)
            ]),v_min=0,v_max=TAU,u_min=-PI/2,u_max=PI/2,checkerboard_colors=[RED_D, RED_E],
            resolution=(15, 32)).scale(2)

        self.play(LaggedStart(ShowCreation,sphere))
        self.wait(2)
</code></pre>
<h2 id="12-åæ ‡ç³»ç±»"><a href="#12-åæ ‡ç³»ç±»" class="headerlink" title="12. åæ ‡ç³»ç±»"></a>12. åæ ‡ç³»ç±»</h2><h3 id="12-0-æ•°è½´ç±»-NumberLine"><a href="#12-0-æ•°è½´ç±»-NumberLine" class="headerlink" title="12.0 æ•°è½´ç±» NumberLine"></a>12.0 æ•°è½´ç±» NumberLine</h3><p>ç»§æ‰¿äºLine,å±æ€§å¦‚ä¸‹ï¼š</p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "color": LIGHT_GREY,
        # Xçš„èŒƒå›´
        "x_min": -FRAME_X_RADIUS,
        "x_max": FRAME_X_RADIUS,
        # å•å…ƒæ ¼çš„å¤§å°ï¼Œé»˜è®¤å’Œå•ä½é•¿åº¦ä¸€è‡´
        "unit_size": 1,
        # æ˜¯å¦åŒ…å«åˆ»åº¦tick
        "include_ticks": True,
        # tickçš„å°ºå¯¸ï¼Œå¤§å°ä¸ºï¼š2ä¸ªå•ä½*tick_size
        "tick_size": 0.1,
        # tickçš„åˆ†å¸ƒå¯†åº¦
        "tick_frequency": 1,
        # Defaults to value near x_min s.t. 0 is a tick
        # TODO, rename this
        "leftmost_tick": None,
        # Change name
        # æœ€é•¿çš„tick,ä½œè€…åŸæ„åº”è¯¥æ˜¯ä½œä¸ºæ•°è½´æ ‡è¯†çš„tick,ä¸€èˆ¬ä¸ºä¸­é—´çš„tickå³åŸç‚¹ï¼Œä¼šç”»é•¿ä¸€ç‚¹
        "numbers_with_elongated_ticks": [0],
        # æ ‡ä¸Šæ•°å­—
        "include_numbers": False,
        # æ˜¾ç¤ºçš„æ•°å­—æ ¼å¼
        "numbers_to_show": None,
        "longer_tick_multiple": 2,
        # ä¸­é—´çš„æ•°å­—
        "number_at_center": 0,
        "number_scale_val": 0.75,
        "label_direction": DOWN,
        "line_to_number_buff": MED_SMALL_BUFF,
        # åŒ…å«ç®­å¤´
        "include_tip": False,
        # tip:ç®­å¤´ï¼Œä¸‹é¢ä¸¤ä¸ªæ˜¯å…¶å°ºå¯¸è®¾ç½®
        "tip_width": 0.25,
        "tip_height": 0.25,
        "decimal_number_config": {
            "num_decimal_places": 0,
        },
        # ä»æ•°å­—æ ‡è®°ä¸­å»æ‰0è¿™ä¸ªæ ‡è®°
        "exclude_zero_from_default_numbers": False,
    }
</code></pre>
<p>æ³¨æ„å…¶ä¸­x_minï¼Œx_maxå‡ä¸ºå¸§çš„å·¦å³èŒƒå›´å³æ¯å¸§çš„æœ€å·¦è¾¹å’Œæœ€å³è¾¹</p>
<p><img src="1567675075732.png" alt="1567675075732"></p>
<p>æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ•°è½´æ˜¯ä¸€æ¡çº¿ï¼ˆLineï¼‰ï¼Œæ¯ä¸€ä¸ªé—´éš”ï¼ˆtickï¼‰å‡ä¸ºå°çš„çº¿(Line)</p>
<p>æ•´ä¸ªæ„å»ºæµç¨‹æ˜¯ï¼Œå…ˆç”»å‡ºæ¨ªçº¿ä½œä¸ºåæ ‡è½´ï¼Œç„¶åä»å·¦åˆ°å³ç”»å‡ºä¸€ä¸ªä¸ªå°ç«–çº¿ï¼Œæœ€åå¢åŠ æ•°å­—ï¼Œç®­å¤´ç­‰å°éƒ¨ä»¶</p>
<h3 id="12-1-åæ ‡ç³»æŠ½è±¡ç±»-CoordinateSystem"><a href="#12-1-åæ ‡ç³»æŠ½è±¡ç±»-CoordinateSystem" class="headerlink" title="12.1 åæ ‡ç³»æŠ½è±¡ç±» CoordinateSystem"></a>12.1 åæ ‡ç³»æŠ½è±¡ç±» CoordinateSystem</h3><pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "dimension": 2,
        "x_min": -FRAME_X_RADIUS,
        "x_max": FRAME_X_RADIUS,
        "y_min": -FRAME_Y_RADIUS,
        "y_max": FRAME_Y_RADIUS,
    }
</code></pre>
<p>ä¸»è¦çš„å‡ ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p>
<p><strong>coordsæŒ‡çš„æ˜¯åæ ‡è½´ä¸­çš„ç‚¹çš„å€¼,pointæŒ‡æ²¡æœ‰åæ ‡è½´æ—¶çœŸå®çš„åæ ‡ï¼Œåœ¨åˆ›å»ºåæ ‡è½´æ—¶å€™ä¸­å¿ƒè®¾ç½®åœ¨ORIGINï¼Œåæ ‡å¤§å°æ²¡æœ‰ç¼©æ”¾çš„æ—¶å€™ä¸¤è€…æ˜¯ä¸€æ ·çš„</strong></p>
<ul>
<li><p>coords_to_point(*coords)ï¼›c2p(*coords):å°†åæ ‡ç³»ä¸­çš„ç‚¹çš„åæ ‡å€¼è½¬æ¢ä¸ºå±å¹•ä¸Šçš„ç‚¹</p>
</li>
<li><p>point_to_coords(point)ï¼›p2c(point)ï¼šcoords_to_pointé€†æ–¹æ³•</p>
</li>
<li><p>get_axes():å¾—åˆ°CoordinateSystemå¯¹è±¡ï¼Œä¸€èˆ¬ä¸ºåŒ…å«x,y,zåæ ‡çš„æ•°ç»„</p>
</li>
<li><p>get_axis(index):å¾—åˆ°indexå¯¹åº”çš„åæ ‡ï¼Œxyzåæ ‡å¯¹åº”çš„indexåˆ†åˆ«ä¸º1ï¼Œ2ï¼Œ3</p>
</li>
<li><p>get_x_axis();get_y_axis();get_z_axis()</p>
</li>
<li><p>get_axis_labelä¸€ç±»ï¼šç»™å¯¹åº”çš„åæ ‡ï¼ˆè½´ï¼‰æ·»åŠ æ ‡ç­¾ï¼Œæ˜¾ç¤ºæ ‡ç­¾ï¼Œå¹¶è¿”å›æ ‡ç­¾å¯¹è±¡</p>
<ul>
<li>get_axis_label(label_tex, axis, edge, direction, buff=MED_SMALL_BUFF):</li>
<li><p>get_axis_labels(x_label_tex=â€xâ€, y_label_tex=â€yâ€)ï¼š</p>
</li>
<li><p>get_x_axis_label(label_tex, edge=RIGHT, direction=DL, **kwargs)ï¼š</p>
</li>
<li><p>get_y_axis_label(label_tex, edge=UP, direction=DR, **kwargs):</p>
</li>
</ul>
<p>label_tex:åæ ‡æ ‡ç­¾ï¼Œä½¿ç”¨latexå­—ç¬¦ä¸²(TexMobject)</p>
<p>axis:æƒ³è·å–çš„åæ ‡æ ‡ç­¾çš„å¯¹åº”çš„åæ ‡å¯¹è±¡</p>
<p>edge:å››ä¸ªè¾¹ç¼˜ä½ç½®</p>
<p>directionï¼šåœ¨åæ ‡è½´çš„ç›¸å¯¹ä½ç½®</p>
<p>**kwargs:å…¶ä»–åœ¨configå†…çš„é…ç½®ï¼Œå¦‚é¢œè‰²ç­‰ï¼Œè‡ªè¡Œä¿®æ”¹</p>
</li>
</ul>
<p>get_graph(function, **kwargs):ç»™å®šæ–¹ç¨‹ï¼Œç»˜åˆ¶å›¾åƒå¹¶è¿”å›</p>
<p>get_parametric_curve(function, **kwargs):ç»˜åˆ¶ç»™å®šå‚æ•°æ›²çº¿æ–¹ç¨‹å¹¶è¿”å›</p>
<p>input_to_graph_point(x, graph):æš‚æ—¶æ²¡ææ¸…æ¥šå•¥ç©æ„</p>
<h3 id="12-2-äºŒç»´åæ ‡ç±»-Axes"><a href="#12-2-äºŒç»´åæ ‡ç±»-Axes" class="headerlink" title="12.2 äºŒç»´åæ ‡ç±» Axes"></a>12.2 äºŒç»´åæ ‡ç±» Axes</h3><p>ç»§æ‰¿CoordinateSystem</p>
<p>å®è´¨æ˜¯åˆ›é€ ä¸¤ä¸ªNumberLineæ•°è½´ï¼Œç„¶åå°†å…¶ä¸­ä¸€ä¸ªæŒ‰ç…§ä¸­å¿ƒæ—‹è½¬90åº¦ï¼Œä½œä¸ºYè½´ï¼Œç„¶åå¯¹Xï¼ŒYè½´è¿›è¡Œå…¶ä»–çš„å±æ€§è¿›è¡Œè°ƒæ•´ï¼Œæ‰€ä»¥é…ç½®é‡Œé¢æœ‰â€number_line_configâ€</p>
<p><strong>Axes(**kwargs)</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        # æ•°è½´çš„é…ç½®
        "number_line_config": {
            "color": LIGHT_GREY,
            "include_tip": True,
            "exclude_zero_from_default_numbers": True,
        },
        # æ¨ªåæ ‡è½´å’Œæ•°è½´çš„é»˜è®¤é…ç½®ä¸€æ ·ä¸éœ€è¦ä¿®æ”¹
        "x_axis_config": {},
        "y_axis_config": {
            # é»˜è®¤å°†â€œyâ€è¿™ä¸ªæ ‡ç­¾æ”¾åœ¨çºµåæ ‡è½´çš„å·¦ä¾§
            "label_direction": LEFT,
        },
        # åŸç‚¹é»˜è®¤å’Œå¸§å›¾çš„ä¸­å¿ƒç‚¹ä¸€è‡´
        "center_point": ORIGIN,
    }
</code></pre>
<p>å®ç°äº†ï¼š</p>
<ol>
<li><p>coords_to_point(*coords)ï¼›c2p(*coords):å°†åæ ‡ç³»ä¸­çš„ç‚¹çš„åæ ‡å€¼è½¬æ¢ä¸ºå±å¹•ï¼ˆå¸§å›¾ï¼‰ä¸Šçš„ç‚¹</p>
<p>åˆ†æä¸€ä¸‹æºç ï¼š</p>
</li>
</ol>
<pre class=" language-lang-python"><code class="language-lang-python">def coords_to_point(self, *coords):
        # å°†åæ ‡è½´ä¸­çš„åŸç‚¹0æ¢ç®—ä¸ºå¯¹åº”çš„å¸§å›¾ä¸­çš„åæ ‡
        origin = self.x_axis.number_to_point(0)
        # å°†å¸§å›¾åæ ‡è½¬æ¢ä¸ºå‘é‡
        result = np.array(origin)
        # result = åŸç‚¹å¯¹åº”çš„å¸§å›¾çš„åæ ‡+coordç›¸å¯¹å¸§å›¾ä¸­åŸç‚¹çš„åæ ‡ = coordåœ¨å¸§å›¾ä¸­çš„å®é™…åæ ‡
        for axis, coord in zip(self.get_axes(), coords):
            result += (axis.number_to_point(coord) - origin)
        return result
</code></pre>
<ol>
<li>point_to_coords(point)ï¼›p2c(point)</li>
</ol>
<p>å¢åŠ äº†æ–¹æ³•ï¼š</p>
<p>get_coordinate_labels(x_vals=None, y_vals=None)ï¼šä¼ å…¥x,yæ ‡ç­¾çš„latexå­—ç¬¦ä¸²ï¼Œå¾—åˆ°å¯¹åº”çš„x,yåæ ‡è½´çš„æ ‡ç­¾çš„å¯¹è±¡</p>
<p>add_coordinates(x_vals=None, y_vals=None):å’Œget_coordinate_labelsç›¸ä¼¼ï¼Œä½†æ˜¯å°†å…¶åŠ å…¥äº†è‡ªå·±çš„æˆå‘˜å˜é‡å¹¶è¿”å›äº†è‡ªå·±</p>
<h3 id="12-3-ä¸‰ç»´åæ ‡ç³»ç±»-ThreeDAxes"><a href="#12-3-ä¸‰ç»´åæ ‡ç³»ç±»-ThreeDAxes" class="headerlink" title="12.3 ä¸‰ç»´åæ ‡ç³»ç±» ThreeDAxes"></a>12.3 ä¸‰ç»´åæ ‡ç³»ç±» ThreeDAxes</h3><p>ç»§æ‰¿è‡ªAxes</p>
<p><strong>ThreeDAxes(**kwargs)</strong></p>
<pre class=" language-lang-python"><code class="language-lang-python">CONFIG = {
        "dimension": 3,
        "x_min": -5.5,
        "x_max": 5.5,
        "y_min": -5.5,
        "y_max": 5.5,
        "z_axis_config": {},
        "z_min": -3.5,
        "z_max": 3.5,
        "z_normal": DOWN,
        "num_axis_pieces": 20,
        "light_source": 9 * DOWN + 7 * LEFT + 10 * OUT,
    }
</code></pre>
<h3 id="12-4-NumberPlane"><a href="#12-4-NumberPlane" class="headerlink" title="12.4 NumberPlane"></a>12.4 NumberPlane</h3><h3 id="12-5-ComplexPlane"><a href="#12-5-ComplexPlane" class="headerlink" title="12.5  ComplexPlane"></a>12.5  ComplexPlane</h3><p>å¤æ•°åæ ‡ç³»ï¼Œç»§æ‰¿äºNumberPlane</p>
<pre class=" language-lang-python"><code class="language-lang-python"># author:TB
class ComplexPlaneScene(Scene):
    def construct(self):
        # See manimlib/mobject/number_line.py and coordinate_systems.py
        cp = ComplexPlane(
                        y_axis_config={"decimal_number_config":{"unit": "i"}},
                        number_line_config={"include_numbers":True}
                        )

        x_axis = cp[-2]
        y_axis = cp[-1]
        x_axis.set_color(RED)
        y_axis.set_color(PURPLE)

        x_labels = x_axis[1]
        x_labels.set_color(ORANGE)

        y_labels = y_axis[1]
        y_labels.set_color(YELLOW)
        for y in y_labels:
            y.rotate(-PI/2)

        x_label = TexMobject("x")
        x_label.move_to(cp.c2p(6.8,x_label.get_height()))
        y_label = TexMobject("y")
        y_label.move_to(cp.c2p(-y_label.get_width(),3.8))

        self.add(cp,x_label,y_label)

        self.wait()
</code></pre>
<h2 id="é™„å½•Aï¼šå¸¸è§çš„å¸¸æ•°"><a href="#é™„å½•Aï¼šå¸¸è§çš„å¸¸æ•°" class="headerlink" title="é™„å½•Aï¼šå¸¸è§çš„å¸¸æ•°"></a>é™„å½•Aï¼šå¸¸è§çš„å¸¸æ•°</h2><p><strong><em>\manimlib\constants.py</em></strong></p>
<h3 id="1-é¢œè‰²"><a href="#1-é¢œè‰²" class="headerlink" title="1. é¢œè‰²"></a>1. é¢œè‰²</h3><p>è§constants.pyä¸­<strong>COLOR_MAP</strong>ä¸­çš„åˆ—è¡¨</p>
<h3 id="2-æ–¹å‘"><a href="#2-æ–¹å‘" class="headerlink" title="2. æ–¹å‘"></a>2. æ–¹å‘</h3><pre class=" language-lang-python"><code class="language-lang-python">ORIGIN = np.array((0., 0., 0.))
UP = np.array((0., 1., 0.))
DOWN = np.array((0., -1., 0.))
RIGHT = np.array((1., 0., 0.))
LEFT = np.array((-1., 0., 0.))
IN = np.array((0., 0., -1.))
OUT = np.array((0., 0., 1.))
X_AXIS = np.array((1., 0., 0.))
Y_AXIS = np.array((0., 1., 0.))
Z_AXIS = np.array((0., 0., 1.))

# Useful abbreviations for diagonals
UL = UP + LEFT
UR = UP + RIGHT
DL = DOWN + LEFT
DR = DOWN + RIGHT

TOP = FRAME_Y_RADIUS * UP
BOTTOM = FRAME_Y_RADIUS * DOWN
LEFT_SIDE = FRAME_X_RADIUS * LEFT
RIGHT_SIDE = FRAME_X_RADIUS * RIGHT
</code></pre>
<h3 id="3-è§’åº¦"><a href="#3-è§’åº¦" class="headerlink" title="3. è§’åº¦"></a>3. è§’åº¦</h3><pre class=" language-lang-python"><code class="language-lang-python">PI = np.pi
TAU = 2 * PI
DEGREES = TAU / 360
</code></pre>
<h3 id="4-è·ç¦»"><a href="#4-è·ç¦»" class="headerlink" title="4. è·ç¦»"></a>4. è·ç¦»</h3><pre class=" language-lang-python"><code class="language-lang-python">SMALL_BUFF = 0.1
MED_SMALL_BUFF = 0.25
MED_LARGE_BUFF = 0.5
LARGE_BUFF = 1

DEFAULT_MOBJECT_TO_EDGE_BUFFER = MED_LARGE_BUFF
DEFAULT_MOBJECT_TO_MOBJECT_BUFFER = MED_SMALL_BUFF
</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>manim</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>manim</tag>
      </tags>
  </entry>
  <entry>
    <title>csapp-chapter02</title>
    <url>/2020/03/25/chapter02/</url>
    <content><![CDATA[<h2 id="2-1-ä¿¡æ¯å­˜å‚¨"><a href="#2-1-ä¿¡æ¯å­˜å‚¨" class="headerlink" title="2.1 ä¿¡æ¯å­˜å‚¨"></a>2.1 ä¿¡æ¯å­˜å‚¨</h2><h3 id="2-1-2-å­—æ•°æ®å¤§å°"><a href="#2-1-2-å­—æ•°æ®å¤§å°" class="headerlink" title="2.1.2 å­—æ•°æ®å¤§å°"></a>2.1.2 å­—æ•°æ®å¤§å°</h3><p><img src="image-20200320224158463.png" alt="image-20200320224158463" style="zoom:50%;"></p>
<h3 id="2-1-3-å¯»å€å’Œå­—èŠ‚é¡ºåº"><a href="#2-1-3-å¯»å€å’Œå­—èŠ‚é¡ºåº" class="headerlink" title="2.1.3 å¯»å€å’Œå­—èŠ‚é¡ºåº"></a>2.1.3 å¯»å€å’Œå­—èŠ‚é¡ºåº</h3><p>åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œé€šå¸¸æ˜¯ä»¥å­—èŠ‚ï¼ˆByteï¼‰ï¼Œä¹Ÿå°±æ˜¯ 8 ä¸ªä½ï¼ˆBitï¼‰ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒï¼ˆä¹Ÿæœ‰ä»¥ 16 ä½ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒçš„ï¼‰ã€‚å¯¹äºè·¨è¶Šå¤šä¸ªå­—èŠ‚çš„æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚ int é•¿ 4 ä¸ªå­—èŠ‚ï¼‰ï¼Œå¦‚ä½•åœ¨å†…å­˜ä¸­å¯¹è¿™äº›å­—èŠ‚è¿›è¡Œæ’åºæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•ï¼šå¤§ç«¯æ³•ï¼ˆBig-endianï¼‰å’Œå°ç«¯æ³•ï¼ˆLittle-endianï¼‰ã€‚</p>
<p><strong>ã€æ³¨ã€‘ä¸ç®¡æ˜¯å¤§ç«¯æ³•è¿˜æ˜¯å°ç«¯æ³•å­˜å‚¨ï¼Œè®¡ç®—æœºåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®çš„é¡ºåºéƒ½æ˜¯ä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼Œæ‰€ä¸åŒçš„æ˜¯é¦–å…ˆå–ä½å­—èŠ‚çš„æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€è¿˜æ˜¯å–é«˜å­—èŠ‚æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€ã€‚</strong></p>
<ul>
<li>è‹¥é¦–å…ˆå–é«˜å­—èŠ‚çš„æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€ï¼Œåˆ™æ˜¯å¤§ç«¯æ³•</li>
<li>è‹¥é¦–å…ˆå–ä½å­—èŠ‚çš„æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€ï¼Œåˆ™æ˜¯å°ç«¯æ³•</li>
</ul>
<p><img src="image-20200321000815181.png" alt="image-20200321000815181" style="zoom:50%;"></p>
<p>å¤§å¤šæ•°Intelå…¼å®¹æœºæ˜¯å°ç«¯æ³•</p>
<h3 id="2-1-9-Cè¯­è¨€ä¸­çš„ç§»ä½è¿ç®—"><a href="#2-1-9-Cè¯­è¨€ä¸­çš„ç§»ä½è¿ç®—" class="headerlink" title="2.1.9 Cè¯­è¨€ä¸­çš„ç§»ä½è¿ç®—"></a>2.1.9 Cè¯­è¨€ä¸­çš„ç§»ä½è¿ç®—</h3><p><img src="image-20200321181504713.png" alt="image-20200321181504713" style="zoom:50%;"></p>
<p><strong>é‡åˆ°ä¸€è¡Œå¤šä¸ªç§»ä½è¿ç®—çš„æ—¶å€™è¦è®°å¾—æ‰“æ‹¬å·</strong></p>
<h2 id="2-2-æ•´æ•°è¡¨ç¤º"><a href="#2-2-æ•´æ•°è¡¨ç¤º" class="headerlink" title="2.2 æ•´æ•°è¡¨ç¤º"></a>2.2 æ•´æ•°è¡¨ç¤º</h2><h3 id="2-2-3-è¡¥ç ç¼–ç "><a href="#2-2-3-è¡¥ç ç¼–ç " class="headerlink" title="2.2.3 è¡¥ç ç¼–ç "></a>2.2.3 è¡¥ç ç¼–ç </h3><p>ä¸ºäº†è¡¨ç¤ºè´Ÿæ•°,æœ€å¸¸è§çš„è®¡ç®—æœºè¡¨ç¤ºæ–¹å¼å°±æ˜¯è¡¥ç ,å°†æœ€é«˜ä½è¡¨ç¤ºä¸ºè´Ÿæƒ:</p>
<p><img src="image-20200322211917167.png" alt="image-20200322211917167"></p>
<p>æœ€é«˜ä½è¡¨ç¤ºçš„æƒé‡ä¸º$-2^{w-1}$.</p>
<p>è¡¥ç å’Œè®¡ç®—æœºè¡¨ç¤ºçš„äºŒè¿›åˆ¶ç çš„è½¬æ¢æ˜¯ä¸€ä¸€å¯¹åº”çš„(åŒå°„)</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆä¸ç”¨åŸç å’Œåç è¡¨ç¤ºè´Ÿæ•°:</p>
<ul>
<li>åŸç :æœ€é«˜ä½è¡¨ç¤ºç¬¦å·,å‰©ä¸‹ä½è¡¨ç¤ºæ•°å­—</li>
<li>åç :å’Œè¡¥ç ç±»ä¼¼,ä¸è¿‡æœ€é«˜ä½è¡¨ç¤ºçš„æƒé‡ä¸º$-(2^{w-1}-1)$</li>
</ul>
<p>è¿™ä¸¤ä¸ªç¼–ç æœ‰ä¸€ä¸ªä¸å¥½çš„æ€§è´¨,å¯¹æ•°å­—0æœ‰ä¸¤ä¸ªä¸åŒçš„ç¼–ç :</p>
<ul>
<li>åŸç ä¸­[00..0]è¡¨ç¤º+0,[10..0]è¡¨ç¤º-0</li>
<li>åç ä¸­[00..0]è¡¨ç¤º+0,[11..1]è¡¨ç¤º-0</li>
</ul>
<p>å³è¡¨ç¤ºçš„ç¼–ç ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„åŒå°„å…³ç³»</p>
</blockquote>
<h3 id="2-2-4-Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢"><a href="#2-2-4-Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="2.2.4 Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢"></a>2.2.4 Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢</h3><p>å¼ºåˆ¶è½¬æ¢å¯¹äºæœ‰ä¸€ç‚¹ç¼–ç¨‹ç»éªŒçš„äººæ¥è¯´,çœ‹ä¼¼ä¹ ä»¥ä¸ºå¸¸,ä½†æ˜¯åœ¨è®¾è®¡å¼ºåˆ¶è½¬æ¢çš„æ—¶å€™å¯ä»¥é€‰æ‹©å¾ˆå¤šè§„åˆ™,Cè¯­è¨€è½¬æ¢è§„åˆ™æ˜¯:ä»ä½çº§æ¥çœ‹,è€Œä¸æ˜¯ä»æ•°å€¼æ¥çœ‹.å³å¯¹åº”çš„äºŒè¿›åˆ¶ä¸å˜.</p>
<h3 id="2-2-6-æ‰©å±•ä¸€ä¸ªæ•°å­—çš„ä½è¡¨ç¤º"><a href="#2-2-6-æ‰©å±•ä¸€ä¸ªæ•°å­—çš„ä½è¡¨ç¤º" class="headerlink" title="2.2.6 æ‰©å±•ä¸€ä¸ªæ•°å­—çš„ä½è¡¨ç¤º"></a>2.2.6 æ‰©å±•ä¸€ä¸ªæ•°å­—çš„ä½è¡¨ç¤º</h3><p>è¾ƒå¤§çš„æ•°æ®ç±»å‹è½¬æ¢ä½è¾ƒå°çš„å¯èƒ½ä¼šå‡ºé”™,ä½†æ˜¯ä»è¾ƒå°çš„æ•°å­—è½¬æ¢ä¸ºè¾ƒå¤§çš„åº”è¯¥æ˜¯å¯ä»¥å®ç°çš„.</p>
<ul>
<li><p>å°†ä¸€ä¸ªæ— ç¬¦å·æ•°è½¬æ¢ä¸ºæ›´å¤§çš„æ•°æ®ç±»å‹,åªéœ€åœ¨å¼€å¤´åŠ 0å³å¯,ç§°ä¸º<strong>é›¶æ‰©å±•</strong>:</p>
<p><img src="image-20200322153501910.png" alt="image-20200322153501910"></p>
</li>
<li><p>å°†ä¸€ä¸ªè¡¥ç æ•°å­—è½¬æ¢ä¸ºæ›´å¤§çš„æ•°æ®ç±»å‹,å¯ä»¥åœ¨åœ¨å‰é¢å¡«å……æœ€é«˜æœ‰æ•ˆä½çš„å€¼,ç§°ä¸ºç¬¦å·æ‰©å±•:</p>
<p><img src="image-20200322153834509.png" alt="image-20200322153834509"></p>
<p>å…¶ä¸­$x_{w-1}$ä¸ºç¬¦å·ä½</p>
</li>
</ul>
<h2 id="2-3-æ•´æ•°è¿ç®—"><a href="#2-3-æ•´æ•°è¿ç®—" class="headerlink" title="2.3 æ•´æ•°è¿ç®—"></a>2.3 æ•´æ•°è¿ç®—</h2><h3 id="2-3-1-æ— ç¬¦å·åŠ æ³•"><a href="#2-3-1-æ— ç¬¦å·åŠ æ³•" class="headerlink" title="2.3.1 æ— ç¬¦å·åŠ æ³•"></a>2.3.1 æ— ç¬¦å·åŠ æ³•</h3><p>è€ƒè™‘ä¸¤ä¸ªéè´Ÿæ•°x,y,æ»¡è¶³$0 \le x,y\le 2^w-1$,æ¯ä¸ªæ•°éƒ½èƒ½è¡¨ç¤ºä¸ºwä½æ— ç¬¦å·æ•°,åˆ™æœ‰$0 \le x+y\le 2^{w+1}-2$,è¡¨ç¤ºè¿™ä¸ªå’Œå¯èƒ½éœ€è¦w+1ä½è¡¨ç¤º.</p>
<p>ä¸€èˆ¬å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ä»…ä»…æ”¯æŒå›ºå®šç²¾åº¦çš„è®¡ç®—,å› æ­¤ä¼šäº§ç”Ÿæº¢å‡º:</p>
<p><img src="image-20200322175257127.png" alt="image-20200322175257127"></p>
<p>ä¸Šè¿°çš„ä¹Ÿå¯ä»¥ç§°ä¸ºæ¨¡æ•°åŠ æ³•,å½¢æˆäº†ä¸€ä¸ªæ•°å­¦ç»“æ„,é˜¿è´å°”ç¾¤,æ»¡è¶³å¦‚ä¸‹æ€§è´¨:</p>
<ul>
<li>å¯äº¤æ¢</li>
<li>ä»…æœ‰ä¸€ä¸ªå•ä½å…ƒ(è¿™é‡Œå•ä½å…ƒæ˜¯0)</li>
<li>æ¯ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªåŠ æ³•é€†å…ƒ</li>
</ul>
<p>æ‰€ä»¥å¯¹äºæ— ç¬¦å·æ•°$x$éƒ½æœ‰å”¯ä¸€ä¸€ä¸ªé€†å…ƒ$-_w^u x$:</p>
<p><img src="image-20200322181059389.png" alt="image-20200322181059389"></p>
<h3 id="2-3-2-è¡¥ç åŠ æ³•"><a href="#2-3-2-è¡¥ç åŠ æ³•" class="headerlink" title="2.3.2 è¡¥ç åŠ æ³•"></a>2.3.2 è¡¥ç åŠ æ³•</h3><p>è¡¥ç åŠ æ³•å’Œæ— ç¬¦å·åŠ æ³•,å¯¹äºè®¡ç®—æœºæ¥è¯´å¤„ç†æ˜¯ä¸€æ ·çš„,å³æˆªæ–­,ç„¶åè®¡ç®—æœºä¼šå°†æˆªæ–­åçš„æ•°å­—å½“åšè¡¥ç è¿›è¡Œè§£è¯».</p>
<p><img src="image-20200322195842080.png" alt="image-20200322195842080"></p>
<h3 id="2-3-3-è¡¥ç çš„é"><a href="#2-3-3-è¡¥ç çš„é" class="headerlink" title="2.3.3 è¡¥ç çš„é"></a>2.3.3 è¡¥ç çš„é</h3><p>èŒƒå›´åœ¨$TMin_w \le x\le TMax_w$ä¸­çš„æ¯ä¸ªæ•°å­—xéƒ½æœ‰$+^t_w$ä¸‹çš„åŠ æ³•é€†å…ƒ$-^t_w$,ç§°ä¸ºè¡¥ç çš„é:</p>
<p><img src="image-20200322211418982.png" alt="image-20200322211418982"></p>
<h3 id="2-3-4-æ— ç¬¦å·ä¹˜æ³•"><a href="#2-3-4-æ— ç¬¦å·ä¹˜æ³•" class="headerlink" title="2.3.4 æ— ç¬¦å·ä¹˜æ³•"></a>2.3.4 æ— ç¬¦å·ä¹˜æ³•</h3><p>èŒƒå›´åœ¨$0\le x,y\le2^w-1$å†…çš„æ•´æ•°x,yå¯ä»¥è¢«è¡¨ç¤ºä¸ºwä½çš„æ— ç¬¦å·æ•°,å¯¹åº”çš„ä¹˜ç§¯$x \cdot y$çš„å–å€¼èŒƒå›´ä¸º$[0,2^{2w}-2^{w+1}+1]$éœ€è¦2wä½è¡¨ç¤º,ä½†æ˜¯Cè¯­è¨€æ˜¯ç”¨wä½è¡¨ç¤ºçš„,æ‰€ä»¥æœ‰æˆªæ–­:</p>
<p><img src="image-20200322214057227.png" alt="image-20200322214057227"></p>
<h3 id="2-3-5-è¡¥ç ä¹˜æ³•"><a href="#2-3-5-è¡¥ç ä¹˜æ³•" class="headerlink" title="2.3.5 è¡¥ç ä¹˜æ³•"></a>2.3.5 è¡¥ç ä¹˜æ³•</h3><p>èŒƒå›´åœ¨$-2^{w-1}\le x,y\le 2^{w-1}-1$å†…çš„æ•´æ•°x,yå¯ä»¥è¢«è¡¨ç¤ºä½wä½çš„è¡¥ç ,ä½†æ˜¯æˆä¹˜ç§¯èŒƒå›´åœ¨$-2^{w-1}\cdot (2^{w-1}-1)=-2^{2w-2}+2^{w-1}$åˆ°$-2^{w-1}\cdot -2^{w-1}=2^{2w-2}$ä¹‹é—´,è¿™ä¸ªèŒƒå›´éœ€è¦2wä½è¡¨ç¤º,Cè¯­è¨€å°†å…¶æˆªæ–­ä¸ºwä½,å°†å…¶è®°ä¸º$x*_w^t y$.</p>
<p>ä¸Šè¿°æœºå™¨è®¡ç®—çš„ç»“æœ,å¯ä»¥ç”¨ç®—æ³•è¡¨ç¤ºä¸º:å…ˆå°†ä¹˜ç§¯å¾—åˆ°çš„å€¼æ¨¡$2^w$,å¾—åˆ°çš„æ— ç¬¦å·æ•°è½¬æ¢ä¸ºè¡¥ç :</p>
<p><img src="image-20200322223742838.png" alt="image-20200322223742838"></p>
<p>æ ¹æ®ä¹¦ä¸Šçš„è¯æ˜æœ‰å¦‚ä¸‹ç»“è®º:ç›¸åŒä½è¡¨ç¤ºçš„æ— ç¬¦å·æ•°ä¹˜æ³•å’Œè¡¥ç ä¹˜æ³•å¾—åˆ°çš„äºŒè¿›åˆ¶æ•°ç»“æœæ˜¯ä¸€æ ·çš„:</p>
<p><img src="image-20200322230146529.png" alt="image-20200322230146529"></p>
<h3 id="2-3-6-ä¹˜ä»¥å¸¸æ•°"><a href="#2-3-6-ä¹˜ä»¥å¸¸æ•°" class="headerlink" title="2.3.6 ä¹˜ä»¥å¸¸æ•°"></a>2.3.6 ä¹˜ä»¥å¸¸æ•°</h3><p>å¤§å¤šæ•°æœºå™¨ä¸Šæ•´æ•°ä¹˜æ³•æŒ‡ä»¤ç›¸å½“æ…¢,å¤§å¤šéœ€è¦10+ä¸ªæ—¶é’Ÿå‘¨æœŸ,ç¼–è¯‘å™¨å› æ­¤è¿›è¡Œäº†ä¸€å®šçš„ä¼˜åŒ–:è¯•ç€ç”¨ä½ç§»å’ŒåŠ æ³•è¿ç®—çš„ç»„åˆæ¥ä»£æ›¿ä¹˜ä»¥å¸¸æ•°å› å­çš„ä¹˜æ³•.</p>
<p>ä¸‹é¢é¦–å…ˆè¯´è¯´ä¹˜ä»¥2çš„å¹‚çš„æƒ…å†µ:</p>
<p><img src="image-20200322231300422.png" alt="image-20200322231300422"></p>
<p>å› æ­¤,å·¦ç§»ä¸€ä¸ªæ•°å€¼ç­‰ä»·äºä¸€ä¸ªä¸2çš„å¹‚ç›¸ä¹˜çš„æ— ç¬¦å·ä¹˜æ³•:</p>
<p><img src="image-20200322231444005.png" alt="image-20200322231444005"></p>
<p>æ— è®ºæ˜¯æ— ç¬¦å·è¿˜æ˜¯è¡¥ç è¿ç®—,ä¹˜ä»¥2çš„å¹‚éƒ½ä¼šå¯¼è‡´æº¢å‡º,ä½†æ˜¯å³ä½¿æº¢å‡º,é€šè¿‡ç§»ä½çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„</p>
<p>ä¸ºäº†å‡å°‘ä»£ä»·,è®¸å¤šCè¯­è¨€ç¼–è¯‘å™¨è¯•å›¾ä»¥ä½ç§»,åŠ æ³•å‡æ³•æ¶ˆé™¤å¾ˆå¤šæ•´æ•°ä¹˜ä»¥å¸¸æ•°çš„æƒ…å†µ,ä¾‹å¦‚x*14å¯ä»¥é‡å†™ä¸º:(x&lt;&lt;3)+(x&lt;&lt;2)+(x&lt;&lt;1),æ›´å¥½åœ°æœ‰:(x&lt;&lt;4)-(x&lt;&lt;1)</p>
<p><strong>é€‰æ‹©ä¸Šè¿°çš„æ–¹æ³•è¿˜æ˜¯ä½¿ç”¨ä¹˜æ³•æŒ‡ä»¤,å–å†³äºæŒ‡ä»¤çš„ç›¸å¯¹é€Ÿåº¦,è€Œè¿™ä¸ªä¸æœºå™¨é«˜åº¦ç›¸å…³,ä¸€èˆ¬åªåœ¨ä»…éœ€è¦å°‘é‡ä½ç§»,åŠ æ³•å‡æ³•å°±è¶³å¤Ÿçš„æ—¶å€™ä½¿ç”¨è¿™ç§ä¼˜åŒ–</strong></p>
<h3 id="2-3-7-é™¤ä»¥2çš„å¹‚"><a href="#2-3-7-é™¤ä»¥2çš„å¹‚" class="headerlink" title="2.3.7 é™¤ä»¥2çš„å¹‚"></a>2.3.7 é™¤ä»¥2çš„å¹‚</h3><p>ä¸€èˆ¬åœ°,æ•´æ•°é™¤æ³•æ¯”æ•´æ•°ä¹˜æ³•æ›´æ…¢â€”éœ€è¦30+ä¸ªå‘¨æœŸ,ä½†æ˜¯é™¤ä»¥2çš„è¿ç®—å¯ä»¥é€šè¿‡å³ç§»è®¡ç®—.æ— ç¬¦å·å’Œè¡¥ç æ•°åˆ†åˆ«é€šè¿‡é€»è¾‘å³ç§»å’Œç®—æ•°å³ç§»å®ç°.</p>
<ol>
<li><p>æ— ç¬¦å·å³ç§»éå¸¸ç®€å•,å› ä¸ºä¸€å®šæ˜¯é€»è¾‘å³ç§»:</p>
<p><img src="image-20200322234628390.png" alt="image-20200322234628390"></p>
</li>
<li><p>é™¤ä»¥2çš„å¹‚çš„è¡¥ç è¿ç®—,æƒ…å†µç¨æœ‰å¤æ‚,é¦–å…ˆä¸ºäº†ä¿è¯ä¸ºè´Ÿ,éœ€è¦ç®—æœ¯å³ç§»:</p>
<p><img src="image-20200322235518595.png" alt="image-20200322235518595"></p>
<p><img src="image-20200323000249985.png" alt="image-20200323000249985"></p>
<p><strong>æ³¨æ„:ä¸Šå›¾ä¸­å‘ä¸Šèˆå…¥åŸç†,ç»è¿‡ä¸è‹±æ–‡ç‰ˆæ¯”è¾ƒ,æœ€ååº”ä¸ºâ€äº§ç”Ÿæ•°å€¼$\lceil  x/2^k\rceil$â€</strong>,å®šä¹‰åé‡ä¸º$(1&lt;&lt;k)-1$,ä¸‹é¢æœ‰å‡ ä¸ªä¾‹å­:</p>
<p><img src="image-20200323003738528.png" alt="image-20200323003738528"></p>
<p>æ ¹æ®ä¸‹å›¾çš„å‡ ä¸ªæ•°æ®ä¸ç›¸å…³çš„è¯æ˜å¯ä»¥çŸ¥é“:</p>
<ul>
<li>å¯¹äºä¸éœ€è¦èˆå…¥çš„æƒ…å†µ,åŠ ä¸Šåé‡åªä¼šå½±å“æœ€åè¢«ç§»æ‰çš„ä½</li>
<li>å¯¹äºéœ€è¦èˆå…¥çš„æƒ…å†µ,åŠ ä¸Šåé‡ä¼šå¯¼è‡´è¾ƒé«˜çš„ä½åŠ 1,è¿™ä¸ªä¼šå¯¼è‡´å‘0èˆå…¥</li>
</ul>
<blockquote>
<p>åç½®æŠ€æœ¯ç”¨çš„æ•°å­¦çŸ¥è¯†:$\lceil x/y\rceil=\lfloor (x+y-1)/y\rfloor$(x,yä¸ºæ•´æ•°)</p>
<p>æ‰€ä»¥ä¸Šé¢çš„å¼å­:(x+(1&lt;<k)-1)>&gt;k,ä¸­,yä¸º$2^k$,$(x+2^k-1)/2^k$å°±è¡¨ç¤º$\lceil  x/2^k\rceil$</k)-1)></p>
</blockquote>
</li>
</ol>
<p>ç»¼åˆ1,2ä¸¤ä¸ªæƒ…å†µ,å¾—åˆ°Cçš„ç®—æœ¯å³ç§»çš„è¡¥ç æœºå™¨,è®¡ç®—$x/2^k$:</p>
<pre class=" language-lang-c++"><code class="language-lang-c++">(x<0 ? x+(1<<k)-1 : x)>>k
</code></pre>
<p>å¯æƒœçš„æ˜¯,ä¸èƒ½å°†é™¤ä»¥2çš„å¹‚æ¨å¹¿åˆ°ä¸€èˆ¬é™¤æ³•.</p>
<h2 id="2-4-æµ®ç‚¹æ•°"><a href="#2-4-æµ®ç‚¹æ•°" class="headerlink" title="2.4 æµ®ç‚¹æ•°"></a>2.4 æµ®ç‚¹æ•°</h2><p>ä¸åè¿›åˆ¶ç±»ä¼¼,å½¢å¦‚$b<em>mb</em>{m-1}â€¦b<em>1b_0.b</em>{-1}b<em>{-2}â€¦b</em>{-n-1}b_{-n}$çš„äºŒè¿›åˆ¶æ•°,å…¶å¯¹åº”çš„åè¿›åˆ¶çš„å€¼ä¸º:</p>
<script type="math/tex; mode=display">
b=\sum_{i=-n}^{m}2^i\times b_i</script><p>æœ‰é™é•¿åº¦çš„ç¼–ç ä¸èƒ½è¡¨ç¤ºå¦‚$\frac{1}{3},\frac{5}{7}$çš„æ•°å­—,å°æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•ä»…èƒ½è¡¨ç¤ºèƒ½è¢«å†™æˆ$x\times2^y$çš„æ•°.</p>
<h3 id="2-4-2-IEEEæµ®ç‚¹è¡¨ç¤º"><a href="#2-4-2-IEEEæµ®ç‚¹è¡¨ç¤º" class="headerlink" title="2.4.2 IEEEæµ®ç‚¹è¡¨ç¤º"></a>2.4.2 IEEEæµ®ç‚¹è¡¨ç¤º</h3><p><img src="image-20200323182025508.png" alt="image-20200323182025508"></p>
<p>ä¸‹å›¾æ˜¯å¸¸è§çš„å•åŒç²¾åº¦çš„æµ®ç‚¹æ•°çš„æ ¼å¼:</p>
<p><img src="image-20200323183711302.png" alt="image-20200323183711302"></p>
<p>ä¸Šå›¾è¯´æ˜äº†:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç²¾åº¦</th>
<th>sä½æ•°</th>
<th>expä½æ•°</th>
<th>fracä½æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>å•</td>
<td>1</td>
<td>8</td>
<td>23</td>
</tr>
<tr>
<td>åŒ</td>
<td>1</td>
<td>11</td>
<td>52</td>
</tr>
</tbody>
</table>
</div>
<p>ç»™å®šä½è¡¨ç¤º,æ ¹æ®expçš„å€¼,è¢«ç¼–ç çš„å€¼å¯ä»¥åˆ†æˆä¸‰ç§ä¸åŒçš„æƒ…å†µ(æœ€åä¸€ç§æœ‰ä¸¤ä¸ªä¸åŒçš„å˜ç§),ä¸‹å›¾ä¸ºå•ç²¾åº¦çš„æ•°å­—è¡¨ç¤º:</p>
<p><img src="image-20200323192300543.png" alt="image-20200323192300543"></p>
<p>ç”±ä¸Šå›¾æœ‰ä»¥ä¸‹å‡ ä¸ªè§£ç :</p>
<ol>
<li><p>è§„æ ¼åŒ–çš„æ•°å€¼</p>
<p>æ­¤æ—¶,é˜¶ç çš„å€¼E=e-Bias,eæ˜¯expå­—æ®µå¯¹åº”çš„æ— ç¬¦å·æ•°,Biasä¸º$2^{k-1}-1$,å…¶ä¸­kä¸ºexpçš„ä½æ•°,å› æ­¤äº§ç”Ÿçš„æŒ‡æ•°Eçš„èŒƒå›´å¯¹äºå•ç²¾åº¦ä¸º-126~+127,å¯¹äºåŒç²¾åº¦ä¸º-1022~+1023</p>
<p>fracæ˜¯å°æ•°å€¼$f$,$0\le f &lt; 1$,äºŒè¿›åˆ¶è¡¨ç¤ºä¸º$0.f_{n-1}â€¦f_1f_0$,ä¸ºæ•°Må®šä¹‰ä¸º$M=1+f$,å› ä¸ºå¯¹äºäºŒè¿›åˆ¶æ¥è¯´,æŒ‰ç…§åè¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•çš„è§„åˆ™,äºŒè¿›åˆ¶ç§‘å­¦è®¡æ•°æ³•ç¬¬ä¸€ä½ä¸€å®šä¸º1,ä¸ºäº†èŠ‚çœæ¯”ç‰¹ä½,ç›´æ¥å°†å…¶éšè—,è¿™ç§æ–¹æ³•ä¹Ÿå«éšå«çš„ä»¥1å¼€å¤´çš„è¡¨ç¤º.</p>
</li>
<li><p>éè§„æ ¼åŒ–çš„å€¼</p>
<p>å½“é˜¶ç åŸŸexpå…¨éƒ¨æ˜¯0çš„æ—¶å€™,æ‰€è¡¨ç¤ºçš„æ•°å­—æ˜¯éè§„æ ¼åŒ–çš„å½¢å¼,æ­¤æ—¶é˜¶ç $E=1-Bias$,å°¾æ•°çš„å€¼æ˜¯$M=f$,ä¹Ÿå°±æ˜¯å°æ•°å­—æ®µçš„å€¼,ä¸åŒ…å«éšå«çš„1</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦å¯¹äºéè§„æ ¼åŒ–çš„å€¼è®¾ç½®è¿™æ ·çš„åç½®å€¼:</p>
<p>è¿™æ ·å¯ä»¥è®©ä»éè§„æ ¼åŒ–åˆ°è§„æ ¼åŒ–çš„è½¬æ¢å¹³æ»‘</p>
</blockquote>
<p>éè§„æ ¼åŒ–çš„ç”¨é€”:</p>
<ul>
<li><p>æä¾›ä¸€ç§è¡¨ç¤º0çš„æ–¹æ³•,å¦‚æœä½¿ç”¨è§„æ ¼åŒ–æ•°,å¿…é¡»$M\ge 1$,æ‰€ä»¥ä¸èƒ½è¡¨ç¤º0,$+0.0$çš„æµ®ç‚¹è¡¨ç¤ºä½æ¨¡å¼ä¸ºæ‰€æœ‰ä½ä¸º0,æ­¤æ—¶$M=f=0$,å½“ç¬¦å·ä½ä¸º1,å…¶ä»–æ‰€æœ‰ä½ä¸º0çš„çš„æ—¶å€™,è¡¨ç¤º$-0.0$.</p>
<p>IEEEçš„æµ®ç‚¹æ ¼å¼è¡¨ç¤º,$+0.0$å’Œ$-0.0$åœ¨æŸäº›æ–¹é¢æ˜¯ä¸åŒçš„</p>
</li>
<li><p>è¡¨ç¤ºé‚£äº›éå¸¸æ¥è¿‘0.0çš„æ•°,éè§„æ ¼åŒ–æä¾›ä¸€ç§å±æ€§:é€æ¸æº¢å‡º(gradual underflow),è¡¨ç¤ºä¸€ä¸ªæ•°ä¸0çš„è·ç¦»éå¸¸å°</p>
</li>
</ul>
</li>
<li><p>ç‰¹æ®Šå€¼</p>
<ul>
<li>3a: å½“é˜¶ç åŸŸexpå…¨æ˜¯1,å°æ•°åŸŸå…¨æ˜¯0,å¾—åˆ°çš„å€¼è¡¨ç¤ºæ— ç©·,så†³å®šæ˜¯æ­£æ— ç©·è¿˜æ˜¯è´Ÿæ— ç©·,å½“æŠŠä¸¤ä¸ªéå¸¸å¤§çš„æ•°å­—ç›¸ä¹˜æˆ–è€…è¿›è¡Œäº†é™¤ä»¥0çš„æ“ä½œå,æ— ç©·èƒ½è¡¨ç¤ºæº¢å‡º</li>
<li>3b: å½“å°æ•°åŸŸé0çš„æ—¶å€™,ç»“æœå€¼ä¸ºNaN(Not a Number),è¿™ç”¨äºè¡¨ç¤ºä¸æ˜¯å®æ•°æˆ–è€…æ— ç©·:$\sqrt{-1}æˆ–\infty - \infty $ç­‰</li>
</ul>
</li>
</ol>
<h3 id="2-4-3-æ•°å­—ç¤ºä¾‹"><a href="#2-4-3-æ•°å­—ç¤ºä¾‹" class="headerlink" title="2.4.3 æ•°å­—ç¤ºä¾‹"></a>2.4.3 æ•°å­—ç¤ºä¾‹</h3><p><img src="image-20200323232701819.png" alt="image-20200323232701819"></p>
<p><img src="image-20200323232716933.png" alt="image-20200323232716933"></p>
<h3 id="2-4-4-èˆå…¥"><a href="#2-4-4-èˆå…¥" class="headerlink" title="2.4.4 èˆå…¥"></a>2.4.4 èˆå…¥</h3><p>é»˜è®¤çš„æ–¹å¼ä¸º:å‘å¶æ•°èˆå…¥,ä¹Ÿè¢«ç§°ä¸ºå‘æœ€è¿‘çš„å€¼èˆå…¥(round-to-nearest),åˆå«å‘å¶æ•°èˆå…¥(round-to-even).æ–¹æ³•ä¸ºâ€å››èˆå…­å…¥äº”æˆåŒâ€,ä½¿å¾—åˆ°çš„æœ€ä½æœ‰æ•ˆä½ä¸ºå¶æ•°</p>
<p>å…¶ä»–çš„å‡ ç§æœ‰:å‘é›¶èˆå…¥,å‘ä¸‹èˆå…¥,å‘ä¸Šèˆå…¥</p>
<p>å‘å¶èˆå…¥çš„åŸå› :ä¸ºäº†å°†50%çš„å‡ ç‡å‘ä¸Šèˆå…¥å’Œ50%å‡ ç‡å‘ä¸‹èˆå…¥</p>
<p>å‘å¶èˆå…¥ä¹Ÿå¯ä»¥åº”ç”¨åˆ°äºŒè¿›åˆ¶:å°†æœ€ä½æœ‰æ•ˆä½çš„å€¼ä¸º0è®¤ä¸ºæ˜¯å¶æ•°,1ä¸ºå¥‡æ•°</p>
<h3 id="2-4-5-æµ®ç‚¹è¿ç®—"><a href="#2-4-5-æµ®ç‚¹è¿ç®—" class="headerlink" title="2.4.5 æµ®ç‚¹è¿ç®—"></a>2.4.5 æµ®ç‚¹è¿ç®—</h3><p>IEEEæ ‡å‡†åˆ¶å®šäº†ç®€å•çš„è§„åˆ™ç¡®å®šåŠ æ³•ä¹˜æ³•è¿™æ ·çš„ç®—æœ¯è¿ç®—ç»“æœ:</p>
<p>ç”±äºç²¾åº¦çš„é™åˆ¶,å¯¹äºä¸¤ä¸ªæµ®ç‚¹æ•°x,y,æŸä¸ªè¿ç®—$x\bigodot y$äº§ç”Ÿçš„å€¼,è®¡ç®—æœºä¼šå†è¿›è¡Œèˆå…¥:$Round(x\bigodot y)$</p>
<p>å½“å…¶ä¸­æœ‰ä¸€ä¸ªä¸ºç‰¹æ®Šå€¼çš„æ—¶å€™(å¦‚-0,æ— ç©·,NaN),IEEEå®šä¹‰äº†ä¸€äº›æ›´åˆç†çš„è§„åˆ™:1/-0äº§ç”Ÿ$-\infty$,1/+0äº§ç”Ÿ$+\infty$.</p>
<p>æ•´æ•°åŠ æ³•å½¢æˆäº†é˜¿è´å°”ç¾¤,IEEEæ ‡å‡†å®æ•°åŠ æ³•ä¹Ÿæ„æˆäº†é˜¿è´å°”ç¾¤,ä½†æ˜¯è¯æ˜è¿‡ç¨‹éœ€è¦åŠ ä¸ŠRound()å‡½æ•°çš„è¯æ˜:</p>
<p>å°†$x+^fy$å®šä¹‰ä¸º$Round(x+y)$,å¦‚æœä¸è€ƒè™‘æº¢å‡ºåˆ™ç›´æ¥å¯ä»¥å¾—åˆ°å°±æ˜¯é˜¿è´å°”ç¾¤,ä½†æ˜¯å¦‚æœè€ƒè™‘æº¢å‡º:</p>
<ol>
<li><p>äº¤æ¢å¾‹</p>
<p>äº¤æ¢å¾‹:äº¤æ¢x,yæ˜¯éƒ½ä¼šåŒæ ·çš„æ–¹å¼æº¢å‡º,æ‰€ä»¥$+^f$æ˜¯å¯äº¤æ¢çš„;</p>
</li>
<li><p>ä¸å¯ç»“åˆ:ä¾‹å¦‚,ä½¿ç”¨å•ç²¾åº¦æµ®ç‚¹(3.14+1e10)-1e10=0.0å› ä¸º3.14ä½œä¸ºå°¾æ•°è¢«èˆå…¥,å‡å»1e10å˜ä¸º0,è€Œ3.14+(1e10-1e10)=3.14ï¼‰</p>
</li>
<li><p>é€†å…ƒ</p>
<p>å¯¹äºx,ä¸è€ƒè™‘æº¢å‡ºæ˜æ˜¾æœ‰é€†å…ƒ-x,å¦‚æœè€ƒè™‘æº¢å‡º:$x+^f(-x)$ä¸€èˆ¬éƒ½ä¸º0,ä½†æ˜¯æœ‰ä¾‹å¤–$+\infty+^f(-\infty)=NaN$,$NaN+^fx=NaN$</p>
<p>å¯è§è¿™ä¸ªé€†å…ƒä¸èƒ½æ™®é€‚,æ‰€ä»¥ä¹Ÿä¸å­˜åœ¨å•ä½å…ƒ,æ‰€ä»¥$+^{f}$ä¸æ˜¯é˜¿è´å°”ç¾¤</p>
</li>
<li><p>å¦å¤–æµ®ç‚¹åŠ æ³•çš„æ€§è´¨è¿˜åŒ…å«å•è°ƒæ€§</p>
</li>
</ol>
<p>æµ®ç‚¹ä¹˜æ³•å…·æœ‰:</p>
<ol>
<li><p>äº¤æ¢å¾‹</p>
</li>
<li><p>ä¸å¯ç»“åˆ</p>
</li>
<li><p>å¯¹åŠ æ³•ä¸å…·æœ‰åˆ†é…å¾‹</p>
</li>
<li><p>å•è°ƒæ€§:</p>
<script type="math/tex; mode=display">
a \ge b ä¸” c \ge 0 \to a * ^f c\ge b*^fc\\
a \ge b ä¸” c \le 0 \to a * ^f c\le b*^fc</script></li>
<li><p>å¹³æ–¹å¤§äºç­‰äº0:</p>
<p>è‹¥$a\ne 0:a*a\ge0$</p>
</li>
</ol>
<p>ç¼ºä¹ç»“åˆæ€§å’Œåˆ†é…æ€§å¯¹ç§‘å­¦è®¡ç®—ç¨‹åºå‘˜å’Œç¼–è¯‘å™¨çš„ç¼–å†™é€ æˆéº»çƒ¦</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿè¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>manimçš„ä¸»è¦ç»˜å›¾ç±»</title>
    <url>/2020/03/27/manim-de-zhu-yao-hui-tu-lei/</url>
    <content><![CDATA[<p>manimçš„æ•´ä½“ç»“æ„è§£æ</p>
<h2 id="1-CONFIGæ˜¯ä»€ä¹ˆ"><a href="#1-CONFIGæ˜¯ä»€ä¹ˆ" class="headerlink" title="1. CONFIGæ˜¯ä»€ä¹ˆ"></a>1. CONFIGæ˜¯ä»€ä¹ˆ</h2><p>å‡ ä¹ä»»ä½•çš„ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªç¥å¥‡çš„å­—å…¸,å«<code>CONFIG</code>,è¿™ä¸ªå­—å…¸çš„æ‰€æœ‰é”®å€¼å¯¹éƒ½ä¼šè¢«èµ‹äºˆç»™ç±»çš„å±æ€§,åŸå› æ˜¯å› ä¸ºæ‰€æœ‰çš„ç»˜å›¾ç±»éƒ½æ˜¯ç»§æ‰¿è‡ª<strong>Container</strong>ç±»(<em>ä½ç½®:\manimlib\container\container.py</em>),è¿™ä¸ªç±»åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä»£ç å¦‚ä¸‹:</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Container(object):
    def __init__(self, **kwargs):
        digest_config(self, kwargs)
</code></pre>
<p>è€Œ<em>digest_config</em>åœ¨<em>\manimlib\utils\config_ops.py</em>:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def digest_config(obj, kwargs, caller_locals={}):
    """
    Sets init args and CONFIG values as local variables

    The purpose of this function is to ensure that all
    configuration of any object is inheritable, able to
    be easily passed into instantiation, and is attached
    as an attribute of the object.

    å°†åˆå§‹åŒ–å‚æ•°å’ŒCONFIGå€¼è®¾ç½®ä¸ºå±€éƒ¨å˜é‡

    æ­¤åŠŸèƒ½çš„ç›®çš„æ˜¯ç¡®ä¿æ‰€æœ‰ä»»ä½•å¯¹è±¡çš„é…ç½®éƒ½æ˜¯å¯ç»§æ‰¿çš„ï¼Œèƒ½å¤Ÿæ˜“äºä¼ 
    é€’åˆ°å®ä¾‹åŒ–å¹¶é™„åŠ ä½œä¸ºå¯¹è±¡çš„å±æ€§ã€‚
    """

    # Assemble list of CONFIGs from all super classes
    # å°†æ‰€æœ‰çˆ¶ç±»çš„CONFIGå…¨éƒ¨é›†ä¸­åœ¨static_configs
    classes_in_hierarchy = [obj.__class__]
    static_configs = []
    while len(classes_in_hierarchy) > 0:
        Class = classes_in_hierarchy.pop()
        classes_in_hierarchy += Class.__bases__
        if hasattr(Class, "CONFIG"):
            static_configs.append(Class.CONFIG)

    # Order matters a lot here, first dicts have higher priority
    # é¡ºåºå¾ˆé‡è¦,å­—å…¸çš„é å‰çš„é”®å€¼å¯¹æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§(å³å¦‚æœæœ‰ç›¸åŒçš„,è¦†ç›–åé¢çš„é”®å€¼å¯¹)
    # ä¼˜å…ˆçº§çš„å¤„ç†æ˜¯ç”±merge_dicts_recursivelyå‡½æ•°å¤„ç†çš„,å…·ä½“è‡ªå·±è¯»æºä»£ç 
    caller_locals = filtered_locals(caller_locals)
    all_dicts = [kwargs, caller_locals, obj.__dict__]
    all_dicts += static_configs
    obj.__dict__ = merge_dicts_recursively(*reversed(all_dicts))
</code></pre>
<p>ä¸Šé¢çš„è‹±æ–‡è§£é‡Šå·²ç»å¾ˆæ¸…æ¥šäº†,ä¸€å¥è¯æ¦‚æ‹¬è¿™ä¸ªå‡½æ•°:å°†CONFIGè¿™ä¸ªå­—å…¸ä¸­çš„å†…å®¹å˜æˆç±»çš„å±æ€§.<br>å€¼å¾—æ³¨æ„çš„æ˜¯:<strong>è¿™ä¸ªå­—å…¸çš„ä¸€äº›é”®çš„å€¼å¯ä»¥ç»§ç»­ä¸ºCONFIGå­—å…¸</strong></p>
<h2 id="2-ä¸»è¦ç±»å›¾"><a href="#2-ä¸»è¦ç±»å›¾" class="headerlink" title="2. ä¸»è¦ç±»å›¾"></a>2. ä¸»è¦ç±»å›¾</h2><p>Containerç±»å›¾:</p>
<p><img src="Container.png" alt="Containerç±»å›¾"></p>
<p>Mobjectç±»å›¾:</p>
<p><img src="Mobject.png" alt="Mobjectç±»å›¾"></p>
<p>å…¶ä¸­çš„VMobjectç±»å›¾:</p>
<p><img src="VMobject.png" alt="VMobjectç±»å›¾"></p>
<p>Sceneç±»å›¾:</p>
<p><img src="Scene.png" alt="Sceneç±»å›¾"></p>
<p>Cameraç±»å›¾:</p>
<p><img src="Camera.png" alt="Cameraç±»å›¾"></p>
<p>Animationç±»å›¾:</p>
<p><img src="Animation.png" alt="Animationç±»å›¾"></p>
<h2 id="3-å°ç»“"><a href="#3-å°ç»“" class="headerlink" title="3. å°ç»“"></a>3. å°ç»“</h2><p>æ—¶éš”å‡ ä¸ªæœˆ,æˆ‘åˆé‡æ–°æ›´æ–°å¹¶çœ‹äº†ä¸€ä¸‹manimçš„repo,è¿™æ¬¡æˆ‘ä»…ä»…æ˜¯ç²—ç•¥çœ‹äº†ä¸€ä¸‹manimçš„ç»“æ„,å‘ç°å˜åŒ–è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„,ç›¸æ¯”å‡ ä¸ªæœˆå‰çš„éš¾ä»¥é˜…è¯»,åˆ°ç°åœ¨å‡ ä¹æ˜¯å¾ˆå¥½é˜…è¯»äº†.</p>
<p>æˆ‘åœ¨æ­¤ä¹Ÿå¯¹æ•´ä¸ªæ–‡ä»¶ç»“æ„çš„æ‰€æœ‰ç±»å›¾å†…å®¹æ‰«æäº†ä¸€é,å‘ç°æ•´ä¸ªä»£ç é‡Œé¢å‡ ä¹èƒ½æƒ³åˆ°çš„å½¢å¼éƒ½æœ‰å¯¹åº”çš„ç±»å®ç°,æœ‰çš„ç±»çš„ç»§æ‰¿å®ç°ç”šè‡³éå¸¸å¤šä½™,å› ä¸ºå°±æ”¹äº†ä¸€ä¸¤ä¸ªå‚æ•°,è¿™å‡ ä¹å¯ä»¥è‡ªå·±å†™,ä¸è¿‡è¿™manimæœ¬èº«ç›®çš„å°±ä¸æ˜¯ç»™å…¬å¼€ä½¿ç”¨,è€Œæ˜¯Grant Sandersonç”¨æ¥åšè§†é¢‘çš„.</p>
<p>å¦‚æœæœ‰æ—¶é—´æˆ‘ä¼šå¯¹å‡ ä¸ªæœ€åŸºæœ¬çš„ç±»è¿›è¡Œè§£é‡Š,å¦‚æœæŠŠæœ€åŸºæœ¬çš„ç±»ç”¨æ³•è§£é‡Šæ¸…æ¥šæ¥ä¸‹æ¥å°±å¯ä»¥å¾ˆå¥½çš„åˆ¶ä½œ3b1bé£æ ¼è§†é¢‘äº†.</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>manim</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>manim</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ç« </title>
    <url>/2020/04/25/ji-suan-ji-wang-luo-di-yi-zhang/</url>
    <content><![CDATA[<h2 id="1-2-äº’è”ç½‘æ¦‚è¿°"><a href="#1-2-äº’è”ç½‘æ¦‚è¿°" class="headerlink" title="1.2 äº’è”ç½‘æ¦‚è¿°"></a>1.2 äº’è”ç½‘æ¦‚è¿°</h2><h3 id="1-2-1ç½‘ç»œçš„ç½‘ç»œ"><a href="#1-2-1ç½‘ç»œçš„ç½‘ç»œ" class="headerlink" title="1.2.1ç½‘ç»œçš„ç½‘ç»œ"></a>1.2.1ç½‘ç»œçš„ç½‘ç»œ</h3><p><strong>è®¡ç®—æœºç½‘ç»œï¼ˆç®€ç§°ä¸ºç½‘ç»œï¼‰</strong>ç”±è‹¥å¹²ç»“ç‚¹ï¼ˆnodeï¼‰å’Œè¿æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯ï¼ˆlinkï¼‰ç»„æˆã€‚ç½‘ç»œä¸­çš„ç»“ç‚¹å¯ä»¥æ˜¯è®¡ç®—æœºã€é›†çº¿å™¨ã€äº¤æ¢æœºæˆ–è·¯ç”±å™¨ç­‰</p>
<p><img src="image-20200422123653298.png" alt="ç½‘ç»œ"></p>
<p>(a)å›¾ä¸‰ä¸ªè®¡ç®—æœºå’Œä¸€ä¸ªèŠ‚ç‚¹ç»„æˆäº†ä¸€ä¸ªç½‘ç»œ,ä¸Šé¢ä¸€ç‰‡äº‘ä»£è¡¨ä¸€ä¸ªç½‘ç»œ,(b)å›¾ä¸­,å¾ˆå¤šç½‘ç»œè¿æ¥èµ·æ¥ç»„æˆæ›´å¤§çš„ç½‘ç»œ,æˆä¸ºç½‘ç»œçš„ç½‘ç»œ,å³äº’è”ç½‘</p>
<p>ä¹ æƒ¯ä¸Šï¼Œä¸ç½‘ç»œç›¸è¿çš„è®¡ç®—æœºæˆ–æ‰‹æœºç­‰ç»ˆç«¯å¸¸ç§°ä¸º<strong>ä¸»æœº</strong>ï¼ˆhostï¼‰ã€‚</p>
<h3 id="1-2-2-äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#1-2-2-äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="1.2.2 äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"></a>1.2.2 äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ</h3><ol>
<li><p>ç¬¬ä¸€é˜¶æ®µæ˜¯ä»å•ä¸ªç½‘ç»œARPANETå‘äº’è¿ç½‘å‘å±•çš„è¿‡ç¨‹</p>
<p>1969å¹´ç¾å›½å›½é˜²éƒ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†ç»„äº¤æ¢ç½‘ARPANETæœ€åˆåªæ˜¯ä¸€ä¸ªå•ä¸ªçš„åˆ†ç»„äº¤æ¢ç½‘ï¼ˆå¹¶ä¸æ˜¯ä¸€ä¸ªäº’è¿çš„<br>ç½‘ç»œï¼‰ã€‚</p>
<p>1983å¹´TCP/IPåè®®æˆä¸ºARPANETä¸Šçš„æ ‡å‡†åè®®ï¼Œä½¿å¾—æ‰€æœ‰ä½¿ç”¨TCP/IPåè®®çš„è®¡ç®—æœºéƒ½èƒ½åˆ©ç”¨äº’è¿ç½‘ç›¸äº’é€šä¿¡ï¼Œå› è€Œäººä»¬å°±æŠŠ1983å¹´ä½œä¸ºäº’è”ç½‘çš„è¯ç”Ÿæ—¶é—´ã€‚</p>
<p><strong>internetå’ŒInternetçš„åŒºåˆ«:</strong></p>
<ul>
<li><p>ä»¥å°å†™å­—æ¯iå¼€å§‹çš„internetï¼ˆäº’è¿ç½‘ï¼‰æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„è®¡ç®—æœºç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®ï¼ˆå³é€šä¿¡è§„åˆ™ï¼‰å¯ä»¥ä»»æ„é€‰æ‹©ï¼Œä¸ä¸€å®šéè¦ä½¿ç”¨TCP/IPåè®®ã€‚</p>
</li>
<li><p>ä»¥å¤§å†™å­—æ¯Iå¼€å§‹çš„Internetï¼ˆäº’è”ç½‘ï¼Œæˆ–å› ç‰¹ç½‘ï¼‰åˆ™æ˜¯ä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šäº’è¿ç½‘ï¼Œå®ƒé‡‡ç”¨TCP/IPåè®®æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™ï¼Œä¸”å…¶å‰èº«æ˜¯ç¾å›½çš„ARPANETã€‚</p>
</li>
</ul>
</li>
<li><p>ç¬¬äºŒé˜¶æ®µçš„ç‰¹ç‚¹æ˜¯å»ºæˆäº†ä¸‰çº§ç»“æ„çš„äº’è”ç½‘</p>
<p>ä»1985å¹´èµ·ï¼Œç¾å›½å›½å®¶ç§‘å­¦åŸºé‡‘ä¼šNSFï¼ˆNational Science Foundationï¼‰å°±å›´ç»•å…­ä¸ªå¤§å‹è®¡ç®—æœºä¸­å¿ƒå»ºè®¾è®¡ç®—æœºç½‘ç»œï¼Œå³å›½å®¶ç§‘å­¦åŸºé‡‘ç½‘NSFNETã€‚å®ƒæ˜¯ä¸€ä¸ªä¸‰çº§è®¡ç®—æœºç½‘ç»œï¼Œåˆ†ä¸ºä¸»å¹²ç½‘ã€åœ°åŒºç½‘å’Œæ ¡å›­ç½‘ï¼ˆæˆ–ä¼ä¸šç½‘ï¼‰ã€‚</p>
</li>
<li><p>ç¬¬ä¸‰é˜¶æ®µçš„ç‰¹ç‚¹æ˜¯é€æ¸å½¢æˆäº†å¤šå±‚æ¬¡ISPç»“æ„çš„äº’è”ç½‘</p>
<p>1993å¹´å¼€å§‹å‡ºç°äº’è”ç½‘æœåŠ¡æä¾›è€…ISPï¼ˆInternet Service Providerï¼‰ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒISPå°±æ˜¯ä¸€ä¸ªè¿›è¡Œå•†ä¸šæ´»åŠ¨çš„å…¬å¸ï¼Œå› æ­¤ISPåˆå¸¸è¯‘ä¸ºäº’è”ç½‘æœåŠ¡æä¾›å•†ã€‚ä¾‹å¦‚ï¼Œä¸­å›½ç”µä¿¡ã€ä¸­å›½è”é€šå’Œä¸­å›½ç§»åŠ¨ç­‰å…¬å¸éƒ½æ˜¯æˆ‘å›½æœ€æœ‰åçš„ISPã€‚</p>
</li>
</ol>
<h2 id="1-3-äº’è”ç½‘çš„ç»„æˆ"><a href="#1-3-äº’è”ç½‘çš„ç»„æˆ" class="headerlink" title="1.3 äº’è”ç½‘çš„ç»„æˆ"></a>1.3 äº’è”ç½‘çš„ç»„æˆ</h2><p>å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸¤å¤§å—ï¼š</p>
<ul>
<li>è¾¹ç¼˜éƒ¨åˆ†ã€€ç”±æ‰€æœ‰è¿æ¥åœ¨äº’è”ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘ï¼‰å’Œèµ„æºå…±äº«</li>
<li>æ ¸å¿ƒéƒ¨åˆ†ã€€ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆæä¾›è¿é€šæ€§å’Œäº¤æ¢ï¼‰</li>
</ul>
<p><img src="image-20200423114135405.png" alt="äº’è”ç½‘è¾¹ç¼˜éƒ¨åˆ†å’Œæ ¸å¿ƒéƒ¨åˆ†"></p>
<h3 id="1-3-1-äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†"><a href="#1-3-1-äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†" class="headerlink" title="1.3.1 äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†"></a>1.3.1 äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†</h3><p>å¤„åœ¨äº’è”ç½‘è¾¹ç¼˜çš„éƒ¨åˆ†å°±æ˜¯è¿æ¥åœ¨äº’è”ç½‘ä¸Šçš„æ‰€æœ‰çš„ä¸»æœºã€‚è¿™äº›ä¸»æœºåˆç§°ä¸ºç«¯ç³»ç»Ÿï¼ˆend systemï¼‰</p>
<p><strong>â€œä¸»æœºAå’Œä¸»æœºBè¿›è¡Œé€šä¿¡â€ï¼Œå®é™…ä¸Šæ˜¯æŒ‡ï¼šâ€œè¿è¡Œåœ¨ä¸»æœºAä¸Šçš„æŸä¸ªç¨‹åºå’Œè¿è¡Œåœ¨ä¸»æœºBä¸Šçš„å¦ä¸€ä¸ªç¨‹åºè¿›è¡Œé€šä¿¡â€ã€‚ç”±äºâ€œè¿›ç¨‹â€å°±æ˜¯â€œè¿è¡Œç€çš„ç¨‹åºâ€ï¼Œå› æ­¤è¿™ä¹Ÿå°±æ˜¯æŒ‡ï¼šâ€œä¸»æœºAçš„æŸä¸ªè¿›ç¨‹å’Œä¸»æœºBä¸Šçš„å¦ä¸€ä¸ªè¿›ç¨‹è¿›è¡Œé€šä¿¡â€ã€‚è¿™ç§æ¯”è¾ƒä¸¥å¯†çš„è¯´æ³•é€šå¸¸å¯ä»¥ç®€ç§°ä¸ºâ€œè®¡ç®—æœºä¹‹é—´é€šä¿¡â€ã€‚</strong></p>
<p>åœ¨ç½‘ç»œè¾¹ç¼˜çš„ç«¯ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ–¹å¼é€šå¸¸å¯åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šå®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆC/Sæ–¹å¼ï¼‰å’Œå¯¹ç­‰æ–¹å¼ï¼ˆP2Pæ–¹å¼):</p>
<ol>
<li><p>å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼</p>
<p>ä¸Šç½‘å‘é€ç”µå­é‚®ä»¶æˆ–åœ¨ç½‘ç«™ä¸ŠæŸ¥æ‰¾èµ„æ–™æ—¶ï¼Œéƒ½æ˜¯ä½¿ç”¨å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆæœ‰æ—¶å†™ä¸ºå®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ï¼‰ã€‚</p>
<p>å®¢æˆ·ï¼ˆclientï¼‰å’ŒæœåŠ¡å™¨ï¼ˆserverï¼‰éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼æ‰€æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³»ã€‚</p>
<p>å®¢æˆ·ç¨‹åºçš„ç‰¹ç‚¹:</p>
<ul>
<li>è¢«ç”¨æˆ·è°ƒç”¨åè¿è¡Œï¼Œåœ¨é€šä¿¡æ—¶ä¸»åŠ¨å‘è¿œåœ°æœåŠ¡å™¨å‘èµ·é€šä¿¡ï¼ˆè¯·æ±‚æœåŠ¡ï¼‰ã€‚å› æ­¤ï¼Œå®¢æˆ·ç¨‹åºå¿…é¡»çŸ¥é“æœåŠ¡å™¨ç¨‹åºçš„åœ°å€ã€‚</li>
<li>ä¸éœ€è¦ç‰¹æ®Šçš„ç¡¬ä»¶å’Œå¾ˆå¤æ‚çš„æ“ä½œç³»ç»Ÿã€‚</li>
</ul>
<p>æœåŠ¡å™¨ç¨‹åºï¼š</p>
<ul>
<li>æ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥æä¾›æŸç§æœåŠ¡çš„ç¨‹åºï¼Œå¯åŒæ—¶å¤„ç†å¤šä¸ªè¿œåœ°æˆ–æœ¬åœ°å®¢æˆ·çš„è¯·æ±‚ã€‚</li>
<li>ç³»ç»Ÿå¯åŠ¨åå³è‡ªåŠ¨è°ƒç”¨å¹¶ä¸€ç›´ä¸æ–­åœ°è¿è¡Œç€ï¼Œè¢«åŠ¨åœ°ç­‰å¾…å¹¶æ¥å—æ¥è‡ªå„åœ°çš„å®¢æˆ·çš„é€šä¿¡è¯·æ±‚ã€‚å› æ­¤ï¼ŒæœåŠ¡å™¨ç¨‹åºä¸éœ€è¦çŸ¥é“å®¢æˆ·ç¨‹åºçš„åœ°å€ã€‚</li>
<li>ä¸€èˆ¬éœ€è¦æœ‰å¼ºå¤§çš„ç¡¬ä»¶å’Œé«˜çº§çš„æ“ä½œç³»ç»Ÿæ”¯æŒã€‚</li>
</ul>
</li>
<li><p>å¯¹ç­‰è¿æ¥æ–¹å¼</p>
<p>å¯¹ç­‰è¿æ¥ï¼ˆpeer-to-peerï¼Œç®€å†™ä¸ºP2Pï¼‰æ˜¯æŒ‡ä¸¤å°ä¸»æœºåœ¨é€šä¿¡æ—¶å¹¶ä¸åŒºåˆ†å“ªä¸€ä¸ªæ˜¯æœåŠ¡è¯·æ±‚æ–¹å“ªä¸€ä¸ªæ˜¯æœåŠ¡æä¾›æ–¹ã€‚</p>
<p>å¯¹ç­‰è¿æ¥æ–¹å¼ä»æœ¬è´¨ä¸Šçœ‹ä»ç„¶æ˜¯ä½¿ç”¨å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼Œåªæ˜¯å¯¹ç­‰è¿æ¥ä¸­çš„æ¯ä¸€å°ä¸»æœºæ—¢æ˜¯å®¢æˆ·åˆåŒæ—¶æ˜¯æœåŠ¡å™¨ã€‚</p>
<p>å¯¹ç­‰è¿æ¥å·¥ä½œæ–¹å¼å¯æ”¯æŒå¤§é‡å¯¹ç­‰ç”¨æˆ·ï¼ˆå¦‚ä¸Šç™¾ä¸‡ä¸ªï¼‰åŒæ—¶å·¥ä½œã€‚</p>
</li>
</ol>
<h3 id="1-3-2-äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†"><a href="#1-3-2-äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†" class="headerlink" title="1.3.2 äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†"></a>1.3.2 äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†</h3><p>åœ¨ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†èµ·ç‰¹æ®Šä½œç”¨çš„æ˜¯è·¯ç”±å™¨ï¼ˆrouterï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§ä¸“ç”¨è®¡ç®—æœºï¼ˆä½†ä¸å«åšä¸»æœºï¼‰ã€‚è·¯ç”±å™¨æ˜¯å®ç°åˆ†ç»„äº¤æ¢ï¼ˆpacket switchingï¼‰çš„å…³é”®æ„ä»¶ï¼Œå…¶ä»»åŠ¡æ˜¯è½¬å‘æ”¶åˆ°çš„åˆ†ç»„ï¼Œè¿™æ˜¯ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†æœ€é‡è¦çš„åŠŸèƒ½ã€‚</p>
<ol>
<li><p>ç”µè·¯äº¤æ¢çš„ä¸»è¦ç‰¹ç‚¹</p>
<p><strong>ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œäº¤æ¢ï¼ˆswitchingï¼‰å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºã€‚</strong>åœ¨ä½¿ç”¨ç”µè·¯äº¤æ¢é€šè¯ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‹¨å·è¯·æ±‚å»ºç«‹è¿æ¥ã€‚å½“è¢«å«ç”¨æˆ·å¬åˆ°äº¤æ¢æœºé€æ¥çš„æŒ¯é“ƒéŸ³å¹¶æ‘˜æœºåï¼Œä»ä¸»å«ç«¯åˆ°è¢«å«ç«¯å°±å»ºç«‹äº†ä¸€æ¡è¿æ¥ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡ä¸“ç”¨çš„ç‰©ç†é€šè·¯ã€‚è¿™æ¡è¿æ¥ä¿è¯äº†åŒæ–¹é€šè¯æ—¶æ‰€éœ€çš„é€šä¿¡èµ„æºï¼Œè€Œè¿™äº›èµ„æºåœ¨åŒæ–¹é€šä¿¡æ—¶ä¸ä¼šè¢«å…¶ä»–ç”¨æˆ·å ç”¨ã€‚æ­¤åä¸»å«å’Œè¢«å«åŒæ–¹å°±èƒ½äº’ç›¸é€šç”µè¯ã€‚é€šè¯å®Œæ¯•æŒ‚æœºåï¼Œäº¤æ¢æœºé‡Šæ”¾åˆšæ‰ä½¿ç”¨çš„è¿™æ¡ä¸“ç”¨çš„ç‰©ç†é€šè·¯ï¼ˆå³æŠŠåˆšæ‰å ç”¨çš„æ‰€æœ‰é€šä¿¡èµ„æºå½’è¿˜ç»™ç”µä¿¡ç½‘ï¼‰ã€‚<strong>è¿™ç§å¿…é¡»ç»è¿‡â€œå»ºç«‹è¿æ¥ï¼ˆå ç”¨é€šä¿¡èµ„æºï¼‰â†’é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰â†’é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰â€ä¸‰ä¸ªæ­¥éª¤çš„äº¤æ¢æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢.</strong>å¦‚æœç”¨æˆ·åœ¨æ‹¨å·å‘¼å«æ—¶ç”µä¿¡ç½‘çš„èµ„æºå·²ä¸è¶³ä»¥æ”¯æŒè¿™æ¬¡çš„å‘¼å«ï¼Œåˆ™ä¸»å«ç”¨æˆ·ä¼šå¬åˆ°å¿™éŸ³ï¼Œè¡¨ç¤ºç”µä¿¡ç½‘ä¸æ¥å—ç”¨æˆ·çš„å‘¼å«ï¼Œç”¨æˆ·å¿…é¡»æŒ‚æœºï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åå†é‡æ–°æ‹¨å·ã€‚</p>
<p><img src="image-20200423152330450.png" alt="ç”µè·¯äº¤æ¢çš„ç”¨æˆ·å§‹ç»ˆå ç”¨ç«¯åˆ°ç«¯çš„é€šä¿¡èµ„æº"></p>
<p><strong>å½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ¥ä¼ é€è®¡ç®—æœºæ•°æ®æ—¶ï¼Œå…¶çº¿è·¯çš„ä¼ è¾“æ•ˆç‡å¾€å¾€å¾ˆä½ã€‚</strong></p>
</li>
<li><p>åˆ†ç»„äº¤æ¢çš„ä¸»è¦ç‰¹ç‚¹</p>
<p>åˆ†ç»„äº¤æ¢åˆ™é‡‡ç”¨å­˜å‚¨è½¬å‘æŠ€æœ¯ã€‚ä¸‹å›¾è¡¨ç¤ºæŠŠä¸€ä¸ªæŠ¥æ–‡åˆ’åˆ†ä¸ºå‡ ä¸ªåˆ†ç»„åå†è¿›è¡Œä¼ é€ã€‚</p>
<p><img src="image-20200423153736321.png" alt="ä»¥åˆ†ç»„ä¸ºåŸºæœ¬å•ä½åœ¨ç½‘ç»œä¸­ä¼ é€"></p>
<p>é€šå¸¸æˆ‘ä»¬æŠŠè¦å‘é€çš„æ•´å—æ•°æ®ç§°ä¸ºä¸€ä¸ªæŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚åœ¨å‘é€æŠ¥æ–‡ä¹‹å‰ï¼Œå…ˆæŠŠè¾ƒé•¿çš„æŠ¥æ–‡åˆ’åˆ†æˆä¸ºä¸€ä¸ªä¸ªæ›´å°çš„ç­‰é•¿æ•°æ®æ®µï¼Œä¾‹å¦‚ï¼Œæ¯ä¸ªæ•°æ®æ®µä¸º1024bitã€‚åœ¨æ¯ä¸€ä¸ªæ•°æ®æ®µå‰é¢ï¼ŒåŠ ä¸Šä¸€äº›ç”±å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ç»„æˆçš„é¦–éƒ¨ï¼ˆheaderï¼‰åï¼Œå°±æ„æˆäº†ä¸€ä¸ªåˆ†ç»„ï¼ˆpacketï¼‰ã€‚åˆ†ç»„åˆç§°ä¸ºâ€œåŒ…â€ï¼Œè€Œåˆ†ç»„çš„é¦–éƒ¨ä¹Ÿå¯ç§°ä¸ºâ€œåŒ…å¤´â€ã€‚åˆ†ç»„æ˜¯åœ¨äº’è”ç½‘ä¸­ä¼ é€çš„æ•°æ®å•å…ƒã€‚åˆ†ç»„ä¸­çš„â€œé¦–éƒ¨â€æ˜¯éå¸¸é‡è¦çš„ï¼Œæ­£æ˜¯ç”±äºåˆ†ç»„çš„é¦–éƒ¨åŒ…å«äº†è¯¸å¦‚ç›®çš„åœ°å€å’Œæºåœ°å€ç­‰é‡è¦æ§åˆ¶ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªåˆ†ç»„æ‰èƒ½åœ¨äº’è”ç½‘ä¸­ç‹¬ç«‹åœ°é€‰æ‹©ä¼ è¾“è·¯å¾„ï¼Œå¹¶è¢«æ­£ç¡®åœ°äº¤ä»˜åˆ°åˆ†ç»„ä¼ è¾“çš„ç»ˆç‚¹ã€‚</p>
<p>ä¸»æœºå’Œè®¡ç®—æœºçš„ä¸åŒåŠŸèƒ½:</p>
<ul>
<li><p><strong>ä¸»æœº</strong>æ˜¯ä¸ºç”¨æˆ·è¿›è¡Œä¿¡æ¯å¤„ç†çš„ï¼Œå¹¶ä¸”å¯ä»¥å’Œå…¶ä»–ä¸»æœºé€šè¿‡ç½‘ç»œäº¤æ¢ä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>è·¯ç”±å™¨</strong>æ˜¯ç”¨æ¥è½¬å‘åˆ†ç»„çš„ï¼Œå³è¿›è¡Œåˆ†ç»„äº¤æ¢çš„ã€‚è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªåˆ†ç»„ï¼Œå…ˆæš‚æ—¶å­˜å‚¨ä¸€ä¸‹ï¼Œæ£€æŸ¥å…¶é¦–éƒ¨ï¼ŒæŸ¥æ‰¾è½¬å‘è¡¨ï¼ŒæŒ‰ç…§é¦–éƒ¨ä¸­çš„ç›®çš„åœ°å€ï¼Œæ‰¾åˆ°åˆé€‚çš„æ¥å£è½¬å‘å‡ºå»ï¼ŒæŠŠåˆ†ç»„äº¤ç»™ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚</p>
<p>å„è·¯ç”±å™¨ä¹‹é—´å¿…é¡»ç»å¸¸äº¤æ¢å½¼æ­¤æŒæ¡çš„è·¯ç”±ä¿¡æ¯ï¼Œä»¥ä¾¿åˆ›å»ºå’ŒåŠ¨æ€ç»´æŠ¤è·¯ç”±å™¨ä¸­çš„è½¬å‘è¡¨ï¼Œä½¿å¾—è½¬å‘è¡¨èƒ½å¤Ÿåœ¨æ•´ä¸ªç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶åŠæ—¶æ›´æ–°ã€‚</p>
</li>
</ul>
<p><strong>åˆ†ç»„äº¤æ¢çš„ç‰¹ç‚¹:</strong></p>
<ol>
<li>ä¼ é€æ•°æ®ä¹‹å‰ä¸å¿…å…ˆå ç”¨ä¸€æ¡ç«¯åˆ°ç«¯çš„é“¾è·¯çš„é€šä¿¡èµ„æº,åˆ†ç»„åœ¨å“ªæ®µé“¾è·¯ä¸Šä¼ é€æ‰å ç”¨è¿™æ®µé“¾è·¯çš„é€šä¿¡èµ„æº</li>
<li>çœå»äº†å»ºç«‹è¿æ¥å’Œé‡Šæ”¾è¿æ¥çš„å¼€é”€ï¼Œå› è€Œæ•°æ®çš„ä¼ è¾“æ•ˆç‡æ›´é«˜</li>
<li>å½“ç½‘ç»œä¸­çš„æŸäº›ç»“ç‚¹æˆ–é“¾è·¯çªç„¶å‡ºç°æ•…éšœæ—¶ï¼Œåœ¨å„è·¯ç”±å™¨ä¸­è¿è¡Œçš„è·¯ç”±é€‰æ‹©åè®®ï¼ˆprotocolï¼‰èƒ½å¤Ÿè‡ªåŠ¨æ‰¾åˆ°è½¬å‘åˆ†ç»„æœ€åˆé€‚çš„è·¯å¾„</li>
</ol>
<p><strong>ä¸ºäº†æé«˜åˆ†ç»„äº¤æ¢ç½‘çš„å¯é æ€§ï¼Œäº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†å¸¸é‡‡ç”¨ç½‘çŠ¶æ‹“æ‰‘ç»“æ„</strong></p>
<p>ç»¼ä¸Š,åˆ†ç»„äº¤æ¢çš„ä¼˜ç‚¹æœ‰:</p>
<p><img src="image-20200424113110361.png" alt="åˆ†ç»„äº¤æ¢çš„ä¼˜ç‚¹"></p>
</li>
</ol>
<p>ä¸‰ç§äº¤æ¢æ–¹å¼åœ¨æ•°æ®ä¼ é€é˜¶æ®µçš„ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç”µè·¯äº¤æ¢â€”â€”æ•´ä¸ªæŠ¥æ–‡çš„æ¯”ç‰¹æµè¿ç»­åœ°ä»æºç‚¹ç›´è¾¾ç»ˆç‚¹ï¼Œå¥½åƒåœ¨ä¸€ä¸ªç®¡é“ä¸­ä¼ é€ã€‚</li>
<li>æŠ¥æ–‡äº¤æ¢â€”â€”æ•´ä¸ªæŠ¥æ–‡å…ˆä¼ é€åˆ°ç›¸é‚»ç»“ç‚¹ï¼Œå…¨éƒ¨å­˜å‚¨ä¸‹æ¥åæŸ¥æ‰¾è½¬å‘è¡¨ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚</li>
<li>åˆ†ç»„äº¤æ¢â€”â€”å•ä¸ªåˆ†ç»„ï¼ˆè¿™åªæ˜¯æ•´ä¸ªæŠ¥æ–‡çš„ä¸€éƒ¨åˆ†ï¼‰ä¼ é€åˆ°ç›¸é‚»ç»“ç‚¹ï¼Œå­˜å‚¨ä¸‹æ¥åæŸ¥æ‰¾è½¬å‘è¡¨ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚</li>
</ul>
<p><img src="image-20200424123225063.png" alt="ä¸‰ç§äº¤æ¢çš„æ¯”è¾ƒ"></p>
<p>ä¸Šå›¾å¯çŸ¥:</p>
<ul>
<li>å¤§é‡ä¼ è¾“æ•°æ®çš„æ—¶å€™,ä¸€èˆ¬ä¼ é€æ—¶é—´è¿œè¿œå¤§äºå»ºç«‹è¿æ¥æ—¶é—´,åˆ™ç”µè·¯äº¤æ¢çš„ä¼ è¾“é€Ÿç‡è¾ƒå¿«</li>
<li>æŠ¥æ–‡äº¤æ¢å’Œåˆ†ç»„äº¤æ¢ç›¸å¯¹ç”µè·¯äº¤æ¢ç›¸æ¯”,åœ¨ä¼ é€çªå‘æ•°æ®æ—¶å¯æé«˜æ•´ä¸ªç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡</li>
<li>åˆ†ç»„äº¤æ¢æ¯”æ¯”æŠ¥æ–‡äº¤æ¢çš„æ—¶å»¶å°,å…·æœ‰æ›´å¥½çš„çµæ´»æ€§</li>
</ul>
<h2 id="1-5-è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"><a href="#1-5-è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«" class="headerlink" title="1.5 è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"></a>1.5 è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«</h2><h3 id="1-5-1-è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰"><a href="#1-5-1-è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰" class="headerlink" title="1.5.1 è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰"></a>1.5.1 è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰</h3><p>è®¡ç®—æœºç½‘ç»œä¸»è¦æ˜¯ç”±ä¸€äº›é€šç”¨çš„ã€å¯ç¼–ç¨‹çš„ç¡¬ä»¶äº’è¿è€Œæˆçš„ï¼Œè€Œè¿™äº›ç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„ï¼ˆä¾‹å¦‚ï¼Œä¼ é€æ•°æ®æˆ–è§†é¢‘ä¿¡å·ï¼‰ã€‚è¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶èƒ½æ”¯æŒå¹¿æ³›çš„å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨ã€‚</p>
<p>æ ¹æ®è¿™å®šä¹‰:</p>
<ul>
<li>è®¡ç®—æœºç½‘ç»œæ‰€è¿æ¥çš„ç¡¬ä»¶ï¼Œå¹¶ä¸é™äºä¸€èˆ¬çš„è®¡ç®—æœºï¼Œè€Œæ˜¯åŒ…æ‹¬äº†æ™ºèƒ½æ‰‹æœºã€‚</li>
<li>è®¡ç®—æœºç½‘ç»œå¹¶éä¸“é—¨ç”¨æ¥ä¼ é€æ•°æ®ï¼Œè€Œæ˜¯èƒ½å¤Ÿæ”¯æŒå¾ˆå¤šç§çš„åº”ç”¨ï¼ˆåŒ…æ‹¬ä»Šåå¯èƒ½å‡ºç°çš„å„ç§åº”ç”¨ï¼‰ã€‚</li>
</ul>
<h3 id="1-5-2-å‡ ç§ä¸åŒç±»åˆ«çš„è®¡ç®—æœºç½‘ç»œ"><a href="#1-5-2-å‡ ç§ä¸åŒç±»åˆ«çš„è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="1.5.2 å‡ ç§ä¸åŒç±»åˆ«çš„è®¡ç®—æœºç½‘ç»œ"></a>1.5.2 å‡ ç§ä¸åŒç±»åˆ«çš„è®¡ç®—æœºç½‘ç»œ</h3><ol>
<li><p>æŒ‰ç…§ç½‘ç»œçš„ä½œç”¨èŒƒå›´è¿›è¡Œåˆ†ç±»</p>
<p>|          | å¹¿åŸŸç½‘                            | åŸåŸŸç½‘                           | å±€åŸŸç½‘                                   | ä¸ªäººåŒºåŸŸç½‘                                                   |<br>| â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| åç§°     | WANï¼ˆWide Area Networkï¼‰          | MANï¼ˆMetropolitan Area Networkï¼‰ | LANï¼ˆLocal Area Networkï¼‰                | PANï¼ˆPersonal Area Networkï¼‰                                 |<br>| ä½œç”¨èŒƒå›´ | å‡ ååˆ°å‡ åƒkm                      | 5ï½50km                          | 1kmå·¦å³                                  | 10må·¦å³                                                      |<br>| ç‰¹ç‚¹     | äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†,æœ‰è¾ƒå¤§çš„é€šä¿¡å®¹é‡ | å°†å¤šä¸ªå±€åŸŸç½‘è¿›è¡Œäº’è¿             | ç”¨å¾®å‹è®¡ç®—æœºæˆ–å·¥ä½œç«™é€šè¿‡é«˜é€Ÿé€šä¿¡çº¿è·¯ç›¸è¿ | æŠŠå±äºä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ï¼ˆå¦‚ä¾¿æºå¼ç”µè„‘ç­‰ï¼‰ç”¨æ— çº¿æŠ€æœ¯è¿æ¥èµ·æ¥çš„ç½‘ç»œ |</p>
</li>
<li><p>æŒ‰ç…§ç½‘ç»œçš„ä½¿ç”¨è€…è¿›è¡Œåˆ†ç±»</p>
<ul>
<li>å…¬ç”¨ç½‘ï¼ˆpublic networkï¼‰</li>
<li>ä¸“ç”¨ç½‘ï¼ˆprivate networkï¼‰</li>
</ul>
</li>
</ol>
<h2 id="1-6-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½"><a href="#1-6-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½" class="headerlink" title="1.6 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½"></a>1.6 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½</h2><h3 id="1-6-1-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"><a href="#1-6-1-è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="1.6.1 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"></a>1.6.1 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h3><ul>
<li><p>é€Ÿç‡: é€Ÿç‡çš„å•ä½æ˜¯bit/sï¼ˆbps,æ¯”ç‰¹æ¯ç§’ï¼‰</p>
</li>
<li><p>å¸¦å®½:ï¼ˆbandwidthï¼‰:æŸé€šé“ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå› æ­¤ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ç½‘ç»œä¸­çš„æŸä¿¡é“æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€,å•ä½bit/sï¼Œæ˜¯â€œæ¯”ç‰¹æ¯ç§’â€ã€‚</p>
</li>
<li><p>ååé‡ï¼ˆthroughputï¼‰è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„å®é™…çš„æ•°æ®é‡ã€‚ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–ç½‘ç»œçš„é¢å®šé€Ÿç‡çš„é™åˆ¶</p>
</li>
<li><p>æ—¶å»¶ï¼ˆdelayæˆ–latencyï¼‰æ˜¯æŒ‡æ•°æ®ï¼ˆä¸€ä¸ªæŠ¥æ–‡æˆ–åˆ†ç»„ï¼Œç”šè‡³æ¯”ç‰¹ï¼‰ä»ç½‘ç»œï¼ˆæˆ–é“¾è·¯ï¼‰çš„ä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<p>æ—¶å»¶åˆ†ä»¥ä¸‹å››ä¸ª:</p>
<ul>
<li><p>å‘é€æ—¶å»¶:å‘é€æ—¶å»¶ï¼ˆtransmission delayï¼‰æ˜¯ä¸»æœºæˆ–è·¯ç”±å™¨å‘é€æ•°æ®å¸§æ‰€éœ€è¦çš„æ—¶é—´:</p>
<script type="math/tex; mode=display">
å‘é€æ—¶å»¶=\frac{æ•°æ®å¸§é•¿åº¦(bit)}{å‘é€é€Ÿç‡(bit/s)}</script></li>
<li><p>ä¼ æ’­æ—¶å»¶:ä¼ æ’­æ—¶å»¶ï¼ˆpropagation delayï¼‰æ˜¯ç”µç£æ³¢åœ¨ä¿¡é“ä¸­ä¼ æ’­ä¸€å®šçš„è·ç¦»éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚</p>
<script type="math/tex; mode=display">
ä¼ æ’­æ—¶å»¶=\frac{ä¿¡é“é•¿åº¦(m)}{ç”µç£æ³¢åœ¨ä¿¡é“ä¸Šä¼ æ’­çš„é€Ÿç‡(m/s)}</script></li>
<li><p>å¤„ç†æ—¶å»¶:ä¸»æœºæˆ–è·¯ç”±å™¨åœ¨æ”¶åˆ°åˆ†ç»„æ—¶è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚åˆ†æåˆ†ç»„çš„é¦–éƒ¨ã€ä»åˆ†ç»„ä¸­æå–æ•°æ®éƒ¨åˆ†ã€è¿›è¡Œå·®é”™æ£€éªŒæˆ–æŸ¥æ‰¾é€‚å½“çš„è·¯ç”±ç­‰</p>
</li>
<li>æ’é˜Ÿæ—¶å»¶:åˆ†ç»„åœ¨ç»è¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œè¦ç»è¿‡è®¸å¤šè·¯ç”±å™¨ã€‚ä½†åˆ†ç»„åœ¨è¿›å…¥è·¯ç”±å™¨åè¦å…ˆåœ¨è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…å¤„ç†ã€‚åœ¨è·¯ç”±å™¨ç¡®å®šäº†è½¬å‘æ¥å£åï¼Œè¿˜è¦åœ¨è¾“å‡ºé˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…è½¬å‘ã€‚è¿™å°±äº§ç”Ÿäº†æ’é˜Ÿæ—¶å»¶ã€‚</li>
</ul>
<p>ç”±ä¸Šå¯çŸ¥:</p>
<script type="math/tex; mode=display">
æ€»æ—¶å»¶=å‘é€æ—¶å»¶+ä¼ æ’­æ—¶å»¶+å¤„ç†æ—¶å»¶+æ’é˜Ÿæ—¶å»¶</script><p><img src="image-20200424223149141.png" alt="å‡ ç§åœ°æ–¹äº§ç”Ÿçš„æ—¶å»¶"></p>
</li>
<li><p>æ—¶å»¶å¸¦å®½ç§¯:</p>
<script type="math/tex; mode=display">
æ—¶å»¶å¸¦å®½ç§¯=ä¼ æ’­æ—¶å»¶\timeså¸¦å®½</script><p><img src="image-20200424231857587.png" alt="é“¾è·¯åƒä¸€æ¡ç©ºå¿ƒç®¡é“"></p>
</li>
<li><p>å¾€è¿”æ—¶é—´RTT:RTTï¼ˆRound-Trip Timeï¼‰</p>
</li>
<li><p>åˆ©ç”¨ç‡:åˆ©ç”¨ç‡æœ‰ä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ä¸¤ç§</p>
<ul>
<li>ä¿¡é“åˆ©ç”¨ç‡æŒ‡å‡ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ï¼ˆæœ‰æ•°æ®é€šè¿‡ï¼‰ã€‚å®Œå…¨ç©ºé—²çš„ä¿¡é“çš„åˆ©ç”¨ç‡æ˜¯é›¶ã€‚</li>
<li>ç½‘ç»œåˆ©ç”¨ç‡åˆ™æ˜¯å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡å€¼ã€‚</li>
</ul>
<p>ä¿¡é“åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ ¹æ®æ’é˜Ÿè®ºçš„ç†è®ºï¼Œå½“æŸä¿¡é“çš„åˆ©ç”¨ç‡å¢å¤§æ—¶ï¼Œè¯¥ä¿¡é“å¼•èµ·çš„æ—¶å»¶ä¹Ÿå°±è¿…é€Ÿå¢åŠ ã€‚ä»¤$D_0$è¡¨ç¤ºç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶ï¼ŒDè¡¨ç¤ºç½‘ç»œå½“å‰çš„æ—¶å»¶ï¼Œé‚£ä¹ˆåœ¨é€‚å½“çš„å‡å®šæ¡ä»¶ä¸‹ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ç®€å•å…¬å¼æ¥è¡¨ç¤ºDï¼Œ$D_0$å’Œåˆ©ç”¨ç‡Uä¹‹é—´çš„å…³ç³»:</p>
<script type="math/tex; mode=display">
D =\frac{D_0}{1-U}</script><p>è¿™é‡ŒUæ˜¯ç½‘ç»œçš„åˆ©ç”¨ç‡ï¼Œæ•°å€¼åœ¨0åˆ°1ä¹‹é—´,<strong>å› æ­¤æˆ‘ä»¬å¿…é¡»æœ‰è¿™æ ·çš„æ¦‚å¿µï¼šä¿¡é“æˆ–ç½‘ç»œçš„åˆ©ç”¨ç‡è¿‡é«˜ä¼šäº§ç”Ÿ</strong><br><strong>éå¸¸å¤§çš„æ—¶å»¶</strong></p>
<p><img src="image-20200425000955599.png" alt="æ—¶å»¶ä¸åˆ©ç”¨ç‡çš„å…³ç³»"></p>
</li>
</ul>
<h3 id="1-6-2-è®¡ç®—æœºç½‘ç»œçš„éæ€§èƒ½ç‰¹å¾"><a href="#1-6-2-è®¡ç®—æœºç½‘ç»œçš„éæ€§èƒ½ç‰¹å¾" class="headerlink" title="1.6.2 è®¡ç®—æœºç½‘ç»œçš„éæ€§èƒ½ç‰¹å¾"></a>1.6.2 è®¡ç®—æœºç½‘ç»œçš„éæ€§èƒ½ç‰¹å¾</h3><p>è´¹ç”¨,è´¨é‡,æ ‡å‡†åŒ–,å¯é æ€§,å¯æ‰©å±•æ€§å’Œå¯å‡çº§æ€§,æ˜“äºç®¡ç†å’Œç»´æŠ¤</p>
<h2 id="1-7-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"><a href="#1-7-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„" class="headerlink" title="1.7 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></a>1.7 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h2><h3 id="1-7-2-åè®®ä¸åˆ’åˆ†å±‚æ¬¡"><a href="#1-7-2-åè®®ä¸åˆ’åˆ†å±‚æ¬¡" class="headerlink" title="1.7.2 åè®®ä¸åˆ’åˆ†å±‚æ¬¡"></a>1.7.2 åè®®ä¸åˆ’åˆ†å±‚æ¬¡</h3><p>ç½‘ç»œåè®®ä¹Ÿå¯ç®€ç§°ä¸ºåè®®ã€‚æ›´è¿›ä¸€æ­¥è®²ï¼Œç½‘ç»œåè®®ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªè¦ç´ ç»„æˆï¼š<br>ï¼ˆ1ï¼‰è¯­æ³•ï¼Œå³æ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„ç»“æ„æˆ–æ ¼å¼ï¼›<br>ï¼ˆ2ï¼‰è¯­ä¹‰ï¼Œå³éœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œå®Œæˆä½•ç§åŠ¨ä½œä»¥åŠåšå‡ºä½•ç§å“åº”ï¼›<br>ï¼ˆ3ï¼‰åŒæ­¥ï¼Œå³äº‹ä»¶å®ç°é¡ºåºçš„è¯¦ç»†è¯´æ˜ã€‚</p>
<p>åˆ†å±‚å¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ã€‚å¦‚ï¼š</p>
<ul>
<li>å„å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚</li>
<li>çµæ´»æ€§å¥½ã€‚</li>
<li>ç»“æ„ä¸Šå¯åˆ†å‰²å¼€ã€‚</li>
<li>æ˜“äºå®ç°å’Œç»´æŠ¤ã€‚</li>
<li>èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚</li>
</ul>
<p>é€šå¸¸å„å±‚æ‰€è¦å®Œæˆçš„åŠŸèƒ½ä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›ï¼ˆå¯ä»¥åªåŒ…æ‹¬ä¸€ç§ï¼Œä¹Ÿå¯ä»¥åŒ…æ‹¬å¤šç§ï¼‰ï¼š</p>
<ul>
<li>å·®é”™æ§åˆ¶ã€€ä½¿ç›¸åº”å±‚æ¬¡å¯¹ç­‰æ–¹çš„é€šä¿¡æ›´åŠ å¯é ã€‚</li>
<li>æµé‡æ§åˆ¶ã€€å‘é€ç«¯çš„å‘é€é€Ÿç‡å¿…é¡»ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ï¼Œä¸è¦å¤ªå¿«ã€‚</li>
<li>åˆ†æ®µå’Œé‡è£…ã€€å‘é€ç«¯å°†è¦å‘é€çš„æ•°æ®å—åˆ’åˆ†ä¸ºæ›´å°çš„å•ä½ï¼Œåœ¨æ¥æ”¶ç«¯å°†å…¶è¿˜åŸã€‚</li>
<li>å¤ç”¨å’Œåˆ†ç”¨ã€€å‘é€ç«¯å‡ ä¸ªé«˜å±‚ä¼šè¯å¤ç”¨ä¸€æ¡ä½å±‚çš„è¿æ¥ï¼Œåœ¨æ¥æ”¶ç«¯å†è¿›è¡Œåˆ†ç”¨ã€‚</li>
<li>è¿æ¥å»ºç«‹å’Œé‡Šæ”¾ã€€äº¤æ¢æ•°æ®å‰å…ˆå»ºç«‹ä¸€æ¡é€»è¾‘è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåé‡Šæ”¾è¿æ¥ã€‚</li>
</ul>
<p><strong>è®¡ç®—æœºç½‘ç»œçš„å„å±‚åŠå…¶åè®®çš„é›†åˆå°±æ˜¯ç½‘ç»œçš„ä½“ç³»ç»“æ„ï¼ˆarchitectureï¼‰ã€‚</strong></p>
<h3 id="1-7-3-å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„"><a href="#1-7-3-å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„" class="headerlink" title="1.7.3 å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„"></a>1.7.3 å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„</h3><p><img src="image-20200425124909386.png" alt="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></p>
<ol>
<li><p>åº”ç”¨å±‚ï¼ˆapplication layerï¼‰</p>
<p>åº”ç”¨å±‚åè®®å®šä¹‰çš„æ˜¯åº”ç”¨è¿›ç¨‹é—´é€šä¿¡å’Œäº¤äº’çš„è§„åˆ™</p>
<p>åº”ç”¨å±‚äº¤äº’çš„æ•°æ®å•å…ƒç§°ä¸ºæŠ¥æ–‡ï¼ˆmessageï¼‰</p>
<p>ä»»åŠ¡æ˜¯é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨</p>
<p>åŸŸåç³»ç»ŸDNSï¼ŒHTTPåè®®ï¼Œç”µå­é‚®ä»¶çš„SMTPåè®®å‡æ˜¯åº”ç”¨å±‚çš„åè®®</p>
</li>
<li><p>è¿è¾“å±‚ï¼ˆtransport layerï¼‰</p>
<p>è¿è¾“å±‚çš„ä»»åŠ¡å°±æ˜¯è´Ÿè´£å‘ä¸¤å°ä¸»æœºä¸­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„æ•°æ®ä¼ è¾“æœåŠ¡</p>
<p>è¿è¾“å±‚ä¸»è¦çš„åè®®æ˜¯:</p>
<ul>
<li>ä¼ è¾“æ§åˆ¶åè®®TCPï¼ˆTransmission Control Protocolï¼‰â€”â€”æä¾›é¢å‘è¿æ¥çš„ã€å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œå…¶æ•°æ®ä¼ è¾“çš„å•ä½æ˜¯<strong>æŠ¥æ–‡æ®µ</strong>ï¼ˆsegmentï¼‰ã€‚</li>
<li>ç”¨æˆ·æ•°æ®æŠ¥åè®®UDPï¼ˆUser Datagram Protocolï¼‰â€”â€”æä¾›æ— è¿æ¥çš„ã€å°½æœ€å¤§åŠªåŠ›ï¼ˆbest-effortï¼‰çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼ˆä¸ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼‰ï¼Œå…¶æ•°æ®ä¼ è¾“çš„å•ä½æ˜¯ç”¨æˆ·<strong>æ•°æ®æŠ¥</strong>ã€‚</li>
</ul>
</li>
<li><p>ç½‘ç»œå±‚ï¼ˆnetwork layerï¼‰</p>
<p>ç½‘ç»œå±‚è´Ÿè´£ä¸ºåˆ†ç»„äº¤æ¢ç½‘ä¸Šçš„ä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡ã€‚åœ¨å‘é€æ•°æ®æ—¶ï¼Œç½‘ç»œå±‚æŠŠè¿è¾“å±‚äº§ç”Ÿçš„æŠ¥æ–‡æ®µæˆ–ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„æˆ–åŒ…è¿›è¡Œä¼ é€ã€‚åœ¨TCP/IPä½“ç³»ä¸­ï¼Œç”±äºç½‘ç»œå±‚ä½¿ç”¨IPåè®®ï¼Œå› æ­¤åˆ†ç»„ä¹Ÿå«åšIPæ•°æ®æŠ¥ï¼Œæˆ–ç®€ç§°ä¸ºæ•°æ®æŠ¥ã€‚</p>
</li>
<li><p>æ•°æ®é“¾è·¯å±‚ï¼ˆdata link layerï¼‰</p>
<p>æ•°æ®é“¾è·¯å±‚å°†ç½‘ç»œå±‚äº¤ä¸‹æ¥çš„IPæ•°æ®æŠ¥ç»„è£…æˆå¸§ï¼ˆframingï¼‰ï¼Œåœ¨ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹é—´çš„é“¾è·¯ä¸Šä¼ é€å¸§ï¼ˆframeï¼‰ã€‚æ¯ä¸€å¸§åŒ…æ‹¬æ•°æ®å’Œå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ï¼ˆå¦‚åŒæ­¥ä¿¡æ¯ã€åœ°å€ä¿¡æ¯ã€å·®é”™æ§åˆ¶ç­‰ï¼‰ã€‚</p>
<p>ä¸»è¦ä½œç”¨æ˜¯:æå–æ•°æ®,ä¸Šäº¤ç½‘ç»œå±‚,å·®é”™æ£€æµ‹</p>
</li>
<li><p>ç‰©ç†å±‚ï¼ˆphysical layerï¼‰</p>
<p>ç‰©ç†å±‚è¦è€ƒè™‘ç”¨å¤šå¤§çš„ç”µå‹ä»£è¡¨â€œ1â€æˆ–â€œ0â€ï¼Œä»¥åŠæ¥æ”¶æ–¹å¦‚ä½•è¯†åˆ«å‡ºå‘é€æ–¹æ‰€å‘é€çš„æ¯”ç‰¹ã€‚ç‰©ç†å±‚è¿˜è¦ç¡®å®šè¿æ¥ç”µç¼†çš„æ’å¤´åº”å½“æœ‰å¤šå°‘æ ¹å¼•è„šä»¥åŠå„å¼•è„šåº”å¦‚ä½•è¿æ¥ã€‚</p>
<p><strong>ä¼ é€’ä¿¡æ¯æ‰€åˆ©ç”¨çš„ä¸€äº›ç‰©ç†åª’ä½“ï¼Œå¦‚åŒç»çº¿ã€åŒè½´ç”µç¼†ã€å…‰ç¼†ã€æ— çº¿ä¿¡é“ç­‰ï¼Œå¹¶ä¸åœ¨ç‰©ç†å±‚åè®®ä¹‹å†…è€Œæ˜¯åœ¨ç‰©ç†å±‚åè®®çš„ä¸‹é¢ã€‚</strong></p>
</li>
</ol>
<p>ä¸‹å›¾æ˜¯ä¸»æœº1çš„åº”ç”¨è¿›ç¨‹AP1å‘ä¸»æœº2çš„åº”ç”¨è¿›ç¨‹AP2ä¼ é€æ•°æ®çš„è¿‡ç¨‹,$H<em>1åˆ°H_5$æ˜¯åŠ å…¥çš„æ§åˆ¶ä¿¡æ¯,ç‰©ç†å±‚æ˜¯æ•°æ®æµä¼ é€æ‰€ä»¥ä¸éœ€è¦æ§åˆ¶ä¿¡æ¯.å½“åˆ°è¾¾è·¯ç”±å™¨å,ä¼šä»ç¬¬ä¸€åˆ°ç¬¬ä¸‰å±‚,æ ¹æ®é¦–éƒ¨$H</em>{2}$çš„çš„ç›®çš„åœ°å€æŸ¥æ‰¾è·¯ç”±å™¨ä¸­çš„è½¬å‘è¡¨ï¼Œæ‰¾å‡ºè½¬å‘åˆ†ç»„çš„æ¥å£ï¼Œç„¶åå¾€ä¸‹ä¼ é€åˆ°ç¬¬2å±‚ï¼ŒåŠ ä¸Šæ–°çš„é¦–éƒ¨å’Œå°¾éƒ¨åï¼Œå†åˆ°æœ€ä¸‹é¢çš„ç¬¬1å±‚</p>
<p><img src="image-20200425142700026.png" alt="æ•°æ®åœ¨å„å±‚ä¹‹é—´çš„ä¼ é€’è¿‡ç¨‹"></p>
<h3 id="1-7-4-å®ä½“ã€åè®®ã€æœåŠ¡å’ŒæœåŠ¡è®¿é—®ç‚¹"><a href="#1-7-4-å®ä½“ã€åè®®ã€æœåŠ¡å’ŒæœåŠ¡è®¿é—®ç‚¹" class="headerlink" title="1.7.4 å®ä½“ã€åè®®ã€æœåŠ¡å’ŒæœåŠ¡è®¿é—®ç‚¹"></a>1.7.4 å®ä½“ã€åè®®ã€æœåŠ¡å’ŒæœåŠ¡è®¿é—®ç‚¹</h3><p>å®ä½“:è¡¨ç¤ºä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹</p>
<p>åè®®:æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“ï¼ˆæˆ–å¤šä¸ªå®ä½“ï¼‰è¿›è¡Œé€šä¿¡çš„è§„åˆ™çš„é›†åˆ</p>
<p>åè®®å’ŒæœåŠ¡çš„åŒºåˆ«:</p>
<ul>
<li>åè®®çš„å®ç°ä¿è¯äº†èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡</li>
<li>ä½¿ç”¨æœ¬å±‚æœåŠ¡çš„å®ä½“åªèƒ½çœ‹è§æœåŠ¡è€Œæ— æ³•çœ‹è§ä¸‹é¢çš„åè®®,ä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯é€æ˜çš„</li>
<li>åè®®æ˜¯â€œæ°´å¹³çš„â€ï¼Œå³åè®®æ˜¯æ§åˆ¶å¯¹ç­‰å®ä½“ä¹‹é—´é€šä¿¡çš„è§„åˆ™ã€‚ä½†æœåŠ¡æ˜¯â€œå‚ç›´çš„â€ï¼Œå³æœåŠ¡æ˜¯ç”±ä¸‹å±‚å‘ä¸Šå±‚é€šè¿‡å±‚é—´æ¥å£æä¾›çš„</li>
</ul>
<p>ç¬¬nå±‚å‘ä¸Šé¢çš„ç¬¬nï¼‹1å±‚æ‰€æä¾›çš„æœåŠ¡å®é™…ä¸Šå·²åŒ…æ‹¬äº†åœ¨å®ƒä»¥ä¸‹å„å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚ç¬¬nå±‚çš„å®ä½“å¯¹ç¬¬nï¼‹1å±‚çš„å®ä½“å°±ç›¸å½“äºä¸€ä¸ªæœåŠ¡æä¾›è€…</p>
<h3 id="1-7-5-TCP-IPçš„ä½“ç³»ç»“æ„"><a href="#1-7-5-TCP-IPçš„ä½“ç³»ç»“æ„" class="headerlink" title="1.7.5 TCP/IPçš„ä½“ç³»ç»“æ„"></a>1.7.5 TCP/IPçš„ä½“ç³»ç»“æ„</h3><p><img src="image-20200425173859283.png" alt="æ²™æ¼è®¡æ—¶å™¨å½¢çŠ¶çš„TCP/IPåè®®æ—ç¤ºæ„"></p>
<h2 id="æœ¬ç« æ€»ç»“"><a href="#æœ¬ç« æ€»ç»“" class="headerlink" title="æœ¬ç« æ€»ç»“"></a>æœ¬ç« æ€»ç»“</h2><ol>
<li><p>è®¡ç®—æœºç½‘ç»œï¼ˆå¯ç®€ç§°ä¸ºç½‘ç»œï¼‰æŠŠè®¸å¤šè®¡ç®—æœºè¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œäº’è¿ç½‘åˆ™æŠŠè®¸å¤šç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œæ˜¯ç½‘ç»œçš„ç½‘ç»œ</p>
</li>
<li><p>ä»¥å°å†™å­—æ¯iå¼€å§‹çš„internetï¼ˆäº’è¿ç½‘ï¼‰æ˜¯é€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„ç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®ï¼ˆå³é€šä¿¡è§„åˆ™ï¼‰å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</p>
<p>ä»¥å¤§å†™å­—æ¯Iå¼€å§‹çš„Internetï¼ˆäº’è”ç½‘ï¼‰æ˜¯ä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šäº’è¿ç½‘ï¼Œå¹¶é‡‡ç”¨TCP/IPåè®®æ—ä½œä¸ºé€šä¿¡è§„åˆ™ï¼Œä¸”å…¶å‰èº«æ˜¯ç¾å›½çš„ARPANETã€‚Internetçš„æ¨èè¯‘åæ˜¯â€œå› ç‰¹ç½‘â€ï¼Œä½†å¾ˆå°‘è¢«ä½¿ç”¨ã€‚</p>
</li>
<li><p>äº’è”ç½‘ç°åœ¨é‡‡ç”¨å­˜å‚¨è½¬å‘çš„åˆ†ç»„äº¤æ¢æŠ€æœ¯ï¼Œä»¥åŠä¸‰å±‚ISPç»“æ„ã€‚äº’è”ç½‘æŒ‰å·¥ä½œæ–¹å¼å¯åˆ’åˆ†ä¸ºè¾¹ç¼˜éƒ¨åˆ†ä¸æ ¸å¿ƒéƒ¨åˆ†ã€‚ä¸»æœºåœ¨ç½‘ç»œçš„è¾¹ç¼˜éƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯è¿›è¡Œä¿¡æ¯å¤„ç†ã€‚è·¯ç”±å™¨åœ¨ç½‘ç»œçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯æŒ‰å­˜å‚¨è½¬å‘æ–¹å¼è¿›è¡Œåˆ†ç»„äº¤æ¢ã€‚</p>
</li>
<li><p>è®¡ç®—æœºé€šä¿¡æ˜¯è®¡ç®—æœºä¸­çš„è¿›ç¨‹ï¼ˆå³è¿è¡Œç€çš„ç¨‹åºï¼‰ä¹‹é—´çš„é€šä¿¡ã€‚è®¡ç®—æœºç½‘ç»œé‡‡ç”¨çš„é€šä¿¡æ–¹å¼æ˜¯å®¢æˆ·â€“æœåŠ¡å™¨æ–¹å¼å’Œå¯¹ç­‰è¿æ¥æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰ã€‚å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„åº”ç”¨è¿›ç¨‹ã€‚å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚</p>
</li>
<li><p>æŒ‰ä½œç”¨èŒƒå›´çš„ä¸åŒï¼Œè®¡ç®—æœºç½‘ç»œåˆ†ä¸ºå¹¿åŸŸç½‘WANã€åŸåŸŸç½‘MANã€å±€åŸŸç½‘LANå’Œä¸ªäººåŒºåŸŸç½‘PANã€‚</p>
</li>
<li><p>è®¡ç®—æœºç½‘ç»œæœ€å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ï¼šé€Ÿç‡ã€å¸¦å®½ã€ååé‡ã€æ—¶å»¶ï¼ˆå‘é€æ—¶å»¶ã€ä¼ æ’­æ—¶å»¶ã€å¤„ç†æ—¶å»¶ã€æ’é˜Ÿæ—¶å»¶ï¼‰ã€æ—¶å»¶å¸¦å®½ç§¯ã€å¾€è¿”æ—¶é—´å’Œä¿¡é“ï¼ˆæˆ–ç½‘ç»œï¼‰åˆ©ç”¨ç‡ã€‚</p>
</li>
<li><p>ç½‘ç»œåè®®å³åè®®ï¼Œæ˜¯ä¸ºè¿›è¡Œç½‘ç»œä¸­çš„æ•°æ®äº¤æ¢è€Œå»ºç«‹çš„è§„åˆ™ã€‚è®¡ç®—æœºç½‘ç»œçš„å„å±‚åŠå…¶åè®®çš„é›†åˆï¼Œç§°ä¸ºç½‘ç»œçš„ä½“ç³»ç»“æ„ã€‚</p>
</li>
<li><p>äº”å±‚åè®®çš„ä½“ç³»ç»“æ„ç”±åº”ç”¨å±‚ã€è¿è¾“å±‚ã€ç½‘ç»œå±‚ï¼ˆæˆ–ç½‘é™…å±‚ï¼‰ã€æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ç»„æˆã€‚è¿è¾“å±‚æœ€é‡è¦çš„åè®®æ˜¯TCPå’ŒUDPåè®®ï¼Œè€Œç½‘ç»œå±‚æœ€é‡è¦çš„åè®®æ˜¯IPåè®®ã€‚</p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
        <tag>é˜…è¯»æ‘˜è¦</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonç¬”è®°</title>
    <url>/2020/04/25/python-bi-ji/</url>
    <content><![CDATA[<h2 id="å‡½æ•°å‚æ•°ä¸­å«æœ‰åˆ—è¡¨çš„é—®é¢˜"><a href="#å‡½æ•°å‚æ•°ä¸­å«æœ‰åˆ—è¡¨çš„é—®é¢˜" class="headerlink" title="å‡½æ•°å‚æ•°ä¸­å«æœ‰åˆ—è¡¨çš„é—®é¢˜"></a>å‡½æ•°å‚æ•°ä¸­å«æœ‰åˆ—è¡¨çš„é—®é¢˜</h2><p><strong>å®šä¹‰é»˜è®¤å‚æ•°è¦ç‰¢è®°ä¸€ç‚¹ï¼šé»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡ï¼</strong></p>
<blockquote>
<p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017261630425888" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1016959663602400/1017261630425888</a></p>
</blockquote>
<p>æœ‰å¦‚ä¸‹å‡½æ•°</p>
<pre class=" language-lang-python"><code class="language-lang-python">def add_end(L=[]):
    L.append('END')
    return L
</code></pre>
<p>æ­£å¸¸ä½¿ç”¨æ²¡é—®é¢˜,ä½†æ˜¯å¦‚æœå¦‚ä¸‹æ“ä½œ:</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">>>> add_end()
['END', 'END']
>>> add_end()
['END', 'END', 'END']
</code></pre>
<p>åˆ™ä¼šå‡ºç°ä»¤äººè´¹è§£çš„é—®é¢˜,åŸå› å¦‚ä¸‹:</p>
<p>Pythonå‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œé»˜è®¤å‚æ•°<code>L</code>çš„å€¼å°±è¢«è®¡ç®—å‡ºæ¥äº†ï¼Œå³<code>[]</code>ï¼Œå› ä¸ºé»˜è®¤å‚æ•°<code>L</code>ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒæŒ‡å‘å¯¹è±¡<code>[]</code>ï¼Œæ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¦‚æœæ”¹å˜äº†<code>L</code>çš„å†…å®¹ï¼Œåˆ™ä¸‹æ¬¡è°ƒç”¨æ—¶ï¼Œé»˜è®¤å‚æ•°çš„å†…å®¹å°±å˜äº†ï¼Œä¸å†æ˜¯å‡½æ•°å®šä¹‰æ—¶çš„<code>[]</code>äº†ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜,å¯ä»¥ç”¨<code>None</code>è¿™ä¸ªä¸å˜å¯¹è±¡æ¥å®ç°:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def add_end(L=None):
    if L is None:
        L = []
    L.append('END')
    return L
</code></pre>
<h2 id="å¯å˜å‚æ•°ä¸åˆ—è¡¨çš„ç»“åˆ-ä¸-çš„ä½¿ç”¨"><a href="#å¯å˜å‚æ•°ä¸åˆ—è¡¨çš„ç»“åˆ-ä¸-çš„ä½¿ç”¨" class="headerlink" title="å¯å˜å‚æ•°ä¸åˆ—è¡¨çš„ç»“åˆ:*ä¸**çš„ä½¿ç”¨"></a>å¯å˜å‚æ•°ä¸åˆ—è¡¨çš„ç»“åˆ:*ä¸**çš„ä½¿ç”¨</h2><p>å¦‚æœpythonä»£ç çœ‹çš„æ¯”è¾ƒå¤šçš„æ—¶å€™,å°±ä¼šå‘ç°æœ‰ç±»ä¼¼å¦‚ä¸‹çš„å†™æ³•:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def function(*args,**kwargs):
    ...
</code></pre>
<p>*args ç”¨æ¥å°†å‚æ•°æ‰“åŒ…æˆtupleç»™å‡½æ•°ä½“è°ƒç”¨, **kwargs æ‰“åŒ…å…³é”®å­—å‚æ•°æˆdictç»™å‡½æ•°ä½“è°ƒç”¨</p>
<p>å¦‚æœæŸå‡½æ•°å¦‚ä¸‹:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def function(arg1,arg2,*args,**kwargs):
    print(arg1,arg2,args,kwargs)
</code></pre>
<p>è°ƒç”¨å¦‚ä¸‹:</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">>>> funtion(1,2,3,4,5,6,7,a=1,b=2,c=3)
1 2 (3, 4, 5, 6, 7) {'a': 1, 'b': 2, 'c': 3}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç»“æœ</p>
<p>å¦‚æœæƒ³ä¼ å…¥ç°æˆçš„åˆ—è¡¨å’Œå­—å…¸çš„æ—¶å€™å¯ä»¥ä½¿ç”¨*å’Œ**è¿›è¡Œè¾“å…¥:</p>
<pre class=" language-lang-python"><code class="language-lang-python">>>> lst = [1,2,3,4]
>>> dict={"a":1,"b":2,"c":3}
>>> function(1,2,*lst,**dict)
1 2 (1, 2, 3, 4) {'a': 1, 'b': 2, 'c': 3}
</code></pre>
<p>ç”šè‡³å¯¹äºæ™®é€šçš„å‡½æ•°ä¹Ÿå¯ä»¥ç”¨**è¿›è¡Œè¾“å…¥å‚æ•°:</p>
<pre class=" language-lang-python"><code class="language-lang-python">def func(name,age):
    print(name,age)

>>>dicts = {"name":"cc","age":11}
>>>func(**dicts)
>>>cc 11
</code></pre>
<blockquote>
<p>ä¸‹æ®µä»£ç æ¥æº:<a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017261630425888" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1016959663602400/1017261630425888</a></p>
</blockquote>
<p>å½“éœ€è¦é™å®šå…³é”®å­—,å¯ä»¥ä½¿ç”¨*ä½œä¸ºåˆ†éš”ç¬¦ï¼Œ*åé¢çš„å‚æ•°è¢«è§†ä¸ºå‘½åå…³é”®å­—å‚æ•°</p>
<pre class=" language-lang-python"><code class="language-lang-python">def person(name, age, *, city, job):
    print(name, age, city, job)

>>> person('Jack', 24, city='Beijing', job='Engineer')
Jack 24 Beijing Engineer
</code></pre>
<h2 id="åˆ—è¡¨çš„ç­‰é—´éš”åˆ‡ç‰‡"><a href="#åˆ—è¡¨çš„ç­‰é—´éš”åˆ‡ç‰‡" class="headerlink" title="åˆ—è¡¨çš„ç­‰é—´éš”åˆ‡ç‰‡"></a>åˆ—è¡¨çš„ç­‰é—´éš”åˆ‡ç‰‡</h2><p>ç»™ä¸ªä¾‹å­å°±å¾ˆæ˜ç¡®äº†:</p>
<pre class=" language-lang-python"><code class="language-lang-python">>>>lst = [1,2,3,4,5]
>>>lst[1:4:2]
[2,4]
</code></pre>
<h2 id="ç”Ÿæˆå™¨generatorä¸yieldç»“åˆçš„ç”¨æ³•"><a href="#ç”Ÿæˆå™¨generatorä¸yieldç»“åˆçš„ç”¨æ³•" class="headerlink" title="ç”Ÿæˆå™¨generatorä¸yieldç»“åˆçš„ç”¨æ³•"></a>ç”Ÿæˆå™¨generatorä¸yieldç»“åˆçš„ç”¨æ³•</h2><p>è¯¦è§<a href="https://blog.csdn.net/mieleizhi0522/article/details/82142856/" target="_blank" rel="noopener">https://blog.csdn.net/mieleizhi0522/article/details/82142856/</a></p>
<h2 id="mapå’Œreduce"><a href="#mapå’Œreduce" class="headerlink" title="mapå’Œreduce"></a>mapå’Œreduce</h2><p>mapå°±æ˜¯æ˜ å°„å‡½æ•°äºåˆ—è¡¨,éå¸¸æ–¹ä¾¿äº§ç”Ÿåˆ—è¡¨,ä¾‹å­å¦‚ä¸‹:</p>
<pre class=" language-lang-python"><code class="language-lang-python">>>> def f(x):
...     return x * x
...
>>> r = map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> list(r)
[1, 4, 9, 16, 25, 36, 49, 64, 81]
</code></pre>
<p>reduceå‡½æ•°ç”¨ä¸€ä¸ªä¾‹å­è¡¨è¿°,åŠŸèƒ½æ˜¯ä¸ç”¨<code>int()</code>è¿›è¡Œå­—ç¬¦ä¸²è½¬æ•´å‹æ•°:</p>
<pre class=" language-lang-python"><code class="language-lang-python">from functools import reduce

DIGITS = {'0': 0, '1': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9}

def char2num(s):
    return DIGITS[s]

def str2int(s):
    return reduce(lambda x, y: x * 10 + y, map(char2num, s))
</code></pre>
<h2 id="lambdaè¡¨è¾¾å¼å’Œåˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å¥‡å¦™ååº”"><a href="#lambdaè¡¨è¾¾å¼å’Œåˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å¥‡å¦™ååº”" class="headerlink" title="lambdaè¡¨è¾¾å¼å’Œåˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å¥‡å¦™ååº”"></a>lambdaè¡¨è¾¾å¼å’Œåˆ—è¡¨ç”Ÿæˆå¼äº§ç”Ÿçš„å¥‡å¦™ååº”</h2><p>å…ˆçœ‹ä¸€æ®µä»£ç :</p>
<pre class=" language-lang-python"><code class="language-lang-python">def num():
    return [lambda x:i*x for i in range(4)]


>>>[m(1) for m in num()]
[3, 3, 3, 3]
</code></pre>
<p>å¦‚æœä½ ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šè¿™æ ·,å…·ä½“åŸå› è§:</p>
<p><a href="https://blog.csdn.net/CxsGhost/article/details/103697506" target="_blank" rel="noopener">https://blog.csdn.net/CxsGhost/article/details/103697506</a></p>
<p>ä¸ªäººçš„è§£é‡Šæ˜¯:ä¸Šé¢çš„ä»£ç å¯ä»¥ç­‰ä»·ä¸ºä¸‹åˆ—ä»£ç :</p>
<pre class=" language-lang-python"><code class="language-lang-python">def num():
    i = 0
    lst = []
    def fun(x):
        return i * x
    for j in range(4):
        i = j
        lst.append(fun)
    return lst

>>>[m(1) for m in num()]
</code></pre>
<p>å› ä¸ºiæ˜¯å‘½åç©ºé—´lambdaé‡Œé¢æ‰€ä»¥å¤–éƒ¨çš„iæ˜¯ä¸ä¼šè¿›å…¥å†…éƒ¨çš„,é¦–å…ˆäº§ç”Ÿ<code>[lambda x:i*x,lambda x:i*x,lambda x:i*x,lambda x:i*x]</code>,å¾ªç¯å®Œäº†å,i=3,æ‰€ä»¥è¿”å›<code>[lambda x:3*x,lambda x:3*x,lambda x:3*x,lambda x:3*x]</code></p>
<h2 id="åå‡½æ•°çš„ç”¨æ³•"><a href="#åå‡½æ•°çš„ç”¨æ³•" class="headerlink" title="åå‡½æ•°çš„ç”¨æ³•"></a>åå‡½æ•°çš„ç”¨æ³•</h2><p>æœ‰çš„æ—¶å€™,å¸Œæœ›æŸäº›å‡½æ•°çš„å‚æ•°å›ºå®š,å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œå›ºå®š</p>
<pre class=" language-lang-python"><code class="language-lang-python">functools.partial()
</code></pre>
<p>ç”¨æ³•è¯¦è§ç½‘ä¸Š</p>
<h2 id="ç±»ä¸å¯¹è±¡çš„æ–¹æ³•"><a href="#ç±»ä¸å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="ç±»ä¸å¯¹è±¡çš„æ–¹æ³•"></a>ç±»ä¸å¯¹è±¡çš„æ–¹æ³•</h2><ol>
<li><p>getattr(),setattr(),hasattr()ä¸‰ç§æ–¹æ³•çš„</p>
</li>
<li><p><code>__getitem__()</code>:</p>
<p>å¦‚æœæƒ³è¦ä¸€ä¸ªç±»æ—¢æœ‰ç´¢å¼•åˆå¯ä»¥åˆ‡ç‰‡,éœ€è¦ç±»ä¼¼å¦‚ä¸‹çš„æ“ä½œ</p>
<pre class=" language-lang-python"><code class="language-lang-python">class Fib(object):
    def __getitem__(self, n):
        if isinstance(n, int): # næ˜¯ç´¢å¼•
            a, b = 1, 1
            for x in range(n):
                a, b = b, a + b
            return a
        if isinstance(n, slice): # næ˜¯åˆ‡ç‰‡
            start = n.start
            stop = n.stop
            if start is None:
                start = 0
            a, b = 1, 1
            L = []
            for x in range(stop):
                if x >= start:
                    L.append(a)
                a, b = b, a + b
            return L
</code></pre>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>pythonè¯­æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºå››çº§ç½‘ç»œæŠ€æœ¯</title>
    <url>/2020/03/26/ji-suan-ji-si-ji-wang-luo-ji-zhu/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯å¯¹è®¡ç®—æœºå››çº§çŸ¥è¯†ç‚¹çš„æ•´ç†æ‘˜è¦ï¼Œè¦†ç›–å¤§æ¦‚90%çš„å†å¹´è€ƒè¯•çŸ¥è¯†ç‚¹ï¼Œå‰©ä¸‹çš„ä¸å¤šçš„è®¡ç®—é¢˜å¤§å®¶è‡ªè¡Œç¢ç£¨ç†è§£</p>
<h1 id="ç¬¬ä¸€ç« -ç½‘ç»œæŠ€æœ¯åŸºç¡€"><a href="#ç¬¬ä¸€ç« -ç½‘ç»œæŠ€æœ¯åŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  ç½‘ç»œæŠ€æœ¯åŸºç¡€"></a>ç¬¬ä¸€ç«  ç½‘ç»œæŠ€æœ¯åŸºç¡€</h1><h3 id="1-1-2-è®¡ç®—æœºç½‘ç»œå½¢æˆä¸ARPANET"><a href="#1-1-2-è®¡ç®—æœºç½‘ç»œå½¢æˆä¸ARPANET" class="headerlink" title="1.1.2 è®¡ç®—æœºç½‘ç»œå½¢æˆä¸ARPANET"></a>1.1.2 è®¡ç®—æœºç½‘ç»œå½¢æˆä¸ARPANET</h3><p>ç¾å›½å›½é˜²é«˜çº§ç ”ç©¶è®¡åˆ’å±€æå‡ºARPANETç ”ç©¶è®¡åˆ’</p>
<p>é‡‡å–åˆ†ç»„äº¤æ¢çš„æ€æƒ³ï¼Œå°†ARPANETåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>é€šä¿¡å­ç½‘ä¸èµ„æºå­ç½‘</strong></p>
<p>å¼€å§‹æ—¶ï¼Œå®éªŒç½‘ç»œåŒ…å«å››ä¸ªèŠ‚ç‚¹</p>
<p>åœ¨è®¡ç®—æœºç½‘ç»œå‘å±•çš„ä¸åŒé˜¶æ®µï¼Œäººä»¬å¯¹è®¡ç®—æœºç½‘ç»œæœ‰ä¸åŒçš„å®šä¹‰ï¼Œè¿™äº›å®šä¹‰ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šå¹¿ä¹‰ã€èµ„æºå…±äº«ä¸ç”¨æˆ·é€æ˜æ€§ã€‚å…¶ä¸­èµ„æºå…±äº«çš„å®šä¹‰ç¬¦åˆå½“å‰è®¡ç®—æœºç½‘ç»œçš„åŸºæœ¬ç‰¹å¾ï¼Œä¸»è¦è¡¨ç°ä¸ºä¸‰ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰å»ºç«‹è®¡ç®—æœºç½‘ç»œçš„ä¸»è¦ç›®çš„æ˜¯<strong>å®ç°è®¡ç®—æœºèµ„æºçš„å…±äº«</strong>ï¼›</p>
<p>ï¼ˆ2ï¼‰äº’è”çš„è®¡ç®—æœºæ˜¯åˆ†å¸ƒåœ¨ä¸åŒåœ°ç†ä½ç½®çš„å¤šå°ç‹¬ç«‹çš„â€œè‡ªæ²»è®¡ç®—æœºâ€ï¼Œ<strong>äº’è”çš„è®¡ç®—æœºä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„ä¸»ä»å…³ç³»</strong>ã€‚</p>
<p>ï¼ˆ3ï¼‰è”ç½‘è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡<strong>å¿…é¡»éµå¾ªå…±åŒçš„ç½‘ç»œåè®®</strong>ã€‚</p>
<h3 id="1-2-2-è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»"><a href="#1-2-2-è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»" class="headerlink" title="1.2.2 è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»"></a>1.2.2 è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»</h3><div class="table-container">
<table>
<thead>
<tr>
<th>0~10m</th>
<th>0~10m</th>
<th>10m~10km</th>
<th>50km~100km</th>
<th>10km~1000km</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¸ªäººåŒºåŸŸç½‘ï¼ˆWPANï¼‰æœ€æœ‰åçš„ä¸ºè“ç‰™</td>
<td>ä¸ªäººå±€åŸŸç½‘(PAN)</td>
<td>å±€åŸŸç½‘(LAN)</td>
<td>åŸåŸŸç½‘(MAN)</td>
<td>å¹¿åŸŸç½‘(WAN)</td>
</tr>
<tr>
<td></td>
<td></td>
<td>10Mbps~100Gbps</td>
<td>45~150Mbps</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FDDI,ä»‹è´¨è®¿é—®å­å±‚ä»¤ç‰Œç¯</td>
<td></td>
</tr>
<tr>
<td>IEEE 802.15</td>
<td></td>
<td></td>
<td>IEEE 802.6</td>
</tr>
</tbody>
</table>
</div>
<p>ä¹¦ä¸­å„ç§åè®®ï¼š</p>
<p><strong>IEEE 802åˆç§°ä¸ºLMSCï¼Œè‡´åŠ›äºç ”ç©¶å±€åŸŸç½‘å’ŒåŸåŸŸç½‘çš„ç‰©ç†å±‚å’ŒMACå±‚ä¸­å®šä¹‰çš„æœåŠ¡å’Œåè®®ï¼Œå¯¹åº”OSIç½‘ç»œå‚è€ƒæ¨¡å‹çš„æœ€ä½ä¸¤å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ï¼‰ï¼Œå®ƒé’ˆå¯¹ä¸åŒçš„ä¼ è¾“ä»‹è´¨å®šä¹‰ä¸åŒçš„ä»‹è´¨æ ‡å‡†ã€‚</strong></p>
<p><strong>IEEE 802åœ¨ä»‹è´¨è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰å­å±‚å’Œç‰©ç†å±‚å¯ä»¥é‡‡ç”¨ä¸åŒçš„åè®®ï¼Œä½†æ˜¯åœ¨é€»è¾‘é“¾è·¯æ§åˆ¶ï¼ˆLLCï¼‰å­å±‚å¿…é¡»é‡‡ç”¨ç›¸åŒçš„åè®®ï¼ŒLLCå­å±‚ä¸ä½å±‚é‡‡ç”¨çš„ä¼ è¾“ä»‹è´¨ï¼Œä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•æ— å…³</strong></p>
<p><strong>IEEE 802.11</strong> æ˜¯æ— çº¿å±€åŸŸç½‘(WLAN)çš„ä»‹è´¨è®¿é—®æ§åˆ¶åè®®ä»¥åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒ</p>
<p>IEEE 802.11æ ‡å‡†é‡‡ç”¨çš„æ˜¯å±‚æ¬¡ç»“æ„æ¨¡å‹ï¼Œä¸»è¦å·¥ä½œåœ¨OSIå‚è€ƒæ¨¡å‹çš„æœ€ä½ä¸¤å±‚ï¼šç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ã€‚æœ€åˆå®šä¹‰çš„ä¸‰ä¸ªç‰©ç†å±‚ä¼ è¾“æ ‡å‡†åŒ…æ‹¬ä¸¤ä¸ªæ‰©æ•£é¢‘è°±æŠ€æœ¯å’Œä¸€ä¸ªçº¢å¤–ä¼ æ’­è§„èŒƒã€‚IEEE 802.11æ ‡å‡†è§„å®šçš„MACå±‚æ˜¯åœ¨ä¸€ä¸ªå…±äº«åª’ä½“ä¸Šæ”¯æŒå¤šä¸ªç”¨æˆ·å…±äº«èµ„æºï¼Œå‘é€æ•°æ®å‰éœ€è¦è¿›è¡Œ<strong>å†²çªæ£€æµ‹</strong>ï¼Œè®¿é—®æ§åˆ¶æ”¯æŒ<strong>æ— äº‰ç”¨æœåŠ¡å’Œäº‰ç”¨æœåŠ¡ä¸¤ç§</strong>æ–¹å¼ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡å‡†åç§°</th>
<th style="text-align:left">æ ‡å‡†æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">802.11a</td>
<td style="text-align:left">5G Hzæ³¢æ®µï¼Œé€Ÿç‡54Mbps</td>
</tr>
<tr>
<td style="text-align:left">802.11b</td>
<td style="text-align:left">2.4G Hzæ³¢æ®µï¼Œé€Ÿç‡11Mbps</td>
</tr>
<tr>
<td style="text-align:left">802.11g</td>
<td style="text-align:left">2.4G Hzæ³¢æ®µï¼Œé€Ÿç‡54Mbps</td>
</tr>
<tr>
<td style="text-align:left">802.11n</td>
<td style="text-align:left">5G Hzæ³¢æ®µï¼Œé€Ÿç‡100Mbps</td>
</tr>
<tr>
<td style="text-align:left">802.11ac</td>
<td style="text-align:left">5G Hzæ³¢æ®µï¼Œé€Ÿç‡1Gbps</td>
</tr>
<tr>
<td style="text-align:left">802.11ad</td>
<td style="text-align:left">60G Hzæ³¢æ®µï¼Œé€Ÿç‡7Gbps</td>
</tr>
<tr>
<td style="text-align:left">802.11i</td>
<td style="text-align:left">å¢å¼ºæ— çº¿é€šä¿¡å®‰å…¨çš„è§„èŒƒ</td>
</tr>
<tr>
<td style="text-align:left">802.11e</td>
<td style="text-align:left">æœåŠ¡è´¨é‡QoS</td>
</tr>
</tbody>
</table>
</div>
<p><strong>IEEE 802.1</strong>å±€åŸŸç½‘ä½“ç³»ç»“æ„ï¼Œç½‘ç»œäº’è”ï¼Œä»¥åŠç½‘ç»œç®¡ç†ä¸æ€§èƒ½æµ‹è¯•</p>
<p><strong>IEEE 802.11</strong> æ˜¯æ— çº¿å±€åŸŸç½‘(WLAN)çš„è®¿é—®æ§åˆ¶å­å±‚ä»¥åŠç‰©ç†å±‚æŠ€æœ¯è§„èŒƒ</p>
<p><strong>IEEE 802.15</strong> é‡‡ç”¨è“ç‰™æŠ€æœ¯ï¼ˆè¿‘è·ç¦»ï¼‰çš„æ— çº¿ä¸ªäººç½‘ç»œæŠ€æœ¯è§„èŒƒ</p>
<p><strong>IEEE802.16</strong> å®šä¹‰<strong>å®½å¸¦æ— çº¿å±€åŸŸç½‘</strong>ä»‹è´¨è®¿é—® MAC å­å±‚ä¸ç‰©ç†å±‚æ ‡å‡†</p>
<p><strong>IEEE 802.2</strong>é€»è¾‘é“¾è·¯æ§åˆ¶LLCå­å±‚åŠŸèƒ½ä¸æœåŠ¡</p>
<p><strong>IEEE802.3</strong> å®šä¹‰MACå±‚è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—® ï¼ˆCSMA/CD ï¼‰ ä»‹è´¨è®¿é—®æ§åˆ¶å­å±‚ä¸ç‰©ç†å±‚æ ‡å‡†</p>
<p><strong>IEEE802.4</strong> å®šä¹‰äº†æ€»çº¿æ‹“æ‰‘çš„ä»¤ç‰Œæ€»çº¿ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•ä¸ç›¸åº”çš„ç‰©ç†è§„èŒƒ</p>
<p>æ— çº¿å±€åŸŸç½‘æ ‡å‡†802.11çš„MACå’Œ802.3åè®®çš„MACä¸åŒï¼Œä¼ ç»Ÿçš„Ethernetç½‘å¸§çš„ç»“æ„ä¸­æœ‰å‰å¯¼ç å’Œå¸§å‰å®šç•Œç¬¦ï¼Œè€Œ802.11æ ‡å‡†ä¸­ç”¨å¸§æ§åˆ¶å•å…ƒä»£æ›¿ã€‚ä¼ ç»Ÿçš„Ethernetç½‘çš„æ•°æ®æ®µé•¿åº¦æ˜¯46B~1500Bï¼Œè€Œ802.11å¸§ä¸­çš„æ•°æ®æ®µé•¿åº¦æ˜¯0~2312Bã€‚ä¼ ç»Ÿçš„Ethernetç½‘ä¸­å¸§çš„ç±»å‹å­—æ®µè¡¨ç¤ºå½“å‰å¸§ä½¿ç”¨åè®®çš„ç±»å‹ï¼Œè€Œ802.11å¸§ä¸­ç±»å‹å­—æ®µç”¨æ¥è¡¨ç¤ºå½“å‰å¸§æ˜¯æ•°æ®å¸§ã€ç®¡ç†å¸§æˆ–æ§åˆ¶å¸§ã€‚è¿™ä¸¤ç§å¸§å‡å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œ<strong>é‡‡ç”¨çš„åœ°å€æ˜¯MACåœ°å€ã€‚</strong></p>
<p>é«˜é€Ÿå±€åŸŸç½‘æŠ€æœ¯ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ç±»å‹</th>
<th>é€Ÿç‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>IEEE802.3u</td>
<td>Fast Ethernet</td>
<td>100Mbps</td>
</tr>
<tr>
<td>IEEE802.3z</td>
<td>Gigabit Ethernet</td>
<td>1000Mbps</td>
</tr>
<tr>
<td>IEEE802.3ae</td>
<td>10 Gigabit Ethernet</td>
<td>10Gbps</td>
</tr>
<tr>
<td>IEEE802.3ba</td>
<td>40&amp;100 Gigabit Ethernet</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-2-3-è®¡ç®—æœºç½‘ç»œçš„æ‹“æ‰‘ç»“æ„"><a href="#1-2-3-è®¡ç®—æœºç½‘ç»œçš„æ‹“æ‰‘ç»“æ„" class="headerlink" title="1.2.3 è®¡ç®—æœºç½‘ç»œçš„æ‹“æ‰‘ç»“æ„"></a>1.2.3 è®¡ç®—æœºç½‘ç»œçš„æ‹“æ‰‘ç»“æ„</h3><ol>
<li><p>æ˜Ÿå‹ç»“æ„</p>
<p>ç»“æ„ç®€å•æ˜“äºå®ç°ä¾¿äºç®¡ç†</p>
<p>ç½‘ç»œä¸­å¿ƒèŠ‚ç‚¹æ˜¯å…¨ç½‘æ€§èƒ½ä¸å¯é æ€§çš„ç“¶é¢ˆï¼Œä¸­å¿ƒèŠ‚ç‚¹çš„æ•…éšœå¯èƒ½é€ æˆå…¨ç½‘ç˜«ç—ª</p>
</li>
<li><p>ç¯å½¢æ‹“æ‰‘</p>
<p>ç»“æ„ç®€å•ï¼Œ<strong>ä¼ è¾“å»¶æ—¶ç¡®å®š</strong></p>
<p>ç¯ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸è¿æ¥ç‚¹ä¹‹é—´é€šä¿¡çº¿è·¯éƒ½ä¼šæˆä¸ºç½‘ç»œå¯é æ€§ç“¶é¢ˆã€‚</p>
</li>
<li><p>æ€»çº¿å‹æ‹“æ‰‘</p>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹åˆ©ç”¨æ€»çº¿å‘é€æ•°æ®æ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹åªèƒ½æ¥æ”¶æ•°æ®</p>
<p>å½“æœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å‘é€æ•°æ®æ—¶ï¼Œéƒ½ä¼šå‡ºç°å†²çªï¼Œé€ æˆä¼ è¾“å¤±è´¥</p>
<p>ç¼ºç‚¹ï¼šå¿…é¡»è§£å†³å¤šèŠ‚ç‚¹è®¿é—®æ€»çº¿çš„ä»‹è´¨è®¿é—®æ§åˆ¶é—®é¢˜</p>
</li>
<li><p>æ ‘å½¢æ‹“æ‰‘</p>
<p>èŠ‚ç‚¹æŒ‰å±‚æ¬¡è¿æ¥ï¼Œä¿¡æ¯äº¤æ¢åœ¨ä¸Šä¸‹èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œï¼Œç›¸é‚»ä»¥åŠåŒå±‚èŠ‚ç‚¹ä¹‹é—´é€šä¿¡é€šå¸¸ä¸è¿›è¡Œæ•°æ®äº¤æ¢</p>
<p><strong>æ ‘å‹é€šå¸¸ç”¨æ¥æ±‡èšä¿¡æ¯</strong></p>
</li>
<li><p>ç½‘çŠ¶æ‹“æ‰‘</p>
<p>è¿æ¥ä»»æ„<strong>æ²¡æœ‰è§„å¾‹</strong>ï¼Œåˆç§°ä¸ºæ— è§„åˆ™å‹æ‹“æ‰‘</p>
<p><strong>å¯é æ€§é«˜</strong>ï¼Œ<strong>å¹¿åŸŸç½‘ä¸€èˆ¬é‡‡ç”¨ç½‘çŠ¶æ‹“æ‰‘</strong></p>
<p><strong>ç»“æ„å¤æ‚</strong>ï¼Œå¿…é¡»é‡‡ç”¨è·¯ç”±é€‰æ‹©ç®—æ³•ï¼Œæµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶</p>
</li>
</ol>
<h3 id="1-2-4-æè¿°è®¡ç®—æœºç½‘ç»œä¼ è¾“ç‰¹æ€§çš„å‚æ•°"><a href="#1-2-4-æè¿°è®¡ç®—æœºç½‘ç»œä¼ è¾“ç‰¹æ€§çš„å‚æ•°" class="headerlink" title="1.2.4 æè¿°è®¡ç®—æœºç½‘ç»œä¼ è¾“ç‰¹æ€§çš„å‚æ•°"></a>1.2.4 æè¿°è®¡ç®—æœºç½‘ç»œä¼ è¾“ç‰¹æ€§çš„å‚æ•°</h3><ol>
<li><p>æ•°æ®ä¼ è¾“é€Ÿç‡çš„å®šä¹‰</p>
<ul>
<li><p>é€Ÿç‡ä¸ºï¼š$S=\frac{1}{T}(bps)$å…¶ä¸­Tä¸ºå‘é€1æ¯”ç‰¹æ‰€éœ€è¦çš„æ—¶é—´</p>
</li>
<li><p>å¯¹äºäºŒè¿›åˆ¶æ•°æ®ä¿¡å·çš„æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡$R<em>{max}$ä¸é€šä¿¡ä¿¡é“å¸¦å®½B(B=f,å•ä½Hz)çš„å…³ç³»å¯ä»¥å†™ä¸ºï¼š$R</em>{max}=2\times f(bps)$</p>
</li>
</ul>
</li>
<li><p>è¯¯ç ç‡çš„å®šä¹‰</p>
<p>è¯¯ç ç‡æŒ‡äºŒè¿›åˆ¶ç å…ƒåœ¨æ•°æ®ä¼ è¾“ç³»ç»Ÿä¸­è¢«ä¼ é”™çš„æ¦‚ç‡æ•°å€¼ä¸Šè¿‘ä¼¼ç­‰äºï¼š$P<em>{e}=\frac{N</em>{e}}{N}$,å…¶ä¸­Nä¸ºä¼ è¾“çš„äºŒè¿›åˆ¶ç å…ƒæ€»æ•°ï¼Œ$N_{e}$ä¸ºè¢«ä¼ é”™çš„ç å…ƒæ•°</p>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>è¯¯ç ç‡æ˜¯<strong>æ­£å¸¸å·¥ä½œçŠ¶æ€</strong>ä¸‹çš„ä¼ è¾“å¯é æ€§å‚æ•°</li>
<li>å¯¹äºå®é™…çš„æ•°æ®ä¼ è¾“ç³»ç»Ÿï¼Œä¸èƒ½ç¬¼ç»Ÿè¯´è¯¯ç ç‡è¶Šä½è¶Šå¥½ï¼Œå› ä¸º<strong>è¯¯ç ç‡è¶Šä½é€ ä»·è¶Šé«˜</strong></li>
<li>å¦‚æœä¼ è¾“çš„ä¸æ˜¯äºŒè¿›åˆ¶ç å…ƒï¼Œ<strong>æŠ˜åˆæˆäºŒè¿›åˆ¶ç å…ƒè®¡ç®—</strong></li>
<li>ç”±äºå·®é”™æœ‰éšæœºæ€§ï¼Œå®é™…æµ‹é‡<strong>éœ€è¦ä¼ è¾“äºŒè¿›åˆ¶ç å…ƒæ•°è¶Šå¤§ï¼Œæ‰ä¼šè¶Šæ¥è¿‘çœŸå®å€¼</strong></li>
</ol>
</li>
</ol>
<h3 id="1-3-3-æ•°æ®æŠ¥äº¤æ¢ä¸è™šç”µè·¯äº¤æ¢"><a href="#1-3-3-æ•°æ®æŠ¥äº¤æ¢ä¸è™šç”µè·¯äº¤æ¢" class="headerlink" title="1.3.3 æ•°æ®æŠ¥äº¤æ¢ä¸è™šç”µè·¯äº¤æ¢"></a>1.3.3 æ•°æ®æŠ¥äº¤æ¢ä¸è™šç”µè·¯äº¤æ¢</h3><ol>
<li><p><strong>æ•°æ®æŠ¥æ–¹å¼</strong></p>
<p><strong>åˆ†ç»„ä¼ è¾“æ–¹å¼ä¸­ï¼Œåˆ†ç»„ä¼ è¾“ä¸éœ€è¦åœ¨æºä¸»æœºä¸ç›®çš„ä¸»æœºä¹‹é—´é¢„å…ˆå»ºç«‹â€œçº¿è·¯è¿æ¥â€</strong></p>
<p>æºä¸»æœºå‘é€çš„æ¯ä¸ªåˆ†ç»„éƒ½å¯ä»¥ç‹¬ç«‹é€‰æ‹©ä¸€æ¡ä¼ è¾“è·¯å¾„ï¼Œ<strong>æ¯ä¸ªåˆ†ç»„åœ¨é€šä¿¡å­ç½‘ä¸­å¯èƒ½é€šè¿‡ä¸åŒçš„è·¯å¾„åˆ°è¾¾ç›®çš„ä¸»æœº</strong></p>
<p>æ•°æ®æŠ¥æ–¹å¼æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªæŠ¥æ–‡ä¸åŒåˆ†ç»„å¯ä»¥é€šè¿‡<strong>ä¸åŒè·¯å¾„</strong>é€šè¿‡é€šä¿¡å­ç½‘</li>
<li>åŒä¸€ä¸ªæŠ¥æ–‡çš„ä¸åŒåˆ†ç»„åˆ°è¾¾ç›®çš„ä¸»æœºæ˜¯å¯èƒ½ä¼šå‡ºç°<strong>ä¹±åºï¼Œé‡å¤ä¸ä¸¢å¤±çš„ç°è±¡</strong></li>
<li>æ•°æ®ä¼ è¾“æ–¹å¼çš„<strong>ä¼ è¾“å»¶æ—¶è¾ƒå¤§</strong>ï¼Œ<strong>é€‚ç”¨äºçªå‘æ€§é€šä¿¡ï¼Œä¸é€‚ç”¨äºé•¿æŠ¥æ–‡ï¼Œä¼šè¯å¼é€šä¿¡</strong></li>
</ul>
</li>
<li><p><strong>è™šç”µè·¯æ–¹å¼</strong></p>
<p>å‘é€åˆ†ç»„å‰ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹éœ€è¦å»ºç«‹ä¸€æ¡é€»è¾‘è¿æ¥çš„è™šç”µè·¯</p>
<p>è™šç”µè·¯æ–¹å¼å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>åœ¨æ¯æ¬¡ä¼ è¾“åˆ†ç»„å‰ï¼Œ<strong>åœ¨æºä¸»æœºå’Œç›®çš„ä¸»æœºä¹‹é—´å»ºç«‹ä¸€æ¡è™šç”µè·¯</strong></li>
<li>æ‰€æœ‰åˆ†ç»„éƒ½é€šè¿‡è™šç”µè·¯é¡ºåºä¼ è¾“ï¼Œåˆ†ç»„<strong>ä¸å¿…æºå¸¦ç›®çš„åœ°å€ï¼Œæºåœ°å€</strong>ç­‰ä¿¡æ¯ï¼Œåˆ†ç»„åˆ°è¾¾ç›®çš„ä¸»æœºæ˜¯<strong>ä¸ä¼šå‡ºç°ä¹±åºé‡å¤ä¸ä¸¢å¤±</strong></li>
<li>åˆ†ç»„é€šè¿‡è™šç”µè·¯æ¯ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨<strong>åªéœ€è¦è¿›è¡Œå·®é”™æ£€æŸ¥ï¼Œè€Œä¸éœ€è¦è¿›è¡Œè·¯ç”±é€‰æ‹©</strong></li>
<li>è·¯ç”±å™¨å¯ä»¥<strong>ä¸å¤šä¸ªä¸»æœºä¹‹é—´é€šä¿¡å»ºç«‹å¤šæ¡è™šç”µè·¯</strong></li>
</ul>
</li>
</ol>
<h2 id="1-4-ç½‘ç»œä½“ç³»ç»“æ„ä¸ç½‘ç»œåè®®"><a href="#1-4-ç½‘ç»œä½“ç³»ç»“æ„ä¸ç½‘ç»œåè®®" class="headerlink" title="1.4 ç½‘ç»œä½“ç³»ç»“æ„ä¸ç½‘ç»œåè®®"></a>1.4 ç½‘ç»œä½“ç³»ç»“æ„ä¸ç½‘ç»œåè®®</h2><h3 id="1-4-1-ç½‘ç»œä½“ç³»ç»“æ„çš„æ¦‚å¿µ"><a href="#1-4-1-ç½‘ç»œä½“ç³»ç»“æ„çš„æ¦‚å¿µ" class="headerlink" title="1.4.1 ç½‘ç»œä½“ç³»ç»“æ„çš„æ¦‚å¿µ"></a>1.4.1 ç½‘ç»œä½“ç³»ç»“æ„çš„æ¦‚å¿µ</h3><p>ç½‘ç»œåè®®æ˜¯ç”±ä¸‰ä¸ªè¦ç´ ç»„æˆï¼š</p>
<ol>
<li><p><strong>è¯­æ³•</strong>ã€‚è¯­æ³•æ˜¯ç”¨æˆ·æ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„<strong>ç»“æ„ä¸æ ¼å¼</strong>ï¼Œä»¥åŠæ•°æ®å‡ºç°çš„<strong>é¡ºåº</strong>ã€‚</p>
</li>
<li><p><strong>è¯­ä¹‰</strong>ã€‚è¯­ä¹‰æ˜¯è§£é‡Šæ§åˆ¶ä¿¡æ¯æ¯ä¸ªéƒ¨åˆ†çš„æ„ä¹‰ã€‚å®ƒè§„å®šäº†éœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œä»¥åŠ<strong>å®Œæˆçš„åŠ¨ä½œä¸åšå‡ºä»€ä¹ˆæ ·çš„å“åº”</strong>ã€‚</p>
</li>
<li><p><strong>æ—¶åº</strong>ã€‚æ—¶åºæ˜¯å¯¹äº‹ä»¶<strong>å‘ç”Ÿé¡ºåº</strong>çš„è¯¦ç»†è¯´æ˜ã€‚ï¼ˆä¹Ÿå¯ç§°ä¸ºâ€œåŒæ­¥â€ï¼‰</p>
</li>
</ol>
<p>äººä»¬å½¢è±¡åœ°æŠŠè¿™ä¸‰ä¸ªè¦ç´ æè¿°ä¸ºï¼šè¯­ä¹‰è¡¨ç¤ºè¦åšä»€ä¹ˆï¼Œè¯­æ³•è¡¨ç¤ºè¦æ€ä¹ˆåšï¼Œæ—¶åºè¡¨ç¤ºåšçš„é¡ºåºã€‚</p>
<h3 id="1-4-2-ISO-OSI-å‚è€ƒæ¨¡å‹"><a href="#1-4-2-ISO-OSI-å‚è€ƒæ¨¡å‹" class="headerlink" title="1.4.2 ISO/OSI å‚è€ƒæ¨¡å‹"></a>1.4.2 ISO/OSI å‚è€ƒæ¨¡å‹</h3><p>TCPåè®®è¿è¡Œåœ¨ä¼ è¾“å±‚ï¼ŒIPåœ¨ç½‘ç»œå±‚ï¼Œhttpåœ¨åº”ç”¨å±‚</p>
<p><strong>åŒä¸€ä¸ªèŠ‚ç‚¹ä¸‹å±‚ä¸ºä¸Šå±‚æä¾›æœåŠ¡ï¼Œç›¸é‚»å±‚é€šè¿‡æ¥å£é€šä¿¡</strong></p>
<p>ä¸åŒèŠ‚ç‚¹åŒç­‰å±‚ä¹‹é—´é€šè¿‡é€šä¿¡åè®®é€šä¿¡</p>
<p>å„å±‚å®ç°æŠ€æœ¯äº’ä¸å½±å“  </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ISO/OSI å‚è€ƒæ¨¡å‹</th>
<th>åŠŸèƒ½</th>
<th>è¯¥å±‚çš„è®¾å¤‡ä¸åè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç‰©ç†å±‚</strong></td>
<td><strong>ç‰©ç†è¿æ¥ï¼Œæ¯”ç‰¹æµä¼ è¾“ï¼Œå•ä½ä¸ºæ¯”ç‰¹æµ</strong></td>
<td>IEEE 802ï¼Œä¸­ç»§å™¨ï¼Œç½‘çº¿ï¼Œé›†çº¿å™¨</td>
</tr>
<tr>
<td><strong>æ•°æ®é“¾è·¯å±‚</strong></td>
<td><strong>å»ºç«‹æ•°æ®é“¾è·¯è¿æ¥ï¼Œå·®é”™æ§åˆ¶ï¼Œæµé‡æ§åˆ¶</strong></td>
<td>ç½‘å¡ï¼ŒäºŒå±‚äº¤æ¢æœºã€ç½‘æ¡¥</td>
</tr>
<tr>
<td><strong>ç½‘ç»œå±‚</strong></td>
<td><strong>è·¯ç”±é€‰æ‹©ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ï¼Œç½‘ç»œäº’è”</strong></td>
<td>è·¯ç”±å™¨ï¼ŒRIP,OSPFï¼ŒIPï¼ŒICMPï¼ŒIGMPï¼ŒåŒ…è¿‡æ»¤è·¯ç”±å™¨</td>
</tr>
<tr>
<td><strong>ä¼ è¾“å±‚</strong></td>
<td><strong>ç«¯åˆ°ç«¯è¿æ¥ä¸æ•°æ®ä¼ è¾“ï¼Œå•ä½ä¸ºæŠ¥æ–‡</strong></td>
<td>TCP,UDPï¼ŒNAT</td>
</tr>
<tr>
<td><strong>ä¼šè¯å±‚</strong></td>
<td><strong>ä¼šè¯ä¸»æœºä¹‹é—´çš„å»ºç«‹ï¼Œç®¡ç†å’Œç»ˆæ­¢ï¼Œæ•°æ®äº¤æ¢</strong></td>
<td></td>
</tr>
<tr>
<td><strong>è¡¨ç¤ºå±‚</strong></td>
<td><strong>æ•°æ®æ ¼å¼å˜æ¢ï¼ŒåŠ å¯†è§£å¯†ï¼Œå‹ç¼©æ¢å¤</strong></td>
<td></td>
</tr>
<tr>
<td><strong>åº”ç”¨å±‚</strong></td>
<td><strong>é€šä¿¡è¿‡ç¨‹æ§åˆ¶</strong></td>
<td>Telnet,FTP,SNMP,HTTPï¼ŒSIPï¼ŒCMIP</td>
</tr>
</tbody>
</table>
</div>
<p><strong>è°ƒåˆ¶è§£è°ƒå™¨</strong>æ˜¯ä¸€ç§ç¡¬ä»¶ï¼Œå®ƒèƒ½æŠŠè®¡ç®—æœºçš„æ•°å­—ä¿¡å·ç¿»è¯‘æˆæ¨¡æ‹Ÿä¿¡å·ã€‚</p>
<p><strong>é›†çº¿å™¨</strong>çš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹æ¥æ”¶åˆ°çš„ä¿¡å·è¿›è¡Œå†ç”Ÿã€æ•´å½¢ã€æ”¾å¤§ï¼Œä»¥æ‰©å¤§ç½‘ç»œçš„ä¼ è¾“è·ç¦»ï¼ŒåŒæ—¶æŠŠæ‰€æœ‰ç»“ç‚¹é›†ä¸­åœ¨ä»¥å®ƒä¸ºä¸­å¿ƒçš„ç»“ç‚¹ä¸Šã€‚</p>
<p><strong>ä¸­ç»§å™¨</strong>æ˜¯ç½‘ç»œç‰©ç†å±‚ä¸Šé¢çš„è¿æ¥è®¾å¤‡ï¼Œé€‚ç”¨äºå®Œå…¨ç›¸åŒçš„ä¸¤ç±»ç½‘ç»œçš„äº’è¿ï¼Œä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å¯¹æ•°æ®ä¿¡å·çš„é‡æ–°å‘é€æˆ–è€…è½¬å‘ï¼Œæ¥æ‰©å¤§ç½‘ç»œä¼ è¾“çš„è·ç¦»ã€‚</p>
<p><strong>è·¯ç”±å™¨</strong>æ˜¯ä½¿ç”¨åœ¨ç½‘ç»œå±‚çš„äº’è¿è®¾å¤‡ï¼Œå¯ä»¥å®ç°å¼‚æ„ç½‘ç»œäº’è”ï¼Œæ˜¯ç½‘ç»œä¸ç½‘ç»œä¹‹é—´è¿æ¥çš„æ¡¥æ¢ã€‚</p>
<p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰åè®®æ˜¯ä¸€ç§<strong>é¢å‘è¿æ¥</strong>çš„ã€å¯é çš„ã€<strong>åŸºäºIPçš„ä¼ è¾“å±‚åè®®</strong>ã€‚TCPä½¿ç”¨ä¸‰æ¬¡æ¡æ‰‹åè®®å»ºç«‹è¿æ¥ï¼Œè€Œç»ˆæ­¢ä¸€ä¸ªè¿æ¥è¦ç»è¿‡å››æ¬¡æ¡æ‰‹ã€‚RTTï¼ˆRound Trip Timeï¼‰è¡¨ç¤ºä»å‘é€ç«¯åˆ°æ¥æ”¶ç«¯çš„ä¸€å»ä¸€å›éœ€è¦çš„æ—¶é—´ï¼ŒTCPåœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ä¼š<strong>å¯¹RTTè¿›è¡Œé‡‡æ ·ï¼Œé‡‡ç”¨è‡ªé€‚åº”çš„RTTè®¡ç®—æ–¹æ³•</strong>ã€‚TCPåè®®åˆ©ç”¨çª—å£æœºåˆ¶è¿›è¡Œæµé‡æ§åˆ¶ï¼Œç«¯å£é‡‡ç”¨<strong>16ä½çš„äºŒè¿›åˆ¶æ•°</strong>è¡¨ç¤ºã€‚</p>
<h3 id="1-4-3-TCP-IP-å‚è€ƒæ¨¡å‹"><a href="#1-4-3-TCP-IP-å‚è€ƒæ¨¡å‹" class="headerlink" title="1.4.3 TCP/IP å‚è€ƒæ¨¡å‹"></a>1.4.3 TCP/IP å‚è€ƒæ¨¡å‹</h3><p>ç”±IETFåˆ¶å®š</p>
<p>ç‹¬ç«‹äºç‰¹å®šçš„ç½‘ç»œç¡¬ä»¶</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>TCP/IP å‚è€ƒæ¨¡å‹</th>
<th>åŠŸèƒ½</th>
<th>å®‰å…¨åè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ä¸»æœº-ç½‘ç»œå±‚</strong></td>
<td><strong>å‘é€ï¼Œæ¥æ”¶IPåˆ†ç»„</strong></td>
<td>PPTP,L2TP,L2F</td>
</tr>
<tr>
<td><strong>äº’è”ç½‘ç»œå±‚/äº’è”å±‚</strong></td>
<td><strong>å¤„ç†ä¼ è¾“å±‚çš„æ•°æ®å‘é€è¯·æ±‚ï¼Œå¤„ç†æ¥æ”¶åˆ†ç»„ï¼Œè·¯ç”±é€‰æ‹©ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶</strong></td>
<td>IPSec</td>
</tr>
<tr>
<td><strong>ä¼ è¾“å±‚</strong></td>
<td><strong>å»ºç«‹ç»´æŠ¤ç«¯åˆ°ç«¯è¿æ¥ï¼Œå®ç°ç½‘ç»œç¯å¢ƒåˆ†å¸ƒå¼è¿›ç¨‹é€šä¿¡</strong></td>
<td>SSHï¼ŒSSLï¼ŒSOCKS,TLS</td>
</tr>
<tr>
<td><strong>åº”ç”¨å±‚</strong></td>
<td><strong>åŒ…æ‹¬å„ç§æ ‡å‡†åè®®</strong></td>
<td>SET,PGP,S-HTTP,S/MIME</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-4-4-OSIå‚è€ƒæ¨¡å‹ä¸TCP-IPå‚è€ƒæ¨¡å‹çš„æ¯”è¾ƒ"><a href="#1-4-4-OSIå‚è€ƒæ¨¡å‹ä¸TCP-IPå‚è€ƒæ¨¡å‹çš„æ¯”è¾ƒ" class="headerlink" title="1.4.4 OSIå‚è€ƒæ¨¡å‹ä¸TCP/IPå‚è€ƒæ¨¡å‹çš„æ¯”è¾ƒ"></a>1.4.4 OSIå‚è€ƒæ¨¡å‹ä¸TCP/IPå‚è€ƒæ¨¡å‹çš„æ¯”è¾ƒ</h3><table><tbody><tr><td>
            <p><strong>TCP/IP&nbsp;</strong></p>
            </td>
            <td>
            <p><strong>OSIå‚è€ƒæ¨¡å‹</strong></p>
            </td>
        </tr><tr><td rowspan="3">
            <p>åº”ç”¨å±‚</p>
            </td>
            <td>
            <p>åº”ç”¨å±‚</p>
            </td>
        </tr><tr><td>
            <p>è¡¨ç¤ºå±‚</p>
            </td>
        </tr><tr><td>
            <p>ä¼šè¯å±‚</p>
            </td>
        </tr><tr><td>
            <p>ä¼ è¾“å±‚</p>
            </td>
            <td>
            <p>ä¼ è¾“å±‚</p>
            </td>
        </tr><tr><td>
            <p>äº’è”/ç½‘ç»œäº’è”å±‚</p>
            </td>
            <td>
            <p>ç½‘ç»œå±‚</p>
            </td>
        </tr><tr><td rowspan="2">
            <p>ä¸»æœº-ç½‘ç»œå±‚</p>
            </td>
            <td>
            <p>æ•°æ®é“¾è·¯å±‚</p>
            </td>
        </tr><tr><td>
            <p>ç‰©ç†å±‚</p>
            </td>
        </tr></tbody></table>


<h1 id="ç¬¬äºŒç« -å±€åŸŸç½‘åŸºç¡€"><a href="#ç¬¬äºŒç« -å±€åŸŸç½‘åŸºç¡€" class="headerlink" title="ç¬¬äºŒç«  å±€åŸŸç½‘åŸºç¡€"></a>ç¬¬äºŒç«  å±€åŸŸç½‘åŸºç¡€</h1><p>å±€åŸŸç½‘ä»ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹å¼çš„è§’åº¦å¯ä»¥åˆ†ä¸º<strong>å…±äº«ä»‹è´¨å±€åŸŸç½‘</strong>ä¸<strong>äº¤æ¢å±€åŸŸç½‘</strong>ã€‚</p>
<p><strong>å…±äº«ä»‹è´¨å±€åŸŸç½‘</strong>ä¸­æ‰€æœ‰çš„ç»“ç‚¹å…±äº«ä¸€æ¡å…¬å…±çš„ä¼ è¾“ä»‹è´¨ï¼Œé€šè¿‡å¹¿æ’­çš„æ–¹å¼å‘é€æ•°æ®å¸§ï¼Œå¹¶é‡‡ç”¨CSMA/CD(å¸¦æœ‰å†²çªæ£€æµ‹çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®)æ–¹æ³•è§£å†³å†²çªé—®é¢˜ï¼Œè¿æ¥åœ¨æ€»çº¿ä¸Šçš„æ‰€æœ‰ç»“ç‚¹éƒ½èƒ½â€œæ”¶å¬â€åˆ°æ•°æ®ã€‚ç”±äºæ‰€æœ‰ç»“ç‚¹éƒ½å¯ä»¥åˆ©ç”¨æ€»çº¿å‘é€æ•°æ®ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œä¸­æ²¡æœ‰æ§åˆ¶ä¸­å¿ƒï¼Œéšè—å†²çªçš„å‘ç”Ÿå°†ä¸å¯é¿å…ã€‚</p>
<p><em>CSMA/CA(Carrier Sense Multiple Access with Collision Avoid<strong>,è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®ï¼å†²çªé¿å…</strong>)æ˜¯æ— çº¿å±€åŸŸç½‘æ ‡å‡†IEEE 802.11ä½¿ç”¨çš„ä¸€ç§ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•ï¼Œå·¥ä½œåœ¨MACå±‚ã€‚è¯¥æ–¹æ³•è¦æ±‚æ¯ä¸ªç»“ç‚¹åœ¨å‘é€å¸§ä¹‹å‰å…ˆä¾¦å¬ä¿¡é“ï¼Œå¦‚æœç©ºé—²åˆ™å¯ä»¥å‘é€å¸§ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å‘å›å¸§çš„ç¡®è®¤ACKåˆ™è¡¨æ˜è¯¥å¸§å‘é€å‡ºç°å†²çªï¼Œå³å‘é€å¤±è´¥ï¼Œåˆ™åœ¨è§„å®šçš„å¸§é—´éš”æ—¶é—´å†…ä¸èƒ½å†å‘é€å¸§ï¼Œåªæœ‰è¶…è¿‡äº†å¸§é—´éš”æ—¶é—´æ‰å¯ä»¥å‘é€å¸§ã€‚å¸¸è§çš„å¸§é—´é—´éš”IFSæœ‰ä¸‰ç§ï¼ŒçŸ­å¸§é—´é—´éš”ï¼ˆSIFSï¼‰,ç‚¹å¸§é—´é—´éš”ï¼ˆPIFSï¼‰ï¼Œå’Œåˆ†å¸ƒå¸§é—´é—´éš”ï¼ˆDIFSï¼‰,çŸ­å¸§é—´é—´éš”ç”¨äºåˆ†éš”å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ï¼ŒMACå±‚æ”¯æŒæ— å¾ç”¨æœåŠ¡å’Œå¾ç”¨æœåŠ¡ä¸¤ç§è®¿é—®æ–¹å¼ï¼Œæ²¡æœ‰ç±»ä¼¼ä»¥å¤ªç½‘çš„å†²çªæ£€æµ‹æœºåˆ¶ï¼Œä¸èƒ½å®Œå…¨é¿å…å†²çªçš„å‘ç”Ÿ</em></p>
<h3 id="2-1-2-ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•çš„æ¯”è¾ƒ"><a href="#2-1-2-ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•çš„æ¯”è¾ƒ" class="headerlink" title="2.1.2 ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•çš„æ¯”è¾ƒ"></a>2.1.2 ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•çš„æ¯”è¾ƒ</h3><p>å±€åŸŸç½‘æŒ‰ç…§ä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•åˆ†ç±»ï¼š</p>
<ol>
<li><p><strong>é‡‡ç”¨å¸¦æœ‰å†²çªæ£€æµ‹çš„è½½æ³¢ä¾¦å¬å¤šè·¯è®¿é—®(Carrier Sense Multiple Access/Collision Detection,CSMA/CD)è®¿é—®æ§åˆ¶æ–¹æ³•çš„æ€»çº¿å½¢Ethernetï¼Œç®€ç§°ä»¥å¤ªç½‘</strong></p>
<p><strong>æ€»çº¿å½¢ï¼Œå¹¿æ’­æ–¹å¼ï¼Œä¸¤ä¸ªåŠä»¥ä¸Šå‘é€æ•°æ®ä¼šå‘ç”Ÿå†²çªï¼Œéšæœºå‹ä»‹è´¨è®¿é—®</strong></p>
<p>æ€»çº¿å‹å±€åŸŸç½‘çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ‰€æœ‰ç»“ç‚¹éƒ½é€šè¿‡ç½‘å¡è¿æ¥åˆ°ä½œä¸ºå…¬å…±ä»‹è´¨çš„æ€»çº¿ä¸Šã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>æ€»çº¿é€šå¸¸é‡‡ç”¨åŒç»çº¿æˆ–åŒè½´ç”µç¼†ä½œä¸ºä¼ è¾“ä»‹è´¨ã€‚</strong></p>
<p>ï¼ˆ3ï¼‰æ‰€æœ‰çš„ç»“ç‚¹éƒ½å¯ä»¥å‘é€æˆ–æ¥æ”¶æ•°æ®ï¼Œ<strong>ä½†åœ¨ä¸€æ®µæ—¶é—´å†…åªå…è®¸ä¸€ä¸ªç»“ç‚¹é€šè¿‡æ€»çº¿å‘é€æ•°æ®ï¼ˆå³ä½†åŒå·¥å½¢å¼ï¼‰</strong>ã€‚å½“ä¸€ä¸ªç»“ç‚¹é€šè¿‡æ€»çº¿ä»¥â€œå¹¿æ’­â€æ–¹å¼å‘é€æ•°æ®æ—¶ï¼Œå…¶ä»–ç»“ç‚¹åªèƒ½ä»¥â€œæ”¶å¬â€æ–¹å¼æ¥æ”¶æ•°æ®ã€‚</p>
<p>ï¼ˆ4ï¼‰ç”±äºæ€»çº¿ä½œä¸ºå…¬å…±ä¼ è¾“ä»‹è´¨è¢«å¤šä¸ªç»“ç‚¹å…±äº«ï¼Œå› æ­¤ä¼šå‡ºç°å†²çªç°è±¡ã€‚</p>
</li>
<li><p>é‡‡ç”¨ä»¤ç‰Œæ§åˆ¶çš„ä»¤ç‰Œæ€»çº¿å½¢(Token Bus)å±€åŸŸç½‘ï¼Œç®€ç§°â€œToken Busâ€æˆ–â€œä»¤ç‰Œæ€»çº¿ç½‘â€</p>
<p><strong>æ€»çº¿å½¢ï¼Œå–å¾—ä»¤ç‰Œæ‰èƒ½ä½¿ç”¨å…±äº«æ€»çº¿å‘é€æ•°æ®ï¼Œä»¤ç‰ŒæŒæœ‰æ—¶é—´(Token Holding Time,THT)ä¸º10msï¼Œæ§åˆ¶è®¿é—®æ•°é‡å®æ—¶æ€§å¯ä»¥å¾—åˆ°ä¿è¯</strong></p>
</li>
<li><p>é‡‡ç”¨ä»¤ç‰Œæ§åˆ¶çš„ä»¤ç‰Œç¯å½¢(Token Ring)å±€åŸŸç½‘ï¼Œç®€ç§°â€œToken Ringâ€æˆ–â€ä»¤ç‰Œç¯ç½‘â€œ</p>
<p><strong>ç¯å½¢ï¼Œæ²¿ä¸€ä¸ªæ–¹å‘ä¼ è¾“ï¼Œå‘é€æ•°æ®é—´éš”å›ºå®šï¼Œæä¾›æœ‰é™æœåŠ¡ï¼Œé€‚ç”¨äºé‡è´Ÿè½½çš„åº”ç”¨é¢†åŸŸ</strong></p>
</li>
</ol>
<p>ä¼ è¾“ä»‹è´¨ä¸»è¦ä¸ºåŒè½´ç”µç¼†ï¼ŒåŒç»çº¿ï¼Œå…‰çº¤</p>
<p>é‡‡ç”¨å…±äº«ä»‹è´¨å‘é€æ¥æ”¶æ•°æ®å¸§</p>
<p>ä»‹è´¨è®¿é—®æ§åˆ¶é‡‡ç”¨åˆ†å¸ƒå¼æ§åˆ¶æ–¹æ³•ï¼Œæ²¡æœ‰é›†ä¸­æ§åˆ¶çš„ä¸»æœº</p>
<h2 id="2-2-å…±äº«ä»‹è´¨å±€åŸŸç½‘æŠ€æœ¯"><a href="#2-2-å…±äº«ä»‹è´¨å±€åŸŸç½‘æŠ€æœ¯" class="headerlink" title="2.2 å…±äº«ä»‹è´¨å±€åŸŸç½‘æŠ€æœ¯"></a>2.2 å…±äº«ä»‹è´¨å±€åŸŸç½‘æŠ€æœ¯</h2><h3 id="2-2-1-Ethernetå·¥ä½œåŸç†"><a href="#2-2-1-Ethernetå·¥ä½œåŸç†" class="headerlink" title="2.2.1 Ethernetå·¥ä½œåŸç†"></a>2.2.1 Ethernetå·¥ä½œåŸç†</h3><p>CSMA/CDï¼šå…ˆå¬åå‘(å…ˆä¾¦å¬æ˜¯å¦ç©ºé—²)ï¼Œè¾¹å¬è¾¹å‘ï¼Œå†²çªåœæ­¢ï¼Œ<strong>å»¶è¿Ÿ</strong>é‡å‘</p>
<h3 id="2-2-2-Ethernetå¸§ç»“æ„"><a href="#2-2-2-Ethernetå¸§ç»“æ„" class="headerlink" title="2.2.2 Ethernetå¸§ç»“æ„"></a>2.2.2 Ethernetå¸§ç»“æ„</h3><ol>
<li>Ethernet V2.0å’ŒIEEE802.3çš„Ethernetå¸§ç»“æ„åŒºåˆ«</li>
</ol>
<p><img src="è®¡ç®—æœºç½‘ç»œ.assets/1232796-20171017084041287-1347335048.png" alt="img"></p>
<p>â€‹    <strong>å…·ä½“å¼‚åŒè§ä¹¦æœ¬</strong></p>
<p>â€‹    ä¸»è¦å­—æ®µï¼š<strong>å‰å¯¼ç å­—æ®µï¼Œç›®çš„åœ°å€å’Œæºåœ°å€å­—æ®µï¼Œç±»å‹å­—æ®µï¼Œæ•°æ®å­—æ®µï¼Œå¸§æ ¡éªŒå­—æ®µ</strong></p>
<ol>
<li><p>Ethernetå¸§ç»“æ„åˆ†æ</p>
<ol>
<li><p>å‰å¯¼ç å­—æ®µ</p>
<p><strong>8B</strong>çš„10101010â€¦.101010æ¯”ç‰¹åºåˆ—ç»„æˆï¼Œå‰å¯¼ç çš„ä½œç”¨æ˜¯å®ç°æ”¶å‘åŒæ–¹çš„æ¯”ç‰¹åŒæ­¥ä¸å¸§åŒæ­¥ã€‚åœ¨æ¥æ”¶åä¸éœ€è¦ä¿ç•™ï¼Œä¹Ÿä¸è®¡å…¥å¸§å¤´çš„é•¿åº¦ä¸­</p>
</li>
<li><p>ç›®çš„åœ°å€å’Œæºåœ°å€å­—æ®µ</p>
<p>ç›®çš„åœ°å€å’Œæºåœ°å€åˆ†åˆ«è¡¨ç¤ºå¸§çš„æ¥æ”¶ä¸»æœºä¸å‘é€ä¸»æœºçš„ç¡¬ä»¶åœ°å€ï¼Œåœ°å€é•¿åº¦ä¸º6Bï¼Œ<strong>æºåœ°å€å¿…é¡»æ˜¯48bçš„MACåœ°å€</strong>ï¼Œç›®çš„åœ°å€å¯ä»¥æ˜¯å•æ’­åœ°å€ï¼Œå¤šæ’­åœ°å€æˆ–å¹¿æ’­åœ°å€</p>
</li>
<li><p>ç±»å‹å­—æ®µ</p>
<p>è¡¨ç¤º<strong>ç½‘ç»œå±‚</strong>ä½¿ç”¨çš„åè®®ç±»å‹</p>
</li>
<li><p>æ•°æ®å­—æ®µ</p>
<p>æ•°æ®å­—æ®µæ˜¯ç½‘ç»œå±‚å‘é€çš„æ•°æ®éƒ¨åˆ†ï¼Œ<strong>é•¿åº¦åœ¨46~1500Bä¹‹é—´</strong>ï¼Œ<strong>å› æ­¤Ethernetå¸§çš„æœ€å°é•¿åº¦ä¸º46~1500B+18B=64~1518B</strong></p>
</li>
<li><p>æ ¡éªŒå­—æ®µ</p>
<p>é‡‡ç”¨CRCæ ¡éªŒï¼Œ<strong>32ä½ï¼Œ4B</strong></p>
</li>
</ol>
</li>
</ol>
<h3 id="2-2-3-Ethernetç½‘å¡ä¸ç‰©ç†åœ°å€"><a href="#2-2-3-Ethernetç½‘å¡ä¸ç‰©ç†åœ°å€" class="headerlink" title="2.2.3 Ethernetç½‘å¡ä¸ç‰©ç†åœ°å€"></a>2.2.3 Ethernetç½‘å¡ä¸ç‰©ç†åœ°å€</h3><ol>
<li><p>Ethernet ç½‘å¡ä¸ç‰©ç†åœ°å€</p>
<p><strong>ç½‘å¡åŒ…å«å‘é€ä¸æ¥æ”¶ä¿¡å·çš„æ”¶å‘å™¨ï¼Œæ›¼å½»æ–¯ç‰¹ç¼–ç ä¸è§£ç å™¨ï¼ŒEthernetæ•°æ®é“¾è·¯æ§åˆ¶ï¼Œç»„å¸§ä¸æ‹†å¸§è½¯ä»¶ï¼Œä¸ä¸»æœºçš„æ¥å£</strong></p>
</li>
<li><p>Etherneç‰©ç†åœ°å€</p>
<p>48ä½çš„åœ°ç§°ä¸ºEUI-48ï¼Œå…è®¸åˆ†é…çš„Ethernetç‰©ç†åœ°å€åº”ä¸º$2^{47}$ä¸ªï¼Œ<strong>IEEEä¸ºæ¯ä¸ªç½‘å¡å‚å•†åˆ†é…Ethernetç‰©ç†åœ°å€çš„å‰ä¸‰ä½ï¼Œåä¸‰ä½å­—èŠ‚ç”±å‚å•†è‡ªè¡Œåˆ†é…</strong>ã€‚å½“ç½‘å¡å‚å•†è·å¾—å‰ä¸‰ä½åå®ƒå¯ä»¥ç”Ÿäº§çš„ç½‘å¡æ•°é‡ä¸º$2^{24}$å—ï¼Œè¡¨ç¤ºæ–¹æ³•ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶ä¹‹é—´ç”¨ä¸€ä¸ªè¿å­—ç¬¦éš”å¼€ï¼Œå¦‚02-01-00-2A-10-C3</p>
<p>48ä½å…¨1çš„åœ°å€æˆä¸ºå¹¿æ’­åœ°å€</p>
</li>
</ol>
<h3 id="2-2-4-Ethernet-ç»„ç½‘æ–¹æ³•"><a href="#2-2-4-Ethernet-ç»„ç½‘æ–¹æ³•" class="headerlink" title="2.2.4 Ethernet ç»„ç½‘æ–¹æ³•"></a>2.2.4 Ethernet ç»„ç½‘æ–¹æ³•</h3><ol>
<li><p>Ethernetç‰©ç†å±‚æ ‡å‡†</p>
<p>| æ ‡å‡†               | é€Ÿç‡   | åŸºå¸¦ä¼ è¾“ |            | æœ€å¤§é•¿åº¦ |<br>| â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€” | â€”â€”â€”â€” | â€”â€”â€”â€”â€” | â€”â€”â€”â€” |<br>| IEEE802.3 10BASE-5 | 10Mbps | æ˜¯       | ç²—åŒè½´çº¿ç¼† | 500m     |<br>| IEEE802.3 10BASE-2 | 10Mbps | æ˜¯       | ç»†åŒè½´çº¿ç¼† | 200m     |<br>| IEEE802.3 10BASE-T | 10Mbps | æ˜¯       | åŒç»çº¿     | ï¼Ÿ       |</p>
<p>å­—æ®µæ€»ç»“ï¼š</p>
<p>10:10Mbps </p>
<p>5:500m 2:200m</p>
<p>T:<em>åŒç»çº¿ï¼ˆtwisted pairï¼ŒTPï¼‰</em></p>
</li>
</ol>
<h2 id="2-3-äº¤æ¢å¼å±€åŸŸç½‘ä¸è™šæ‹Ÿå±€åŸŸç½‘"><a href="#2-3-äº¤æ¢å¼å±€åŸŸç½‘ä¸è™šæ‹Ÿå±€åŸŸç½‘" class="headerlink" title="2.3 äº¤æ¢å¼å±€åŸŸç½‘ä¸è™šæ‹Ÿå±€åŸŸç½‘"></a>2.3 äº¤æ¢å¼å±€åŸŸç½‘ä¸è™šæ‹Ÿå±€åŸŸç½‘</h2><h3 id="2-3-1-äº¤æ¢å¼å±€åŸŸç½‘æŠ€æœ¯"><a href="#2-3-1-äº¤æ¢å¼å±€åŸŸç½‘æŠ€æœ¯" class="headerlink" title="2.3.1 äº¤æ¢å¼å±€åŸŸç½‘æŠ€æœ¯"></a>2.3.1 äº¤æ¢å¼å±€åŸŸç½‘æŠ€æœ¯</h3><p>äº¤æ¢å¼ä»¥å¤ªç½‘çš„<strong>æ ¸å¿ƒè®¾å¤‡æ˜¯ä»¥å¤ªç½‘äº¤æ¢æœº</strong>ï¼Œå®ƒä»æ ¹æœ¬ä¸Šæ”¹å˜äº†â€œå…±äº«ä»‹è´¨â€çš„å·¥ä½œæ–¹å¼ï¼Œ<strong>å¯ä»¥åœ¨å¤šä¸ªç«¯å£ä¹‹é—´å»ºç«‹å¤šä¸ªå¹¶å‘è¿æ¥</strong>ï¼Œå®ç°å¤šç»“ç‚¹ä¹‹é—´æ•°æ®çš„å¹¶å‘ä¼ è¾“ï¼Œä»è€Œå¯ä»¥å¢åŠ ç½‘ç»œå¸¦å®½ï¼Œæ”¹å–„å±€åŸŸç½‘çš„æ€§èƒ½ä¸æœåŠ¡è´¨é‡ï¼Œé¿å…æ•°æ®ä¼ è¾“å†²çªçš„å‘ç”Ÿã€‚<strong>ä»¥å¤ªç½‘äº¤æ¢æœºåˆ©ç”¨â€œç«¯å£/MACåœ°å€æ˜ å°„è¡¨â€è¿›è¡Œæ•°æ®å¸§äº¤æ¢</strong>ã€‚</p>
<h2 id="2-4-é«˜é€Ÿå±€åŸŸç½‘æŠ€æœ¯å‘å±•"><a href="#2-4-é«˜é€Ÿå±€åŸŸç½‘æŠ€æœ¯å‘å±•" class="headerlink" title="2.4 é«˜é€Ÿå±€åŸŸç½‘æŠ€æœ¯å‘å±•"></a>2.4 é«˜é€Ÿå±€åŸŸç½‘æŠ€æœ¯å‘å±•</h2><h3 id="2-4-1-Fast-Ethernet"><a href="#2-4-1-Fast-Ethernet" class="headerlink" title="2.4.1 Fast Ethernet"></a>2.4.1 Fast Ethernet</h3><p>ä¿ç•™ä¼ ç»Ÿçš„Ethernetå¸§æ ¼å¼</p>
<p>ä»‹è´¨ä¸“ç”¨æ¥å£ï¼ˆMedia Indepandent Interface,MIIï¼‰å°†ï¼­ï¼¡ï¼£å­å±‚ä¸ç‰©ç†å±‚åˆ†å¼€</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ææ–™</th>
<th>åŒåŠŸ</th>
</tr>
</thead>
<tbody>
<tr>
<td>100BASE-TX</td>
<td>ä¸¤å¯¹5ç±»éå±è”½åŒç»çº¿ï¼ˆUTPï¼‰æˆ–ä¸¤å¯¹1ç±»å±è”½åŒç»çº¿ï¼ˆSTPï¼‰ä¸€å¯¹ç”¨äºå‘é€ä¸€å¯¹ç”¨äºæ¥æ”¶</td>
<td>å…¨åŒå·¥</td>
</tr>
<tr>
<td><strong>100BASE-T4</strong></td>
<td><strong>å››å¯¹3ç±»éå±è”½åŒç»çº¿UTPï¼Œä¸‰å¯¹ç”¨äºæ•°æ®ä¼ è¾“ï¼Œ1å¯¹ç”¨äºå†²çªæ£€æµ‹</strong></td>
<td><strong>åŠåŒå·¥</strong></td>
</tr>
<tr>
<td>100BASE-FX</td>
<td>2èŠ¯å•æ¨¡æˆ–å¤šæ¨¡å…‰çº¤</td>
<td>å…¨åŒå·¥</td>
</tr>
</tbody>
</table>
</div>
<p><em>å…‰çº¤fiber</em></p>
<h3 id="2-4-2-Gigabit-Ethernet"><a href="#2-4-2-Gigabit-Ethernet" class="headerlink" title="2.4.2 Gigabit Ethernet"></a>2.4.2 Gigabit Ethernet</h3><p>ä¿ç•™ä¼ ç»Ÿçš„Ethernetå¸§æ ¼å¼</p>
<p>åƒå…†ä»‹è´¨ä¸“ç”¨æ¥å£ï¼ˆGigabit Media Indepandent Interface,GMIIï¼‰å°†MACï¼Œå­å±‚ä¸ç‰©ç†å±‚åˆ†å¼€</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ææ–™</th>
<th>æœ€å¤§é•¿åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>1000BASE-CX</td>
<td>ä¸¤å¯¹å±è”½åŒç»çº¿</td>
<td>25m</td>
</tr>
<tr>
<td>1000BASE-T</td>
<td>4å¯¹5ç±»éå±è”½åŒç»çº¿</td>
<td>100m</td>
</tr>
<tr>
<td>1000BASE-SX</td>
<td>å¤šæ¨¡å…‰çº¤</td>
<td>550m</td>
</tr>
<tr>
<td>1000BASE-LX</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>5km</td>
</tr>
<tr>
<td>1000BASE-LH</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>10km</td>
</tr>
<tr>
<td>1000BASE-ZX</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>70km</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-4-3-10-Gigabit-Ethernet"><a href="#2-4-3-10-Gigabit-Ethernet" class="headerlink" title="2.4.3 10 Gigabit Ethernet"></a>2.4.3 10 Gigabit Ethernet</h3><p>ä¿ç•™ä¼ ç»Ÿçš„Ethernetå¸§æ ¼å¼</p>
<p>ä»‹è´¨ä¸“ç”¨æ¥å£ï¼ˆ10 Gigabit Media Indepandent Interface,10GMIIï¼‰å°†MACå­å±‚ä¸ç‰©ç†å±‚åˆ†å¼€</p>
<p>ä¸å†é‡‡ç”¨ä¼ ç»Ÿçš„CSMA/CDåè®®ï¼Œä½¿10GbEçš„è¦†ç›–èŒƒå›´ä¸å—ä¼ ç»Ÿçš„Ethernetç½‘çš„å†²çªçª—å£é™åˆ¶ï¼Œä¼ è¾“è·ç¦»ä»…ä»…ç”±å…‰çº¤é€šä¿¡ç³»ç»Ÿçš„æ€§èƒ½</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ææ–™</th>
<th>æœ€å¤§é•¿åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>10GBASE-SR</td>
<td>å¤šæ¨¡å…‰çº¤</td>
<td>300m</td>
</tr>
<tr>
<td>10GBASE-LRM</td>
<td>å¤šæ¨¡å…‰çº¤</td>
<td>220m</td>
</tr>
<tr>
<td>10GBASE-LX4</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>10km</td>
</tr>
<tr>
<td>10GBASE-LR</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>25km</td>
</tr>
<tr>
<td>10GBASE-ER</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>40km</td>
</tr>
<tr>
<td>10GBASE-ZR</td>
<td>å•æ¨¡å…‰çº¤</td>
<td>80km</td>
</tr>
</tbody>
</table>
</div>
<p><strong>10 Gigabit Ethernetéƒ½æ˜¯å…¨åŒå·¥ï¼Œåªæ”¯æŒå…‰çº¤</strong></p>
<h3 id="2-5-6-IEEE-802-11å¸§ç»“æ„"><a href="#2-5-6-IEEE-802-11å¸§ç»“æ„" class="headerlink" title="2.5.6 IEEE 802.11å¸§ç»“æ„"></a>2.5.6 IEEE 802.11å¸§ç»“æ„</h3><ol>
<li><p>ç®¡ç†å¸§</p>
<p>å®šä¹‰äº†14ç§å¸§ï¼Œå¦‚<strong>ä¿¡æ ‡å¸§ï¼Œæ¢æµ‹å¸§ï¼Œå…³è”å¸§ï¼Œè®¤è¯å¸§</strong></p>
</li>
<li><p>æ§åˆ¶å¸§</p>
<p>å®šä¹‰äº†9ç§å¸§ï¼Œå¦‚<strong>RTSï¼ŒCTSï¼ŒACKå¸§</strong></p>
</li>
<li><p>æ•°æ®å¸§</p>
</li>
</ol>
<h2 id="2-5-æ— çº¿å±€åŸŸç½‘æŠ€æœ¯"><a href="#2-5-æ— çº¿å±€åŸŸç½‘æŠ€æœ¯" class="headerlink" title="2.5 æ— çº¿å±€åŸŸç½‘æŠ€æœ¯"></a>2.5 æ— çº¿å±€åŸŸç½‘æŠ€æœ¯</h2><h3 id="2-5-1-æ— çº¿å±€åŸŸç½‘çš„å‘å±•"><a href="#2-5-1-æ— çº¿å±€åŸŸç½‘çš„å‘å±•" class="headerlink" title="2.5.1 æ— çº¿å±€åŸŸç½‘çš„å‘å±•"></a>2.5.1 æ— çº¿å±€åŸŸç½‘çš„å‘å±•</h3><p>IEEE802.11 ç”±IEEEä¸ºæ— çº¿å±€åŸŸç½‘åˆ¶å®šçš„æ ‡å‡†ï¼Œæ˜¯æ— çº¿å±€åŸŸç½‘<strong>ä»‹è´¨è®¿é—®æ§åˆ¶</strong>æ–¹æ³•</p>
<p>é‡‡ç”¨äº†<strong>å±‚æ¬¡ç»“æ„æ¨¡å‹</strong></p>
<p>ç‰©ç†å±‚å®šä¹‰äº†ä»¥<strong>å¾®æ³¢ï¼Œæ¿€å…‰ä¸çº¢å¤–çº¿</strong>ç­‰<strong>æ— çº¿ç”µæ³¢</strong>ä½œä¸ºä¼ è¾“ä»‹è´¨</p>
<p>MACå±‚ä¸»è¦åŠŸèƒ½æ˜¯å¯¹æ— çº¿ç¯å¢ƒè¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œå¯ä»¥åœ¨å¤šä¸ªæ¥å…¥ç‚¹ä¸Šæä¾›æ¼«æ¸¸æ”¯æŒï¼ŒåŒæ—¶æä¾›æ•°æ®éªŒè¯ä¸ä¿å¯†æœåŠ¡</p>
<p>MACå±‚æ”¯æŒæ— äº‰ç”¨ä¸äº‰ç”¨æœåŠ¡ä¸¤ç§è®¿é—®æ–¹å¼</p>
<p>åº”ç”¨é¢†åŸŸï¼š<strong>ä¼ ç»Ÿå±€åŸŸç½‘çš„æ‰©å……</strong>ï¼Œå»ºç­‘ç‰©ä¹‹é—´äº’è”ï¼Œç§»åŠ¨ä¸»æœºæ¼«æ¸¸è®¿é—®ï¼Œæ— çº¿è‡ªç»„ç½‘</p>
<p>æ”¯æŒåŸºäºæ¼«æ¸¸è®¿é—®(Nomadic Access)å’Œæ— çº¿è®¿é—®æ¥å…¥ç‚¹(Wireless Access Point,AP)è®¿é—®æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹ç­‰P2Pæ–¹å¼å®ç°æ¼«æ¸¸</p>
<p>è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVirtual LANï¼ŒVLANï¼‰æ˜¯å»ºç«‹åœ¨å±€åŸŸç½‘çš„åŸºç¡€ä¸Šï¼Œä»¥è½¯ä»¶å½¢å¼åœ¨å±€åŸŸç½‘äº¤æ¢æœºä¸Šå®ç°é€»è¾‘å·¥ä½œç»„çš„åˆ’åˆ†ä¸ç®¡ç†ï¼Œå·¥ä½œç»„ä¸­çš„ç»“ç‚¹ä¸å—ç‰©ç†ä½ç½®çš„é™åˆ¶ã€‚</p>
<p>è™šæ‹Ÿå±€åŸŸç½‘çš„ç»„ç½‘æ–¹æ³•åŒ…æ‹¬ï¼šç”¨<strong>äº¤æ¢æœºç«¯å£</strong>å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€ç”¨<strong>MACåœ°å€</strong>å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€ç”¨<strong>ç½‘ç»œå±‚åœ°å€</strong>å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€åŸºäº<strong>å¹¿æ’­ç»„</strong>çš„è™šæ‹Ÿå±€åŸŸç½‘ã€‚<br>è™šæ‹Ÿå±€åŸŸç½‘çš„ä¼˜ç‚¹æœ‰ï¼š<strong>æ–¹ä¾¿ç½‘ç»œç”¨æˆ·ç®¡ç†ï¼Œå‡å°‘ç½‘ç»œç®¡ç†å¼€é”€ã€æä¾›æ›´å¥½çš„å®‰å…¨æ€§ã€æ”¹å–„ç½‘ç»œæœåŠ¡è´¨é‡</strong>ã€‚</p>
<h3 id="2-5-2-æ‰©é¢‘æ— çº¿å±€åŸŸç½‘"><a href="#2-5-2-æ‰©é¢‘æ— çº¿å±€åŸŸç½‘" class="headerlink" title="2.5.2 æ‰©é¢‘æ— çº¿å±€åŸŸç½‘"></a>2.5.2 æ‰©é¢‘æ— çº¿å±€åŸŸç½‘</h3><ol>
<li><p>æ‰©é¢‘é€šä¿¡çš„æ¦‚å¿µ</p>
<p>æ— çº¿å±€åŸŸç½‘ä¸»è¦é‡‡ç”¨ä¸¤ç§æ‰©é¢‘æŠ€æœ¯ï¼š<strong>è·³é¢‘æ‰©é¢‘ä¸ç›´æ¥åºåˆ—æ‰©é¢‘</strong></p>
<p>IEEE 802.11è§„å®šï¼š</p>
<p>è·³é¢‘é€šä¿¡ä½¿ç”¨<strong>2.4GHZçš„å·¥ä¸šã€ç§‘å­¦ä¸åŒ»è¯ä¸“ç”¨çš„ISMé¢‘æ®µ</strong>ã€‚</p>
<p>ç›´æ¥åºåˆ—æ‰©é¢‘çš„<strong>æ‰€æœ‰æ¥æ”¶ç‚¹ä½¿ç”¨ç›¸åŒçš„é¢‘æ®µï¼Œå‘é€ç«¯ä¸æ¥æ”¶ç«¯ä½¿ç”¨ç›¸åŒçš„ä¼ªéšæœºç ï¼Œä½¿ç”¨2.4GHzçš„ISMé¢‘æ®µï¼Œæ•°æ®ä¼ è¾“é€Ÿç‡ä¸º1Mbpsæˆ–2Mbps,å‘é€å‰éœ€è¦è°ƒåˆ¶</strong>ã€‚</p>
</li>
</ol>
<h3 id="2-5-4-æ— çº¿å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„"><a href="#2-5-4-æ— çº¿å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„" class="headerlink" title="2.5.4 æ— çº¿å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„"></a>2.5.4 æ— çº¿å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„</h3><p>ç«¯ç«™ä½¿ç”¨æ— çº¿ç½‘å¡ï¼Œå°†è®¡ç®—æœºæˆ–åµŒå…¥è®¾å¤‡æ¥å…¥WLANï¼Œæ¥å…¥ç‚¹APæŒ‰ç…§æ— çº¿æ¥å£æ ‡å‡†ä½¿ç”¨æ— çº¿é“¾è·¯ä¸ç«¯ç«™è¿›è¡Œé€šä¿¡ï¼Œæ¥å…¥æ§åˆ¶å™¨ACåœ¨WLANä¸å¤–éƒ¨ç½‘ç»œä¹‹é—´å……å½“ç½‘å…³çš„ä½œç”¨ï¼ŒAAAæœåŠ¡å™¨åˆç§°ä¸ºRADIUSç”¨æˆ·è®¤è¯æœåŠ¡å™¨ï¼Œè´Ÿè´£å®Œæˆç”¨æˆ·è®¤è¯æˆæƒå’Œè®¡è´¹åŠŸèƒ½ï¼ŒIEEE802.11è®¤è¯æœ‰ä¸‰ç§è®¤è¯æ–¹å¼ï¼šåŸºäºIEEE802.1xçš„è®¤è¯ï¼ŒåŸºäºPPPoEçš„è®¤è¯å’ŒåŸºäºWebçš„è®¤è¯</p>
<ol>
<li><p>ç‹¬ç«‹åŸºæœ¬æœåŠ¡é›†</p>
<p>Ad hoc å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦ç‰¹ç‚¹ï¼š<strong>è‡ªç»„ç»‡ä¸è‡ªä¿®å¤ï¼Œæ— ä¸­å¿ƒï¼Œå¤šè·³è·¯ç”±ï¼ŒåŠ¨æ€æ‹“æ‰‘,å¯¹ç­‰å¼ï¼Œæ— çº¿ç½‘ç»œï¼Œæ— åŸºç«™</strong></p>
</li>
</ol>
<h3 id="2-5-4-IEEE-802-11-å¸§ç»“æ„"><a href="#2-5-4-IEEE-802-11-å¸§ç»“æ„" class="headerlink" title="2.5.4 IEEE 802.11 å¸§ç»“æ„"></a>2.5.4 IEEE 802.11 å¸§ç»“æ„</h3><p>IEEE 802.11å¸§é‡‡ç”¨<strong>2å­—èŠ‚ï¼ˆ16bï¼‰</strong>ä½œä¸ºå¸§æ§åˆ¶å­—æ®µï¼Œå¸§ä¸­ç›®çš„åœ°å€å’Œæºåœ°å€ä½¿ç”¨MACåœ°å€ï¼Œæ•°æ®å­—æ®µæœ€å¤§é•¿åº¦æ˜¯2312å­—èŠ‚ã€‚å¸§æ ¡éªŒå­—æ®µé•¿åº¦ä¸º4å­—èŠ‚ï¼Œé‡‡ç”¨CRCæ ¡éªŒï¼Œæ ¡éªŒèŒƒå›´ä¸º<strong>MACå¸§å¤´ä¸æ•°æ®åŸŸ</strong>ã€‚ç±»å‹å­—æ®µçš„ç±»å‹æ ‡è¯†æ•°æ®å¸§ã€ç®¡ç†å¸§æˆ–æ§åˆ¶å¸§ã€‚</p>
<p>IEEE802.11åè®®å®šä¹‰äº†ä¸‰ç§å¸§ç»“æ„ï¼šç®¡ç†å¸§ï¼Œæ§åˆ¶å¸§ï¼Œæ•°æ®å¸§</p>
<ol>
<li><p>ç®¡ç†å¸§</p>
<p>å®šä¹‰äº†14ç§ç®¡ç†å¸§ï¼Œä¾‹å¦‚ä¿¡æ ‡å¸§ï¼Œæ¢æµ‹å¸§ï¼Œå…³è”å¸§ï¼Œè®¤è¯å¸§ï¼Œç”¨äºæ— çº¿ä¸»æœºä¸APä¹‹é—´çš„è¿æ¥</p>
</li>
<li><p>æ§åˆ¶å¸§</p>
<p>å®šä¹‰äº†9ç§æ§åˆ¶å¸§ï¼Œå¯¹é¢„çº¦ä¿¡é“ï¼Œå¯¹å•æ’­æ•°æ®å¸§çš„ç¡®è®¤ï¼ŒRTSï¼ŒCTS,ACKéƒ½å±äºæ§åˆ¶å¸§</p>
</li>
<li><p>æ•°æ®å¸§</p>
<p>æ•°æ®å¸§ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šå¸§å¤´ï¼Œæ•°æ®å­—æ®µï¼Œå¸§å°¾ï¼Œ<strong>å…¶ä¸­å¸§å¤´é•¿30B,æ•°æ®å­—æ®µé•¿0~2312B,å¸§å°¾ç”±2Bçš„å¸§æ ¡éªŒå­—æ®µç»„æˆ</strong></p>
</li>
</ol>
<p>æ— çº¿å±€åŸŸç½‘æ ‡å‡†802.11çš„MACå’Œ802.3åè®®çš„MACä¸åŒï¼Œä¼ ç»Ÿçš„Ethernetç½‘å¸§çš„ç»“æ„ä¸­æœ‰å‰å¯¼ç å’Œå¸§å‰å®šç•Œç¬¦ï¼Œè€Œ802.11æ ‡å‡†ä¸­ç”¨å¸§æ§åˆ¶å•å…ƒä»£æ›¿ã€‚ä¼ ç»Ÿçš„Ethernetç½‘çš„æ•°æ®æ®µé•¿åº¦æ˜¯<strong>46B~1500B</strong>ï¼Œè€Œ802.11å¸§ä¸­çš„æ•°æ®æ®µé•¿åº¦æ˜¯<strong>0~2312B</strong>ã€‚ä¼ ç»Ÿçš„Ethernetç½‘ä¸­å¸§çš„ç±»å‹å­—æ®µè¡¨ç¤ºå½“å‰å¸§ä½¿ç”¨åè®®çš„ç±»å‹ï¼Œè€Œ802.11å¸§ä¸­ç±»å‹å­—æ®µç”¨æ¥è¡¨ç¤ºå½“å‰å¸§æ˜¯æ•°æ®å¸§ã€ç®¡ç†å¸§æˆ–æ§åˆ¶å¸§ã€‚<strong>è¿™ä¸¤ç§å¸§å‡å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œé‡‡ç”¨çš„åœ°å€æ˜¯MACåœ°å€</strong>ã€‚</p>
<h1 id="ç¬¬ä¸‰ç« -InternetåŸºç¡€"><a href="#ç¬¬ä¸‰ç« -InternetåŸºç¡€" class="headerlink" title="ç¬¬ä¸‰ç«  InternetåŸºç¡€"></a>ç¬¬ä¸‰ç«  InternetåŸºç¡€</h1><p>Internetçš„ä½¿ç”¨è€…ä¸å¿…å…³å¿ƒInternetçš„å†…éƒ¨ç»“æ„ï¼›è·¯ç”±å™¨æ˜¯ç½‘ç»œä¸ç½‘ç»œä¹‹é—´è¿æ¥çš„<strong>æ¡¥æ¢</strong>ï¼›ä¸»æœºæ˜¯Internetä¸­ä¸å¯ç¼ºå°‘çš„æˆå‘˜ï¼Œå®ƒæ˜¯<strong>ä¿¡æ¯èµ„æºå’ŒæœåŠ¡çš„è½½ä½“</strong>ã€‚</p>
<h3 id="3-1-2-Internetçš„æ¥å…¥æ–¹å¼"><a href="#3-1-2-Internetçš„æ¥å…¥æ–¹å¼" class="headerlink" title="3.1.2 Internetçš„æ¥å…¥æ–¹å¼"></a>3.1.2 Internetçš„æ¥å…¥æ–¹å¼</h3><ol>
<li><p>é€šè¿‡ç”µè¯çº¿æ¥å…¥</p>
</li>
<li><p>åˆ©ç”¨ADSLæ¥å…¥</p>
<p>åˆ©ç”¨<strong>éå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿</strong></p>
<p><strong>ä½¿ç”¨æ¯”è¾ƒå¤æ‚çš„è°ƒåˆ¶è§£è°ƒæŠ€æœ¯</strong>ï¼Œåœ¨<strong>æ™®é€šç”µè¯çº¿</strong>ä¸Šè¿›è¡Œé«˜é€Ÿæ•°æ®ä¼ è¾“</p>
<p>åˆ†ä¸Šè¡Œå’Œä¸‹è¡Œä¸¤ä¸ªé€šé“ï¼Œä¸‹è¡Œé€šé“æ•°æ®ä¼ è¾“è¿œå¤§äºä¸Šè¡Œï¼Œ<strong>ä¸Šè¡Œ16~640kbpsï¼Œä¸‹è¡Œé€Ÿç‡å¯è¾¾1.5~9Mbps</strong></p>
</li>
<li><p>ä½¿ç”¨HFCæ¥å…¥</p>
<p><strong>å…±äº«å¼ä¼ è¾“</strong></p>
<p><strong>ä¿¡å·é¦–å…ˆé€šè¿‡å…‰çº¤ä¼ è¾“åˆ°å…‰çº¤èŠ‚ç‚¹ç„¶åé€šè¿‡åŒè½´ç”µç¼†ä¼ è¾“åˆ°æœ‰çº¿ç”µè§†ç½‘ç”¨æˆ·</strong></p>
<p>æ··åˆå…‰çº¤/åŒè½´ç”µç¼†çº¿ï¼ˆHybrid Fiber Coaxialï¼ŒHFCï¼‰ï¼ŒåŒADSLä¸ºéå¯¹ç§°è¿æ¥ï¼Œ<strong>ä¸Šè¡Œé€Ÿç‡è¾¾åˆ°10Mbps,ä¸‹è¡Œ10~40Mbps</strong></p>
</li>
<li><p>é€šè¿‡æ•°æ®é€šä¿¡çº¿è·¯æ¥å…¥</p>
</li>
</ol>
<h3 id="3-2-2-IPæœåŠ¡"><a href="#3-2-2-IPæœåŠ¡" class="headerlink" title="3.2.2 IPæœåŠ¡"></a>3.2.2 IPæœåŠ¡</h3><p>IPåè®®çš„äº’è”å±‚å¯ä»¥ä¸ºå…¶é«˜å±‚ç”¨æˆ·æä¾›å¦‚ä¸‹æœåŠ¡ï¼š</p>
<ol>
<li><strong>ä¸å¯é </strong>æ•°æ®æŠ•é€’æœåŠ¡</li>
<li><strong>é¢å‘æ— è¿æ¥</strong>çš„ä¼ è¾“æœåŠ¡</li>
<li><strong>å°½æœ€å¤§åŠªåŠ›</strong>æŠ•é€’æœåŠ¡</li>
</ol>
<p>IPåè®®ç²¾ç¡®å®šä¹‰äº†<strong>IPæ•°æ®æŠ¥æ ¼å¼</strong>ï¼Œå¹¶ä¸”<strong>å¯¹æ•°æ®æŠ¥å¯»å€å’Œè·¯ç”±ã€æ•°æ®æŠ¥åˆ†é…å’Œé‡ç»„ã€å·®é”™æ§åˆ¶å’Œå¤„ç†</strong>ç­‰åšå‡ºäº†å…·ä½“çš„è§„å®šã€‚</p>
<h3 id="3-2-3-IPäº’è”ç½‘çš„ç‰¹ç‚¹"><a href="#3-2-3-IPäº’è”ç½‘çš„ç‰¹ç‚¹" class="headerlink" title="3.2.3 IPäº’è”ç½‘çš„ç‰¹ç‚¹"></a>3.2.3 IPäº’è”ç½‘çš„ç‰¹ç‚¹</h3><ul>
<li><strong>éšè—äº†åº•å±‚ç‰©ç†ç½‘ç»œçš„ç»†èŠ‚</strong>ï¼Œå‘ä¸Šä¸ºç”¨æˆ·æä¾›é€šç”¨ä¸€è‡´çš„ç½‘ç»œæœåŠ¡</li>
<li>IPäº’è”ç½‘<strong>ä¸æŒ‡å®šç½‘ç»œäº’è”çš„æ‹“æ‰‘ç»“æ„</strong>ï¼Œä¹Ÿ<strong>ä¸è¦æ±‚ç½‘ç»œä¹‹é—´çš„å…¨äº’è”</strong></li>
<li>IPäº’è”ç½‘<strong>èƒ½åœ¨ç‰©ç†ç½‘ç»œä¹‹é—´è½¬å‘æ•°æ®</strong>ï¼Œä¿¡æ¯å¯ä»¥è·¨ç½‘ä¼ è¾“</li>
<li>IPäº’è”ç½‘ä¸­æ‰€æœ‰è®¡ç®—æœºä½¿ç”¨<strong>ç»Ÿä¸€çš„ï¼Œå…¨å±€çš„åœ°å€æè¿°æ³•</strong></li>
<li>IPäº’è”ç½‘<strong>å¹³ç­‰åœ°å¯¹å¾…</strong>äº’è”ç½‘ä¸­çš„æ¯ä¸€ä¸ªç½‘ç»œï¼Œä¸ç®¡è¿™ä¸ªç½‘ç»œè§„æ¨¡æ˜¯å¤§æ˜¯å°ï¼Œé€Ÿåº¦æ˜¯å¿«æ˜¯æ…¢</li>
</ul>
<h2 id="3-4-IPæ•°æ®æŠ¥"><a href="#3-4-IPæ•°æ®æŠ¥" class="headerlink" title="3.4 IPæ•°æ®æŠ¥"></a>3.4 IPæ•°æ®æŠ¥</h2><p>IPæ•°æ®æŠ¥æ˜¯IPåè®®å•å…ƒä½¿ç”¨çš„æ•°æ®å•å…ƒï¼Œå®ƒçš„æ ¼å¼å¯ä»¥<strong>åˆ†ä¸ºæŠ¥å¤´åŒºå’Œæ•°æ®åŒºä¸¤å¤§éƒ¨åˆ†</strong>ï¼Œå…¶ä¸­æ•°æ®åŒºåŒ…æ‹¬é«˜å±‚éœ€è¦ä¼ è¾“çš„æ•°æ®ï¼Œè€ŒæŠ¥å¤´åŒºæ˜¯ä¸ºäº†æ­£ç¡®ä¼ è¾“é«˜å±‚æ•°æ®è€Œå¢åŠ çš„æ§åˆ¶ä¿¡æ¯ã€‚æŠ¥å¤´åŒºä¸»è¦åŒ…æ‹¬ï¼š<strong>ç‰ˆæœ¬ä¸åè®®ç±»å‹åŸŸã€é•¿åº¦åŸŸã€æœåŠ¡ç±»å‹åŸŸã€ç”Ÿå­˜å‘¨æœŸåŸŸã€å¤´éƒ¨æ ¡éªŒå’ŒåŸŸã€åœ°å€åŸŸã€é€‰é¡¹+å¡«å……åŸŸ</strong>ã€‚å…¶ä¸­<strong>æŠ¥å¤´é•¿åº¦åŸŸä»¥32ä½çš„åŒå­—ä¸ºå•ä½</strong>ï¼›<strong>ç”Ÿå­˜å‘¨æœŸï¼ˆTime to Liveï¼ŒTTLï¼‰åŸŸç”¨äºé˜²æ­¢æ•°æ®æŠ¥åœ¨Internetä¸­æ— ä¼‘æ­¢åœ°ä¼ é€’</strong>ï¼›<strong>å¤´éƒ¨æ ¡éªŒå’ŒåŸŸç”¨æ¥ä¿è¯IPæ•°æ®æŠ¥æŠ¥å¤´çš„å®Œæ•´æ€§</strong>ï¼›<strong>é€‰é¡¹åŸŸä¸»è¦ç”¨äºæ§åˆ¶å’Œæµ‹è¯•ä¸¤å¤§ç›®çš„</strong>ã€‚</p>
<h3 id="3-4-2-IPå°è£…åˆ†ç‰‡ä¸é‡ç»„"><a href="#3-4-2-IPå°è£…åˆ†ç‰‡ä¸é‡ç»„" class="headerlink" title="3.4.2 IPå°è£…åˆ†ç‰‡ä¸é‡ç»„"></a>3.4.2 IPå°è£…åˆ†ç‰‡ä¸é‡ç»„</h3><ol>
<li><p>MTUä¸åˆ†ç‰‡</p>
<p>æ¯ç§ç½‘ç»œéƒ½è§„å®šäº†ä¸€ä¸ªå¸§æœ€å¤šèƒ½æºå¸¦çš„æ•°æ®é‡ï¼Œè¿™ä¸€é™åˆ¶æˆä¸º<strong>æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMaximum Transmission Unit,MTUï¼‰</strong>å› æ­¤ä¸€ä¸ªIPæ•°æ®æŠ¥åªæœ‰å°äºç­‰äºä¸€ä¸ªç½‘ç»œçš„MTUæ‰èƒ½åœ¨è¿™ä¸ªç½‘ç»œè¿›è¡Œä¼ æ’­</p>
<p>å½“ä¸€ä¸ªæ•°æ®æŠ¥å°ºå¯¸å¤§äºå°†å‘å¾€çš„ç½‘ç»œçš„MTUæ—¶ï¼Œè·¯ç”±å™¨ä¼šå°†IPæ•°æ®æŠ¥åˆ†æˆè‹¥å¹²è¾ƒå°çš„éƒ¨åˆ†ï¼Œç§°ä¸º<strong>åˆ†ç‰‡</strong>ï¼Œç„¶åå†å°†æ¯ç‰‡ç‹¬ç«‹åœ°è¿›è¡Œå‘é€</p>
</li>
<li><p>é‡ç»„</p>
<p>IPåè®®è§„å®šï¼Œ<strong>åªæœ‰æœ€ç»ˆçš„ç›®çš„ä¸»æœºæ‰å¯ä»¥å¯¹åˆ†ç‰‡è¿›è¡Œé‡ç»„</strong></p>
<p>å½“è½¬å‘ä¸€ä¸ªIPæ•°æ®æŠ¥çš„æ—¶å€™ï¼Œè·¯ç”±å™¨ä¸éœ€è¦çŸ¥é“å®ƒæ˜¯ä¸æ˜¯ä¸€ä¸ªåˆ†ç‰‡ï¼Œå…¶æ¬¡è·¯ç”±å™¨å¯ä»¥ä¸ºæ¯ä¸ªåˆ†ç‰‡ç‹¬ç«‹é€‰æ‹©è·¯ç”±ï¼Œæ¯ä¸ªåˆ†ç‰‡è¾¾åˆ°ç›®çš„åœ°æ‰€ç»è¿‡çš„è·¯å¾„å¯ä»¥ä¸åŒ</p>
</li>
<li><p>åˆ†ç‰‡æ§åˆ¶</p>
<p>åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œ<strong>æ ‡è¯†ï¼Œæ ‡å¿—å’Œç‰‡åç§»</strong>ä¸‰ä¸ªå­—æ®µä¸æ§åˆ¶åˆ†ç‰‡ä¸é‡ç»„æœ‰å…³</p>
<p>æ ‡è¯†æ˜¯ä¸»æœºèµ‹äºˆIPæ•°æ®æŠ¥çš„æ ‡è¯†ç¬¦ï¼Œåˆ†ç‰‡æ—¶è¯¥åŸŸå¿…é¡»ä¸åŠ ä¿®æ”¹åœ°å¤åˆ¶åˆ°æ–°åˆ†ç‰‡å¤´çš„æŠ¥å¤´ä¸­</p>
<p>æ ‡å¿—å‘Šè¯‰ä¸»æœºè¯¥æ•°æ®æŠ¥æ˜¯å¦å·²ç»åˆ†ç‰‡ï¼Œæ˜¯å¦æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡</p>
<p>ç‰‡åç§»æ˜¯æœ¬ç‰‡æ•°æ®åœ¨åˆå§‹IPæ•°æ®æŠ¥æ•°æ®åŒºä¸­çš„ä½ç½®ï¼Œ<strong>ä½ç½®åç§»é‡ä»¥ï¼˜ä¸ªå­—èŠ‚ä¸ºå•ä½</strong>ï¼Œé‡ç»„çš„åˆ†ç‰‡é¡ºåºç”±ç‰‡åç§»æä¾›</p>
</li>
</ol>
<p>åˆ†ç‰‡å<strong>æ ‡è¯†å’Œç›®çš„åœ°å€ä¸€å®šå’ŒåŸæ•°æ®æŠ¥ä¸­å­—æ®µç›¸åŒ</strong></p>
<h3 id="3-4-3-IPæ•°æ®æŠ¥é€‰é¡¹"><a href="#3-4-3-IPæ•°æ®æŠ¥é€‰é¡¹" class="headerlink" title="3.4.3 IPæ•°æ®æŠ¥é€‰é¡¹"></a>3.4.3 IPæ•°æ®æŠ¥é€‰é¡¹</h3><p>IPé€‰é¡¹ä¸»è¦ç”¨äºæ§åˆ¶å’Œæµ‹è¯•</p>
<ol>
<li><p>æºè·¯ç”±</p>
<p>æŒ‡IPæ•°æ®æŠ¥ç©¿è¶Šäº’è”ç½‘æ‰€ç»è¿‡çš„è·¯å¾„æ˜¯ç”±æºä¸»æœºå†³å®šçš„ï¼Œå®ƒåŒºåˆ«äºç”±ä¸»æœºæˆ–è€…è·¯ç”±å™¨çš„IPå±‚è½¯ä»¶è‡ªè¡Œé€‰è·¯åå¾—å‡ºçš„è·¯å¾„</p>
<p>æºè·¯ç”±é€‰é¡¹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯ä¸¥æ ¼æºè·¯ç”±é€‰é¡¹ï¼Œä¸€ç±»æ˜¯æ¾æ•£è·¯ç”±é€‰é¡¹</p>
<ul>
<li>ä¸¥æ ¼æºè·¯ç”±é€‰é¡¹ï¼šè§„å®šç»è¿‡çš„ æ¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç›¸é‚»çš„è·¯ç”±å™¨ä¹‹é—´ä¸èƒ½æœ‰ä¸­é—´è·¯ç”±å™¨</li>
<li>æ¾æ•£è·¯ç”±é€‰é¡¹ï¼šç»™å‡ºå¿…é¡»ç»è¿‡çš„è¦ç‚¹ï¼Œä¸ç»™å‡ºå®Œå¤‡çš„è·¯å¾„</li>
</ul>
</li>
<li><p>è®°å½•è·¯ç”±</p>
<p>è®°å½•IPæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºä¹‹é—´æ‰€ç»è¿‡çš„è·¯å¾„ä¸Šçš„å„ä¸ªè·¯ç”±å™¨çš„IPåœ°å€ï¼Œè®°å½•è·¯ç”±åŠŸèƒ½å¯ä»¥ç”±IPæ•°æ®æŠ¥çš„è®°å½•è·¯ç”±é€‰é¡¹å®Œæˆï¼Œåˆ©ç”¨å®ƒå¯ä»¥åˆ¤æ–­ç»è¿‡çš„è·¯å¾„</p>
</li>
<li><p>æ—¶é—´æˆ³</p>
<p>è®°å½•ä¸‹IPæ•°æ®æŠ¥ç»è¿‡æ¯ä¸€ä¸ªè·¯ç”±å™¨å½“åœ°æ—¶é—´ï¼Œç”¨äºåˆ†æç½‘ç»œååç‡ï¼Œæ‹¥å¡æƒ…å†µï¼Œè´Ÿè½½æƒ…å†µ</p>
</li>
</ol>
<h2 id="3-5-å·®é”™æŠ¥æ–‡æ§åˆ¶"><a href="#3-5-å·®é”™æŠ¥æ–‡æ§åˆ¶" class="headerlink" title="3.5 å·®é”™æŠ¥æ–‡æ§åˆ¶"></a>3.5 å·®é”™æŠ¥æ–‡æ§åˆ¶</h2><p>IPå±‚ä½¿ç”¨çš„æ§åˆ¶åè®®æ˜¯äº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®(Internet Control Message Protocol,ICMP),ICMPä¸ä»…ç”¨æ¥ä¼ è¾“æ§åˆ¶æŠ¥æ–‡ï¼Œè€Œä¸”è¿˜ç”¨äºä¼ è¾“å·®é”™æŠ¥æ–‡</p>
<h3 id="3-5-1-ICMP-å·®é”™æ§åˆ¶"><a href="#3-5-1-ICMP-å·®é”™æ§åˆ¶" class="headerlink" title="3.5.1 ICMP å·®é”™æ§åˆ¶"></a>3.5.1 ICMP å·®é”™æ§åˆ¶</h3><p>ICMPå·®é”™æŠ¥å‘Šé‡‡ç”¨è·¯ç”±å™¨åˆ°æºä¸»æœºçš„æ¨¡å¼ï¼Œæ‰€æœ‰å·®é”™ä¿¡æ¯éƒ½éœ€è¦æƒ³æºä¸»æœºæŠ¥å‘Šã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å·®é”™æŠ¥å‘Š<strong>ä¸äº«å—ç‰¹åˆ«ä¼˜å…ˆæƒå’Œå¯é æ€§</strong>ï¼Œä½œä¸ºä¸€èˆ¬æ•°æ®ä¼ è¾“ï¼Œå®Œå…¨å¯èƒ½ä¸¢å¤±æŸåæˆ–è€…æŠ›å¼ƒã€‚</li>
<li>ICMPå·®é”™æŠ¥å‘Šæ•°æ®ä¸­é™¤äº†<strong>åŒ…å«æ•…éšœIPæ•°æ®æŠ¥æŠ¥å¤´</strong>å¤–ï¼Œè¿˜åŒ…å«<strong>æ•…éšœIPæ•°æ®æŠ¥æ•°æ®åŒºçš„å‰64bitæ•°æ®</strong>ã€‚</li>
<li>ICMPå·®é”™æŠ¥å‘Šæ˜¯ä¼´éšç€æŠ›å¼ƒå‡ºé”™IPæ•°æ®æŠ¥è€Œäº§ç”Ÿçš„ã€‚</li>
</ul>
<p>ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡å…±æœ‰å¦‚ä¸‹5ç§ã€‚<br>ï¼ˆ1ï¼‰<strong>ç»ˆç‚¹ä¸å¯è¾¾</strong>ï¼šåˆ†ä¸ºç½‘ç»œä¸å¯è¾¾ã€ä¸»æœºä¸å¯è¾¾ã€åè®®ä¸å¯è¾¾ã€ç«¯å£ä¸å¯è¾¾ã€éœ€è¦åˆ†ç‰‡ä½†DFæ¯”ç‰¹å·²ç½®ä¸º1ã€æºè·¯ç”±å¤±è´¥ç­‰å…­ç§æƒ…å†µã€‚<br>ï¼ˆ2ï¼‰<strong>æºç«™æŠ‘åˆ¶</strong>ï¼šå½“è·¯ç”±å™¨æˆ–ä¸»æœºç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘<strong>æºç«™</strong>å‘é€æºç«™æŠ‘åˆ¶æŠ¥æ–‡ï¼Œä½¿æºç«™çŸ¥é“åº”å½“å°†æ•°æ®æŠ¥çš„<strong>å‘é€é€Ÿç‡æ”¾æ…¢</strong>ã€‚<br>ï¼ˆ3ï¼‰<strong>æ—¶é—´è¶…æ—¶</strong>ï¼šå½“è·¯ç”±å™¨æ”¶åˆ°ç”Ÿå­˜æ—¶é—´ä¸ºé›¶çš„æ•°æ®æŠ¥æ—¶ï¼Œé™¤ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥å¤–ï¼Œè¿˜è¦å‘<strong>æºç«™</strong>å‘é€æ—¶é—´è¶…æ—¶æŠ¥æ–‡ã€‚å½“ç›®çš„ç«™åœ¨é¢„å…ˆè§„å®šçš„æ—¶é—´å†…ä¸èƒ½æ”¶åˆ°ä¸€ä¸ªæ•°æ®æŠ¥çš„å…¨éƒ¨æ•°æ®æŠ¥ç‰‡æ—¶ï¼Œå°±<strong>å°†å·²æ”¶åˆ°çš„æ•°æ®æŠ¥ç‰‡éƒ½ä¸¢å¼ƒ</strong>ï¼Œå¹¶å‘æºç«™å‘é€æ—¶é—´è¶…æ—¶æŠ¥æ–‡ã€‚<br>ï¼ˆ4ï¼‰<strong>å‚æ•°é—®é¢˜</strong>ï¼šå½“è·¯ç”±å™¨æˆ–ç›®çš„ä¸»æœºæ”¶åˆ°çš„æ•°æ®æŠ¥çš„é¦–éƒ¨ä¸­çš„å­—æ®µçš„å€¼ä¸æ­£ç¡®æ—¶ï¼Œå°±<strong>ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥</strong>ï¼Œå¹¶å‘<strong>æºç«™</strong>å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡ã€‚<br>ï¼ˆ5ï¼‰<strong>é‡å®šå‘æŠ¥æ–‡</strong>ï¼šæ”¹å˜è·¯ç”±ï¼ˆ<strong>é‡å®šå‘</strong>ï¼‰è·¯ç”±å™¨å°†æ”¹å˜è·¯ç”±æŠ¥æ–‡å‘é€ç»™ä¸»æœºï¼Œè®©ä¸»æœºçŸ¥é“ä¸‹æ¬¡åº”å°†æ•°æ®æŠ¥å‘é€ç»™å¦å¤–çš„è·¯ç”±å™¨ã€‚ICMPé‡å®šå‘æŠ¥æ–‡æœºåˆ¶æ˜¯ä¸ºäº†<strong>ä¿è¯ä¸»æœºæ‹¥æœ‰ä¸€ä¸ªåŠ¨æ€çš„ã€æ—¢å°ä¸”ä¼˜çš„è·¯ç”±è¡¨</strong>ã€‚</p>
<h2 id="3-6-è·¯ç”±å™¨ä¸è·¯ç”±é€‰æ‹©"><a href="#3-6-è·¯ç”±å™¨ä¸è·¯ç”±é€‰æ‹©" class="headerlink" title="3.6 è·¯ç”±å™¨ä¸è·¯ç”±é€‰æ‹©"></a>3.6 è·¯ç”±å™¨ä¸è·¯ç”±é€‰æ‹©</h2><h3 id="3-6-1-è¡¨é©±åŠ¨IPé€‰è·¯"><a href="#3-6-1-è¡¨é©±åŠ¨IPé€‰è·¯" class="headerlink" title="3.6.1 è¡¨é©±åŠ¨IPé€‰è·¯"></a>3.6.1 è¡¨é©±åŠ¨IPé€‰è·¯</h3><ol>
<li>è·¯ç”±è¡¨ä¸­çš„ç‰¹æ®Šè·¯ç”±<ol>
<li>é»˜è®¤è·¯ç”±ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„é™æ€è·¯ç”±ï¼ŒæŒ‡çš„æ˜¯å½“è·¯ç”±è¡¨ä¸­ä¸åŒ…çš„ç›®çš„åœ°å€ä¹‹é—´æ²¡æœ‰åŒ¹é…çš„è¡¨é¡¹æ—¶è·¯ç”±å™¨èƒ½å¤Ÿåšå‡ºçš„é€‰æ‹©ï¼Œé»˜è®¤è·¯ç”±ä¼šå¤§å¤§ç®€åŒ–è·¯ç”±å™¨çš„é…ç½®ï¼Œå‡è½»ç®¡ç†å‘˜çš„å·¥ä½œè´Ÿæ‹…ï¼Œæé«˜ç½‘ç»œæ€§èƒ½ã€‚</li>
<li>ç‰¹å®šä¸»æœºè·¯ç”±ï¼šå¯¹å•ä¸ªä¸»æœºæŒ‡å®šä¸€æ¡ç‰¹åˆ«çš„è·¯å¾„å°±æ˜¯æ‰€è°“çš„ç‰¹å®šä¸»æœºè·¯ç”±ï¼Œå¯ç”¨äºå®‰å…¨æ€§ï¼Œç½‘ç»œè¿é€šæ€§è°ƒè¯•åŠè·¯ç”±è¡¨æ­£ç¡®æ€§åˆ¤æ–­ç­‰ç›®çš„</li>
</ol>
</li>
</ol>
<h3 id="3-6-3-RIPåè®®ä¸å‘é‡-è·ç¦»ç®—æ³•"><a href="#3-6-3-RIPåè®®ä¸å‘é‡-è·ç¦»ç®—æ³•" class="headerlink" title="3.6.3 RIPåè®®ä¸å‘é‡-è·ç¦»ç®—æ³•"></a>3.6.3 RIPåè®®ä¸å‘é‡-è·ç¦»ç®—æ³•</h3><ol>
<li><p>RIPåè®®</p>
<p>ä½¿ç”¨Bellman-Fordç®—æ³•</p>
<p>RIPåè®®è§„å®šè·¯ç”±å™¨<strong>æ¯30ç§’</strong>äº¤æ¢ä¸€æ¬¡è·¯ç”±ä¿¡æ¯</p>
<p>RIPåè®®ä¸¥æ ¼å‡†å®ˆå‘é‡-è·ç¦»ç®—æ³•</p>
<p>è§„å®šè·¯å¾„è¶…æ—¶æ—¶é—´ä¸º180ç§’ï¼Œç›¸å½“äº6ä¸ªRIPåˆ·æ–°å‘¨æœŸ</p>
</li>
<li><p>æ”¶æ•›æ…¢çš„é—®é¢˜åŠå¯¹ç­–</p>
<ul>
<li><strong>é™åˆ¶æœ€å¤§è·ç¦»å¯¹ç­–</strong></li>
<li><strong>æ°´å¹³åˆ†å‰²å¯¹ç­–</strong></li>
<li><strong>ä¿æŒå¯¹ç­–</strong></li>
<li><strong>å¸¦è§¦å‘åˆ·æ–°çš„æ¯’æ€§é€†è½¬å¯¹ç­–</strong></li>
</ul>
</li>
</ol>
<h3 id="3-6-4-OSPFåè®®ä¸é“¾è·¯-çŠ¶æ€ç®—æ³•"><a href="#3-6-4-OSPFåè®®ä¸é“¾è·¯-çŠ¶æ€ç®—æ³•" class="headerlink" title="3.6.4 OSPFåè®®ä¸é“¾è·¯-çŠ¶æ€ç®—æ³•"></a>3.6.4 OSPFåè®®ä¸é“¾è·¯-çŠ¶æ€ç®—æ³•</h3><p>ä½¿ç”¨æœ€çŸ­è·¯å¾„ä¼˜å…ˆç®—æ³•,<strong>æ”¶æ•›é€Ÿåº¦æ¯”RIPå¿«ï¼Œè®¡ç®—å¤æ‚åº¦æ¯”RIPé«˜</strong></p>
<h3 id="3-6-5-éƒ¨ç½²å’Œé€‰æ‹©è·¯ç”±åè®®"><a href="#3-6-5-éƒ¨ç½²å’Œé€‰æ‹©è·¯ç”±åè®®" class="headerlink" title="3.6.5 éƒ¨ç½²å’Œé€‰æ‹©è·¯ç”±åè®®"></a>3.6.5 éƒ¨ç½²å’Œé€‰æ‹©è·¯ç”±åè®®</h3><ol>
<li><p>é™æ€è·¯ç”±</p>
<p><strong>é€‚ç”¨äºåœ¨å°å‹ï¼Œå•è·¯å¾„ï¼Œé™æ€çš„IPäº’è”ç½‘ç¯å¢ƒä¸‹ä½¿ç”¨</strong></p>
<p>å°å…¬å¸ï¼Œå®¶åº­åŠå…¬å®¤ç­‰å°å‹æœºæ„å»ºè®¾çš„äº’è”ç½‘å¯é‡‡ç”¨é™æ€è·¯ç”±</p>
</li>
<li><p>RIPè·¯ç”±é€‰æ‹©åè®®</p>
<p><strong>é€‚åˆå°å‹åˆ°ä¸­å‹ï¼Œå¤šè·¯å¾„ï¼ŒåŠ¨æ€IPäº’è”ç½‘ç¯å¢ƒ</strong></p>
<p>ä¸­å‹ä¼ä¸šï¼Œå…·æœ‰å¤šä¸ªç½‘ç»œçš„å¤§å‹åˆ†æ”¯åŠå…¬å®¤ç­‰</p>
</li>
<li><p>OSPFè·¯æœ‰é€‰æ‹©åè®®</p>
<p><strong>é€‚åˆè¾ƒå¤§å‹åˆ°ç‰¹å¤§å‹ï¼Œå¤šè·¯å¾„ï¼ŒåŠ¨æ€çš„IPäº’è”ç½‘ç¯å¢ƒ</strong></p>
<p>ä¼ä¸šï¼Œæ ¡å›­ï¼Œéƒ¨é˜Ÿï¼Œæœºå…³ç­‰</p>
</li>
</ol>
<h3 id="3-7-1-IPç»„æ’­çš„æ¦‚å¿µå’Œç‰¹ç‚¹"><a href="#3-7-1-IPç»„æ’­çš„æ¦‚å¿µå’Œç‰¹ç‚¹" class="headerlink" title="3.7.1 IPç»„æ’­çš„æ¦‚å¿µå’Œç‰¹ç‚¹"></a>3.7.1 IPç»„æ’­çš„æ¦‚å¿µå’Œç‰¹ç‚¹</h3><ol>
<li>ç»„æ’­ä½¿ç”¨ç»„åœ°å€ã€‚æ¯ä¸ªç»„æ’­ç»„æ‹¥æœ‰å”¯ä¸€çš„ç»„æ’­åœ°å€ï¼ˆ<strong>Dç±»åœ°å€</strong>ï¼‰å‘é€æ–¹ä¸å¿…çŸ¥é“æœ‰å“ªäº›æˆå‘˜ï¼Œä»–è‡ªå·±ä¸å¿…æ˜¯ç»„æˆå‘˜ï¼Œå¯¹ç»„æˆå‘˜ä¸­ä¸»æœºçš„æ•°ç›®å’Œä½ç½®æ²¡æœ‰é™åˆ¶</li>
<li>åŠ¨æ€ç»„æˆå‘˜ã€‚ä¸€ä¸ªä¸»æœºï¼ˆæ¥æ”¶æ–¹æˆ–å‘é€æ–¹ï¼‰å¯ä»¥å‚åŠ æŸä¸ªç‰¹å®šçš„ç»„ï¼Œä¹Ÿå¯ä»¥ä»»æ„æ—¶é—´é€€å‡ºè¯¥ç»„ã€‚</li>
<li>åº•å±‚ç¡¬ä»¶æ”¯æŒçš„ç»„æ’­ã€‚ä»¥å¤ªç½‘æœ¬èº«å…·æœ‰ç»„æ’­çš„èƒ½åŠ›ï¼Œä»¥å¤ªç½‘åˆ©ç”¨ç¡¬ä»¶è¿›è¡Œç»„æ’­ã€‚</li>
</ol>
<h3 id="3-7-2-ç»„æ’­æŠ€æœ¯åŸºç¡€"><a href="#3-7-2-ç»„æ’­æŠ€æœ¯åŸºç¡€" class="headerlink" title="3.7.2 ç»„æ’­æŠ€æœ¯åŸºç¡€"></a>3.7.2 ç»„æ’­æŠ€æœ¯åŸºç¡€</h3><ol>
<li><p>IPç»„æ’­åœ°å€</p>
<p>Dç±»åœ°å€ä¸ºç»„æ’­åœ°å€</p>
</li>
<li><p>ç»„æ’­çš„ç›¸å…³åè®®</p>
<p><strong>ç»„ç®¡ç†åè®®ï¼š</strong>Internetç»„ç®¡ç†åè®®ï¼ˆInternet Group Management Protocolï¼Œ<strong>IGMP</strong>ï¼‰å’ŒCiscoä¸“ç”¨çš„ç»„ç®¡ç†åè®®ï¼ˆ<strong>CGMP</strong>ï¼‰ã€‚ç»„æ’­è·¯ç”±åè®®åˆåˆ†ä¸º<strong>åŸŸå†…ç»„æ’­è·¯ç”±åè®®</strong>ä»¥åŠ<strong>åŸŸé—´ç»„æ’­è·¯ç”±åè®®</strong>ä¸¤ç±»ã€‚</p>
<ul>
<li>åŸŸå†…ç»„æ’­åè®®ï¼šç»„æ’­è·¯ç”±ç®—æ³•æ„é€ ç»„æ’­åˆ†å‘æ ‘ï¼Œè·¯ç”±å™¨ä¸­å»ºç«‹ç»„æ’­è·¯ç”±çŠ¶æ€ï¼Œæ ¹æ®è¿™äº›çŠ¶æ€è¿›è¡Œç»„æ’­æ•°æ®åŒ…è½¬å‘</li>
<li>åŸŸé—´ç»„æ’­è·¯ç”±åè®®ï¼šåœ¨å„è‡ªæ²»ç³»ç»Ÿï¼ˆAutonomous Systemï¼ŒASï¼‰é—´å‘å¸ƒå…·æœ‰ç»„æ’­èƒ½åŠ›çš„è·¯ç”±ä¿¡æ¯ä»¥åŠç»„æ’­æºä¿¡æ¯ï¼Œä½¿ç»„æ’­ä¿¡æ¯èƒ½åœ¨åŸŸé—´è¿›è¡Œè½¬å‘</li>
</ul>
<p><strong>ç»„æ’­è·¯ç”±åè®®</strong>ï¼š åŸŸå†…ç»„æ’­è·¯ç”±åè®®åŒ…æ‹¬MOSPFï¼ŒCBTï¼ŒPIM-SMã€PIM-DMã€DVMRPç­‰åè®®ï¼ŒåŸŸå†…çš„ç»„æ’­åè®®åˆåˆ†ä¸ºå¯†é›†ï¼Œä¸ç¨€ç–æ¨¡å¼çš„åè®®ã€‚</p>
<ul>
<li><p>DVMRPï¼ŒPIM-DMï¼ŒMOSPFå±äºå¯†é›†æ¨¡å¼</p>
</li>
<li><p>CBTï¼ŒPIM-SMå±äºç¨€ç–æ¨¡å¼ã€‚</p>
</li>
</ul>
<p>åœ¨åŸŸå†…ï¼Œä¸»è¦ä½¿ç”¨PIM-SMï¼ŒPIM-DMï¼ŒDVMRPåè®®ã€‚</p>
</li>
</ol>
<p>ç»„æ’­è·¯ç”±åè®®æ˜¯IPç»„æ’­åè®®ä¸­æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œç»„æ’­è·¯ç”±ä¸åŒäºå•æ’­è·¯ç”±ï¼Œä»–æ˜¯ç”±æºåœ°å€ï¼Œç»„åœ°å€ï¼Œå…¥æ¥å£å’Œå‡ºæ¥å£åˆ—è¡¨4éƒ¨åˆ†ç»„æˆ</p>
<h3 id="3-8-1-IPv4åè®®çš„å±€é™æ€§"><a href="#3-8-1-IPv4åè®®çš„å±€é™æ€§" class="headerlink" title="3.8.1 IPv4åè®®çš„å±€é™æ€§"></a>3.8.1 IPv4åè®®çš„å±€é™æ€§</h3><ol>
<li>åœ°å€ç©ºé—´çš„å±€é™æ€§</li>
<li>IPåè®®çš„æ€§èƒ½é—®é¢˜</li>
<li>IPåè®®çš„å®‰å…¨é—®é¢˜</li>
<li>è‡ªåŠ¨é…ç½®é—®é¢˜</li>
<li>æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ä¿è¯é—®é¢˜</li>
</ol>
<h3 id="3-8-2-IPv6åœ°å€"><a href="#3-8-2-IPv6åœ°å€" class="headerlink" title="3.8.2 IPv6åœ°å€"></a>3.8.2 IPv6åœ°å€</h3><ol>
<li><p>IPv6åœ°å€ç±»å‹</p>
<ol>
<li><p>ç‰¹æ®Šåœ°å€</p>
<p><strong>å…¨é›¶åœ°å€ï¼šè¡¨ç¤ºåœ°å€ä¸å­˜åœ¨</strong></p>
<p><strong>å›é€åœ°å€ï¼š::1</strong></p>
<p>IPv4å…¼å®¹çš„IPv6åœ°å€</p>
<p>æ˜ å°„åˆ°IPv4çš„IPv6åœ°å€</p>
</li>
</ol>
</li>
</ol>
<h2 id="3-10-NATçš„åŸºæœ¬å·¥ä½œåŸç†"><a href="#3-10-NATçš„åŸºæœ¬å·¥ä½œåŸç†" class="headerlink" title="3.10 NATçš„åŸºæœ¬å·¥ä½œåŸç†"></a>3.10 NATçš„åŸºæœ¬å·¥ä½œåŸç†</h2><h3 id="3-10-2-NATçš„ä¸»è¦æŠ€æœ¯ç±»å‹"><a href="#3-10-2-NATçš„ä¸»è¦æŠ€æœ¯ç±»å‹" class="headerlink" title="3.10.2 NATçš„ä¸»è¦æŠ€æœ¯ç±»å‹"></a>3.10.2 NATçš„ä¸»è¦æŠ€æœ¯ç±»å‹</h3><p>ä¸»è¦ç±»å‹æœ‰ä¸‰ç§ï¼š<strong>é™æ€è·¯ç”±NATï¼ŒåŠ¨æ€NAT,ç½‘ç»œåœ°å€ç«¯å£è½¬æ¢NAPT</strong></p>
<ol>
<li><p>é™æ€è·¯ç”±NAT</p>
<p>ç½‘ç»œç®¡ç†å‘˜éœ€è¦åœ¨NATè®¾å¤‡ä¸­è®¾ç½®NATåœ°å€æ˜ å°„è¡¨ï¼Œè¯¥è¡¨ç¡®å®šäº†ä¸€ä¸ªå†…éƒ¨IPåœ°å€ä¸ä¸€ä¸ªå…¨å±€IPåœ°å€çš„å¯¹åº”å…³ç³»ï¼ŒNATåœ°å€æ˜ å°„è¡¨ä¸­çš„å†…éƒ¨åœ°å€ä¸å…¨å±€åœ°å€ä¸€ä¸€å¯¹åº”</p>
</li>
<li><p>åŠ¨æ€NAT</p>
<p>å…¨å±€IPåœ°å€æ„æˆNATæ± ï¼Œå½“ä¸»æœºé€šä¿¡ç»“æŸï¼ŒNATè®¾å¤‡å°†å›æ”¶å…¨å±€IPåœ°å€ï¼Œå¹¶åˆ é™¤åœ°å€æ˜ å°„è¡¨ä¸­å¯¹åº”çš„æ˜ å°„é¡¹ï¼Œä»¥ä¾¿å…¶ä»–å†…éƒ¨ä¸»æœºè®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ä½¿ç”¨</p>
</li>
<li><p>ç½‘ç»œåœ°å€ç«¯å£è½¬æ¢NAPT</p>
<p>æœ€å¸¸ä½¿ç”¨çš„NATç±»å‹ï¼Œåˆ©ç”¨TCP/UDPçš„ç«¯å£å·åŒºåˆ†NATåœ°å€æ˜ å°„è¡¨ä¸­çš„è½¬æ¢æ¡ç›®ï¼Œå¯ä»¥ä½¿å†…éƒ¨ç½‘ç»œä¸­çš„å¤šä¸ªä¸»æœºå…±äº«ä¸€ä¸ªå…¨å±€IPåœ°å€åŒæ—¶è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</p>
</li>
</ol>
<h1 id="ç¬¬å››ç« -Internet-åŸºæœ¬æœåŠ¡"><a href="#ç¬¬å››ç« -Internet-åŸºæœ¬æœåŠ¡" class="headerlink" title="ç¬¬å››ç«  Internet åŸºæœ¬æœåŠ¡"></a>ç¬¬å››ç«  Internet åŸºæœ¬æœåŠ¡</h1><h3 id="4-1-1-å®¢æˆ·æœº-æœåŠ¡å™¨æ¨¡å‹"><a href="#4-1-1-å®¢æˆ·æœº-æœåŠ¡å™¨æ¨¡å‹" class="headerlink" title="4.1.1 å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å‹"></a>4.1.1 å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å‹</h3><p>æœåŠ¡å™¨çš„åˆ†ç±»ï¼š<strong>é‡å¤æœåŠ¡å™¨ï¼Œå¹¶å‘æœåŠ¡å™¨</strong></p>
<h2 id="4-2-åŸŸåç³»ç»Ÿ"><a href="#4-2-åŸŸåç³»ç»Ÿ" class="headerlink" title="4.2 åŸŸåç³»ç»Ÿ"></a>4.2 åŸŸåç³»ç»Ÿ</h2><p>åœ°å€è§£æç³»ç»Ÿç”±ä¸€ç»„æ—¢ç‹¬ç«‹åˆåä½œçš„åŸŸåæœåŠ¡å™¨ç»„æˆï¼Œ<strong>åŸŸåæœåŠ¡å™¨æ˜¯è§£æç³»ç»Ÿçš„æ ¸å¿ƒ</strong>ã€‚åŸŸåè§£æçš„DNSåœ¨å®ç°ä¸Šä¹Ÿé‡‡ç”¨<strong>å±‚æ¬¡åŒ–æ¨¡å¼</strong>ï¼Œå¹¶ä¸åˆ†çº§ç»“æ„çš„åŸŸåç©ºé—´ç›¸å¯¹åº”ã€‚åŸŸåè§£ææ–¹å¼æœ‰<strong>é€’å½’è§£æå’Œè¿­ä»£è§£æ</strong>ä¸¤ç§ç±»å‹ã€‚åŸŸåè§£ææ¯æ¬¡ä»æ ¹æœåŠ¡å™¨è¿›è¡Œè§£æå¾ˆå¯èƒ½ä¼šé€ æˆæ ¹åŸŸåæœåŠ¡å™¨å› è´Ÿè·å¤ªé‡è€Œè¶…è½½ã€‚ä¸ºäº†æé«˜è§£ææ•ˆç‡ï¼Œ<strong>åŸŸåè§£æå¯ä»¥ä»æœ¬åœ°åŸŸåæœåŠ¡å™¨å¼€å§‹è§£ææˆ–è€…é‡‡ç”¨åŸŸåæœåŠ¡å™¨çš„é«˜é€Ÿç¼“å†²æŠ€æœ¯æ¥æé«˜è§£ææ•ˆç‡</strong></p>
<h3 id="4-2-2-åŸŸåè§£æ"><a href="#4-2-2-åŸŸåè§£æ" class="headerlink" title="4.2.2 åŸŸåè§£æ"></a>4.2.2 åŸŸåè§£æ</h3><ol>
<li><p>TCP/IPåŸŸåæœåŠ¡å™¨ä¸è§£æè¿‡ç¨‹</p>
<p>åŸŸåè§£æé‡‡ç”¨è‡ªé¡¶å‘ä¸‹çš„ç®—æ³•ï¼Œä»æ ¹æœåŠ¡å™¨åˆ°å¶æœåŠ¡å™¨</p>
<p>ä½†æ˜¯å¦‚æœæ²¡æ¯ä¸ªå‡æ˜¯ä»æ ¹åˆ°å¶ä¼šä½¿åˆ°è¾¾æ ¹æœåŠ¡å™¨çš„ä¿¡æ¯æµé‡éšäº’è”ç½‘è§„æ¨¡å¢å¤§è€Œå¢å¤§ï¼Œæ‰€ä»¥æ¯ä¸ªè§£æå‡ä»æ ¹æœåŠ¡å™¨å¼€å§‹å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ</p>
<p>åŸŸåè§£ææ–¹æ³•æœ‰ä¸¤ç§ï¼šç¬¬ä¸€ç§å«é€’å½’è§£æï¼Œç¬¬äºŒç§å«åå¤è§£æ</p>
<p><strong>é€’å½’è§£æï¼šåŸŸåæœåŠ¡å™¨ç³»ç»Ÿä¸€æ¬¡æ€§å®Œæˆå…¨éƒ¨åå­—-åœ°å€è½¬æ¢</strong></p>
<p><strong>åå¤è§£æï¼šæ¯æ¬¡è¯·æ±‚ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¸è¡Œå†è¯·æ±‚åˆ«çš„æœåŠ¡å™¨</strong></p>
</li>
<li><p>æé«˜åŸŸåè§£ææ•ˆç‡</p>
<ol>
<li><strong>è§£æä»æœ¬åœ°åŸŸåæœåŠ¡å™¨å¼€å§‹</strong></li>
<li><strong>åŸŸåæœåŠ¡å™¨çš„é«˜é€Ÿç¼“å†²æŠ€æœ¯</strong></li>
<li><strong>ä¸»æœºä¸Šçš„é«˜é€Ÿç¼“å†²æŠ€æœ¯</strong></li>
</ol>
</li>
</ol>
<ul>
<li>å¦‚æœè§£æå™¨æ”¶åˆ°ä¸€æ¡â€œéæˆæƒçš„â€æœåŠ¡å™¨å“åº”ï¼Œ<strong>é‚£ä¹ˆè§£æå™¨å¯ä»¥è®¤ä¸ºè¯¥å“åº”æä¾›çš„ä¿¡æ¯å¯èƒ½ä¸å‡†ç¡®</strong></li>
<li>è§£æå™¨æ”¶åˆ°ä¸€ä¸ªâ€œéæƒå¨æ€§â€çš„æ˜ å°„æ—¶ï¼Œ<strong>è§£æå™¨å¯ä»¥è®¤ä¸ºå“åº”æœåŠ¡å™¨ä¸æ˜¯è¯¥åŸŸåçš„æˆæƒç®¡ç†è€…</strong></li>
</ul>
<h3 id="4-2-3-å¯¹è±¡ç±»å‹ä¸èµ„æºè®°å½•"><a href="#4-2-3-å¯¹è±¡ç±»å‹ä¸èµ„æºè®°å½•" class="headerlink" title="4.2.3 å¯¹è±¡ç±»å‹ä¸èµ„æºè®°å½•"></a>4.2.3 å¯¹è±¡ç±»å‹ä¸èµ„æºè®°å½•</h3><div class="table-container">
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ„ä¹‰</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOAï¼ˆStart Of Authorityï¼‰</td>
<td>æˆæƒå¼€å§‹</td>
<td>æ ‡è¯†ä¸€ä¸ªèµ„æºè®°å½•é›†åˆçš„å¼€å§‹</td>
</tr>
<tr>
<td>A(address)</td>
<td>ä¸»æœºåœ°å€</td>
<td>32ä½äºŒè¿›åˆ¶IPåœ°å€</td>
</tr>
<tr>
<td>MX(mail exchanger)</td>
<td>é‚®ä»¶äº¤æ¢æœº</td>
<td>é‚®ä»¶æœåŠ¡å™¨ååŠä¼˜å…ˆçº§</td>
</tr>
<tr>
<td>NS(name server)</td>
<td>åŸŸåæœåŠ¡å™¨</td>
<td>åŸŸçš„æˆæƒåå­—æœåŠ¡å™¨å</td>
</tr>
<tr>
<td>CNAME(canonical name)</td>
<td>åˆ«å</td>
<td>åˆ«åçš„è§„èŒƒåå­—</td>
</tr>
<tr>
<td>PTR(pointer)</td>
<td>æŒ‡é’ˆ</td>
<td>å¯¹åº”äºIPåœ°å€çš„ä¸»æœºå</td>
</tr>
<tr>
<td>HINFO(host info)</td>
<td>ä¸»æœºæè¿°</td>
<td>ASCIIå­—ç¬¦ä¸²ï¼ŒCPUå’ŒOSæè¿°</td>
</tr>
<tr>
<td>TXT</td>
<td>æ–‡æœ¬</td>
<td>ASCIIå­—ç¬¦ä¸²ï¼Œä¸è§£é‡Š</td>
</tr>
</tbody>
</table>
</div>
<h2 id="4-3-è¿œç¨‹ç™»å½•æœåŠ¡"><a href="#4-3-è¿œç¨‹ç™»å½•æœåŠ¡" class="headerlink" title="4.3 è¿œç¨‹ç™»å½•æœåŠ¡"></a>4.3 è¿œç¨‹ç™»å½•æœåŠ¡</h2><p><strong>Telnetåè®®æ˜¯TCP/IPåè®®</strong>ä¸€éƒ¨åˆ†ï¼Œç²¾ç¡®å®šä¹‰æœ¬åœ°å®¢æˆ·æœºä¸è¿œç¨‹æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹</p>
<p>è¿œç¨‹ç™»å½•å…è®¸<strong>ä»»æ„ç±»å‹</strong>çš„è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡</p>
<p>ä½¿ç”¨Telnetä¸»è¦ç›®çš„æ˜¯ä½¿æœ¬åœ°ä¸»æœºæˆä¸ºè¿œç¨‹ä¸»æœºçš„ä»¿çœŸç»ˆç«¯</p>
<h3 id="4-3-1-è¿œç¨‹ç™»å½•åè®®"><a href="#4-3-1-è¿œç¨‹ç™»å½•åè®®" class="headerlink" title="4.3.1 è¿œç¨‹ç™»å½•åè®®"></a>4.3.1 è¿œç¨‹ç™»å½•åè®®</h3><p>è¿œç¨‹ç™»å½•åè®®Telnetæ˜¯TCP/IPåè®®æ—ä¸­çš„é‡è¦åè®®ï¼Œä¸ºäº†è§£å†³ç³»ç»Ÿçš„å·®å¼‚æ€§ï¼ŒTelnetåè®®å¼•å…¥<strong>ç½‘ç»œè™šæ‹Ÿç»ˆç«¯ï¼ˆNetwork Virtual Terminalï¼ŒNVTï¼‰æä¾›ä¸€ç§æ ‡å‡†çš„é”®ç›˜å®šä¹‰</strong>ï¼Œç”¨æ¥å±è”½ä¸åŒçš„è®¡ç®—æœºç³»ç»Ÿå¯¹é”®ç›˜è¾“å…¥çš„å·®å¼‚æ€§</p>
<h2 id="4-4-FTPæœåŠ¡"><a href="#4-4-FTPæœåŠ¡" class="headerlink" title="4.4 FTPæœåŠ¡"></a>4.4 FTPæœåŠ¡</h2><p>FTPï¼ˆFile Transfer Protocolï¼‰æ–‡ä»¶ä¼ è¾“åè®®ï¼Œä¸»è¦ç”¨äºinternetä¸Šçš„æ–‡ä»¶åŒå‘ä¼ è¾“ï¼Œé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼</p>
<h3 id="4-4-1-FTPå®¢æˆ·æœº-æœåŠ¡å™¨æ¨¡å‹"><a href="#4-4-1-FTPå®¢æˆ·æœº-æœåŠ¡å™¨æ¨¡å‹" class="headerlink" title="4.4.1 FTPå®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å‹"></a>4.4.1 FTPå®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å‹</h3><p>FTPå®¢æˆ·æœºä¸æœåŠ¡å™¨è¦å»ºç«‹åŒå‘é“¾æ¥ï¼Œä¸€ä¸ªæ˜¯æ§åˆ¶è¿æ¥ï¼ˆç«¯å£å·21ï¼‰ä¸€ä¸ªæ˜¯æ•°æ®è¿æ¥ï¼ˆç«¯å£å·20ï¼‰</p>
<ul>
<li><p>æ§åˆ¶è¿æ¥ç”¨äºç»´æŒä¼šè¯ï¼Œè´Ÿè´£åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´ä¼ é€FTPå‘½ä»¤å’Œå“åº”</p>
<p>æ§åˆ¶è¿æ¥ä»¥é€šå¸¸çš„å®¢æˆ·æœº/æœåŠ¡å™¨æ–¹å¼å»ºç«‹ï¼ŒæœåŠ¡å™¨ä»¥è¢«åŠ¨æ–¹å¼åœ¨TCPçš„21ç«¯å£æ‰“å¼€ç­‰å¾…å®¢æˆ·æœºè¿æ¥ï¼Œå®¢æˆ·æœºåˆ™ä»¥ä¸»åŠ¨æ–¹å¼åœ¨ä¸€ä¸ªTCPéšæœºç«¯å£æ‰“å¼€</p>
</li>
<li><p>æ•°æ®è¿æ¥ç”¨äºè®¿é—®æ•°æ®ã€‚<strong>å»ºç«‹æ–¹å¼æœ‰ä¸»åŠ¨æ¨¡å¼å’Œè¢«åŠ¨æ¨¡å¼</strong></p>
</li>
</ul>
<h3 id="4-4-2-FTPå‘½ä»¤å’Œå“åº”"><a href="#4-4-2-FTPå‘½ä»¤å’Œå“åº”" class="headerlink" title="4.4.2 FTPå‘½ä»¤å’Œå“åº”"></a>4.4.2 FTPå‘½ä»¤å’Œå“åº”</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>USER</td>
<td>è®¤è¯ç”¨æˆ·å</td>
</tr>
<tr>
<td>PASS</td>
<td>è®¤è¯å¯†ç </td>
</tr>
<tr>
<td>PORT n1,n2,n3,n4,n5,n6</td>
<td>å®¢æˆ·æœºIPåœ°å€ï¼ˆn1,n2,n3,n4ï¼‰å’Œç«¯å£å·ï¼ˆn5*256+n6ï¼‰</td>
</tr>
<tr>
<td>PASV</td>
<td>è¿›å…¥è¢«åŠ¨æ¨¡å¼</td>
</tr>
<tr>
<td>LIST filelist</td>
<td>å¦‚æœæŒ‡å®šäº†æ–‡ä»¶æˆ–ç›®å½•ï¼Œè¿”å›å…¶ä¿¡æ¯ï¼›å¦åˆ™è¿”å›å½“å‰å·¥ä½œç›®å½•çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>TYPE type(ascii/binary)</td>
<td>è®¾å®šä¼ è¾“æ¨¡å¼ï¼ˆASCII/BINARY) æ–‡æœ¬ä½¿ç”¨ASCIIï¼Œå›¾åƒä½¿ç”¨äºŒè¿›åˆ¶</td>
</tr>
<tr>
<td>REST marker</td>
<td>ä¼ è¾“æ–‡ä»¶çš„èµ·å§‹ç‚¹</td>
</tr>
<tr>
<td>RERT filename</td>
<td>æ£€ç´¢ä¸€ä¸ªæ–‡ä»¶</td>
</tr>
<tr>
<td>STOR filename</td>
<td>å­˜å‚¨ä¸€ä¸ªæ–‡ä»¶</td>
</tr>
<tr>
<td>QUIT</td>
<td>ä»æœåŠ¡å™¨æ³¨é”€</td>
</tr>
</tbody>
</table>
</div>
<h3 id="4-4-3-æ–‡ä»¶æ ¼å¼"><a href="#4-4-3-æ–‡ä»¶æ ¼å¼" class="headerlink" title="4.4.3 æ–‡ä»¶æ ¼å¼"></a>4.4.3 æ–‡ä»¶æ ¼å¼</h3><p>FTPåè®®æ”¯æŒä¸¤ç§<strong>æ–‡ä»¶ä¼ è¾“æ–¹å¼</strong>ï¼š<strong>æ–‡æœ¬æ–‡ä»¶ä¼ è¾“å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¼ è¾“</strong></p>
<p>FTP<strong>æ•°æ®è¿æ¥å»ºç«‹æ¨¡å¼</strong>æœ‰ä¸¤ç§ï¼š<strong>ä¸»åŠ¨æ¨¡å¼ä¸è¢«åŠ¨æ¨¡å¼</strong></p>
<h2 id="4-5-ç”µå­é‚®ä»¶ç³»ç»Ÿ"><a href="#4-5-ç”µå­é‚®ä»¶ç³»ç»Ÿ" class="headerlink" title="4.5 ç”µå­é‚®ä»¶ç³»ç»Ÿ"></a>4.5 ç”µå­é‚®ä»¶ç³»ç»Ÿ</h2><h3 id="4-5-1-ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†"><a href="#4-5-1-ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="4.5.1 ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†"></a>4.5.1 ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†</h3><ol>
<li><p>ç”µå­é‚®ä»¶ç³»ç»Ÿ</p>
<p>ç”µå­é‚®ä»¶ç³»ç»Ÿé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨å·¥ä½œæ¨¡å¼ã€‚</p>
</li>
<li><p>TCP/IPäº’è”ç½‘ä¸Šç”µå­é‚®ä»¶ä¼ è¾“è¿‡ç¨‹</p>
<p>åœ¨TCP/IPäº’è”ç½‘ä¸­ï¼Œé‚®ä»¶ä¹‹é—´é‡‡ç”¨<strong>ç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼ˆSimple Mail Transfer Protocol,STMPï¼‰</strong>ç›¸äº’ä¼ è¾“é‚®ä»¶ã€‚</p>
<p>ç”µå­é‚®ä»¶åº”ç”¨ç¨‹åº<strong>ä½¿ç”¨STMPå‘é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶</strong>ï¼Œä½¿ç”¨<strong>POP3ï¼ˆPost Office Protocolï¼‰åè®®æˆ–è€…IMAPï¼ˆInteractive Mail Access Protocolï¼‰åè®®ä»é‚®ä»¶æœåŠ¡å™¨é‚®ç®±ä¸­è¯»å–é‚®ä»¶</strong></p>
</li>
<li><p>ç”µå­é‚®ä»¶åœ°å€</p>
<p>TCP/IPäº’è”ç½‘ä¸Šç”µå­é‚®ä»¶åœ°å€ä¸€èˆ¬ä¸ºï¼š</p>
<p>local-part@domain-name</p>
<p>domain-nameæ˜¯é‚®ä»¶æœåŠ¡å™¨åŸŸåï¼Œè€Œlocal-partåˆ™è¡¨ç¤ºé‚®ä»¶æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·åé‚®ç®±</p>
</li>
</ol>
<h3 id="4-5-2-ç”µå­é‚®ä»¶ä¼ é€’åè®®"><a href="#4-5-2-ç”µå­é‚®ä»¶ä¼ é€’åè®®" class="headerlink" title="4.5.2 ç”µå­é‚®ä»¶ä¼ é€’åè®®"></a>4.5.2 ç”µå­é‚®ä»¶ä¼ é€’åè®®</h3><ol>
<li><p>ç®€å•çš„é‚®ä»¶ä¼ è¾“åè®®SMTP</p>
<p>SMTPé‚®ä»¶ä¼ è¾“é‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼ï¼Œé‚®ä»¶æ¥æ”¶ç¨‹åºä½œä¸ºSMTPæœåŠ¡å™¨åœ¨TCPçš„25ç«¯å£å®ˆå€™</p>
<p>SMTPé‚®ä»¶ä¼ é€’è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>è¿æ¥å»ºç«‹é˜¶æ®µï¼Œé‚®ä»¶ä¼ é€é˜¶æ®µï¼Œè¿æ¥å…³é—­é˜¶æ®µ</strong>ã€‚</p>
<p>SMTPçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç®€å•å’Œç›´è§‚ï¼Œå®ƒ<strong>ä¸è§„å®šé‚®ä»¶çš„æ¥æ”¶ç¨‹åºå¦‚ä½•å­˜å‚¨é‚®ä»¶ï¼Œä¹Ÿä¸è§„å®šé‚®ä»¶å‘é€ç¨‹åºå¤šé•¿æ—¶é—´å‘é€ä¸€æ¬¡é‚®ä»¶</strong>ï¼Œå®ƒ<strong>åªè§„å®šå‘é€ç¨‹åºå’Œæ¥æ”¶ç¨‹åºä¹‹é—´çš„å‘½ä»¤</strong>ï¼ŒSMTPé‚®ä»¶ä¼ è¾“é‡‡ç”¨<strong>å®¢æˆ·æœº/æœåŠ¡å™¨</strong>æ¨¡å¼ï¼Œåœ¨TCP/IPäº’è”ç½‘ä¸­ï¼Œé‚®ä»¶æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨ç®€å•é‚®ä»¶ä¼ è¾“åè®®SMTPç›¸äº’ä¼ é€’ç”µå­é‚®ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´SMTPåè®®ä½¿ç”¨ä¼ è¾“å±‚çš„TCPæœåŠ¡ï¼Œ<strong>SMTPå“åº”å­—ç¬¦ä¸²ä»¥3ä½åè¿›åˆ¶æ•°å­—å¼€å§‹</strong></p>
<p>SMTPå¸¸ç”¨å‘½ä»¤ï¼š</p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>HELO&lt;ä¸»æœºåŸŸå&gt;</th>
<th>å¼€å§‹ä¼šè¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAIL FROM&lt;å‘é€è€…çš„ç”µå­é‚®ä»¶åœ°å€&gt;</td>
<td>å¼€å§‹ä¸€ä¸ªé‚®é€’å¤„ç†ï¼ŒæŒ‡å‡ºé‚®ä»¶å‘é€è€…</td>
</tr>
<tr>
<td>RCPT TO&lt;æ¥æ”¶è€…çš„ç”µå­é‚®ä»¶åœ°å€&gt;</td>
<td>æ ‡è¯†å•ä¸ªçš„é‚®ä»¶æ¥æ”¶äººï¼›å¯æœ‰å¤šä¸ª RCPT TOï¼›å¸¸åœ¨ MAIL å‘½ä»¤åé¢</td>
</tr>
<tr>
<td>DATA</td>
<td>DATAå‘½ä»¤åçš„æ•°æ®ä½œä¸ºé‚®ä»¶å†…å®¹å¤„ç†ï¼Œç›´åˆ°å‡ºç° CR LF CR LF ç»“æŸ</td>
</tr>
<tr>
<td>NOOP</td>
<td>æ— æ“ä½œï¼ŒæœåŠ¡å™¨åº”å“åº” OK</td>
</tr>
<tr>
<td>RSET</td>
<td>ä¸­æ­¢å½“å‰é‚®ä»¶å¤„ç†</td>
</tr>
<tr>
<td>QUIT</td>
<td>ç»“æŸä¼šè¯</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><p>é‚®å±€åè®®POP3</p>
<p>POP3æœ¬èº«ä¹Ÿé‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼ï¼Œå½“ç”¨æˆ·éœ€è¦ä¸‹è½½é‚®ä»¶æ—¶å€™ï¼ŒPOPå®¢æˆ·æœºé¦–å…ˆå‘POPæœåŠ¡å™¨çš„TCPå®ˆå€™ç«¯å£110å‘é€å»ºç«‹è¿æ¥è¯·æ±‚</p>
<p>POP3é‚®ä»¶ä¼ é€’è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>è®¤è¯é˜¶æ®µã€äº‹åŠ¡å¤„ç†é˜¶æ®µã€æ›´æ–°é˜¶æ®µ</strong></p>
<p>| USER             | username è®¤è¯ç”¨æˆ·å                       |<br>| â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- |<br>| PASS             | password è®¤è¯å¯†ç è®¤è¯ï¼Œè®¤è¯é€šè¿‡åˆ™çŠ¶æ€è½¬æ¢ |<br>| STAT             | æŸ¥è¯¢æŠ¥æ–‡æ€»æ•°ä¸é•¿åº¦                        |<br>| LIST[&lt;é‚®ä»¶ç¼–å·&gt;] | å¤„ç† server è¿”å›æŒ‡å®šé‚®ä»¶çš„å¤§å°ç­‰          |<br>| RETR&lt;é‚®ä»¶ç¼–å·&gt;   | è¯·æ±‚æœåŠ¡å™¨å‘é€æŒ‡å®šç¼–å·çš„é‚®ä»¶              |<br>| DELE&lt;é‚®ä»¶ç¼–å·&gt;   | å¯¹æŒ‡å®šç¼–å·çš„é‚®ä»¶åšåˆ é™¤å¤„ç†                |<br>| RSET             | å¤ä½æ“ä½œï¼Œæ¸…é™¤æ‰€æœ‰åˆ é™¤æ ‡è®°                |<br>| NOOP             | æ— æ“ä½œ                                    |<br>| QUIT             | åˆ é™¤é‚£äº›æ ‡è®°æˆåˆ é™¤çš„é‚®ä»¶ï¼Œå…³é—­è¿æ¥        |</p>
</li>
</ol>
<h3 id="4-5-3-ç”µå­é‚®ä»¶çš„æŠ¥æ–‡æ ¼å¼"><a href="#4-5-3-ç”µå­é‚®ä»¶çš„æŠ¥æ–‡æ ¼å¼" class="headerlink" title="4.5.3 ç”µå­é‚®ä»¶çš„æŠ¥æ–‡æ ¼å¼"></a>4.5.3 ç”µå­é‚®ä»¶çš„æŠ¥æ–‡æ ¼å¼</h3><p>RFC822å’Œå¤šç”¨é€”Interneté‚®ä»¶æ‰©å±•åè®®(Multipurpose Internet Mail Extensions,MIME)å¯¹é‚®ä»¶æŠ¥æ–‡æ ¼å¼ä½œå‡ºäº†å…·ä½“çš„è§„å®š</p>
<ol>
<li><p>RFC822</p>
<p>å¯¹é‚®ä»¶çš„æœ€å¤§é™åˆ¶æ˜¯é‚®ä»¶ä½“ä¸ºï¼—ä½ASCIIæ–‡æœ¬ï¼Œè€Œä¸”SMTPä¸­åˆè§„å®šä¼ è¾“é‚®ä»¶æ—¶å°†ï¼˜ä½å­—èŠ‚é«˜ä½æ¸…ï¼</p>
</li>
<li><p>å¤šç”¨é€”Interneté‚®ä»¶æ‰©å±•åè®®MIME</p>
<p><strong>ä½¿ç”¨Base64ç¼–ç ä¸»è¦ç›®çš„æ˜¯å°†äºŒè¿›åˆ¶ç è½¬æ¢ä¸ºASCIIç </strong></p>
</li>
</ol>
<h3 id="4-6-2-ç³»ç»Ÿçš„ä¼ è¾“åè®®"><a href="#4-6-2-ç³»ç»Ÿçš„ä¼ è¾“åè®®" class="headerlink" title="4.6.2 ç³»ç»Ÿçš„ä¼ è¾“åè®®"></a>4.6.2 ç³»ç»Ÿçš„ä¼ è¾“åè®®</h3><p><strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTPæ˜¯Webå®¢æˆ·æœºä¸WebæœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“åè®®ï¼ŒTCPä¸Šï¼Œæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„åè®®ã€‚HTTPç²¾ç¡®å®šä¹‰äº†è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„æ ¼å¼</strong></p>
<p>HTTPåè®®æ˜¯ä¸€ç§è¯¦ç»†è§„å®šäº†æµè§ˆå™¨å’Œä¸‡ç»´ç½‘æœåŠ¡å™¨ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™ï¼Œé€šè¿‡å› ç‰¹ç½‘ä¼ é€ä¸‡ç»´ç½‘æ–‡æ¡£çš„æ•°æ®ä¼ é€åè®®ã€‚HTTPåè®®æ˜¯åŸºäºTCPçš„åè®®ã€‚HTTPåè®®çš„è¯·æ±‚æ¶ˆæ¯ä¸º<strong>ä¸€ä¸ªè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€ç©ºè¡Œå’Œå…·ä½“çš„è¯·æ±‚å†…å®¹</strong>ã€‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä»¥ä¸€ä¸ªçŠ¶æ€è¡Œä½œä¸ºå“åº”ï¼Œå“åº”çš„å†…å®¹åŒ…æ‹¬ï¼šæ¶ˆæ¯åè®®çš„ç‰ˆæœ¬ã€æˆåŠŸæˆ–è€…é”™è¯¯ç¼–ç ã€æœåŠ¡å™¨ä¿¡æ¯ã€å®ä½“å…ƒä¿¡æ¯ä»¥åŠå¿…è¦çš„å®ä½“å†…å®¹ã€‚ç»“æœä»£ç ï¼ˆçŠ¶æ€ç ï¼‰ï¼Œ<strong>ç”¨ä¸‰ä¸ªæ•°å­—è¡¨ç¤º</strong>ã€‚</p>
<ul>
<li>è¯·æ±‚æŠ¥æ–‡åŒ…å«ä¸€ä¸ªè¯·æ±‚è¡Œå’Œè‹¥å¹²æŠ¥å¤´è¡Œ</li>
<li>åº”ç­”æŠ¥æ–‡åŒ…å«ä¸€ä¸ªçŠ¶æ€è¡Œå’Œè‹¥å¹²æŠ¥å¤´è¡Œï¼Œå¹¶å¯èƒ½åœ¨ç©ºè¡Œåé¢æœ‰æŠ¥æ–‡ä½“</li>
</ul>
<p>Webç«™ç‚¹ä¸­å‚¨å­˜çš„é€šå¸¸æ˜¯ç»“æ„åŒ–æ–‡æ¡£ï¼ŒWebæµè§ˆå™¨åº”èƒ½è§£æHTMLæ–‡æ¡£ï¼ŒWebç«™ç‚¹åº”å®ç°HTTPåè®®</p>
<h1 id="ç¬¬äº”ç« -æ–°å‹ç½‘ç»œåº”ç”¨"><a href="#ç¬¬äº”ç« -æ–°å‹ç½‘ç»œåº”ç”¨" class="headerlink" title="ç¬¬äº”ç«  æ–°å‹ç½‘ç»œåº”ç”¨"></a>ç¬¬äº”ç«  æ–°å‹ç½‘ç»œåº”ç”¨</h1><h2 id="5-1-å³æ—¶é€šä¿¡ç³»ç»Ÿ"><a href="#5-1-å³æ—¶é€šä¿¡ç³»ç»Ÿ" class="headerlink" title="5.1 å³æ—¶é€šä¿¡ç³»ç»Ÿ"></a>5.1 å³æ—¶é€šä¿¡ç³»ç»Ÿ</h2><p><strong>ä»¥è‰²åˆ—Mirabilså…¬å¸æ¨å‡ºäº†ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾å³æ—¶é€šä¿¡è½¯ä»¶ICQ</strong>ï¼ˆI Seek Youç½‘ç»œå¯»å‘¼æœºï¼‰å®£å‘Šäº†â€œ<strong>å³æ—¶é€šä¿¡ï¼ˆInstant Messsagingï¼ŒIMï¼‰</strong>â€è¿™ä¸€æ¦‚å¿µçš„è¯ç”Ÿ</p>
<p>å³æ—¶é€šä¿¡ç³»ç»Ÿæ˜¯ä¸€ç§åŸºäºInternetçš„é€šä¿¡æœåŠ¡ï¼Œå¯ä»¥æä¾›<strong>è¿‘å®æ—¶çš„ä¿¡æ¯äº¤æ¢</strong>å’Œ<strong>ç”¨æˆ·çŠ¶æ€è·Ÿè¸ª</strong></p>
<h3 id="5-1-1-å³æ—¶é€šä¿¡ç³»ç»Ÿæ¨¡å‹"><a href="#5-1-1-å³æ—¶é€šä¿¡ç³»ç»Ÿæ¨¡å‹" class="headerlink" title="5.1.1 å³æ—¶é€šä¿¡ç³»ç»Ÿæ¨¡å‹"></a>5.1.1 å³æ—¶é€šä¿¡ç³»ç»Ÿæ¨¡å‹</h3><p>IETFæ‰¹å‡†çš„<strong>RFC2778</strong>ç»™å‡ºäº†ä¸€ä¸ªæŠ½è±¡çš„å‘ˆç°ä¸<strong>å³æ—¶æ¶ˆæ¯ç³»ç»Ÿæ¨¡å‹</strong>ï¼Œ<strong>æè¿°äº†å³æ—¶é€šä¿¡ç³»ç»Ÿçš„åŠŸèƒ½</strong>ï¼Œ<strong>å‹¾å‹’äº†å³æ—¶é€šä¿¡ç³»ç»Ÿçš„æ¨¡å‹æ¡†æ¶</strong></p>
<p>åœ¨RFC2778ä¸­ï¼Œå³æ—¶æ¶ˆæ¯ç³»ç»Ÿè¢«å®šä¹‰ä¸ºâ€œå…è®¸ç”¨æˆ·ç›¸äº’è®¢é˜…å¹¶è·å–å½¼æ­¤çŠ¶æ€å˜æ›´ä¿¡æ¯ï¼Œä»¥ä½¿ç”¨ç”¨æˆ·é—´äº’ç›¸æ”¶å‘çŸ­ä¿¡æ¯â€</p>
<h3 id="5-1-2-å³æ—¶é€šä¿¡ç³»ç»Ÿä¸»è¦é€šä¿¡æ¨¡å¼"><a href="#5-1-2-å³æ—¶é€šä¿¡ç³»ç»Ÿä¸»è¦é€šä¿¡æ¨¡å¼" class="headerlink" title="5.1.2 å³æ—¶é€šä¿¡ç³»ç»Ÿä¸»è¦é€šä¿¡æ¨¡å¼"></a>5.1.2 å³æ—¶é€šä¿¡ç³»ç»Ÿä¸»è¦é€šä¿¡æ¨¡å¼</h3><p><strong>ä¸€ç§æ˜¯ç”¨æˆ·/æœåŠ¡å™¨æ¨¡å¼ï¼Œå¦å¤–ä¸€ç§æ˜¯ç”¨æˆ·/ç”¨æˆ·æ¨¡å¼</strong></p>
<ol>
<li><p>ç”¨æˆ·/æœåŠ¡å™¨æ¨¡å¼</p>
<p><strong>æ–‡æœ¬æ¶ˆæ¯</strong>ä¸€èˆ¬é‡‡ç”¨æ­¤æ¨¡å¼ï¼ŒTCPåè®®</p>
<p>å³æ—¶æ¶ˆæ¯æœåŠ¡å™¨ä¸€èˆ¬é‡‡ç”¨å›ºå®šæœåŠ¡ç«¯å£è¢«åŠ¨åœ°ä¸ç”¨æˆ·é€šä¿¡</p>
</li>
<li><p>ç”¨æˆ·/ç”¨æˆ·æ¨¡å¼</p>
<p><strong>æ–‡ä»¶ä¼ è¾“</strong>ä¸€èˆ¬é‡‡ç”¨æ­¤æ¨¡å¼</p>
</li>
</ol>
<h3 id="5-1-3-å³æ—¶é€šä¿¡ç³»ç»Ÿçš„é€šä¿¡åè®®"><a href="#5-1-3-å³æ—¶é€šä¿¡ç³»ç»Ÿçš„é€šä¿¡åè®®" class="headerlink" title="5.1.3 å³æ—¶é€šä¿¡ç³»ç»Ÿçš„é€šä¿¡åè®®"></a>5.1.3 å³æ—¶é€šä¿¡ç³»ç»Ÿçš„é€šä¿¡åè®®</h3><p><strong>MSNä½¿ç”¨çš„æ˜¯MSNPåè®®ï¼ŒICQ,AOLä½¿ç”¨çš„æ˜¯OSCARåè®®ï¼ŒQQé‡‡ç”¨è‡ªå·±çš„ç§æœ‰åè®®(UDPä¸ºä¸»,è¾…ä»¥TCP)</strong></p>
<p>å³æ—¶é€šä¿¡å¼€æ”¾çš„åè®®ä¸»è¦ä»£è¡¨æœ‰ä¸¤ä¸ªï¼š<strong>åŸºäºSIPåè®®æ¡†æ¶çš„SIMPLE</strong>ï¼ˆSIP for Instant Messaging and Presence Leverage Extensionï¼‰åè®®ç°‡ï¼Œä¸€ä¸ªæ˜¯<strong>åŸºäºJABBERåè®®æ¡†æ¶çš„XMPP</strong>ï¼ˆeXtensible Messaging and Presence Protocolï¼‰åè®®ç°‡</p>
<p>ä¸€ä¸ªå³æ—¶é€šä¿¡ç³»ç»ŸåŒ…æ‹¬ä¸¤ä¸ªæœåŠ¡ï¼š<strong>å‘ˆç°æœåŠ¡ï¼Œå³æ—¶æ¶ˆæ¯æœåŠ¡</strong></p>
<ol>
<li><p>SIPåè®®</p>
<p>SIPï¼ˆSession Initiation Protocolï¼‰<strong>ä¼šè¯åˆå§‹åŒ–åè®®</strong></p>
<p>æ‰€è°“ä¸€ä¸ªä¼šè¯æŒ‡çš„æ˜¯ç”¨æˆ·ä¹‹é—´çš„ä¸€æ¬¡æ•°æ®äº¤æ¢è¿‡ç¨‹</p>
<p>SIP<strong>ä¸»è¦æ˜¯ä¸ºäº†IPç½‘ç»œè®¾è®¡çš„ï¼Œå¯ä»¥è¿è¡ŒäºTCPï¼ŒUDP,SCTPç­‰å„ç§ä¼ è¾“å±‚åè®®ä¹‹ä¸Š</strong></p>
<p><strong>SIPæ˜¯ä¸€ç§åœ¨IPç½‘ç»œä¸Šå®ç°å®æ—¶é€šä¿¡çš„åº”ç”¨å±‚çš„æ§åˆ¶ï¼ˆä¿¡ä»¤ï¼‰åè®®</strong></p>
<p>SIPæ¶ˆæ¯å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œ<strong>è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯</strong></p>
<p>SIPæ¶ˆæ¯ç”±<strong>ä¸€ä¸ªèµ·å§‹è¡Œï¼Œæ¶ˆæ¯å¤´ï¼Œä¸€ä¸ªæ ‡å¿—æ¶ˆæ¯å¤´ç»“æŸçš„ç©ºè¡Œï¼Œæ¶ˆæ¯ä½“ç»„æˆ</strong></p>
<p><strong>èµ·å§‹è¡Œåˆ†ä¸ºè¯·æ±‚è¡Œå’ŒçŠ¶æ€è¡Œ</strong></p>
<p>SIPåè®®è™½ç„¶ä¸»è¦æ˜¯ä¸ºIPç½‘ç»œè®¾è®¡çš„ï¼Œä½†å®ƒå¹¶<strong>ä¸å…³å¿ƒå’Œä¾èµ–ç‰¹å®šæ‰¿è½½ç½‘ç»œ</strong>ã€‚SIPæ³¨å†ŒæœåŠ¡å™¨ç”¨äºæ¥æ”¶å’Œå¤„ç†ç”¨æˆ·ç«¯çš„æ³¨å†Œè¯·æ±‚ï¼Œå®Œæˆç”¨æˆ·åœ°å€çš„æ³¨å†Œã€‚åœ¨é€šè¯åˆå§‹ï¼Œéœ€è¦å‘é€æ–¹å‘é€INVITEä¿¡æ¯ï¼Œè€Œ<strong>æ¥æ”¶æ–¹ä¸éœ€è¦å‘é€INVITE</strong>ä¿¡æ¯ã€‚åœ¨ä¿¡æ¯çš„ä¼ é€è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼š<strong>ç»å†å¤šä¸ªä»£ç†æœåŠ¡å™¨</strong>æ‰ä¼šå®Œæˆä¿¡æ¯å‘é€ã€‚</p>
<p>| è¯·æ±‚æ–¹æ³• | åŠŸèƒ½                                                         |<br>| â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| INVITE   | é‚€è¯·ç”¨æˆ·æˆ–è€…æœåŠ¡å™¨å‚åŠ ä¸€ä¸ªä¼šè¯                               |<br>| ACK      | UAå‘æœåŠ¡å™¨è¯å®å®ƒå·²ç»å¯¹INVITEè¯·æ±‚çš„æœ€ç»ˆå“åº”ã€‚ACKåªå’ŒINVITEä¸€èµ·ä½¿ç”¨ |<br>| OPTIONS  | è¯·æ±‚å…³äºæœåŠ¡å™¨èƒ½åŠ›çš„ä¿¡æ¯ã€‚å¦‚æœæœåŠ¡å™¨è®¤ä¸ºå®ƒèƒ½ä¸ç”¨æˆ·è”ç³»ï¼Œåˆ™å¯ç”¨ä¸€ä¸ªèƒ½åŠ›é›†å“åº”OPTIONSè¯·æ±‚ |<br>| BYE      | ç”¨æˆ·ç»ˆæ­¢ä¸€æ¬¡ä¼šè¯ï¼Œæ—¢å¯ç”±ä¸»å«UAå‘é€ï¼Œä¹Ÿå¯ç”±è¢«å«UAå‘é€         |<br>| CANCEL   | å–æ¶ˆä¸€ä¸ªæŒ‚èµ·çš„å‘¼å«                                           |<br>| REGISTER | å‘å®šä½æœåŠ¡å™¨æ³¨å†ŒUAçš„ç›¸å…³ä¿¡æ¯                                 |</p>
<p>BYE:æ˜¯ä¸€ç§è¯·æ±‚æ¶ˆæ¯ï¼Œè¯·æ±‚æ¶ˆæ¯åŒ…å«è¯·æ±‚è¡Œï¼Œæ¶ˆæ¯å¤´ï¼Œç©ºè¡Œï¼Œå’Œæ¶ˆæ¯ä½“ã€‚</p>
</li>
<li><p>SIMPLEåè®®</p>
<p><strong>ç”±IETFåˆ¶å®š</strong>ï¼ŒSIMPLEåè®®é€šè¿‡<strong>å¯¹SIPåè®®è¿›è¡Œæ‰©å±•</strong>ï¼Œä½¿å…¶æ”¯æŒ<strong>å³æ—¶æ¶ˆæ¯æœåŠ¡</strong></p>
</li>
<li><p>XMPP</p>
<p>XMPPæ˜¯ä¸€ç§åŸºäºXMLçš„å³æ—¶é€šä¿¡åè®®ï¼ŒIEFTåœ¨4ä¸ªRFCæ–‡æ¡£ä¸­å¯¹è¯¥åè®®è¿›è¡Œäº†å®šä¹‰ï¼Œå…¶ä¸­RFC3920ï¼ŒRFC3922ï¼ŒRFC3923åˆ†åˆ«å¯¹XMPPåè®®çš„æ ¸å¿ƒæ„æ¶ï¼Œå³æ—¶é€šè®¯æ–¹æ³•ï¼ŒXMPPä¸CPIMçš„æ˜ å°„ï¼Œå®‰å…¨æ€§ä¿è¯ç­‰å†…å®¹è¿›è¡Œäº†å®šä¹‰,ä½¿ç”¨XMPPçš„æœ‰<strong>Google Talk,Jive Messager</strong></p>
<p><strong>XMPPå®ä½“åœ°å€</strong>å«åš<strong>JIDï¼ˆJabberæ ‡è¯†ï¼‰</strong>ï¼Œå®ƒç”±åŸŸæ ‡è¯†ç¬¦ã€ç»“ç‚¹æ ‡è¯†ç¬¦ã€èµ„æºæ ‡è¯†ç¬¦ä¸‰éƒ¨åˆ†ç»„æˆã€‚å½¢å¦‚ï¼šnode@domain/resource</p>
<p><strong>ç³»ç»Ÿæ„æ¶æ²¿ç”¨äº†E-mailç³»ç»Ÿçš„æ„æ¶</strong></p>
<ul>
<li><p>XMPPç³»ç»Ÿæ„æ¶</p>
<p>ä¸»è¦ç”±3ç§å®ä½“ç»„æˆï¼šXMPPå®¢æˆ·ï¼ŒXMPPæœåŠ¡å™¨ï¼ŒXMPPç½‘å…³</p>
</li>
<li><p>XMPPç³»ç»Ÿç‰¹ç‚¹</p>
<p><strong>ç”¨æˆ·/æœåŠ¡å™¨ä¸­è½¬æ¨¡å¼</strong></p>
<p><strong>åˆ†å¸ƒå¼ç½‘ç»œ</strong></p>
<p><strong>ç®€å•å®¢æˆ·æœºç«¯</strong></p>
</li>
</ul>
</li>
</ol>
<p>QQç”¨æˆ·ç™»å½•è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰å®¢æˆ·ç«¯æ¯æ¬¡ç™»é™†æ—¶ä¼šè®¿é—®è®°å½•ä¸Šæ¬¡ç™»é™†æœåŠ¡å™¨çš„åœ°å€çš„è®°å½•æ–‡ä»¶ï¼Œå¦‚æœæˆåŠŸåˆ™ä¸ä¼šé‡å‘DNSè¯·æ±‚ã€‚<br>ï¼ˆ2ï¼‰åœ¨QQé€šä¿¡ä¸­ï¼Œç”¨æˆ·å¿…é¡»å…ˆç™»å½•åæ‰å¯ä»¥è¿›è¡Œäº’ç›¸å‘é€ä¿¡æ¯ç­‰ã€‚<br>ï¼ˆ3ï¼‰<strong>æ¯æ¬¡ç™»é™†</strong>æ—¶QQå®¢æˆ·æœºä¼šå‘<strong>æœåŠ¡å™¨è·å–ä¸€ä¸ªä¼šè¯å¯†é’¥</strong>ã€‚</p>
<p>ï¼ˆ4ï¼‰å®ç°æˆåŠŸç™»å½•å‰å¯èƒ½è¿æ¥å¤šä¸ªç™»å½•æœåŠ¡å™¨</p>
<h2 id="5-2-P2Pæ–‡ä»¶å…±äº«"><a href="#5-2-P2Pæ–‡ä»¶å…±äº«" class="headerlink" title="5.2 P2Pæ–‡ä»¶å…±äº«"></a>5.2 P2Pæ–‡ä»¶å…±äº«</h2><p>æ–‡ä»¶å…±äº«æŠ€æœ¯æœ‰å¤šç§å®ç°æ–¹å¼ï¼š<strong>FTPæ–‡ä»¶å…±äº«ï¼ŒNFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿå…±äº«ï¼ŒWindowså…±äº«æ–‡ä»¶å¤¹ï¼Œä»¥åŠP2Pæ–‡ä»¶å…±äº«</strong></p>
<p>P2Pç½‘ç»œçš„ä¸»è¦ç»“æ„ç±»å‹åˆ†ä¸º<strong>é›†ä¸­å¼ï¼Œåˆ†å¸ƒå¼éç»“æ„åŒ–ï¼Œåˆ†å¸ƒå¼ç»“æ„åŒ–å’Œæ··åˆå¼</strong></p>
<h3 id="5-2-1-P2Pæ–‡ä»¶å…±äº«å†å²"><a href="#5-2-1-P2Pæ–‡ä»¶å…±äº«å†å²" class="headerlink" title="5.2.1 P2Pæ–‡ä»¶å…±äº«å†å²"></a>5.2.1 P2Pæ–‡ä»¶å…±äº«å†å²</h3><p>P2Pæ–‡ä»¶å…±äº«èµ·æºäº<strong>1999å¹´çš„éŸ³ä¹åˆ†äº«ç½‘ç«™Napster</strong>ï¼Œ<strong>é›†ä¸­å¼å¯¹ç­‰ç½‘ç»œç»“æ„</strong></p>
<ul>
<li>åœ¨<strong>ä¸­å¿ƒæœåŠ¡å™¨ç«¯</strong>å­˜æ”¾å¸Œæœ›å…±äº«çš„æ–‡ä»¶æè¿°ä¿¡æ¯</li>
<li>æ–‡ä»¶ä¾ç„¶å­˜æ”¾åœ¨ç”¨æˆ·çš„æœ¬åœ°ä¸»æœº</li>
</ul>
<p>2000å¹´3æœˆï¼Œå¦ä¸€ç§P2Pæ–‡ä»¶å…±äº«åº”ç”¨<strong>GnutElla</strong>é—®ä¸–ï¼Œæœ€åˆ<strong>é‡‡ç”¨åˆ†å¸ƒå¼éç»“æ„åŒ–å¯¹ç­‰ç½‘ç»œç»“æ„</strong></p>
<ul>
<li><p>åˆ†å¸ƒå¼éç»“æ„åŒ–P2Pç½‘ç»œé‡‡ç”¨<strong>éšæœºå›¾çš„ç»„ç»‡æ–¹å¼å½¢æˆä¸€ä¸ªæ¾æ•£ç½‘ç»œ</strong>ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢</p>
</li>
<li><p>ä¼˜ç‚¹æ˜¯é…ç½®ç®€å•ï¼Œä¸éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼Œåœ¨è§„æ¨¡å°æ—¶å€™å…·æœ‰å¾ˆé«˜çš„æŸ¥è¯¢æ•ˆç‡</p>
</li>
<li><p>ç¼ºç‚¹æ˜¯<strong>é‡‡ç”¨TTLï¼Œæ´ªæ³›ï¼Œéšæœºæ¼«æ­¥æˆ–è€…æœ‰é€‰æ‹©è½¬å‘ç®—æ³•</strong>ï¼ŒåŸºäºå¹¿æ’­è¿›è¡ŒæŸ¥æ‰¾ï¼Œç½‘ç»œæ‹“æ‰‘ç›´å¾„ä¸å¯æ§ï¼Œå¯æ‰©å±•æ€§è¾ƒå·®</p>
</li>
</ul>
<p>2000å¹´9æœˆï¼Œ<strong>eDonkey2000</strong>å‡ºç°ï¼Œç»§æ‰¿äº†GnutEllaçš„å…±äº«æ–‡ä»¶ç³»ç»Ÿä¼˜ç‚¹ï¼Œå¹¶<strong>ä¸ºæ–‡ä»¶å¢åŠ äº†å“ˆå¸Œï¼ˆhashï¼‰ä¿¡æ¯</strong></p>
<p>2001å¹´å¤ï¼Œ<strong>ç”±MITå¼€å‘</strong>çš„å¼€æºBTï¼ˆBitTorrent æ¯”ç‰¹æ´ªæµï¼‰å‡ºç°ï¼Œå¼•å‘äº’è”ç½‘æ–‡ä»¶å…±äº«çš„é©å‘½ï¼šæœ€åˆéœ€è¦ä¸­å¿ƒæœåŠ¡å™¨å­˜æ”¾ç”¨æˆ·ä¿¡æ¯ï¼Œè¯¥æœåŠ¡å™¨æˆä¸ºTrackeræœåŠ¡å™¨ï¼ŒBTç³»ç»Ÿè¦æ±‚æ–‡ä»¶å‘å¸ƒè€…åˆ¶ä½œä¸€ä¸ªæˆä¸ºç§å­çš„æ–‡ä»¶ï¼ˆ.torrentæ–‡ä»¶ï¼‰ä¸‹è½½è€…é€šè¿‡å‘å¸ƒè€…æä¾›çš„<strong>ç§å­æ–‡ä»¶é“¾æ¥åˆ°Trackerçš„æœåŠ¡å™¨</strong>ï¼Œè·å–å…¶ä»–ä¸‹è½½è€…çš„IPåœ°å€å’Œç«¯å£å·ï¼Œä¸‹è½½è€…å¾—åˆ°ä¿¡æ¯åï¼Œå¯ä»¥ä¸å…¶ä»–ä¸‹è½½è€…äº’è¿ï¼Œäº’è¿çš„ä¸‹è½½è€…å¯ä»¥é€šè¿‡ç§å­æ–‡ä»¶ç¡®è®¤å·²ç»æ‹¥æœ‰çš„æ–‡ä»¶å—ï¼Œå¹¶ç›¸äº’äº¤æ¢å„è‡ªçš„æ²¡æœ‰çš„æ–‡ä»¶å—ï¼Œå½“ä¸‹è½½å®Œæ¯•åï¼Œ<strong>ç”¨æˆ·è‡ªåŠ¨è½¬æ¢ä¸ºâ€œåšç§â€æ¨¡å¼</strong>ï¼Œè´Ÿè´£ä¸Šä¼ å…¶ä»–ç”¨æˆ·æ‰€éœ€è¦çš„æ–‡ä»¶å—ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>Trackerä»…è´Ÿè´£æä¾›ä¸‹è½½è¯¥æ–‡ä»¶çš„ç”¨æˆ·åˆ—è¡¨</strong>ï¼Œç”¨æˆ·æ•°è¶Šå¤šä¸‹è½½é€Ÿåº¦è¶Šå¿«ï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­åŠ å…¥äº†DHTçš„æ”¯æŒï¼Œä»¥å®ç°æ— TrackeræœåŠ¡å™¨æ–‡ä»¶ä¼ è¾“</p>
<p>ä½¿ç”¨äº†<strong>åˆ†å¸ƒå¼ç»“æ„åŒ–æ‹“æ‰‘çš„P2Pç½‘ç»œ</strong>ï¼š<strong>Pastry,Tapestry,Chord,CAN</strong></p>
<p>åˆ†å¸ƒå¼ç»“æ„åŒ–æ‹“æ‰‘çš„P2Pç½‘ç»œåŸºäº<strong>DHT</strong>(åˆ†å¸ƒå¼æ•£åˆ—è¡¨)çš„åˆ†å¸ƒå¼å‘ç°å’Œè·¯ç”±ç®—æ³•ã€‚é¿å…äº†ä¸­å¿ƒæœåŠ¡å™¨ï¼Œä¸éœ€è¦åŸºäºå¹¿æ’­è¿›è¡ŒæŸ¥æ‰¾ï¼Œ<strong>æ”¯æŒç²¾ç¡®å…³é”®è¯åŒ¹é…æŸ¥è¯¢</strong></p>
<p>æ··åˆå¼P2Pç½‘ç»œï¼š</p>
<p>ç´¢å¼•ç»“ç‚¹ä¿å­˜å¯ä»¥åˆ©ç”¨çš„æœç´¢ç»“ç‚¹ä¿¡æ¯ã€æœé›†çŠ¶æ€ä¿¡æ¯ä»¥åŠå°½åŠ›ç»´æŠ¤ç½‘ç»œçš„ç»“æ„ï¼Œä¸€ä¸ªç»“ç‚¹æ—¢å¯ä»¥æ˜¯æœç´¢ç»“ç‚¹ä¹Ÿå¯ä»¥æ˜¯ç´¢å¼•ç»“ç‚¹ã€‚ç´¢å¼•ç»“ç‚¹ä¸ä¼šç›´æ¥è¿æ¥åˆ°æœ‰ç‰ˆæƒçš„èµ„æ–™ï¼Œåªæ˜¯æœç´¢æ‰€éœ€èµ„æ–™ç›¸å…³çš„åœ°å€ï¼Œè‡³äºç”¨æˆ·åˆ°åº•è¿æ¥ä¸‹è½½äº†ä»€ä¹ˆå†…å®¹ä¸å®ƒæ— å…³ã€‚</p>
<h3 id="5-2-2-P2Pæ–‡ä»¶å…±äº«çš„ç†è®ºåŸºç¡€"><a href="#5-2-2-P2Pæ–‡ä»¶å…±äº«çš„ç†è®ºåŸºç¡€" class="headerlink" title="5.2.2 P2Pæ–‡ä»¶å…±äº«çš„ç†è®ºåŸºç¡€"></a>5.2.2 P2Pæ–‡ä»¶å…±äº«çš„ç†è®ºåŸºç¡€</h3><p><strong>å°ä¸–ç•Œå‡è®¾ï¼Œå…­åº¦åˆ†éš”ç†è®º</strong></p>
<p>2001å¹´ç§‹ï¼Œå“¥ä¼¦æ¯”äºšå¤§å­¦<strong>ç“¦ç‰¹æ–¯</strong>é€šè¿‡ç”µå­é‚®ä»¶é¢†å¯¼éªŒè¯</p>
<h3 id="5-2-3-P2Pæ–‡ä»¶å…±äº«ç¤ºä¾‹"><a href="#5-2-3-P2Pæ–‡ä»¶å…±äº«ç¤ºä¾‹" class="headerlink" title="5.2.3 P2Pæ–‡ä»¶å…±äº«ç¤ºä¾‹"></a>5.2.3 P2Pæ–‡ä»¶å…±äº«ç¤ºä¾‹</h3><p>Maze:æ”¯æŒ<strong>åœ¨çº¿èµ„æºæœç´¢å’Œæ–‡ä»¶ç›®å½•è§†å›¾</strong>ï¼Œå¯ä»¥<strong>å¤šç‚¹ä¸‹è½½</strong>å’Œ<strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼Œé‡‡ç”¨Maze<strong>ç§¯ç‚¹</strong>å’ŒMaze<strong>æ˜Ÿçº§</strong>æŠ€æœ¯ã€‚æ”¯æŒ<strong>å³æ—¶é€šä¿¡BBS</strong>ï¼›æ”¯æŒ<strong>è·¨é˜²ç«å¢™</strong>çš„æ–‡ä»¶å…±äº«ä¸ä¸‹è½½ï¼›æ”¯æŒ<strong>åœ¨çº¿èµ„æºæœç´¢</strong>å’Œ<strong>æ–‡ä»¶ç›®å½•è§†å›¾</strong>ï¼›æ”¯æŒç§¯ç‚¹çš„èµ„æºäº¤æ¢ä½“ç³»ï¼›é‡‡ç”¨ç¤¾äº¤ç½‘ç»œçš„ç½‘ç»œé“¾æ¥å…³ç³»ã€‚Mazeå±äºæ··åˆå‹P2Pç³»ç»Ÿï¼Œæ•´ä¸ªç³»ç»Ÿé™¤äº†å¤šä¸ªPeerå¤–ï¼Œè¿˜åŒ…æ‹¬é›†ä¸­å¼çš„<strong>ç”¨æˆ·ç®¡ç†æœåŠ¡å™¨</strong>ã€<strong>ç›®å½•æ”¶é›†æœåŠ¡å™¨</strong>ã€<strong>æ£€ç´¢æœåŠ¡å™¨</strong>ã€<strong>å¿ƒè·³æœåŠ¡å™¨</strong>å’Œ<strong>ç§å­æœåŠ¡å™¨</strong>ã€‚ä¸ºäº†å®ç°ç»“ç‚¹çš„å‘ç°ä¸é€šä¿¡ç­–ç•¥ï¼Œé‡‡ç”¨<strong>åˆ†å¸ƒå¼è®¤è¯æœºåˆ¶</strong>ã€‚æ··åˆP2Pç»“æ„ï¼Œé‡‡ç”¨URLè¡¨ç¤ºæ–‡ä»¶ä½ç½®ï¼Œç”¨XMLæ–¹å¼æ£€ç´¢æ¥å£</p>
<h2 id="5-3-IPTV"><a href="#5-3-IPTV" class="headerlink" title="5.3 IPTV"></a>5.3 IPTV</h2><h3 id="5-3-1-IPTVç³»ç»Ÿ"><a href="#5-3-1-IPTVç³»ç»Ÿ" class="headerlink" title="5.3.1 IPTVç³»ç»Ÿ"></a>5.3.1 IPTVç³»ç»Ÿ</h3><ol>
<li><p>è§†é¢‘ç‚¹æ’­</p>
<p>è§†é¢‘ç‚¹æ’­(Video On Demond,VOD)ä¹Ÿè¢«ç§°ä¸ºäº¤äº’å¼ç”µè§†ç‚¹æ’­ç³»ç»Ÿã€‚</p>
<p>VODçš„æœåŠ¡ç±»å‹åˆ†ä¸‰ç§ï¼Œä¸€ç§æ˜¯å°±è¿‘å¼ç‚¹æ’­ç”µè§†(Near Video On Demand,NVOD),ä¸€ç§æ˜¯çœŸå®ç‚¹æ’­ç”µè§†(True Video On demand,TVOD),è¿˜æœ‰ä¸€ç§æ˜¯äº¤äº’å¼ç‚¹æ’­ç”µè§†(Interactive Video On Demand,IVOD)</p>
<ul>
<li>NVOD:æ¯ä¸ªè§†é¢‘æµé—´éš”ä¸€å®šæ—¶é—´å°±å‘é€åŒæ ·çš„å†…å®¹ï¼Œç”¨æˆ·é€‰æ‹©è·æœ€è¿‘çš„æŸä¸ªæ—¶é—´èµ·ç‚¹è¿›è¡Œæ”¶çœ‹ã€‚</li>
<li>TVOD:æ”¯æŒå³ç‚¹å³æ”¾ï¼Œå½“ç”¨æˆ·æå‡ºè¯·æ±‚æ—¶ï¼Œè§†é¢‘æœåŠ¡å™¨ç«‹å³ä¼ é€ç”¨æˆ·æ‰€éœ€çš„è§†é¢‘å†…å®¹ã€‚æ¯ä¸ªè§†é¢‘æµåªä¸ºä¸€ä¸ªç”¨æˆ·æœåŠ¡</li>
<li>IVOD:ä¸ä»…æ”¯æŒå³ç‚¹å³æ”¾ï¼Œè€Œä¸”è¿˜å¯ä»¥è®©ç”¨æˆ·å¯¹è§†é¢‘æµè¿›è¡Œäº¤äº’å¼æ§åˆ¶ï¼Œå®ç°æ’­æ”¾å€’å›å¿«è¿›ç­‰åŠŸèƒ½</li>
</ul>
</li>
</ol>
<h3 id="5-3-2-IPTVå…³é”®æŠ€æœ¯"><a href="#5-3-2-IPTVå…³é”®æŠ€æœ¯" class="headerlink" title="5.3.2 IPTVå…³é”®æŠ€æœ¯"></a>5.3.2 IPTVå…³é”®æŠ€æœ¯</h3><ol>
<li><p>åª’ä½“å†…å®¹åˆ†å‘æŠ€æœ¯</p>
<p>åª’ä½“å†…å®¹åˆ†å‘ç½‘ç»œ(Media Content Delivery Network,MCDN)æŠ€æœ¯æ˜¯IPTVå¤§è§„æ¨¡åº”ç”¨çš„é‡è¦ä¿éšœ</p>
<ul>
<li>å†…å®¹å‘å¸ƒï¼šå°†<strong>å†…å®¹å‘å¸ƒæˆ–æŠ•é€’</strong>åˆ°è·ç¦»ç”¨æˆ·<strong>æœ€è¿‘çš„</strong>è¿œç¨‹æœåŠ¡ç‚¹</li>
<li>å†…å®¹è·¯ç”±ï¼šæ•´ä½“æ€§çš„ç½‘ç»œ<strong>è´Ÿè½½å‡è¡¡æŠ€æœ¯</strong>ï¼Œåˆ©ç”¨<strong>åº”ç”¨å±‚</strong>çš„æŠ€æœ¯ï¼Œä¿è¯<strong>ç”¨æˆ·å¾—åˆ°æœ€è¿‘å†…å®¹æº</strong>çš„å“åº”</li>
<li>å†…å®¹äº¤æ¢ï¼šåˆ©ç”¨<strong>åº”ç”¨å±‚</strong>äº¤æ¢ï¼Œæµåˆ†è£‚ï¼Œé‡å®šå‘åŠå®½å¸¦åª’ä½“åˆ†å‘ç­–ç•¥ç­‰æŠ€æœ¯ï¼Œæ™ºèƒ½åœ°<strong>å¹³è¡¡è´Ÿè½½æµé‡</strong></li>
<li>æ€§èƒ½ç®¡ç†ï¼šè·å–ç½‘ç»œéƒ¨ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦å¤–æµ‹é‡å†…å®¹å‘å¸ƒçš„ç«¯åˆ°ç«¯æ€§èƒ½ï¼Œ<strong>ä¿è¯ç½‘ç»œå¤„äºæœ€ä½³è¿è¡ŒçŠ¶æ€</strong></li>
<li>IPæ‰¿è½½ç½‘ï¼šåˆ©ç”¨IPç½‘ç»œæŠ€æœ¯ï¼Œä¸ºIPTVåº”ç”¨<strong>æä¾›å¯é çš„IPç½‘ç»œå¹³å°</strong></li>
</ul>
</li>
<li><p>æ•°å­—ç‰ˆæƒç®¡ç†æŠ€æœ¯</p>
<ul>
<li>æ•°æ®åŠ å¯†</li>
<li>ç‰ˆæƒä¿æŠ¤</li>
<li>æ•°å­—æ°´å°</li>
</ul>
</li>
<li><p>IPTVè¿è¥æ”¯æ’‘ç®¡ç†ç³»ç»Ÿ</p>
</li>
</ol>
<h2 id="5-4-VoIP"><a href="#5-4-VoIP" class="headerlink" title="5.4 VoIP"></a>5.4 VoIP</h2><p>VoIPï¼ˆVoice over IPï¼‰ä¿—ç§°IPç”µè¯ï¼ˆInternet Protocol Phoneï¼‰ã€‚IPç”µè¯ç³»ç»Ÿæœ‰4ä¸ªåŸºæœ¬ç»„ä»¶ï¼šç»ˆç«¯è®¾å¤‡ã€ç½‘å…³ã€å¤šç‚¹æ§åˆ¶å•å…ƒå’Œç½‘å®ˆã€‚ç»ˆç«¯è®¾å¤‡ï¼ˆTerminalï¼‰æ˜¯ä¸€ä¸ªIPç”µè¯å®¢æˆ·ç»ˆç«¯ï¼Œå¯ä»¥æ˜¯è½¯ä»¶ã€‚ç½‘å…³æ˜¯é€šè¿‡IPç½‘ç»œæä¾›è¯­éŸ³é€šä¿¡çš„å…³é”®è®¾å¤‡ï¼Œæ˜¯IPç½‘ç»œå’ŒPSTNï¼ˆPublic Switched Telephone Networkï¼Œå…¬ç”¨ç”µè¯äº¤æ¢ç½‘ç®€ç§°ç”µè¯ç½‘ï¼‰ç½‘ç»œä¹‹é—´çš„æ¥å£è®¾å¤‡ï¼Œä»ç½‘ç»œçš„è§’åº¦çœ‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªH.323è®¾å¤‡ã€‚å¤šç‚¹æ§åˆ¶å•å…ƒMCUï¼ˆMultipoint Control Unitï¼‰çš„åŠŸèƒ½åœ¨äºåˆ©ç”¨IPç½‘ç»œå®ç°å¤šç‚¹é€šä¿¡ã€‚ç½‘å®ˆï¼ˆGatekeeperï¼‰ä¸»è¦è´Ÿè´£ç”¨æˆ·çš„æ³¨å†Œå’Œç®¡ç†ç­‰ã€‚</p>
<h3 id="5-4-2-VoIPç³»ç»Ÿç»„æˆ"><a href="#5-4-2-VoIPç³»ç»Ÿç»„æˆ" class="headerlink" title="5.4.2 VoIPç³»ç»Ÿç»„æˆ"></a>5.4.2 VoIPç³»ç»Ÿç»„æˆ</h3><ol>
<li><p>IPç”µè¯ç½‘å…³ï¼Œæ˜¯IPç½‘ç»œå’Œç”µè¯ç½‘ç»œä¹‹é—´çš„æ¡¥æ¢</p>
<p>åŸºæœ¬åŠŸèƒ½ï¼š<strong>å·ç æŸ¥è¯¢ï¼Œå»ºç«‹é€šä¿¡è¿æ¥ï¼ˆä¿¡å·è°ƒåˆ¶ï¼‰ï¼Œè·¯ç”±å¯»å€</strong></p>
</li>
<li><p>ç½‘å®ˆ</p>
<p>ç½‘å®ˆæ˜¯ä¸€ä¸ªä¸­å¤®æ§åˆ¶å®ä½“ï¼Œåœ¨VoIPç³»ç»Ÿä¸­èµ·ç®¡ç†ä½œç”¨ã€‚</p>
<p>ç½‘å®ˆæ˜¯VoIPç³»ç»Ÿä¸­çš„<strong>æ¶ˆæ¯æ§åˆ¶ä¸­å¿ƒ</strong>ï¼Œå¯ä»¥è¿›è¡Œ<strong>å‘¼å«æ§åˆ¶ï¼Œåœ°å€è§£æï¼Œå‘¼å«æˆæƒï¼Œèº«ä»½éªŒè¯ï¼Œé›†ä¸­è´¦åŠ¡å’Œè®¡è´¹ç®¡ç†</strong>ï¼Œ<strong>å­˜ç•™å‘¼å«è¯¦ç»†è®°å½•</strong>ç­‰æ“ä½œã€‚</p>
<p>ç½‘å®ˆè¿˜å¯ä»¥åƒå®æ—¶ç½‘ç®¡ä¸€æ ·<strong>ç›‘æ§ç½‘ç»œï¼Œå¹³è¡¡è´Ÿè½½ï¼Œç®¡ç†å¸¦å®½ä»¥åŠæä¾›ä¸ç°æœ‰ç³»ç»Ÿçš„æ¥å£</strong>ã€‚</p>
</li>
</ol>
<h3 id="5-4-4-VoIPå®ä¾‹"><a href="#5-4-4-VoIPå®ä¾‹" class="headerlink" title="5.4.4 VoIPå®ä¾‹"></a>5.4.4 VoIPå®ä¾‹</h3><p>Skypeæ˜¯è‘—åKazaaè½¯ä»¶åˆ›å§‹äººNiklasæ¨å‡ºçš„ä¸€æ¬¾Internetå³æ—¶è¯­éŸ³é€šä¿¡è½¯ä»¶</p>
<ol>
<li>åŸºæœ¬æ¦‚å¿µ<ul>
<li>SkypeClient:SC,SKypeç³»ç»Ÿå®¢æˆ·æœº</li>
<li>SuperNode:SNï¼ŒåŠ¨æ€ç”Ÿæˆï¼Œä½œç”¨åƒInternetä¸­çš„æ ¸å¿ƒè·¯ç”±å™¨ï¼Œæ¯ä¸ªSCæ ¹æ®å…¶å†…å­˜ï¼Œå¸¦å®½ä»¥åŠä¸Šçº¿æ—¶é—´ä¸ºå› ç´ ï¼Œéƒ½æœ‰å¯èƒ½è¢«é€‰ä¸ºSN</li>
<li>å…¶ä»–è§ä¹¦æœ¬</li>
</ul>
</li>
<li>è¶…çº§ç»“ç‚¹ï¼ˆSNï¼‰çš„ä½œç”¨å°±åƒæ˜¯å› ç‰¹ç½‘ä¸­çš„æ ¸å¿ƒè·¯ç”±å™¨ï¼Œè´Ÿè´£å®¢æˆ·ç«¯çš„è¿æ¥ã€‚å¥½å‹åˆ—è¡¨ï¼ˆBuddy Listï¼‰ç»è¿‡äº†æ•°å­—åŒ–ç­¾åå’ŒåŠ å¯†å¤„ç†ï¼Œä¸æ˜¯æ˜æ–‡å­˜å‚¨ã€‚<strong>Skypeé‡‡ç”¨äº†256 bitçš„AESåŠ å¯†ç®—æ³•ï¼Œä»¥åŠæ··åˆå¼ç½‘ç»œæ‹“æ‰‘</strong>ã€‚</li>
</ol>
<h2 id="5-5-ç½‘ç»œæœç´¢æŠ€æœ¯"><a href="#5-5-ç½‘ç»œæœç´¢æŠ€æœ¯" class="headerlink" title="5.5 ç½‘ç»œæœç´¢æŠ€æœ¯"></a>5.5 ç½‘ç»œæœç´¢æŠ€æœ¯</h2><h3 id="5-5-2-æœç´¢å¼•æ“çš„ä¸»è¦å†…å®¹"><a href="#5-5-2-æœç´¢å¼•æ“çš„ä¸»è¦å†…å®¹" class="headerlink" title="5.5.2 æœç´¢å¼•æ“çš„ä¸»è¦å†…å®¹"></a>5.5.2 æœç´¢å¼•æ“çš„ä¸»è¦å†…å®¹</h3><p><strong>æœç´¢å™¨ï¼Œç´¢å¼•å™¨ï¼Œæ£€ç´¢å™¨ï¼Œç”¨æˆ·æ¥å£</strong></p>
<h1 id="ç¬¬å…­ç« -ç½‘ç»œç®¡ç†ä¸ç½‘ç»œå®‰å…¨"><a href="#ç¬¬å…­ç« -ç½‘ç»œç®¡ç†ä¸ç½‘ç»œå®‰å…¨" class="headerlink" title="ç¬¬å…­ç«  ç½‘ç»œç®¡ç†ä¸ç½‘ç»œå®‰å…¨"></a>ç¬¬å…­ç«  ç½‘ç»œç®¡ç†ä¸ç½‘ç»œå®‰å…¨</h1><h2 id="6-1-ç½‘ç»œç®¡ç†æŠ€æœ¯"><a href="#6-1-ç½‘ç»œç®¡ç†æŠ€æœ¯" class="headerlink" title="6.1 ç½‘ç»œç®¡ç†æŠ€æœ¯"></a>6.1 ç½‘ç»œç®¡ç†æŠ€æœ¯</h2><h3 id="6-1-1-ç½‘ç»œç®¡ç†çš„æ¦‚å¿µ"><a href="#6-1-1-ç½‘ç»œç®¡ç†çš„æ¦‚å¿µ" class="headerlink" title="6.1.1 ç½‘ç»œç®¡ç†çš„æ¦‚å¿µ"></a>6.1.1 ç½‘ç»œç®¡ç†çš„æ¦‚å¿µ</h3><p>é€šå¸¸æ¶‰åŠï¼šç½‘ç»œæä¾›ï¼Œç½‘ç»œç»´æŠ¤ï¼Œç½‘ç»œç®¡ç†</p>
<p>ISOå®šä¹‰ç½‘ç®¡æ¨¡å‹åŒ…æ‹¬ï¼”ä¸ªéƒ¨åˆ†ï¼š<strong>ç»„ç»‡æ¨¡å‹ï¼Œä¿¡æ¯æ¨¡å‹ï¼Œé€šä¿¡æ¨¡å‹ä¸åŠŸèƒ½æ¨¡å‹</strong></p>
<p>ç»„ç»‡æ¨¡å‹:æè¿°ç½‘ç®¡ç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†å’Œç»“æ„</p>
<p>ä¿¡æ¯æ¨¡å‹ï¼šç½‘ç®¡ç³»ç»Ÿçš„å¯¹è±¡å‘½åå’Œç»“æ„</p>
<p>é€šä¿¡æ¨¡å‹ï¼šç½‘ç®¡ç³»ç»Ÿä½¿ç”¨çš„ç½‘ç®¡åè®®</p>
<p>åŠŸèƒ½æ¨¡å‹ï¼šç½‘ç®¡ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</p>
<p><strong>ç½‘ç»œç®¡ç†æ¨¡å¼é€šå¸¸ä¸ºé›†ä¸­å¼ç½‘ç»œç®¡ç†æˆ–ç®¡ç†è€…ï¼ç½‘ç®¡ä»£ç†æ¨¡å‹</strong></p>
<h3 id="6-1-2-ç½‘ç»œç®¡ç†åŠŸèƒ½åŸŸ"><a href="#6-1-2-ç½‘ç»œç®¡ç†åŠŸèƒ½åŸŸ" class="headerlink" title="6.1.2 ç½‘ç»œç®¡ç†åŠŸèƒ½åŸŸ"></a>6.1.2 ç½‘ç»œç®¡ç†åŠŸèƒ½åŸŸ</h3><p>ç½‘ç»œç®¡ç†åŠŸèƒ½åŸŸå®šä¹‰çš„æ˜¯ä¸»è¦çš„ç½‘ç®¡åŠŸèƒ½ï¼Œå¹¶å°†è¿™äº›åŠŸèƒ½åˆ’åˆ†ä¸ºï¼•ä¸ªéƒ¨åˆ†ï¼š<strong>é…ç½®ç®¡ç†ï¼Œæ•…éšœç®¡ç†ï¼Œæ€§èƒ½ç®¡ç†ï¼Œå®‰å…¨ç®¡ç†ä¸è®°è´¦ç®¡ç†</strong></p>
<p>é…ç½®ç®¡ç†ï¼šä¸­é•¿æœŸï¼Œç½‘ç»œå¢å®¹ï¼Œè®¾å¤‡æ›´æ–°ï¼Œæ–°æŠ€æœ¯åº”ç”¨ï¼Œæ–°ä¸šåŠ¡å¼€é€šï¼Œæ–°ç”¨æˆ·åŠ å…¥ï¼Œä¸šåŠ¡æ’¤é”€ï¼Œç”¨æˆ·è¿ç§»</p>
<p>æ•…éšœç®¡ç†ï¼š<strong>å‘ç°ä¸æ’é™¤æ•…éšœï¼Œä¿è¯ç½‘ç»œèµ„æºæ— éšœç¢æ— é”™è¯¯è¿è¥</strong>ï¼ŒåŒ…æ‹¬éšœç¢ç®¡ç†ï¼Œæ•…éšœæ¢å¤ï¼Œé¢„é˜²æ•…éšœï¼Œæ•…éšœç®¡ç†åŒ…æ‹¬æ£€æµ‹éš”ç¦»çº æ­£æ•…éšœ</p>
<p>æ€§èƒ½ç®¡ç†ï¼šæµ‹è¯•æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ååç‡ï¼Œåˆ©ç”¨ç‡ï¼Œå“åº”æ—¶é—´ï¼Œä¼ è¾“å»¶æ—¶ç­‰ï¼Œæ€§èƒ½ç®¡ç†å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<strong>æ€§èƒ½ç›‘æ§å’Œç½‘ç»œæ§åˆ¶</strong>ï¼Œæ€§èƒ½ç›‘æ§æ”¶é›†ç½‘ç»œçŠ¶æ€ä¿¡æ¯ï¼Œç½‘ç»œæ§åˆ¶å€¼ä¸ºæ”¹å–„æ€§èƒ½é‡‡ç”¨çš„æªæ–½</p>
<p>å®‰å…¨ç®¡ç†ï¼š<strong>æ§åˆ¶ä¸ç»´æŠ¤å¯¹ç½‘ç»œèµ„æºçš„è®¿é—®æƒé™ï¼Œå®‰å…¨æœåŠ¡è®¾æ–½çš„å»ºç«‹æ§åˆ¶ä¸åˆ é™¤</strong>ï¼Œä¿¡æ¯åˆ†å‘ï¼Œäº‹ä»¶é€šçŸ¥ï¼Œç½‘ç»œæ“ä½œè®°å½•ç»´æŠ¤</p>
<p>è®¡è´¹ç®¡ç†ï¼šæ§åˆ¶ç›‘æ§ç½‘ç»œæ“ä½œçš„è´¹ç”¨ä¸ä»£ä»·ï¼Œè¿˜è¿›è¡Œç½‘ç»œèµ„æºåˆ©ç”¨ç‡çš„ç»Ÿè®¡å’Œç½‘ç»œçš„æˆæœ¬æ•ˆç›Šçš„æ ¸ç®—</p>
<h3 id="6-1-3-ç½‘ç»œç®¡ç†ç³»ç»Ÿ"><a href="#6-1-3-ç½‘ç»œç®¡ç†ç³»ç»Ÿ" class="headerlink" title="6.1.3 ç½‘ç»œç®¡ç†ç³»ç»Ÿ"></a>6.1.3 ç½‘ç»œç®¡ç†ç³»ç»Ÿ</h3><p>ç½‘ç»œç®¡ç†ç³»ç»Ÿ(Network Management System,NMS)é€šå¸¸ç§°ä¸ºç½‘ç®¡ç³»ç»Ÿï¼Œæ˜¯ç”¨æ¥å®ç°ç½‘ç®¡åŠŸèƒ½çš„è½¯ä»¶æˆ–ç¡¬ä»¶ç³»ç»Ÿã€‚</p>
<p><strong>ç®¡ç†å¯¹è±¡</strong>æ˜¯ç»è¿‡æŠ½è±¡çš„ç½‘ç»œå…ƒç´ ï¼Œå¯¹åº”äºç½‘ç»œä¸­å…·ä½“å¯ä»¥æ“ä½œçš„æ•°æ®ï¼Œä¾‹å¦‚ç½‘ç»œè®¾å¤‡çš„å·¥ä½œå‚æ•°ï¼Œç½‘ç»œæ€§èƒ½çš„ç»Ÿè®¡å‚æ•°ç­‰ã€‚<strong>ç®¡ç†å¯¹è±¡ç›¸å…³ä¿¡æ¯å‚¨å­˜åœ¨MIBä¸­ï¼Œæ¯ä¸ªç½‘ç®¡ç³»ç»Ÿéƒ½éœ€è¦MIBçš„æ”¯æŒ</strong></p>
<p>ç½‘ç»œç®¡ç†æ¶‰åŠåˆ°ç½‘ç»œä¸­çš„å„ç§èµ„æºï¼Œå¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºã€‚<br>ç¡¬ä»¶èµ„æºæ˜¯æŒ‡ç‰©ç†ä»‹è´¨ã€è®¡ç®—æœºè®¾å¤‡å’Œç½‘ç»œäº’è”èµ„æºã€‚ç‰©ç†ä»‹è´¨é€šå¸¸æ˜¯ç‰©ç†å±‚è®¾å¤‡ã€å¦‚ç½‘å¡ã€åŒç»çº¿ç­‰ï¼›è®¡ç®—æœºè®¾å¤‡åŒ…æ‹¬æ‰“å°æœºå’Œå­˜å‚¨è®¾å¤‡åŠå…¶ä»–è®¡ç®—æœºå¤–å›´è®¾å¤‡ï¼›å¸¸ç”¨çš„ç½‘ç»œäº’è”è®¾å¤‡æœ‰ä¸­ç»§å™¨ã€ç½‘æ¡¥ã€è·¯ç”±å™¨ã€ç½‘å…³ç­‰ã€‚è½¯ä»¶èµ„æºä¸»è¦åŒ…æ‹¬æ“ä½œç³»ç»Ÿã€åº”ç”¨è½¯ä»¶å’Œé€šä¿¡è½¯ä»¶ã€‚</p>
<p><strong>ç®¡ç†åè®®</strong>è´Ÿè´£åœ¨ç½‘ç»œå·¥ä½œç«™ä¸ç½‘ç»œè®¾å¤‡çš„ç®¡ç†è¿›ç¨‹ä¹‹é—´é€šä¿¡ï¼Œä¼ è¾“ä¿¡æ¯åŒ…æ‹¬å‘é€çš„æ“ä½œå‘½ä»¤ä¸è¿”å›çš„æ“ä½œç»“æœã€‚</p>
<p>ç½‘ç®¡ç³»ç»Ÿé€šå¸¸åˆ†ä¸ºä¸¤ç±»ï¼šç½‘å…ƒç®¡ç†ç³»ç»Ÿ(Element Management System,EMS)åªè´Ÿè´£ç®¡ç†å•ç‹¬çš„ç½‘ç»œå…ƒç´ ï¼ˆç½‘ç»œè®¾å¤‡ï¼‰ã€‚å¦ä¸€ç§æ˜¯é€šç”¨çš„ç½‘ç»œç®¡ç†ç³»ç»Ÿ(Network Management System,NMS)è´Ÿè´£ç®¡ç†æ•´ä¸ªç½‘ç»œè€Œä¸æ˜¯å•ä¸ªè®¾å¤‡ï¼Œé€šå¸¸ç”¨äºæŒæ¡æ•´ä¸ªç½‘ç»œçš„å·¥ä½œçŠ¶æ€ï¼Œä½œä¸ºä½œä¸ºåº•å±‚çš„ç½‘ç»œå¹³å°æœåŠ¡äºEMS.</p>
<h3 id="6-1-4-ç½‘ç»œç®¡ç†åè®®"><a href="#6-1-4-ç½‘ç»œç®¡ç†åè®®" class="headerlink" title="6.1.4 ç½‘ç»œç®¡ç†åè®®"></a>6.1.4 ç½‘ç»œç®¡ç†åè®®</h3><ol>
<li><p>SNMPåè®®</p>
<p><strong>Internetå·¥ç¨‹ä»»åŠ¡ç»„(Internet Engineering Task Force,IETF)æ˜¯å¾ˆå¤šäº’è”ç½‘æ ‡å‡†çš„åˆ¶å®šè€…ï¼Œåˆ¶å®šäº†ç®€å•ç½‘ç»œç®¡ç†åè®®(Simple Network Management Protocol,SNMP)</strong>æ˜¯ä¸€ç§é¢å‘Internetçš„ç½‘ç®¡åè®®ï¼Œé’ˆå¯¹çš„ç®¡ç†å¯¹è±¡æ˜¯å„ç§ç½‘ç»œè®¾å¤‡</p>
<p>1987å¹´IETFåˆ¶ä½œäº†ç®€å•ç½‘å…³åè®®(Simple Gateway Monitoring Protocol,SGMP)ï¼Œ<strong>SNMPåè®®åœ¨SGMPçš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ã€‚</strong></p>
<p>ç¬¬ä¸€ä¸ªç‰ˆæœ¬è®¾è®¡ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œ<strong>ç¬¬äºŒä¸ªç‰ˆæœ¬å¢åŠ äº†æ“ä½œç±»å‹ä¸æ”¯æŒå¤šå±‚ä¼ è¾“å±‚åè®®ï¼Œç¬¬ä¸‰ä¸ªç‰ˆæœ¬æä¾›äº†å®‰å…¨ä¸æ”¹è¿›çš„æ¡†æ¶ç»“æ„ã€‚</strong></p>
<p>ç”±äºå¼€å§‹çš„SNMPæ²¡æœ‰è€ƒè™‘å®‰å…¨é—®é¢˜ï¼ŒSNMPv2å¼€å§‹åœ¨æä¾›å®‰å…¨æ€§<strong>(å®‰å…¨æ€§ä¸æ˜¯é‡ç‚¹å†…å®¹)</strong>å’Œæ›´æœ‰æ•ˆçš„ä¼ é€’ç®¡ç†ä¿¡æ¯æ–¹é¢åŠ ä»¥æ”¹è¿›ï¼Œå…·ä½“åŒ…æ‹¬æä¾›éªŒè¯ã€åŠ å¯†å’Œæ—¶é—´åŒæ­¥æœºåˆ¶ã€‚SNMPv3çš„é‡ç‚¹æ˜¯å®‰å…¨ã€å¯ç®¡ç†çš„ä½“ç³»ç»“æ„å’Œè¿œç¨‹é…ç½®ã€‚</p>
<p>SNMPæ˜¯ä¸€ç§<strong>åº”ç”¨å±‚çš„åè®®</strong>ï¼Œé‡‡ç”¨å®¢æˆ·æœº/ä¸»æœºçš„å½¢å¼</p>
<p>SNMPåœ¨ä¼ è¾“å±‚é‡‡ç”¨æ”¯æŒæ— çº¿è¿æ¥æœåŠ¡çš„<strong>UDP</strong>åè®®ã€‚ç½‘ç»œè®¾å¤‡çš„ç®¡ç†ä¿¡æ¯å¯ä»¥åˆ†ä¸ºå¾ˆå¤šç±»å‹ï¼Œå¹¶<strong>ä¿å­˜åœ¨MIBçš„ç®¡ç†å¯¹è±¡ä¸­</strong>ã€‚SNMPåè®®é‡‡ç”¨<strong>è½®è¯¢ç›‘æ§æ–¹å¼</strong>ï¼Œç®¡ç†å™¨å®šæ—¶æƒ³ä»£ç†è¯·æ±‚è·å¾—ç®¡ç†ä¿¡æ¯ï¼Œå¹¶æ ¹æ®è¿”å›ä¿¡æ¯åˆ¤æ–­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ã€‚</p>
<p>MIBï¼ˆç®¡ç†ä¿¡æ¯åº“ï¼‰æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œå®ƒä»£è¡¨äº†æŸä¸ªè®¾å¤‡æˆ–æœåŠ¡çš„ä¸€å¥—å¯ç®¡ç†å¯¹è±¡ã€‚ç”±SNMPç®¡ç†çš„<strong>æ¯å°ä¸»æœºå¿…é¡»æœ‰ä¸€ä¸ªMIB</strong>ï¼Œå®ƒæè¿°äº†è¯¥ä¸»æœºä¸Šçš„å¯ç®¡ç†å¯¹è±¡ã€‚æ‰€æœ‰çš„MIBå¿…é¡»ç”¨ç²¾ç¡®çš„ç»„ç»‡ç»“æ„å®šä¹‰ã€‚SNMPç®¡ç†å™¨åœ¨ä¸å…¶ä»–ä»£ç†è¿æ¥æ—¶ï¼Œé€šè¿‡MIBä¸­çš„ä¿¡æ¯ï¼Œæ¥è¯†åˆ«è¯¥ä»£ç†ä¸Šçš„ä¿¡æ¯æ˜¯å¦‚ä½•ç»„ç»‡çš„ã€‚</p>
<p>SNMPä»è¢«ç®¡ç†è®¾å¤‡ä¸­æ”¶é›†æ•°æ®æœ‰ä¸¤ç§æ–¹æ³•ï¼š<strong>ä¸€ç§æ˜¯è½®è¯¢ï¼ˆpollingï¼‰æ–¹æ³•ï¼Œå¦ä¸€ç§æ˜¯åŸºäºä¸­æ–­ï¼ˆinterrupt-basedï¼‰çš„æ–¹æ³•</strong></p>
<p>ç®¡ç†å™¨å’Œä»£ç†æ˜¯ä¸€å¯¹å¤šå…³ç³»</p>
<p>RMONæä¾›è¡¥å……åŠŸèƒ½</p>
</li>
<li><p>CMIPåè®®</p>
<p><strong>ISOåˆ¶å®š</strong>çš„é€šç”¨ç®¡ç†ä¿¡æ¯æœåŠ¡(Common Management Information Service,CMIS)ä¸é€šç”¨ç®¡ç†ä¿¡æ¯åè®®(Common Management Information Protocol,CMIP)</p>
<p>CMIPæ˜¯ä¸€ç§<strong>åº”ç”¨å±‚çš„åè®®</strong></p>
<p>CMIP<strong>å»ºç«‹åœ¨OSIæ¨¡å‹åŸºç¡€ä¸Š</strong></p>
<p>åœ¨<strong>ä¼ è¾“å±‚é‡‡ç”¨æ”¯æŒæœ‰è¿æ¥æœåŠ¡çš„åè®®</strong>ï¼Œä¾‹å¦‚OSIæ¨¡å‹å®šä¹‰çš„TP3åè®®ï¼ŒCMIPç³»ç»Ÿ<strong>ä¼ è¾“ä¿¡æ¯ä¹‹å‰éœ€è¦é¢„å…ˆå»ºç«‹è¿æ¥ã€‚</strong></p>
<p>é‡‡ç”¨å§”æ‰˜ç›‘æ§æœºåˆ¶</p>
</li>
</ol>
<h2 id="6-2-ç½‘ç»œå®‰å…¨çš„æ¦‚å¿µ"><a href="#6-2-ç½‘ç»œå®‰å…¨çš„æ¦‚å¿µ" class="headerlink" title="6.2 ç½‘ç»œå®‰å…¨çš„æ¦‚å¿µ"></a>6.2 ç½‘ç»œå®‰å…¨çš„æ¦‚å¿µ</h2><h3 id="6-2-2-ç½‘ç»œå®‰å…¨æœåŠ¡ä¸æ³•å¾‹æ³•è§„"><a href="#6-2-2-ç½‘ç»œå®‰å…¨æœåŠ¡ä¸æ³•å¾‹æ³•è§„" class="headerlink" title="6.2.2 ç½‘ç»œå®‰å…¨æœåŠ¡ä¸æ³•å¾‹æ³•è§„"></a>6.2.2 ç½‘ç»œå®‰å…¨æœåŠ¡ä¸æ³•å¾‹æ³•è§„</h3><ol>
<li><p>ç½‘ç»œå®‰å…¨æœåŠ¡åº”è¯¥æä¾›ä»¥ä¸‹åŸºæœ¬ä¿éšœï¼š</p>
<ol>
<li>å¯ç”¨æ€§ï¼šå°½ç®¡å¯èƒ½å­˜åœ¨çªå‘äº‹ä»¶ï¼ˆè‡ªç„¶ç¾å®³ï¼Œçªç„¶æ–­ç”µï¼Œäº‹æ•…ç­‰ï¼‰æƒ…å†µä¸‹ï¼Œç½‘ç»œä»ç„¶å¯ä»¥æ­£å¸¸è¿è½¬ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å„ç§ç½‘ç»œæœåŠ¡</li>
<li>æœºå¯†æ€§ï¼šä¿è¯ç½‘ç»œä¸­çš„æ•°æ®ä¸é¦éæ³•æˆªè·æˆ–éæˆæƒè®¿é—®ï¼Œä¿æŠ¤æ•æ„Ÿæ•°æ®å’Œæ¶‰åŠä¸ªäººéšç§ä¿¡æ¯çš„å®‰å…¨</li>
<li>å®Œæ•´æ€§ï¼šä¿è¯æ•°æ®å®Œæ•´ï¼Œæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œæ’å…¥æˆ–åˆ é™¤</li>
<li>ä¸å¯å¦è®¤æ€§ï¼šç¡®è®¤é€šä¿¡å‚ä¸è€…çš„èº«ä»½çœŸå®æ€§ï¼Œé˜²æ­¢å¯¹å·²å‘é€æˆ–æ¥å—çš„ä¿¡æ¯å¦è®¤çš„ç°è±¡å‡ºç°</li>
<li>å¯æ§æ€§ï¼šæ§åˆ¶ä¸é™å®šç½‘ç»œç”¨æˆ·å¯¹ä¸»æœºç³»ç»Ÿï¼Œç½‘ç»œæœåŠ¡ä¸ç½‘ç»œä¿¡æ¯èµ„æºçš„è®¿é—®å’Œä½¿ç”¨ï¼Œé˜²æ­¢éæˆæƒç”¨æˆ·è¯»å–å†™å…¥åˆ é™¤æ•°æ®</li>
</ol>
</li>
<li><p>ç½‘ç»œå®‰å…¨çš„æ³•å¾‹æ³•è§„ï¼š</p>
<p><strong>ç¾å›½æ”¿åºœå®šåˆ¶</strong>çš„å¯ä¿¡ç”¨è®¡ç®—æœºç³»ç»Ÿè¯„ä¼°å‡†åˆ™(TC-SEC-NCSC)å°†è®¡ç®—æœºç³»ç»Ÿå®‰å…¨ç­‰çº§åˆ†ä¸ºï¼”ç±»ï¼—ä¸ªç­‰çº§ï¼Œå³D,C1,C2,B1,B2,B3ä¸A1,<strong>ï¼¤çº§ç³»ç»Ÿå®‰å…¨çº§åˆ«æœ€ä½ï¼ŒA1çº§ç³»ç»Ÿçš„å®‰å…¨è¦æ±‚æœ€é«˜</strong></p>
<p>D:éå®‰å…¨ä¿æŠ¤ç±»ï¼ŒC:è‡ªä¸»ä¿æŠ¤ç±»å‹ï¼ŒB:å¼ºåˆ¶å‹å®‰å…¨ä¿æŠ¤ç±»ï¼ŒA1:ç›¸å¯¹Båœ¨å®‰å…¨å®¡è®¡ï¼Œå®‰å…¨æµ‹è¯•ï¼Œé…ç½®ç®¡ç†ç­‰æ–¹é¢æå‡ºæ›´é«˜è¦æ±‚</p>
<p>D1æ˜¯æœ€å°çš„ä¿æŠ¤çº§åˆ«ã€‚ä¸»è¦ç‰¹å¾æ˜¯ä¿æŠ¤æªæ–½å¾ˆå°‘ï¼Œæ²¡æœ‰å®‰å…¨åŠŸèƒ½ã€‚</p>
<p>C1æ˜¯æœ‰é€‰æ‹©çš„å®‰å…¨ä¿æŠ¤ã€‚ä¸»è¦ç‰¹å¾æ˜¯æœ‰é€‰æ‹©çš„å­˜å–æ§åˆ¶ï¼Œç”¨æˆ·ä¸æ•°æ®åˆ†ç¦»ï¼Œæ•°æ®ä¿æŠ¤ä»¥ç”¨æˆ·ç»„ä¸ºå•ä½ã€‚<br>C2æ˜¯å—æ§çš„è®¿é—®æ§åˆ¶ã€‚ä¸»è¦ç‰¹å¾æ˜¯å­˜å–æ§åˆ¶ä»¥ç”¨æˆ·ä¸ºå•ä½ï¼Œå¹¿æ³›çš„å®¡è®¡ã€‚<br>B1æ˜¯æ ‡è®°å®‰å…¨ä¿æŠ¤ã€‚é™¤äº†C2çº§çš„å®‰å…¨è¦æ±‚å¤–ï¼Œå¢åŠ å®‰å…¨ç­–ç•¥æ¨¡å‹ï¼Œæ•°æ®æ ‡å·ï¼ˆå®‰å…¨å’Œå±æ€§ï¼‰ï¼Œæ‰˜ç®¡è®¿é—®æ§åˆ¶ç­‰ã€‚<br>B2æ˜¯ç»“æ„åŒ–å®‰å…¨ä¿æŠ¤ã€‚è®¾è®¡ç³»ç»Ÿæ—¶å¿…é¡»æœ‰ä¸€ä¸ªåˆç†çš„æ€»ä½“è®¾è®¡æ–¹æ¡ˆï¼Œé¢å‘å®‰å…¨çš„ä½“ç³»ç»“æ„ï¼Œéµå¾ªæœ€å°æˆæƒåŸåˆ™ï¼Œå…·æœ‰è¾ƒå¥½çš„æŠ—æ¸—é€èƒ½åŠ›ï¼Œè®¿é—®æ§åˆ¶åº”å¯¹æ‰€æœ‰çš„ä¸»ä½“å’Œå®¢ä½“è¿›è¡Œä¿æŠ¤ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œéšè”½é€šé“åˆ†æã€‚<br>B3æ˜¯å®‰å…¨åŸŸæœºåˆ¶ä¿æŠ¤ã€‚å®‰å…¨å†…æ ¸ï¼Œé«˜æŠ—æ¸—é€èƒ½åŠ›ã€‚<br>A1å¯éªŒè¯å®‰å…¨è®¾è®¡ã€‚å½¢å¼åŒ–çš„æœ€é«˜çº§æè¿°å’ŒéªŒè¯ï¼Œå½¢å¼åŒ–çš„éšç§˜é€šé“åˆ†æï¼Œéå½¢å¼åŒ–çš„ä»£ç ä¸€è‡´æ€§è¯æ˜ã€‚</p>
<p>åœ¨æˆ‘å›½ï¼Œä»¥ã€Šè®¡ç®—æœºä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä¿æŠ¤ç­‰çº§åˆ’åˆ†å‡†ä¾§ã€‹ä¸ºæ ‡å‡†ã€‚</p>
<p>ITSECæ¬§æ´²ä¿¡æ¯å®‰å…¨è¯„ä¼°æ ‡å‡†</p>
</li>
</ol>
<h3 id="6-2-4-ç½‘ç»œæ”»å‡»çš„ä¸»è¦ç±»å‹"><a href="#6-2-4-ç½‘ç»œæ”»å‡»çš„ä¸»è¦ç±»å‹" class="headerlink" title="6.2.4 ç½‘ç»œæ”»å‡»çš„ä¸»è¦ç±»å‹"></a>6.2.4 ç½‘ç»œæ”»å‡»çš„ä¸»è¦ç±»å‹</h3><p><strong>ä¸»åŠ¨æ”»å‡»ï¼šæ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDoSï¼‰ï¼Œåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡(DDoS)ï¼Œä¿¡æ¯ç¯¡æ”¹ï¼Œèµ„æºä½¿ç”¨ï¼Œæ¬ºéª—ï¼ˆå¦‚æºè·¯ç”±æ”»å‡»ï¼‰ï¼Œä¼ªè£…ï¼ˆå¦‚é‚®ä»¶ç‚¸å¼¹ï¼‰ï¼Œé‡æ”¾ç­‰æ”»å‡»æ–¹æ³•</strong></p>
<p><strong>æœåŠ¡æ”»å‡»(ä¸ä¸»åŠ¨æ”»å‡»ä¸æ˜¯å¹¶åˆ—å…³ç³»)ï¼šé’ˆå¯¹æŸç‰¹å®šç½‘ç»œæœåŠ¡æ”»å‡»ï¼Œå¦‚é’ˆå¯¹Emailï¼ŒFTPï¼ŒHTTPç­‰æœåŠ¡æ”»å‡»ï¼Œå¦‚å¯¹Telnetçš„23å·ç«¯å£ï¼Œå¯¹HTTPçš„80ç«¯å£ï¼Œé‚®ä»¶ç‚¸å¼¹ç­‰</strong></p>
<ol>
<li><p>DoSä¸DDoS</p>
<ol>
<li><p>DoSçš„åˆ†ç±»ä¸ç‰¹å¾</p>
<p>æ‹’ç»æœåŠ¡æ”»å‡»(Denial of Service,DoS)åˆ©ç”¨åˆç†çš„ç†ç”±é€šè¿‡å‘é€ä¸€å®šæ•°é‡ï¼Œä¸€å®šåºåˆ—çš„æŠ¥æ–‡ï¼Œä½¿ç½‘ç»œæœåŠ¡å™¨ä¸­å……æ–¥å¤§é‡è¦æ±‚å›å¤çš„ä¿¡æ¯ï¼Œæ¶ˆè€—ç½‘ç»œå¸¦å®½æˆ–ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œç”šè‡³ç˜«ç—ªã€‚</p>
</li>
<li><p>DDoSæ”»å‡»çš„ç‰¹å¾</p>
<p>å…¸å‹çš„DDoSæ”»å‡»é‡‡ç”¨ä¸‰å±‚ç»“æ„ï¼šæ”»å‡»æ§åˆ¶å±‚ï¼Œæ”»å‡»æœåŠ¡å±‚ï¼Œæ”»å‡»æ‰§è¡Œå±‚ã€‚</p>
<p>çœŸæ­£çš„æ”»å‡»è€…å¤„äºæ”»å‡»æ§åˆ¶å±‚çš„ä½ç½®ï¼Œä¸ºäº†é˜²æ­¢è¢«è·Ÿè¸ªå’Œè¿½æŸ¥ï¼Œæ”»å‡»è€…é¦–å…ˆé€šè¿‡æ¼æ´æ‰«ææ–¹å¼é€‰æ‹©å®‰å…¨æ€§è¾ƒå·®çš„è®¡ç®—æœºä½œä¸ºè¢«æ§åˆ¶å¯¹è±¡ï¼ˆå³æ”»å‡»æœåŠ¡å™¨ï¼‰,å‘æ”»å‡»æœåŠ¡å™¨ä¼ æ’­æ¶æ„æ”»å‡»ç¨‹åºï¼Œé€šè¿‡æ”»å‡»æœåŠ¡å™¨å»å‘å±•ä¸‹ä¸€çº§çš„æ”»å‡»æ‰§è¡Œå™¨ï¼Œæ”»å‡»æ‰§è¡Œå™¨ä¹Ÿç§°ä¸ºâ€œå‚€å„¡æœºâ€ã€‚åœ¨å‘æ”»å‡»æœåŠ¡å™¨å‘å‡ºæ”»å‡»å‘½ä»¤åï¼Œæ”»å‡»æ§åˆ¶å°ç«‹å³è½¦é‡Œï¼Œä¸å‚åŠ ä¹‹åçš„æ”»å‡»è¡ŒåŠ¨ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>è¢«æ”»å‡»çš„ä¸»æœºä¸Šå¯èƒ½æœ‰å¤§é‡ç­‰å¾…åº”ç­”çš„TCPè¿æ¥</li>
<li>ç½‘ç»œä¸­å……æ–¥ç€å¤§é‡æ— ç”¨ç½‘ç»œæ•°æ®åŒ…ï¼Œå¹¶ä¸”æ•°æ®åŒ…çš„æºåœ°å€æ˜¯ä¼ªé€ çš„</li>
<li>å¤§é‡æ— ç”¨æ•°æ®åŒ…é€ æˆç½‘ç»œæ‹¥å¡ï¼Œä½¿å¾—ç½‘ç»œå·¥ä½œä¸æ­£å¸¸ï¼Œç”šè‡³ç˜«ç—ª</li>
<li>è¢«æ”»å‡»çš„ä¸»æœºå¯èƒ½åœ¨æ”»å‡»å‘èµ·ä¹‹åçŸ­çŸ­å‡ ç§’åå°±å¤„äºç˜«ç—ªçŠ¶æ€</li>
<li>æ”»å‡»æœåŠ¡å™¨å’Œå‚€å„¡æœºéƒ½æ˜¯åœ¨ä¸çŸ¥æƒ…ä¸‹å‚ä¸çš„ï¼ŒçœŸæ­£æ”»å‡»è€…æ—©å·²æ¶ˆå¤±</li>
</ol>
</li>
<li><p>åƒµå°¸ç½‘ç»œç‰¹å¾</p>
<p>æ§åˆ¶è€…å‡ºäºæ¶æ„ç›®çš„ï¼Œä¼ æ’­åƒµå°¸ç—…æ¯’ï¼Œæ§åˆ¶å¤§é‡ä¸»æœºï¼Œé€šè¿‡ä¸€å¯¹å¤šçš„å‘½ä»¤ä¸æ§åˆ¶ä¿¡é“ä¸»åŸç½‘ç»œï¼Œå®æ–½DDoSæ”»å‡»ï¼Œåƒµå°¸ç½‘ç»œæ˜¯ä¸€ç§å…¸å‹çš„æ¤å…¥å¨èƒæ”»å‡»</p>
</li>
</ol>
</li>
</ol>
<h2 id="6-3-åŠ å¯†ä¸è®¤è¯æŠ€æœ¯"><a href="#6-3-åŠ å¯†ä¸è®¤è¯æŠ€æœ¯" class="headerlink" title="6.3 åŠ å¯†ä¸è®¤è¯æŠ€æœ¯"></a>6.3 åŠ å¯†ä¸è®¤è¯æŠ€æœ¯</h2><p><strong>å”¯å¯†æ–‡æ”»å‡»</strong>æŒ‡çš„æ˜¯åœ¨ä»…çŸ¥å·²åŠ å¯†æ–‡å­—çš„æƒ…å†µä¸‹è¿›è¡Œç©·ä¸¾æ”»å‡»ã€‚</p>
<p><strong>å·²çŸ¥æ˜æ–‡æ”»å‡»</strong>æŒ‡æ”»å‡»è€…æŒæ¡äº†æŸæ®µæ˜æ–‡å’Œå¯¹åº”å¯†æ–‡ï¼Œæ¨æ–­åŠ å¯†æ–¹å¼ï¼Œä»è€Œç ´è§£åæ®µå¯†æ–‡çš„æ”»å‡»æ–¹å¼ã€‚</p>
<p><strong>é€‰æ‹©æ˜æ–‡æ”»å‡»</strong>æ˜¯æŒ‡æ”»å‡»è€…ä¸ä»…å·²çŸ¥åŠ å¯†ç®—æ³•å’Œå¯†æ–‡ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿé€šè¿‡æŸç§æ–¹å¼è®©å‘é€è€…åœ¨å‘é€çš„ä¿¡æ¯ä¸­æ’å…¥ä¸€æ®µç”±ä»–é€‰æ‹©çš„ä¿¡æ¯ã€‚</p>
<p><strong>é€‰æ‹©å¯†æ–‡æ”»å‡»</strong>çš„å¯†ç åˆ†æè€…äº‹å…ˆä»»æ„æœé›†ä¸€å®šæ•°é‡çš„å¯†æ–‡ï¼Œè®©è¿™äº›å¯†æ–‡é€è¿‡è¢«æ”»å‡»çš„åŠ å¯†ç®—æ³•è§£å¯†ï¼Œé€è¿‡æœªçŸ¥çš„å¯†é’¥è·å¾—è§£å¯†åçš„æ˜æ–‡ã€‚</p>
<h3 id="6-3-2-å¯¹ç§°å¯†ç ä½“ç³»"><a href="#6-3-2-å¯¹ç§°å¯†ç ä½“ç³»" class="headerlink" title="6.3.2 å¯¹ç§°å¯†ç ä½“ç³»"></a>6.3.2 å¯¹ç§°å¯†ç ä½“ç³»</h3><ol>
<li><p>å…¸å‹çš„å¯¹ç§°åŠ å¯†ç®—æ³•</p>
<p>æ•°æ®åŠ å¯†æ ‡å‡†(Data Encrytion Stardard,DES)æ˜¯æœ€å…¸å‹çš„<strong>å¯¹ç§°åŠ å¯†ç®—æ³•</strong>ï¼Œ<strong>ç”±IBMå…¬å¸æå‡ºï¼Œç»ISOè®¤å®šçš„å›½é™…æ ‡å‡†</strong>ã€‚DESæ¯æ¬¡å¤„ç†ä¸€ä¸ª<strong>64ä½çš„æ˜æ–‡åˆ†ç»„</strong>ï¼Œå¹¶ä¸”æ¯æ¬¡ç”Ÿæˆä¸€ä¸ª64ä½çš„å¯†æ–‡åˆ†ç»„ã€‚</p>
<p>DESæœ‰<strong>56ä½å¯†é’¥é•¿åº¦</strong>ã€‚<strong>åŸºäºç½®æ¢å’Œä»£æ¢æŠ€æœ¯</strong>ï¼ŒåŸºäº<strong>æ•´æ•°æœ‰é™åŸŸç¦»æ•£å¯¹æ•°éš¾é¢˜</strong>ï¼Œå’ŒRSAå®‰å…¨æ€§å·®ä¸å¤šã€‚DESç®—æ³•åŠ å¯†è¿‡ç¨‹ä¸­æ¯è½®æ“ä½œéƒ½æœ‰ç½®æ¢å’Œä»£æ¢ï¼Œ<strong>æ¯è½®ç½®æ¢å‡½æ•°ç›¸åŒ</strong></p>
<p>é«˜çº§åŠ å¯†ç®—æ³•(Advanced Encrytion Stardard,AES)æ˜¯åæ¥å‡ºç°çš„ä¸€ç§<strong>å¯¹ç§°åŠ å¯†ç®—æ³•</strong>ï¼Œ<strong>ç”±NISTåˆ¶å®š</strong>ï¼ŒAESå°†æ•°æ®åˆ†ä¸ºå›ºå®šå¤§å°çš„åˆ†ç»„ï¼Œä»¥åˆ†ç»„ä¸ºå•ä½è¿›è¡ŒåŠ å¯†æˆ–è§£å¯†ã€‚<strong>AESç®—æ³•å®‰å…¨æ€§èƒ½ä¸ä½äº3DESï¼ŒåŒæ—¶å…·æœ‰è‰¯å¥½çš„æ‰§è¡Œæ€§èƒ½ï¼Œè¿è¡Œé€Ÿåº¦æ¯”3DESé€Ÿåº¦å¿«ã€‚å¯†é’¥é•¿åº¦ä¸º128ã€192å’Œ256ä½ï¼Œåˆ†ç»„é•¿åº¦ä¸º128ä½ã€‚</strong></p>
<p>å…¶ä»–å¯¹ç§°åŠ å¯†ç®—æ³•åŒ…æ‹¬:IDEA,Blowfish,RC2,RC4,RC5,CASTç­‰</p>
<p>Blowfishç®—æ³•æ˜¯æœ‰Bruce Schneiderè®¾è®¡çš„ç®—æ³•ï¼Œæ˜¯ä¸€ä¸ªå¯å˜å¯†é’¥é•¿åº¦çš„åˆ†ç»„ç®—æ³•ï¼Œåˆ†ç»„é•¿åº¦ä¸º64ä½ï¼ŒBlowfishç®—æ³•æ‰€æœ‰çš„è¿ç®—éƒ½æ˜¯32ä½å­—çš„åŠ æ³•å’Œå¼‚æˆ–ï¼Œä»…æœ‰çš„å¦ä¸€ä¸ªè¿ç®—æ—¶æ¯è½®çš„å››ä¸ªæŸ¥è¡¨ã€‚</p>
<p>èƒŒåŒ…åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¸­èƒŒåŒ…çš„ç‰©å“æ€»é‡é‡æ˜¯å…¬å¼€çš„ï¼Œæ‰€æœ‰å¯èƒ½çš„ç‰©å“ä¹Ÿæ˜¯å…¬å¼€çš„ï¼Œä½†æ˜¯èƒŒåŒ…ä¸­çš„ç‰©å“å´æ˜¯ä¿å¯†çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªNPéš¾åº¦é—®é¢˜ã€‚ç›®å‰å¤§å¤šæ•°ä¸€æ¬¡èƒŒåŒ…ä½“åˆ¶å‡è¢«ç ´è¯‘äº†ï¼Œä¸€æ¬¡èƒŒåŒ…å·²ä¸å®‰å…¨äº†</p>
</li>
</ol>
<h3 id="6-3-3-éå¯¹ç§°å¯†ç ä½“ç³»"><a href="#6-3-3-éå¯¹ç§°å¯†ç ä½“ç³»" class="headerlink" title="6.3.3 éå¯¹ç§°å¯†ç ä½“ç³»"></a>6.3.3 éå¯¹ç§°å¯†ç ä½“ç³»</h3><ol>
<li><p>å…¸å‹çš„éå¯¹ç§°åŠ å¯†ç®—æ³•</p>
<p>RSAæ˜¯ä¸€ç§å…¸å‹çš„å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œå®ƒåœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ï¼ŒRSAç®—æ³•çš„å®‰å…¨æ€§å»ºç«‹åœ¨å¤§ç´ æ•°åˆ†è§£æå…¶å›°éš¾çš„åŸºç¡€ä¹‹ä¸Šã€‚æ˜¯ç”±Ron Rivest,Adi Shamir,Leonard Adlemanè®¾è®¡çš„ä¸€ç§ç®—æ³•ã€‚</p>
<p>å…¶ä»–éå¯¹ç§°åŠ å¯†ç®—æ³•ä¸»è¦åŒ…æ‹¬DSS,ElGamalä¸Diffie-Hellmanç­‰</p>
<p>ElGamal:åŸºäºå…¬é’¥ç§˜é’¥ä½“åˆ¶å’Œæ¤­åœ†æ›²çº¿åŠ å¯†ä½“ç³»ï¼Œå±äºéå¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯†è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆçš„å¯†æ–‡é•¿åº¦æ˜¯æ˜æ–‡çš„ä¸¤å€ï¼ŒåŸºäºç¦»æ•£å¯¹æ•°ï¼Œå¸¸ç”¨äºæ•°å­—ç­¾åã€‚</p>
<p>æ•°æ®åŠ å¯†æ ‡å‡†DESå±äºå †æˆåŠ å¯†ç®—æ³•ï¼ŒDSAä¸ElGamalå±äºå…¬é’¥åŠ å¯†</p>
</li>
</ol>
<h3 id="6-3-4-å…¬é’¥åŸºç¡€è®¾æ–½"><a href="#6-3-4-å…¬é’¥åŸºç¡€è®¾æ–½" class="headerlink" title="6.3.4 å…¬é’¥åŸºç¡€è®¾æ–½"></a>6.3.4 å…¬é’¥åŸºç¡€è®¾æ–½</h3><ol>
<li><strong>å…¬é’¥åŸºç¡€è®¾æ–½(Public Key Infrastructure,PKI)æ˜¯åˆ©ç”¨å…¬é’¥åŠ å¯†å’Œæ•°å­—ç­¾åæŠ€æœ¯å»ºç«‹çš„å®‰å…¨æœåŠ¡åŸºç¡€è®¾æ–½ï¼Œä»¥ä¿è¯ç½‘ç»œç¯å¢ƒä¸­çš„æ•°æ®çš„ç§˜å¯†æ€§å®Œæ•´æ€§å’Œä¸å¯æŠµèµ–æ€§ã€‚</strong></li>
</ol>
<h3 id="6-3-5-æ•°å­—ç­¾åæŠ€æœ¯"><a href="#6-3-5-æ•°å­—ç­¾åæŠ€æœ¯" class="headerlink" title="6.3.5 æ•°å­—ç­¾åæŠ€æœ¯"></a>6.3.5 æ•°å­—ç­¾åæŠ€æœ¯</h3><p>æ•°å­—ç­¾åæ˜¯ç¬”è¿¹ç­¾åçš„æ¨¡æ‹Ÿï¼Œ<strong>å…¬é’¥å¯†ç ä½“åˆ¶å’Œç§é’¥å¯†ç ä½“åˆ¶éƒ½å¯ä»¥ç”¨äºæ•°å­—ç­¾å</strong>ï¼ŒéªŒè¯æ—¶éœ€è¦ä½¿ç”¨ç›¸åŒçš„æ•£åˆ—å‡½æ•°ï¼Œå¹¶ä¸”<strong>é€šè¿‡æ¯”è¾ƒæ¶ˆæ¯æ‘˜è¦æ˜¯å¦åŒ¹é…</strong>æ¥éªŒè¯ç­¾åçš„æ­£ç¡®æ€§ã€‚</p>
<ol>
<li><p>æ•°å­—ç­¾åçš„å·¥ä½œåŸç†</p>
<ol>
<li><p>ç›®å‰å¹¿æ³›ä½¿ç”¨çš„æ•°å­—ç­¾åç®—æ³•æ˜¯æ¶ˆæ¯æ‘˜è¦(Message Digest,MD5)</p>
<p>MD5æ²¡æœ‰å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†æˆ–è€…ä¿®æ”¹ï¼Œ<strong>å¯å¯¹ä»»æ„é•¿åº¦çš„æ•°æ®ç”Ÿæˆ128ä½æ•£åˆ—å€¼ï¼Œæ²¡æœ‰å¯¹æ•°æ®åŠ å¯†æˆ–è€…ä¿®æ”¹ï¼Œåªæ˜¯ç”Ÿæˆä¸€ä¸ªç”¨äºåˆ¤æ–­å®Œæ•´æ€§ä¸çœŸå®æ€§çš„æ•£åˆ—å€¼</strong></p>
</li>
</ol>
</li>
</ol>
<h2 id="6-4-ç½‘ç»œå®‰å…¨åè®®"><a href="#6-4-ç½‘ç»œå®‰å…¨åè®®" class="headerlink" title="6.4 ç½‘ç»œå®‰å…¨åè®®"></a>6.4 ç½‘ç»œå®‰å…¨åè®®</h2><h3 id="6-4-1-ç½‘ç»œå®‰å…¨åè®®çš„æ¦‚å¿µ"><a href="#6-4-1-ç½‘ç»œå®‰å…¨åè®®çš„æ¦‚å¿µ" class="headerlink" title="6.4.1 ç½‘ç»œå®‰å…¨åè®®çš„æ¦‚å¿µ"></a>6.4.1 ç½‘ç»œå®‰å…¨åè®®çš„æ¦‚å¿µ</h3><p><strong>åœ¨ä¸»æœºï¼ç½‘ç»œå±‚ï¼ˆæ•°æ®é“¾è·¯å±‚å¯¹åº”å®ƒçš„ä¸€éƒ¨åˆ†ï¼‰ä¸­ï¼Œä¸»è¦çš„å®‰å…¨åè®®åŒ…æ‹¬PPTP,L2TPä¸L2Fç­‰</strong></p>
<p><strong>åœ¨äº’è”å±‚ï¼ˆæˆ–ç½‘ç»œå±‚ï¼‰ä¸­ï¼Œæœ€ä¸»è¦çš„å®‰å…¨æœºåˆ¶æ˜¯IPSecçš„ä¸¤ä¸ªç»„æˆåè®®ï¼Œå³è®¤è¯å¤´éƒ¨(AH)ä¸å°è£…å®‰å…¨æœ‰æ•ˆè½½è·ï¼ˆESPï¼‰</strong></p>
<p><strong>åœ¨ä¼ è¾“å±‚ä¸­ï¼Œä¸»è¦çš„å®‰å…¨åè®®åŒ…æ‹¬SSL,SSH,TLSä¸SOCKSç­‰ã€‚</strong></p>
<p>httpsæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPå®‰å…¨ç‰ˆï¼Œå³HTTP+SSLï¼ŒHTTPSå®‰å…¨åŸºç¡€æ˜¯SSLã€‚å¦‚æœç”¨æˆ·æƒ³åœ¨Webä¸Šä½¿ç”¨SSLåè®®URLå¿…é¡»ä½¿ç”¨httpså¼€å¤´</p>
<p>SSLæœ€åˆç”±Netscapeå…¬å¸å®šåˆ¶ï¼ŒSSLä»¥åŠå…¶ç»§ä»»è€…TLSï¼Œæ˜¯ä¸ºäº†ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨ä»¥åŠæ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å®‰å…¨åè®®ï¼ŒTLSä¸SSLåœ¨ä¼ è¾“å±‚å¯¹ç½‘ç»œè¿›è¡ŒåŠ å¯†ï¼Œç”¨äºä¿éšœç½‘ç»œæ•°æ®ä¼ è¾“å®‰å…¨ï¼Œåˆ©ç”¨æ•°æ®åŠ å¯†æŠ€æœ¯ï¼Œï¼Œç¡®ä¿æ•°æ®åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«æˆªå–ä¸çªƒå¬ï¼Œæ‰€æœ‰ä¸»è¦æµè§ˆå™¨å’ŒWebæœåŠ¡å™¨æ”¯æŒSSLï¼Œå¯ä»¥é€šè¿‡å®‰è£…SSLè¯ä¹¦æ¿€æ´»SSLåè®®ã€‚</p>
<p><strong>åœ¨åº”ç”¨å±‚ä¸­é’ˆå¯¹ä¸åŒçš„ç½‘ç»œæœåŠ¡æˆ–åº”ç”¨çš„å®‰å…¨æœºåˆ¶æ¯”è¾ƒå¤šï¼Œä¾‹å¦‚PGP,SET,ç”¨äºå¢å¼ºWebå®‰å…¨çš„S-HTTP,ç”¨äºä¿éšœé‚®ä»¶å®‰å…¨çš„S/MIME,ç”¨äºç”µå­å•†åŠ¡å®‰å…¨äº¤æ˜“çš„SETç­‰</strong></p>
<h3 id="6-4-2-ç½‘ç»œå®‰å…¨ä¸IPSec"><a href="#6-4-2-ç½‘ç»œå®‰å…¨ä¸IPSec" class="headerlink" title="6.4.2 ç½‘ç»œå®‰å…¨ä¸IPSec"></a>6.4.2 ç½‘ç»œå®‰å…¨ä¸IPSec</h3><ol>
<li><p>IPSecå®‰å…¨ä½“ç³»ç»“æ„</p>
<p>IPSecä¸»è¦åŒ…å«ï¼“ä¸ªç»„æˆéƒ¨åˆ†ï¼Œ<strong>è®¤è¯å¤´(Authentication Header,AH)ï¼Œå°è£…å®‰å…¨è´Ÿè½½(Encapsulating Security Payload,ESP)ä¸å¯†é’¥ç®¡ç†åè®®</strong></p>
<p>IPSecå·¥ä½œæ¨¡å¼åˆ†ä¸¤ç§ï¼Œ<strong>éš§é“æ¨¡å¼å’Œä¼ è¾“æ¨¡å¼</strong></p>
</li>
<li><p>AHåè®®çš„å·¥ä½œåŸç†</p>
<p>å¯å·¥ä½œåœ¨éš§é“æ¨¡å¼ä¸ä¼ è¾“æ¨¡å¼</p>
</li>
<li><p>ESPåè®®å·¥ä½œåŸç†</p>
<p>å¯å·¥ä½œåœ¨éš§é“æ¨¡å¼ä¸ä¼ è¾“æ¨¡å¼</p>
</li>
</ol>
<p>æµè§ˆå™¨å®‰å…¨æ€§ï¼š</p>
<ol>
<li><strong>å°†Webç«™ç‚¹æ”¾å…¥å¯ä¿¡ç«™ç‚¹åŒºå¯ä»¥ä¿è¯ä¿¡æ¯ä¼ è¾“çš„æœºå¯†æ€§</strong></li>
<li><strong>åœ¨æµè§ˆå™¨ä¸­æ·»åŠ è¯ä¹¦å¯ä»¥éªŒè¯Webç«™ç‚¹çš„çœŸå®æ€§</strong></li>
<li><strong>ç´¢è¦Webç«™ç‚¹çš„è¯ä¹¦å¯ä»¥è¡¨æ˜æµè§ˆå™¨çš„èº«ä»½</strong></li>
<li><strong>ä½¿ç”¨SSLæŠ€æœ¯å¯ä»¥é˜²æ­¢ç—…æ¯’çš„ä¼ æ’­</strong></li>
</ol>
<h3 id="6-4-4-åº”ç”¨å±‚å®‰å…¨ä¸PGP-SET"><a href="#6-4-4-åº”ç”¨å±‚å®‰å…¨ä¸PGP-SET" class="headerlink" title="6.4.4 åº”ç”¨å±‚å®‰å…¨ä¸PGP,SET"></a>6.4.4 åº”ç”¨å±‚å®‰å…¨ä¸PGP,SET</h3><ol>
<li><p>PGP</p>
<p>PGPï¼ˆPretty Good Privacyï¼Œç›¸å½“å¥½çš„ç§å¯†æ€§ï¼‰æ˜¯ä¸€ä¸ªå®‰å…¨ç”µå­é‚®ä»¶åŠ å¯†è½¯ä»¶ï¼Œå®ƒä¸»è¦ç”±5ç§æœåŠ¡ç»„æˆï¼š<strong>é‰´åˆ«ã€æœºå¯†æ€§ã€å‹ç¼©ã€ç”µå­é‚®ä»¶çš„å…¼å®¹æ€§å’Œåˆ†æ®µ</strong>ï¼Œ<strong>æ”¯æŒå¤šè¯­ç§å®‰è£…å¹³å°</strong>ã€‚æ•°å­—ç­¾åä½¿ç”¨DSS/SHAæˆ–RSA/SHAç®—æ³•ï¼Œ<strong>æŠ¥æ–‡åŠ å¯†é‡‡ç”¨CASTæˆ–IDEAï¼Œæˆ–ä½¿ç”¨Diffie-Hellmançš„3DESæˆ–RSAç®—æ³•ã€‚</strong><br>PGPä¹Ÿæä¾›äº†å…¬å…±å¯†é’¥è®¤è¯æœºåˆ¶ï¼Œä½†æ˜¯è¿™ä¸ªæœºåˆ¶å®Œå…¨ä¸åŒäºé€šç”¨çš„è®¤è¯ä¸­å¿ƒï¼ˆCAï¼‰ã€‚PGPå…¬å…±å¯†é’¥é€šè¿‡å§”æ‰˜ç½‘ç«™è¿›è¡Œè®¤è¯ï¼Œå®ƒä¹Ÿå¯ä»¥é€šè¿‡äº’è”ç½‘ä¸Šçš„PGPå…¬å…±å¯†é’¥æœåŠ¡å™¨å‘å¸ƒã€‚</p>
</li>
</ol>
<p>åŒ…æ‹¬<strong>ç”µå­é‚®ä»¶çš„åŠ å¯†ï¼Œèº«ä»½éªŒè¯ï¼Œæ•°å­—ç­¾å</strong>ç­‰å®‰å…¨åŠŸèƒ½ã€‚</p>
<p>   åœ¨PGPåè®®ä¸­éœ€è¦ä¸¤ä¸ªä¸åŒçš„åŠ å¯†è¿‡ç¨‹ï¼š<strong>æ˜æ–‡åŠ å¯†ä¸å¯¹ç§°å¯†é’¥çš„åŠ å¯†</strong></p>
<p>   PGP2æ•°å­—ç­¾åèƒ½å¤Ÿä¿è¯é‚®ä»¶çš„å®Œæ•´æ€§ï¼Œèº«ä»½è®¤è¯ä¸ä¸å¯æŠµèµ–æ€§ï¼Œæ•°æ®åŠ å¯†å¯ä»¥ä¿è¯é‚®ä»¶å†…å®¹çš„æœºå¯†æ€§</p>
<h2 id="6-5-é˜²ç«å¢™æŠ€æœ¯"><a href="#6-5-é˜²ç«å¢™æŠ€æœ¯" class="headerlink" title="6.5 é˜²ç«å¢™æŠ€æœ¯"></a>6.5 é˜²ç«å¢™æŠ€æœ¯</h2><h3 id="6-5-1-é˜²ç«å¢™æ¦‚å¿µ"><a href="#6-5-1-é˜²ç«å¢™æ¦‚å¿µ" class="headerlink" title="6.5.1 é˜²ç«å¢™æ¦‚å¿µ"></a>6.5.1 é˜²ç«å¢™æ¦‚å¿µ</h3><p>é˜²ç«å¢™çš„åŸºæœ¬éƒ¨ä»¶æ˜¯ï¼šåŒ…è¿‡æ»¤è·¯ç”±å™¨ï¼Œåº”ç”¨çº§ç½‘å…³</p>
<p>é€šå¸¸åº”ç”¨äºå†…éƒ¨ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œä¹‹é—´</p>
<p>å¯é€šè¿‡è½¯ç¡¬ä»¶å®ç°</p>
<h3 id="6-5-2-åŒ…è¿‡æ»¤è·¯ç”±å™¨"><a href="#6-5-2-åŒ…è¿‡æ»¤è·¯ç”±å™¨" class="headerlink" title="6.5.2 åŒ…è¿‡æ»¤è·¯ç”±å™¨"></a>6.5.2 åŒ…è¿‡æ»¤è·¯ç”±å™¨</h3><p>åŒ…è¿‡æ»¤è·¯ç”±å™¨ä½œç”¨äºç½‘ç»œå±‚ä¸Š</p>
<p>æ£€æŸ¥æ¯ä¸ªåˆ†ç»„çš„æºåœ°å€ï¼Œç›®çš„åœ°å€ï¼Œå†³å®šè¯¥åˆ†ç»„æ˜¯å¦åº”è¯¥è½¬å‘ã€‚</p>
<p>åŒ…è¿‡æ»¤è·¯ç”±å™¨ä¼šæ£€æŸ¥TCPæŠ¥å¤´çš„ç«¯å£å·å’Œå­—èŠ‚ï¼Œé€šå¸¸åŸºäºéƒ¨åˆ†æˆ–å…¨éƒ¨æŠ¥å¤´å†…å®¹ï¼Œä¾‹å¦‚å¯¹TCPæŠ¥å¤´ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯æºåœ°å€ï¼Œç›®çš„åœ°å€ï¼Œåè®®ç±»å‹ï¼ŒIPé€‰é¡¹ï¼Œæºç«¯å£å·ï¼Œç›®çš„ç«¯å£å·ï¼ŒTCP,ACKç­‰æ ‡è¯†</p>
<h3 id="6-5-3-åº”ç”¨çº§ç½‘å…³"><a href="#6-5-3-åº”ç”¨çº§ç½‘å…³" class="headerlink" title="6.5.3 åº”ç”¨çº§ç½‘å…³"></a>6.5.3 åº”ç”¨çº§ç½‘å…³</h3><p>åº”ç”¨ä»£ç†æ˜¯åº”ç”¨çº§ç½‘å…³çš„å¦ä¸€ç§å½¢å¼</p>
<h1 id="é¢˜ç›®å¿ƒå¾—ï¼š"><a href="#é¢˜ç›®å¿ƒå¾—ï¼š" class="headerlink" title="é¢˜ç›®å¿ƒå¾—ï¼š"></a>é¢˜ç›®å¿ƒå¾—ï¼š</h1><ol>
<li><p>51é¢˜å·¦å³ï¼š</p>
<p>å…³é”®è¯ï¼šâ€œpingä¸é€šâ€</p>
<p>é¦–å…ˆåˆ¤æ–­æ˜¯å¦åœ¨ä¸€ä¸ªå­ç½‘ï¼Œå¦‚æœä¸åœ¨ä¸€ä¸ªå­ç½‘åˆ™æ˜¯å› ä¸ºä¸åœ¨ä¸€ä¸ªå­ç½‘ã€‚å¦‚æœåœ¨ä¸€ä¸ªå­ç½‘ï¼Œå¦‚æœé¢˜ç›®è¯´ä¸æ˜¯ä¸€ä¸ªVLANåˆ™é€‰ä¸åœ¨ä¸€ä¸ªVLANï¼Œpingä¸é€šä¸æ“ä½œç³»ç»Ÿæ— å…³</p>
</li>
<li><p>æœ‰é™å¹¿æ’­åœ°å€ï¼š255.255.255.255</p>
<p>ç›´æ¥å¹¿æ’­åœ°å€ï¼šç½‘ç»œå·+ä¸€ä¸ªå…¨â€œ1â€çš„ä¸»æœºå·</p>
</li>
<li><p>æ··åˆP2Pç½‘ç»œåŒ…å«èŠ‚ç‚¹ç§ç±»ï¼šç”¨æˆ·èŠ‚ç‚¹ï¼Œæœç´¢èŠ‚ç‚¹ï¼Œç´¢å¼•ç»“ç‚¹</p>
</li>
<li><p><strong>ISOåˆ¶å®šäº†ï¼šCMIPï¼ŒCMISï¼ŒOSIå‚è€ƒæ¨¡å‹</strong></p>
<p><strong>IETFï¼šTCP/IP å‚è€ƒæ¨¡å‹ï¼ŒRFC2778ï¼ŒSIMPLEåè®®ï¼ŒSNMPåè®®,IPSecï¼ŒSIP</strong></p>
</li>
<li><p><strong>ä¸ºäº†ä¿æŠ¤è‡ªå·±çš„è®¡ç®—æœºå…å—éå®‰å…¨è½¯ä»¶çš„å±å®³ï¼Œæµè§ˆå™¨é€šå¸¸é‡‡ç”¨çš„æ–¹æ³•æ˜¯å°†Internetä¸–ç•Œåˆ’åˆ†ä¸ºä¸åŒçš„åŒºåŸŸï¼ˆå¦‚InternetåŒºåŸŸã€æœ¬åœ°InternetåŒºåŸŸã€å¯ä¿¡ç«™ç‚¹åŒºåŸŸã€å—é™ç«™ç‚¹åŒºåŸŸï¼‰</strong></p>
</li>
<li><p><strong>ä¸ºäº†é¿å…ä»–äººå‡å†’è‡ªå·±ï¼Œç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨å®‰è£…è‡ªå·±çš„æ•°å­—è¯ä¹¦</strong></p>
<p><strong>å°†Webç«™ç‚¹æ”¾å…¥å¯ä¿¡ç«™ç‚¹åŒºå¯ä»¥ä¿è¯ä¿¡æ¯ä¼ è¾“çš„æœºå¯†æ€§</strong></p>
<p><strong>åœ¨æµè§ˆå™¨ä¸­æ·»åŠ è¯ä¹¦å¯ä»¥éªŒè¯Webç«™ç‚¹çš„çœŸå®æ€§</strong></p>
<p><strong>ç´¢è¦Webç«™ç‚¹çš„è¯ä¹¦å¯ä»¥è¡¨æ˜æµè§ˆå™¨çš„èº«ä»½ï¼ŒéªŒè¯ç«™ç‚¹çš„çœŸå®æ€§</strong></p>
<p><strong>ä½¿ç”¨SSLæŠ€æœ¯å¯ä»¥é˜²æ­¢ç—…æ¯’çš„ä¼ æ’­ï¼Œé¿å…ç¬¬ä¸‰æ–¹å·çœ‹</strong></p>
<p><strong>ä½¿ç”¨Base64ç¼–ç ä¸»è¦ç›®çš„æ˜¯å°†äºŒè¿›åˆ¶ç è½¬æ¢ä¸ºASCIIç </strong></p>
</li>
<li><p>WebæœåŠ¡é‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨å·¥ä½œæ¨¡å¼</p>
<p>WebæœåŠ¡ä»¥è¶…æ–‡æœ¬æ–¹å¼ç»„ç»‡ç½‘ç»œå¤šåª’ä½“ä¿¡æ¯</p>
<p>Web<strong>æœåŠ¡å™¨éœ€è¦å®ç°HTTPåè®®</strong></p>
<p>ç”¨æˆ·è®¿é—®WebæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å›¾å½¢ç•Œé¢</p>
<p>Webæµè§ˆå™¨çš„è§£é‡Šå•å…ƒ<strong>è´Ÿè´£è§£æä»æœåŠ¡å™¨å‘é€å›æ¥çš„æ•°æ®</strong></p>
<p>æµè§ˆå™¨ç»„æˆä¸ºï¼š<strong>æ§åˆ¶å•å…ƒï¼Œå®¢æˆ·å•å…ƒï¼Œè§£é‡Šå•å…ƒ</strong></p>
</li>
<li><p>å¹¿åŸŸç½‘çš„ç ”ç©¶é‡ç‚¹æ˜¯æ ¸å¿ƒäº¤æ¢æŠ€æœ¯</p>
</li>
<li><p>å…±äº«ä»‹è´¨ä»¥å¤ªç½‘æ ¸å¿ƒæ˜¯<strong>é›†çº¿å™¨</strong>ï¼Œæ”¯æŒå…¨åŒå·¥</p>
</li>
<li><p>å±€åŸŸç½‘äº¤æ¢æœºæ ¸å¿ƒæ ¸å¿ƒæŠ€æœ¯åŒ…æ‹¬ç«¯å£/MACåœ°å€æ˜ å°„</p>
</li>
<li><p>54é¢˜é™„è¿‘ï¼š</p>
<p>ä»ä½¿ç”¨è€…æ¥çœ‹ï¼ŒInternetæ˜¯ä¸€ä¸ªèµ„æºç½‘</p>
<p>ä»è®¾è®¡è€…æ¥çœ‹ï¼ŒInternetæ˜¯è®¡ç®—æœºäº’è”ç½‘ç»œçš„å®ä¾‹/IPäº’è”ç½‘</p>
<p>Internetåˆ©ç”¨è·¯ç”±å™¨å®ç°å¼‚æ„ç½‘ç»œäº’è”</p>
<p>Internetä¸»è¦ç»„æˆéƒ¨åˆ†åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼šé€šä¿¡çº¿è·¯ï¼Œè·¯ç”±å™¨ï¼Œä¸»æœºå’Œä¿¡æ¯èµ„æºã€‚</p>
</li>
<li><p>ä¸ªäººåŒºåŸŸç½‘ï¼ˆWPAN,Wireless Personalï¼‰</p>
<p>ä¸ªäººå±€åŸŸç½‘(PAN,Personal)  </p>
<p>å±€åŸŸç½‘(LAN,local)  </p>
<p>åŸåŸŸç½‘(MAN,metropolitian)  </p>
<p><strong>å¹¿åŸŸç½‘(WAN,wide)</strong> </p>
<p><strong>æ— çº¿è‡ªç»„ç½‘ï¼ˆWAN,Wireless ad hoc networkï¼‰</strong></p>
<p>æ— çº¿å±€åŸŸç½‘(WLAN,Wireless Local)</p>
<p>æ— çº¿ç½‘çŠ¶ç½‘(WMN,wireless mesh network)</p>
</li>
<li><p>VLANæŠ€æœ¯ï¼š</p>
<p>è™šæ‹Ÿå±€åŸŸç½‘æ˜¯<strong>å»ºç«‹åœ¨äº¤æ¢å¼æŠ€æœ¯çš„åŸºç¡€ä¸Š</strong>ï¼Œä»¥è½¯ä»¶æ–¹å¼å®ç°é€»è¾‘å·¥ä½œç»„çš„åˆ’åˆ†ä¸ç®¡ç†ï¼Œå·¥ä½œç»„ä¸­çš„ç»“ç‚¹ä¸å—ç‰©ç†ä½ç½®çš„é™åˆ¶ã€‚å¸¸è§çš„ç»„ç½‘æ–¹å¼åŒ…æ‹¬ï¼š<strong>ç”¨äº¤æ¢æœºç«¯å£å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€ç”¨MACåœ°å€å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€ç”¨ç½‘ç»œå±‚(IP)åœ°å€å®šä¹‰è™šæ‹Ÿå±€åŸŸç½‘ã€åŸºäºå¹¿æ’­ç»„çš„è™šæ‹Ÿå±€åŸŸç½‘ã€‚</strong></p>
</li>
<li><p>ä¿¡æ¯å­˜å‚¨å®‰å…¨æªæ–½è‡³å°‘è¦åŒ…æ‹¬ä¸‰ç±»ï¼šï¼ˆ1ï¼‰ç¤¾ä¼šçš„æ³•å¾‹æ”¿ç­–ã€ä¼ä¸šçš„è§„ç« åˆ¶åº¦åŠç½‘ç»œå®‰å…¨æ•™è‚²ï¼›ï¼ˆ2ï¼‰æŠ€æœ¯æ–¹é¢çš„æªæ–½ï¼Œå¦‚é˜²ç«å¢™æŠ€æœ¯ã€é˜²ç—…æ¯’ã€ä¿¡æ¯åŠ å¯†ã€èº«ä»½ç¡®è®¤ä»¥åŠæˆæƒå³è®¾ç½®è®¿é—®æƒé™ç­‰ï¼›ï¼ˆ3ï¼‰å®¡è®¡ä¸ç®¡ç†æªæ–½ï¼ŒåŒ…æ‹¬æŠ€æœ¯ä¸ç¤¾ä¼šæªæ–½ã€‚ä¸»è¦æœ‰å®æ—¶ç›‘æ§ã€æä¾›å®‰å…¨ç­–ç•¥æ”¹å˜çš„èƒ½åŠ›ä»¥åŠå¯¹å®‰å…¨ç³»ç»Ÿå®æ–½æ¼æ´æ£€æŸ¥ç­‰ã€‚</p>
</li>
<li><p>æ¬§æ´²åŸå­æ ¸ç ”ç©¶å§”å‘˜ä¼šï¼ˆCERNï¼‰çš„ Tim Berners-Lee å¼€å‘äº†ä¸€ä¸ªåè®®ï¼Œç”¨æ¥è§£å†³å¤æ‚è¿›åŒ–ç³»ç»Ÿä¸­çš„ä¿¡æ¯ä¸¢å¤±é—®é¢˜ï¼Œå¹¶æå‡ºä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼è¶…æ–‡æœ¬ç³»ç»Ÿçš„è§£å†³æ–¹æ³•ï¼ŒWeb å› æ­¤è¯ç”Ÿã€‚WebæœåŠ¡é‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨å·¥ä½œæ¨¡å¼ï¼ŒWebæœåŠ¡ä»¥è¶…æ–‡æœ¬æ–¹å¼ç»„ç»‡ç½‘ç»œå¤šåª’ä½“ä¿¡æ¯ï¼Œ<strong>WebæœåŠ¡å™¨éœ€è¦å®ç°HTTPåè®®</strong>ï¼Œå­˜å‚¨äº†ç”¨æˆ·å…±äº«çš„ä¿¡æ¯ï¼Œç”¨æˆ·è®¿é—®WebæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å›¾å½¢ç•Œé¢ï¼ŒWebæµè§ˆå™¨çš„è§£é‡Šå•å…ƒè´Ÿè´£è§£æä»æœåŠ¡å™¨å‘é€å›æ¥çš„æ•°æ®ã€‚</p>
</li>
<li><p>UNIXæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å¤„ç†å™¨æ¶æ„ï¼ŒæŒ‰ç…§æ“ä½œç³»ç»Ÿçš„åˆ†ç±»ï¼Œå±äºåˆ†æ—¶æ“ä½œç³»ç»Ÿã€‚Unixä»ç¬¬ä¸‰ç‰ˆå†…æ ¸å¼€å§‹ä½¿ç”¨Cè¯­è¨€ã€‚Linuxæ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»Unixæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäºPOSIXå’ŒUNIXçš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤šCPUçš„æ“ä½œç³»ç»Ÿã€‚</p>
</li>
<li><p><strong>ASN.1</strong>æŠ½è±¡è¯­æ³•æ ‡è®°ï¼ˆAbstract Syntax Notation Oneï¼‰ ASN.1æ˜¯ä¸€ç§ ISO/ITU-T æ ‡å‡†ï¼Œæè¿°äº†ä¸€ç§å¯¹æ•°æ®è¿›è¡Œè¡¨ç¤ºã€ç¼–ç ã€ä¼ è¾“å’Œè§£ç çš„æ•°æ®æ ¼å¼ï¼ŒISO åè®®å¥—ä¸­çš„åº”ç”¨å±‚åè®®ä½¿ç”¨äº† ASN.1 æ¥æè¿°å®ƒä»¬æ‰€ä¼ è¾“çš„ PDUï¼Œè¿™äº›åè®®åŒ…æ‹¬ï¼šç”¨äºä¼ è¾“ç”µå­é‚®ä»¶çš„ X.400ã€ç”¨äºç›®å½•æœåŠ¡çš„ X.500ã€ç”¨äº VoIP çš„ H.323 å’Œ SNMPï¼ˆç®€å•ç½‘ç»œç®¡ç†åè®®ï¼‰ã€‚ASN.1 å–å¾—æˆåŠŸçš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯å®ƒä¸å‡ ä¸ªæ ‡å‡†åŒ–ç¼–ç è§„åˆ™ç›¸å…³ï¼Œå¦‚åŸºæœ¬ç¼–ç è§„åˆ™ï¼ˆBERï¼‰ -X.209 ã€è§„èŒƒç¼–ç è§„åˆ™ï¼ˆCERï¼‰ã€è¯†åˆ«åç¼–ç è§„åˆ™ï¼ˆDERï¼‰ã€å‹ç¼©ç¼–ç è§„åˆ™ï¼ˆPERï¼‰å’Œ XMLç¼–ç è§„åˆ™ï¼ˆXERï¼‰ã€‚<br><strong>Unicode</strong>ï¼ˆç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç ï¼‰æ˜¯ä¸€ç§åœ¨è®¡ç®—æœºä¸Šä½¿ç”¨çš„å­—ç¬¦ç¼–ç ã€‚Unicode æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆçš„å±€é™è€Œäº§ç”Ÿçš„ï¼Œå®ƒä¸ºæ¯ç§è¯­è¨€ä¸­çš„æ¯ä¸ªå­—ç¬¦è®¾å®šäº†ç»Ÿä¸€å¹¶ä¸”å”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ï¼Œä»¥æ»¡è¶³è·¨è¯­è¨€ã€è·¨å¹³å°è¿›è¡Œæ–‡æœ¬è½¬æ¢ã€å¤„ç†çš„è¦æ±‚ã€‚<br><strong>Base64</strong>æ˜¯ç½‘ç»œä¸Šæœ€å¸¸è§çš„ç”¨äºä¼ è¾“8Bitå­—èŠ‚ä»£ç çš„ç¼–ç æ–¹å¼ä¹‹ä¸€ï¼Œå¯ç”¨äºåœ¨HTTPç¯å¢ƒä¸‹ä¼ é€’è¾ƒé•¿çš„æ ‡è¯†ä¿¡æ¯ã€‚Base64 ä¹Ÿä¼šç»å¸¸ç”¨ä½œä¸€ä¸ªç®€å•çš„â€œåŠ å¯†â€æ¥ä¿æŠ¤æŸäº›æ•°æ®ï¼Œè€ŒçœŸæ­£çš„åŠ å¯†é€šå¸¸éƒ½æ¯”è¾ƒç¹çã€‚Mozilla Thunderbirdå’ŒEvolutionç”¨Base64æ¥ä¿å¯†ç”µå­é‚®ä»¶å¯†ç <br><strong>Quoted-printable</strong>æ˜¯ä½¿ç”¨å¯æ‰“å°çš„ASCIIå­—ç¬¦ (å¦‚å­—æ¯ã€æ•°å­—ä¸â€=â€)è¡¨ç¤ºå„ç§ç¼–ç æ ¼å¼ä¸‹çš„å­—ç¬¦ï¼Œä»¥ä¾¿èƒ½åœ¨7-bitæ•°æ®é€šè·¯ä¸Šä¼ è¾“8-bitæ•°æ®, æˆ–è€…æ›´ä¸€èˆ¬åœ°è¯´åœ¨é8-bit cleanåª’ä½“ä¸Šæ­£ç¡®å¤„ç†æ•°æ®ã€‚è¿™è¢«å®šä¹‰ä¸ºMIME content transfer encodingï¼Œç”¨äºe-mailã€‚</p>
<p>é‚®ä»¶ç¼–ç å¸¸ç”¨åä¸¤è€…</p>
</li>
<li><p>HTMLæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ã€ç”¨äºæè¿°æ–‡æ¡£ç»“æ„ï¼Œæ˜¯Webä¸–ç•Œçš„å…±åŒè¯­è¨€ï¼Œæµè§ˆå™¨åº”èƒ½è§£é‡Šç¬¦åˆHTMLæ ‡å‡†çš„é¡µé¢ä¸”å¤šä¸ªç¬¦åˆHTMLæ ‡å‡†çš„é¡µé¢å¯ç›¸äº’é“¾æ¥ã€‚</p>
</li>
<li><p>LAMPï¼ˆLinux- Apache-MySQL-PHPï¼‰ç½‘ç«™æ¶æ„æ˜¯ç›®å‰å›½é™…æµè¡Œçš„Webæ¡†æ¶ï¼Œè¯¥æ¡†æ¶åŒ…æ‹¬ï¼šLinuxæ“ä½œç³»ç»Ÿï¼ŒApacheç½‘ç»œæœåŠ¡å™¨ï¼ŒMySQLæ•°æ®åº“ï¼ŒPerlã€PHPæˆ–è€…Pythonç¼–ç¨‹è¯­è¨€ï¼Œæ‰€æœ‰ç»„æˆäº§å“å‡æ˜¯å¼€æºè½¯ä»¶ï¼Œæ˜¯å›½é™…ä¸Šæˆç†Ÿçš„æ¶æ„æ¡†æ¶ã€‚è¯¥æ¶æ„èµ·æºäºLinuxå¹³å°ï¼Œç”±äºæ˜¯å¼€æºè½¯ä»¶ï¼Œå»ºè®¾æˆæœ¬å¾ˆä½ã€‚</p>
</li>
<li><p>Ethernetäº¤æ¢æœºè½¬å‘å¸§å¯ä»¥é‡‡ç”¨ç›´æ¥äº¤æ¢æ–¹å¼ã€å­˜å‚¨è½¬å‘äº¤æ¢æ–¹å¼æˆ–è€…æ”¹è¿›çš„ç›´æ¥äº¤æ¢æ–¹å¼ã€‚é€šå¸¸é‡‡ç”¨ç«¯å£å·/MACåœ°å€æ˜ å°„è¡¨ï¼Œæ”¯æŒè™šæ‹Ÿå±€åŸŸç½‘æœåŠ¡ã€‚</p>
</li>
<li><p>POP3é‚®ä»¶ä¼ é€’è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè®¤è¯é˜¶æ®µã€äº‹åŠ¡å¤„ç†é˜¶æ®µã€æ›´æ–°é˜¶æ®µ</p>
<p>SMTPé‚®ä»¶ä¼ é€’è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹é˜¶æ®µï¼Œé‚®ä»¶ä¼ é€é˜¶æ®µï¼Œè¿æ¥å…³é—­é˜¶æ®µ</p>
</li>
<li><p>NetBIOSæ˜¯ç”±IBMå¼€å‘ï¼Œå·¥ä½œäºç½‘ç»œå±‚é©±åŠ¨æ¥å£å’Œä¼ è¾“å±‚é©±åŠ¨æ¥å£ä¹‹é—´ï¼Œæ”¯æŒ254ä¸ªå¹¶å‘é€šä¿¡è¯è·¯ï¼Œåå­—æœåŠ¡å¯ä»¥é‡‡ç”¨UDPåè®®ã€‚</p>
</li>
<li><p>è·³é¢‘æ‰©é¢‘é€šä¿¡ï¼ˆFrequence Hopping Spread Spectumï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸ºFHSSï¼Œç›´æ¥åºåˆ—æ‰©é¢‘ï¼ˆDirect Sequence Spread Spectrumï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸ºDSSSï¼Œç‚¹åè°ƒåŠŸèƒ½ï¼ˆPoint Coordition Functionï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸ºPCFï¼Œåˆ†å¸ƒå¼åè°ƒåŠŸèƒ½ï¼ˆDistributed Coordition Functionï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸ºDCFï¼Œè™šæ‹Ÿç›‘å¬ï¼ˆVirtual Carrier Senseï¼‰ï¼Œè‹±æ–‡ç¼©å†™ä¸ºVCS</p>
</li>
<li><p>æ¶ˆæ¯è®¤è¯å°±æ˜¯ä½¿æ„å®šçš„æ¥æ”¶è€…èƒ½å¤Ÿæ£€éªŒæ”¶åˆ°çš„æ¶ˆæ¯æ˜¯å¦çœŸå®çš„æ–¹æ³•ï¼Œåˆç§°ä¸º<strong>å®Œæ•´æ€§æ ¡éªŒ</strong>ã€‚ä¿¡æ¯çš„å®Œæ•´æ€§è®¤è¯æ–¹æ³•çš„åŸºæœ¬é€”å¾„æœ‰ä¸¤æ¡ï¼š<strong>é‡‡ç”¨æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰ã€é‡‡ç”¨ç¯¡æ”¹æ£€æµ‹ç ï¼ˆMDCï¼‰</strong>ã€‚æ¶ˆæ¯è®¤è¯æ–¹æ³•å¾ˆå¤šï¼Œå¦‚è®¤è¯ä¿¡æ¯çš„æ¥æºæ—¶å¯ä»¥é‡‡ç”¨é€šä¿¡åŒæ–¹äº‹å…ˆçº¦å®šå„è‡ªå‘é€æ¶ˆæ¯æ‰€ä½¿ç”¨çš„é€šè¡Œå­—çš„æ–¹æ³•ï¼Œ<strong>ä¸éœ€è¦ä½¿ç”¨å…¬é’¥</strong>ã€‚å¯†é’¥åˆ†å‘ä¸­å¿ƒï¼ˆKDCï¼‰æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯ä¿¡ç½‘ç»œå®ä½“ï¼Œå®ƒå¯ä»¥ä¸ºç”¨æˆ·æä¾›ä¸åŒçš„å¯¹ç§°å¯†é’¥ï¼Œ<strong>å½“ä¸é‡‡ç”¨å…¬é’¥ç®—æ³•è¿›è¡Œæ¶ˆæ¯è®¤è¯æ—¶ï¼Œå¹¶ä¸éœ€è¦ä½¿ç”¨KDCï¼Œ</strong></p>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
        <tag>è®¡ç®—æœºå››çº§</tag>
        <tag>çŸ¥è¯†ç‚¹æ•´ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>innodbçš„ä½“ç³»æ¶æ„</title>
    <url>/2020/07/22/innodb-de-ti-xi-jia-gou/</url>
    <content><![CDATA[<h2 id="1-innodbçš„æ€»ä½“æ¶æ„"><a href="#1-innodbçš„æ€»ä½“æ¶æ„" class="headerlink" title="1. innodbçš„æ€»ä½“æ¶æ„"></a>1. innodbçš„æ€»ä½“æ¶æ„</h2><p>innodbçº¿ç¨‹ä¸æ–‡ä»¶çš„å…³ç³»</p>
<p>innodbæ–‡ä»¶ç»“æ„</p>
<p>InnoDBæ‰€æœ‰æ•°æ®éƒ½è¢«é€»è¾‘åœ°å­˜æ”¾åœ¨ä¸€ä¸ªè¡¨ç©ºé—´ï¼ˆtablespaceï¼‰ä¸­ã€‚è¡¨ç©ºé—´åˆç”±æ®µï¼ˆsegmentï¼‰ã€åŒºï¼ˆextentï¼‰ã€é¡µï¼ˆpageï¼‰ç»„æˆï¼Œé¡µåœ¨ä¸€äº›æ–‡æ¡£ä¸­æœ‰æ—¶ä¹Ÿç§°ä¸ºå—ï¼ˆblockï¼‰ã€‚é€»è¾‘å­˜å‚¨ç»“æ„å¤§è‡´å¦‚ä¸‹å›¾<sup><a href="#fn_8" id="reffn_8">8</a></sup>ï¼š</p>
<p><img src="v2-50b50d5c6b799c3d84d8bcf7942b0086_720w.jpg" srcset="/img/loading.gif" alt="InnoDBé€»è¾‘å­˜å‚¨ç»“æ„"></p>
<h3 id="tableçš„æ•°æ®ç»“æ„"><a href="#tableçš„æ•°æ®ç»“æ„" class="headerlink" title="tableçš„æ•°æ®ç»“æ„"></a>tableçš„æ•°æ®ç»“æ„</h3><pre><code class="hljs c++"><span class="hljs-comment">/** Data structure for a database table.  Most fields will be</span>
<span class="hljs-comment">initialized to 0, NULL or FALSE in dict_mem_table_create(). */</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dict_table_t</span> {</span>

	<span class="hljs-comment">/** Get reference count.</span>
<span class="hljs-comment">	@return current value of n_ref_count */</span>
	<span class="hljs-function"><span class="hljs-keyword">inline</span> ulint <span class="hljs-title">get_ref_count</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;

	<span class="hljs-comment">/** Acquire the table handle. */</span>
	<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">acquire</span><span class="hljs-params">()</span></span>;

	<span class="hljs-comment">/** Release the table handle. */</span>
	<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">release</span><span class="hljs-params">()</span></span>;

	<span class="hljs-comment">/** Id of the table. */</span>
	<span class="hljs-keyword">table_id_t</span>				id;

	<span class="hljs-comment">/** Memory heap. If you allocate from this heap after the table has</span>
<span class="hljs-comment">	been created then be sure to account the allocation into</span>
<span class="hljs-comment">	dict_sys-&gt;size. When closing the table we do something like</span>
<span class="hljs-comment">	dict_sys-&gt;size -= mem_heap_get_size(table-&gt;heap) and if that is going</span>
<span class="hljs-comment">	to become negative then we would assert. Something like this should do:</span>
<span class="hljs-comment">	old_size = mem_heap_get_size()</span>
<span class="hljs-comment">	mem_heap_alloc()</span>
<span class="hljs-comment">	new_size = mem_heap_get_size()</span>
<span class="hljs-comment">	dict_sys-&gt;size += new_size - old_size. */</span>
	<span class="hljs-keyword">mem_heap_t</span>*				heap;

	<span class="hljs-comment">/** Table name. */</span>
	<span class="hljs-keyword">table_name_t</span>				name;

	<span class="hljs-comment">/** NULL or the directory path where a TEMPORARY table that was</span>
<span class="hljs-comment">	explicitly created by a user should be placed if innodb_file_per_table</span>
<span class="hljs-comment">	is defined in my.cnf. In Unix this is usually "/tmp/...",</span>
<span class="hljs-comment">	in Windows "temp\...". */</span>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*				dir_path_of_temp_table;

	<span class="hljs-comment">/** NULL or the directory path specified by DATA DIRECTORY. */</span>
	<span class="hljs-keyword">char</span>*					data_dir_path;

	<span class="hljs-comment">/** NULL or the tablespace name that this table is assigned to,</span>
<span class="hljs-comment">	specified by the TABLESPACE option.*/</span>
	<span class="hljs-keyword">id_name_t</span>				tablespace;

	<span class="hljs-comment">/** Space where the clustered index of the table is placed. */</span>
	<span class="hljs-keyword">uint32_t</span>				space;

	<span class="hljs-comment">/** Stores information about:</span>
<span class="hljs-comment">	1 row format (redundant or compact),</span>
<span class="hljs-comment">	2 compressed page size (zip shift size),</span>
<span class="hljs-comment">	3 whether using atomic blobs,</span>
<span class="hljs-comment">	4 whether the table has been created with the option DATA DIRECTORY.</span>
<span class="hljs-comment">	Use DICT_TF_GET_COMPACT(), DICT_TF_GET_ZIP_SSIZE(),</span>
<span class="hljs-comment">	DICT_TF_HAS_ATOMIC_BLOBS() and DICT_TF_HAS_DATA_DIR() to parse this</span>
<span class="hljs-comment">	flag. */</span>
	<span class="hljs-keyword">unsigned</span>				flags:DICT_TF_BITS;

	<span class="hljs-comment">/** Stores information about:</span>
<span class="hljs-comment">	1 whether the table has been created using CREATE TEMPORARY TABLE,</span>
<span class="hljs-comment">	2 whether the table has an internally defined DOC ID column,</span>
<span class="hljs-comment">	3 whether the table has a FTS index,</span>
<span class="hljs-comment">	4 whether DOC ID column need to be added to the FTS index,</span>
<span class="hljs-comment">	5 whether the table is being created its own tablespace,</span>
<span class="hljs-comment">	6 whether the table has been DISCARDed,</span>
<span class="hljs-comment">	7 whether the aux FTS tables names are in hex.</span>
<span class="hljs-comment">	8 whether the table is instinc table.</span>
<span class="hljs-comment">	9 whether the table has encryption setting.</span>
<span class="hljs-comment">	Use DICT_TF2_FLAG_IS_SET() to parse this flag. */</span>
	<span class="hljs-keyword">unsigned</span>				flags2:DICT_TF2_BITS;

	<span class="hljs-comment">/** TRUE if this is in a single-table tablespace and the .ibd file is</span>
<span class="hljs-comment">	missing. Then we must return in ha_innodb.cc an error if the user</span>
<span class="hljs-comment">	tries to query such an orphaned table. */</span>
	<span class="hljs-keyword">unsigned</span>				ibd_file_missing:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** TRUE if the table object has been added to the dictionary cache. */</span>
	<span class="hljs-keyword">unsigned</span>				cached:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** TRUE if the table is to be dropped, but not yet actually dropped</span>
<span class="hljs-comment">	(could in the background drop list). It is turned on at the beginning</span>
<span class="hljs-comment">	of row_drop_table_for_mysql() and turned off just before we start to</span>
<span class="hljs-comment">	update system tables for the drop. It is protected by</span>
<span class="hljs-comment">	dict_operation_lock. */</span>
	<span class="hljs-keyword">unsigned</span>				to_be_dropped:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** Number of non-virtual columns defined so far. */</span>
	<span class="hljs-keyword">unsigned</span>				n_def:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** Number of non-virtual columns. */</span>
	<span class="hljs-keyword">unsigned</span>				n_cols:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** Number of total columns (inlcude virtual and non-virtual) */</span>
	<span class="hljs-keyword">unsigned</span>				n_t_cols:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** Number of total columns defined so far. */</span>
	<span class="hljs-keyword">unsigned</span>                                n_t_def:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** Number of virtual columns defined so far. */</span>
	<span class="hljs-keyword">unsigned</span>                                n_v_def:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** Number of virtual columns. */</span>
	<span class="hljs-keyword">unsigned</span>                                n_v_cols:<span class="hljs-number">10</span>;

	<span class="hljs-comment">/** TRUE if it's not an InnoDB system table or a table that has no FK</span>
<span class="hljs-comment">	relationships. */</span>
	<span class="hljs-keyword">unsigned</span>				can_be_evicted:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** TRUE if table is corrupted. */</span>
	<span class="hljs-keyword">unsigned</span>				corrupted:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** TRUE if some indexes should be dropped after ONLINE_INDEX_ABORTED</span>
<span class="hljs-comment">	or ONLINE_INDEX_ABORTED_DROPPED. */</span>
	<span class="hljs-keyword">unsigned</span>				drop_aborted:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** Array of column descriptions. */</span>
	<span class="hljs-keyword">dict_col_t</span>*				cols;

	<span class="hljs-comment">/** Array of virtual column descriptions. */</span>
	<span class="hljs-keyword">dict_v_col_t</span>*				v_cols;

	<span class="hljs-comment">/** List of stored column descriptions. It is used only for foreign key</span>
<span class="hljs-comment">	check during create table and copy alter operations.</span>
<span class="hljs-comment">	During copy alter, s_cols list is filled during create table operation</span>
<span class="hljs-comment">	and need to preserve till rename table operation. That is the</span>
<span class="hljs-comment">	reason s_cols is a part of dict_table_t */</span>
	dict_s_col_list*			s_cols;

	<span class="hljs-comment">/** Column names packed in a character string</span>
<span class="hljs-comment">	"name1\0name2\0...nameN\0". Until the string contains n_cols, it will</span>
<span class="hljs-comment">	be allocated from a temporary heap. The final string will be allocated</span>
<span class="hljs-comment">	from table-&gt;heap. */</span>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*				col_names;

	<span class="hljs-comment">/** Virtual column names */</span>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*				v_col_names;

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> UNIV_HOTBACKUP</span>
	<span class="hljs-comment">/** Hash chain node. */</span>
	<span class="hljs-keyword">hash_node_t</span>				name_hash;

	<span class="hljs-comment">/** Hash chain node. */</span>
	<span class="hljs-keyword">hash_node_t</span>				id_hash;

	<span class="hljs-comment">/** The FTS_DOC_ID_INDEX, or NULL if no fulltext indexes exist */</span>
	<span class="hljs-keyword">dict_index_t</span>*				fts_doc_id_index;

	<span class="hljs-comment">/** List of indexes of the table. */</span>
	UT_LIST_BASE_NODE_T(<span class="hljs-keyword">dict_index_t</span>)	indexes;

	<span class="hljs-comment">/** List of foreign key constraints in the table. These refer to</span>
<span class="hljs-comment">	columns in other tables. */</span>
	UT_LIST_BASE_NODE_T(<span class="hljs-keyword">dict_foreign_t</span>)	foreign_list;

	<span class="hljs-comment">/** List of foreign key constraints which refer to this table. */</span>
	UT_LIST_BASE_NODE_T(<span class="hljs-keyword">dict_foreign_t</span>)	referenced_list;

	<span class="hljs-comment">/** Node of the LRU list of tables. */</span>
	UT_LIST_NODE_T(<span class="hljs-keyword">dict_table_t</span>)		table_LRU;

	<span class="hljs-comment">/** Maximum recursive level we support when loading tables chained</span>
<span class="hljs-comment">	together with FK constraints. If exceeds this level, we will stop</span>
<span class="hljs-comment">	loading child table into memory along with its parent table. */</span>
	<span class="hljs-keyword">unsigned</span>				fk_max_recusive_level:<span class="hljs-number">8</span>;

	<span class="hljs-comment">/** Count of how many foreign key check operations are currently being</span>
<span class="hljs-comment">	performed on the table. We cannot drop the table while there are</span>
<span class="hljs-comment">	foreign key checks running on it. */</span>
	ulint					n_foreign_key_checks_running;

	<span class="hljs-comment">/** Transactions whose view low limit is greater than this number are</span>
<span class="hljs-comment">	not allowed to store to the MySQL query cache or retrieve from it.</span>
<span class="hljs-comment">	When a trx with undo logs commits, it sets this to the value of the</span>
<span class="hljs-comment">	current time. */</span>
	<span class="hljs-keyword">trx_id_t</span>				query_cache_inv_id;

	<span class="hljs-comment">/** Transaction id that last touched the table definition. Either when</span>
<span class="hljs-comment">	loading the definition or CREATE TABLE, or ALTER TABLE (prepare,</span>
<span class="hljs-comment">	commit, and rollback phases). */</span>
	<span class="hljs-keyword">trx_id_t</span>				def_trx_id;

	<span class="hljs-comment">/*!&lt; set of foreign key constraints in the table; these refer to</span>
<span class="hljs-comment">	columns in other tables */</span>
	dict_foreign_set			foreign_set;

	<span class="hljs-comment">/*!&lt; set of foreign key constraints which refer to this table */</span>
	dict_foreign_set			referenced_set;

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> UNIV_DEBUG</span>
	<span class="hljs-comment">/** This field is used to specify in simulations tables which are so</span>
<span class="hljs-comment">	big that disk should be accessed. Disk access is simulated by putting</span>
<span class="hljs-comment">	the thread to sleep for a while. NOTE that this flag is not stored to</span>
<span class="hljs-comment">	the data dictionary on disk, and the database will forget about value</span>
<span class="hljs-comment">	TRUE if it has to reload the table definition from disk. */</span>
	ibool					does_not_fit_in_memory;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* UNIV_DEBUG */</span></span>

	<span class="hljs-comment">/** TRUE if the maximum length of a single row exceeds BIG_ROW_SIZE.</span>
<span class="hljs-comment">	Initialized in dict_table_add_to_cache(). */</span>
	<span class="hljs-keyword">unsigned</span>				big_rows:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** Statistics for query optimization. @{ */</span>

	<span class="hljs-comment">/** Creation state of 'stats_latch'. */</span>
	<span class="hljs-keyword">volatile</span> os_once::<span class="hljs-keyword">state_t</span>		stats_latch_created;

	<span class="hljs-comment">/** This latch protects:</span>
<span class="hljs-comment">	dict_table_t::stat_initialized,</span>
<span class="hljs-comment">	dict_table_t::stat_n_rows (*),</span>
<span class="hljs-comment">	dict_table_t::stat_clustered_index_size,</span>
<span class="hljs-comment">	dict_table_t::stat_sum_of_other_index_sizes,</span>
<span class="hljs-comment">	dict_table_t::stat_modified_counter (*),</span>
<span class="hljs-comment">	dict_table_t::indexes*::stat_n_diff_key_vals[],</span>
<span class="hljs-comment">	dict_table_t::indexes*::stat_index_size,</span>
<span class="hljs-comment">	dict_table_t::indexes*::stat_n_leaf_pages.</span>
<span class="hljs-comment">	(*) Those are not always protected for</span>
<span class="hljs-comment">	performance reasons. */</span>
	<span class="hljs-keyword">rw_lock_t</span>*				stats_latch;

	<span class="hljs-comment">/** TRUE if statistics have been calculated the first time after</span>
<span class="hljs-comment">	database startup or table creation. */</span>
	<span class="hljs-keyword">unsigned</span>				stat_initialized:<span class="hljs-number">1</span>;

	<span class="hljs-comment">/** Timestamp of last recalc of the stats. */</span>
	<span class="hljs-keyword">ib_time_t</span>				stats_last_recalc;

	<span class="hljs-comment">/** The two bits below are set in the 'stat_persistent' member. They</span>
<span class="hljs-comment">	have the following meaning:</span>
<span class="hljs-comment">	1. _ON=0, _OFF=0, no explicit persistent stats setting for this table,</span>
<span class="hljs-comment">	the value of the global srv_stats_persistent is used to determine</span>
<span class="hljs-comment">	whether the table has persistent stats enabled or not</span>
<span class="hljs-comment">	2. _ON=0, _OFF=1, persistent stats are explicitly disabled for this</span>
<span class="hljs-comment">	table, regardless of the value of the global srv_stats_persistent</span>
<span class="hljs-comment">	3. _ON=1, _OFF=0, persistent stats are explicitly enabled for this</span>
<span class="hljs-comment">	table, regardless of the value of the global srv_stats_persistent</span>
<span class="hljs-comment">	4. _ON=1, _OFF=1, not allowed, we assert if this ever happens. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DICT_STATS_PERSISTENT_ON	(1 &lt;&lt; 1)</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DICT_STATS_PERSISTENT_OFF	(1 &lt;&lt; 2)</span>

	<span class="hljs-comment">/** Indicates whether the table uses persistent stats or not. See</span>
<span class="hljs-comment">	DICT_STATS_PERSISTENT_ON and DICT_STATS_PERSISTENT_OFF. */</span>
	<span class="hljs-keyword">ib_uint32_t</span>				stat_persistent;

	<span class="hljs-comment">/** The two bits below are set in the 'stats_auto_recalc' member. They</span>
<span class="hljs-comment">	have the following meaning:</span>
<span class="hljs-comment">	1. _ON=0, _OFF=0, no explicit auto recalc setting for this table, the</span>
<span class="hljs-comment">	value of the global srv_stats_persistent_auto_recalc is used to</span>
<span class="hljs-comment">	determine whether the table has auto recalc enabled or not</span>
<span class="hljs-comment">	2. _ON=0, _OFF=1, auto recalc is explicitly disabled for this table,</span>
<span class="hljs-comment">	regardless of the value of the global srv_stats_persistent_auto_recalc</span>
<span class="hljs-comment">	3. _ON=1, _OFF=0, auto recalc is explicitly enabled for this table,</span>
<span class="hljs-comment">	regardless of the value of the global srv_stats_persistent_auto_recalc</span>
<span class="hljs-comment">	4. _ON=1, _OFF=1, not allowed, we assert if this ever happens. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DICT_STATS_AUTO_RECALC_ON	(1 &lt;&lt; 1)</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DICT_STATS_AUTO_RECALC_OFF	(1 &lt;&lt; 2)</span>

	<span class="hljs-comment">/** Indicates whether the table uses automatic recalc for persistent</span>
<span class="hljs-comment">	stats or not. See DICT_STATS_AUTO_RECALC_ON and</span>
<span class="hljs-comment">	DICT_STATS_AUTO_RECALC_OFF. */</span>
	<span class="hljs-keyword">ib_uint32_t</span>				stats_auto_recalc;

	<span class="hljs-comment">/** The number of pages to sample for this table during persistent</span>
<span class="hljs-comment">	stats estimation. If this is 0, then the value of the global</span>
<span class="hljs-comment">	srv_stats_persistent_sample_pages will be used instead. */</span>
	ulint					stats_sample_pages;

	<span class="hljs-comment">/** Approximate number of rows in the table. We periodically calculate</span>
<span class="hljs-comment">	new estimates. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>				stat_n_rows;

	<span class="hljs-comment">/** Approximate clustered index size in database pages. */</span>
	ulint					stat_clustered_index_size;

	<span class="hljs-comment">/** Approximate size of other indexes in database pages. */</span>
	ulint					stat_sum_of_other_index_sizes;

	<span class="hljs-comment">/** How many rows are modified since last stats recalc. When a row is</span>
<span class="hljs-comment">	inserted, updated, or deleted, we add 1 to this number; we calculate</span>
<span class="hljs-comment">	new estimates for the table and the indexes if the table has changed</span>
<span class="hljs-comment">	too much, see row_update_statistics_if_needed(). The counter is reset</span>
<span class="hljs-comment">	to zero at statistics calculation. This counter is not protected by</span>
<span class="hljs-comment">	any latch, because this is only used for heuristics. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>				stat_modified_counter;

	<span class="hljs-comment">/** Background stats thread is not working on this table. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BG_STAT_NONE			0</span>

	<span class="hljs-comment">/** Set in 'stats_bg_flag' when the background stats code is working</span>
<span class="hljs-comment">	on this table. The DROP TABLE code waits for this to be cleared before</span>
<span class="hljs-comment">	proceeding. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BG_STAT_IN_PROGRESS		(1 &lt;&lt; 0)</span>

	<span class="hljs-comment">/** Set in 'stats_bg_flag' when DROP TABLE starts waiting on</span>
<span class="hljs-comment">	BG_STAT_IN_PROGRESS to be cleared. The background stats thread will</span>
<span class="hljs-comment">	detect this and will eventually quit sooner. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BG_STAT_SHOULD_QUIT		(1 &lt;&lt; 1)</span>

	<span class="hljs-comment">/** The state of the background stats thread wrt this table.</span>
<span class="hljs-comment">	See BG_STAT_NONE, BG_STAT_IN_PROGRESS and BG_STAT_SHOULD_QUIT.</span>
<span class="hljs-comment">	Writes are covered by dict_sys-&gt;mutex. Dirty reads are possible. */</span>
	<span class="hljs-keyword">byte</span>					stats_bg_flag;

	<span class="hljs-comment">/* @} */</span>

	<span class="hljs-comment">/** AUTOINC related members. @{ */</span>

	<span class="hljs-comment">/* The actual collection of tables locked during AUTOINC read/write is</span>
<span class="hljs-comment">	kept in trx_t. In order to quickly determine whether a transaction has</span>
<span class="hljs-comment">	locked the AUTOINC lock we keep a pointer to the transaction here in</span>
<span class="hljs-comment">	the 'autoinc_trx' member. This is to avoid acquiring the</span>
<span class="hljs-comment">	lock_sys_t::mutex and scanning the vector in trx_t.</span>
<span class="hljs-comment">	When an AUTOINC lock has to wait, the corresponding lock instance is</span>
<span class="hljs-comment">	created on the trx lock heap rather than use the pre-allocated instance</span>
<span class="hljs-comment">	in autoinc_lock below. */</span>

	<span class="hljs-comment">/** A buffer for an AUTOINC lock for this table. We allocate the</span>
<span class="hljs-comment">	memory here so that individual transactions can get it and release it</span>
<span class="hljs-comment">	without a need to allocate space from the lock heap of the trx:</span>
<span class="hljs-comment">	otherwise the lock heap would grow rapidly if we do a large insert</span>
<span class="hljs-comment">	from a select. */</span>
	<span class="hljs-keyword">lock_t</span>*					autoinc_lock;

	<span class="hljs-comment">/** Creation state of autoinc_mutex member */</span>
	<span class="hljs-keyword">volatile</span> os_once::<span class="hljs-keyword">state_t</span>		autoinc_mutex_created;

	<span class="hljs-comment">/** Mutex protecting the autoincrement counter. */</span>
	<span class="hljs-keyword">ib_mutex_t</span>*				autoinc_mutex;

	<span class="hljs-comment">/** Autoinc counter value to give to the next inserted row. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>				autoinc;

	<span class="hljs-comment">/** This counter is used to track the number of granted and pending</span>
<span class="hljs-comment">	autoinc locks on this table. This value is set after acquiring the</span>
<span class="hljs-comment">	lock_sys_t::mutex but we peek the contents to determine whether other</span>
<span class="hljs-comment">	transactions have acquired the AUTOINC lock or not. Of course only one</span>
<span class="hljs-comment">	transaction can be granted the lock but there can be multiple</span>
<span class="hljs-comment">	waiters. */</span>
	ulong					n_waiting_or_granted_auto_inc_locks;

	<span class="hljs-comment">/** The transaction that currently holds the the AUTOINC lock on this</span>
<span class="hljs-comment">	table. Protected by lock_sys-&gt;mutex. */</span>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">trx_t</span>*				autoinc_trx;

	<span class="hljs-comment">/* @} */</span>

	<span class="hljs-comment">/** Count of how many handles are opened to this table from memcached.</span>
<span class="hljs-comment">	DDL on the table is NOT allowed until this count goes to zero. If</span>
<span class="hljs-comment">	it is -1, then there's DDL on the table, DML from memcached will be</span>
<span class="hljs-comment">	blocked. */</span>
	lint					memcached_sync_count;

	<span class="hljs-comment">/** FTS specific state variables. */</span>
	<span class="hljs-keyword">fts_t</span>*					fts;

	<span class="hljs-comment">/** Quiescing states, protected by the dict_index_t::lock. ie. we can</span>
<span class="hljs-comment">	only change the state if we acquire all the latches (dict_index_t::lock)</span>
<span class="hljs-comment">	in X mode of this table's indexes. */</span>
	<span class="hljs-keyword">ib_quiesce_t</span>				quiesce;

	<span class="hljs-comment">/** Count of the number of record locks on this table. We use this to</span>
<span class="hljs-comment">	determine whether we can evict the table from the dictionary cache.</span>
<span class="hljs-comment">	It is protected by lock_sys-&gt;mutex. */</span>
	ulint					n_rec_locks;

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> UNIV_DEBUG</span>
<span class="hljs-keyword">private</span>:
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
	<span class="hljs-comment">/** Count of how many handles are opened to this table. Dropping of the</span>
<span class="hljs-comment">	table is NOT allowed until this count gets to zero. MySQL does NOT</span>
<span class="hljs-comment">	itself check the number of open handles at DROP. */</span>
	ulint					n_ref_count;

<span class="hljs-keyword">public</span>:
	<span class="hljs-comment">/** List of locks on the table. Protected by lock_sys-&gt;mutex. */</span>
	<span class="hljs-keyword">table_lock_list_t</span>			locks;

	<span class="hljs-comment">/** Timestamp of the last modification of this table. */</span>
	<span class="hljs-keyword">time_t</span>					update_time;

	<span class="hljs-comment">/** row-id counter for use by intrinsic table for getting row-id.</span>
<span class="hljs-comment">	Given intrinsic table semantics, row-id can be locally maintained</span>
<span class="hljs-comment">	instead of getting it from central generator which involves mutex</span>
<span class="hljs-comment">	locking. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>				sess_row_id;

	<span class="hljs-comment">/** trx_id counter for use by intrinsic table for getting trx-id.</span>
<span class="hljs-comment">	Intrinsic table are not shared so don't need a central trx-id</span>
<span class="hljs-comment">	but just need a increased counter to track consistent view while</span>
<span class="hljs-comment">	proceeding SELECT as part of UPDATE. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>				sess_trx_id;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* !UNIV_HOTBACKUP */</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> UNIV_DEBUG</span>
	<span class="hljs-comment">/** Value of 'magic_n'. */</span>
	<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DICT_TABLE_MAGIC_N		76333786</span>

	<span class="hljs-comment">/** Magic number. */</span>
	ulint					magic_n;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* UNIV_DEBUG */</span></span>
	<span class="hljs-comment">/** mysql_row_templ_t for base columns used for compute the virtual</span>
<span class="hljs-comment">	columns */</span>
	<span class="hljs-keyword">dict_vcol_templ_t</span>*			vc_templ;

	<span class="hljs-comment">/** encryption key, it's only for export/import */</span>
	<span class="hljs-keyword">byte</span>*					encryption_key;

	<span class="hljs-comment">/** encryption iv, it's only for export/import */</span>
	<span class="hljs-keyword">byte</span>*					encryption_iv;
};</code></pre>
<h3 id="indexçš„æ•°æ®ç»“æ„"><a href="#indexçš„æ•°æ®ç»“æ„" class="headerlink" title="indexçš„æ•°æ®ç»“æ„"></a>indexçš„æ•°æ®ç»“æ„</h3><pre><code class="hljs c++"><span class="hljs-comment">/** Data structure for an index.  Most fields will be</span>
<span class="hljs-comment">initialized to 0, NULL or FALSE in dict_mem_index_create(). */</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dict_index_t</span>{</span>
	<span class="hljs-keyword">index_id_t</span>	id;	<span class="hljs-comment">/*!&lt; id of the index */</span>
	<span class="hljs-keyword">mem_heap_t</span>*	heap;	<span class="hljs-comment">/*!&lt; memory heap */</span>
	<span class="hljs-keyword">id_name_t</span>	name;	<span class="hljs-comment">/*!&lt; index name */</span>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*	table_name;<span class="hljs-comment">/*!&lt; table name */</span>
	<span class="hljs-keyword">dict_table_t</span>*	table;	<span class="hljs-comment">/*!&lt; back pointer to table */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> UNIV_HOTBACKUP</span>
	<span class="hljs-keyword">unsigned</span>	space:<span class="hljs-number">32</span>;
				<span class="hljs-comment">/*!&lt; space where the index tree is placed */</span>
	<span class="hljs-keyword">unsigned</span>	page:<span class="hljs-number">32</span>;<span class="hljs-comment">/*!&lt; index tree root page number */</span>
	<span class="hljs-keyword">unsigned</span>	merge_threshold:<span class="hljs-number">6</span>;
				<span class="hljs-comment">/*!&lt; In the pessimistic delete, if the page</span>
<span class="hljs-comment">				data size drops below this limit in percent,</span>
<span class="hljs-comment">				merging it to a neighbor is tried */</span>
<span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> DICT_INDEX_MERGE_THRESHOLD_DEFAULT 50</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* !UNIV_HOTBACKUP */</span></span>
	<span class="hljs-keyword">unsigned</span>	type:DICT_IT_BITS;
				<span class="hljs-comment">/*!&lt; index type (DICT_CLUSTERED, DICT_UNIQUE,</span>
<span class="hljs-comment">				DICT_IBUF, DICT_CORRUPT) */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_KEY_LENGTH_BITS 12</span>
	<span class="hljs-keyword">unsigned</span>	trx_id_offset:MAX_KEY_LENGTH_BITS;
				<span class="hljs-comment">/*!&lt; position of the trx id column</span>
<span class="hljs-comment">				in a clustered index record, if the fields</span>
<span class="hljs-comment">				before it are known to be of a fixed size,</span>
<span class="hljs-comment">				0 otherwise */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> (1&lt;&lt;MAX_KEY_LENGTH_BITS) &lt; MAX_KEY_LENGTH</span>
<span class="hljs-meta"># <span class="hljs-meta-keyword">error</span> (1&lt;&lt;MAX_KEY_LENGTH_BITS) &lt; MAX_KEY_LENGTH</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
	<span class="hljs-keyword">unsigned</span>	n_user_defined_cols:<span class="hljs-number">10</span>;
				<span class="hljs-comment">/*!&lt; number of columns the user defined to</span>
<span class="hljs-comment">				be in the index: in the internal</span>
<span class="hljs-comment">				representation we add more columns */</span>
	<span class="hljs-keyword">unsigned</span>	allow_duplicates:<span class="hljs-number">1</span>;
				<span class="hljs-comment">/*!&lt; if true, allow duplicate values</span>
<span class="hljs-comment">				even if index is created with unique</span>
<span class="hljs-comment">				constraint */</span>
	<span class="hljs-keyword">unsigned</span>	nulls_equal:<span class="hljs-number">1</span>;
				<span class="hljs-comment">/*!&lt; if true, SQL NULL == SQL NULL */</span>
	<span class="hljs-keyword">unsigned</span>	disable_ahi:<span class="hljs-number">1</span>;
				<span class="hljs-comment">/*!&lt; in true, then disable AHI.</span>
<span class="hljs-comment">				Currently limited to intrinsic</span>
<span class="hljs-comment">				temporary table as index id is not</span>
<span class="hljs-comment">				unqiue for such table which is one of the</span>
<span class="hljs-comment">				validation criterion for ahi. */</span>
	<span class="hljs-keyword">unsigned</span>	n_uniq:<span class="hljs-number">10</span>;<span class="hljs-comment">/*!&lt; number of fields from the beginning</span>
<span class="hljs-comment">				which are enough to determine an index</span>
<span class="hljs-comment">				entry uniquely */</span>
	<span class="hljs-keyword">unsigned</span>	n_def:<span class="hljs-number">10</span>;<span class="hljs-comment">/*!&lt; number of fields defined so far */</span>
	<span class="hljs-keyword">unsigned</span>	n_fields:<span class="hljs-number">10</span>;<span class="hljs-comment">/*!&lt; number of fields in the index */</span>
	<span class="hljs-keyword">unsigned</span>	n_nullable:<span class="hljs-number">10</span>;<span class="hljs-comment">/*!&lt; number of nullable fields */</span>
	<span class="hljs-keyword">unsigned</span>	cached:<span class="hljs-number">1</span>;<span class="hljs-comment">/*!&lt; TRUE if the index object is in the</span>
<span class="hljs-comment">				dictionary cache */</span>
	<span class="hljs-keyword">unsigned</span>	to_be_dropped:<span class="hljs-number">1</span>;
				<span class="hljs-comment">/*!&lt; TRUE if the index is to be dropped;</span>
<span class="hljs-comment">				protected by dict_operation_lock */</span>
	<span class="hljs-keyword">unsigned</span>	online_status:<span class="hljs-number">2</span>;
				<span class="hljs-comment">/*!&lt; enum online_index_status.</span>
<span class="hljs-comment">				Transitions from ONLINE_INDEX_COMPLETE (to</span>
<span class="hljs-comment">				ONLINE_INDEX_CREATION) are protected</span>
<span class="hljs-comment">				by dict_operation_lock and</span>
<span class="hljs-comment">				dict_sys-&gt;mutex. Other changes are</span>
<span class="hljs-comment">				protected by index-&gt;lock. */</span>
	<span class="hljs-keyword">unsigned</span>	uncommitted:<span class="hljs-number">1</span>;
				<span class="hljs-comment">/*!&lt; a flag that is set for secondary indexes</span>
<span class="hljs-comment">				that have not been committed to the</span>
<span class="hljs-comment">				data dictionary yet */</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> UNIV_DEBUG</span>
	<span class="hljs-keyword">uint32_t</span>	magic_n;<span class="hljs-comment">/*!&lt; magic number */</span>
<span class="hljs-comment">/** Value of dict_index_t::magic_n */</span>
<span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> DICT_INDEX_MAGIC_N	76789786</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
	<span class="hljs-keyword">dict_field_t</span>*	fields;	<span class="hljs-comment">/*!&lt; array of field descriptions */</span>
	st_mysql_ftparser*
			parser;	<span class="hljs-comment">/*!&lt; fulltext parser plugin */</span>
	<span class="hljs-keyword">bool</span>		is_ngram;
				<span class="hljs-comment">/*!&lt; true if it's ngram parser */</span>
	<span class="hljs-keyword">bool</span>		has_new_v_col;
				<span class="hljs-comment">/*!&lt; whether it has a newly added virtual</span>
<span class="hljs-comment">				column in ALTER */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> UNIV_HOTBACKUP</span>
	UT_LIST_NODE_T(<span class="hljs-keyword">dict_index_t</span>)
			indexes;<span class="hljs-comment">/*!&lt; list of indexes of the table */</span>
	<span class="hljs-keyword">btr_search_t</span>*	search_info;
				<span class="hljs-comment">/*!&lt; info used in optimistic searches */</span>
	<span class="hljs-keyword">row_log_t</span>*	online_log;
				<span class="hljs-comment">/*!&lt; the log of modifications</span>
<span class="hljs-comment">				during online index creation;</span>
<span class="hljs-comment">				valid when online_status is</span>
<span class="hljs-comment">				ONLINE_INDEX_CREATION */</span>
	<span class="hljs-comment">/*----------------------*/</span>
	<span class="hljs-comment">/** Statistics for query optimization */</span>
	<span class="hljs-comment">/* @{ */</span>
	<span class="hljs-keyword">ib_uint64_t</span>*	stat_n_diff_key_vals;
				<span class="hljs-comment">/*!&lt; approximate number of different</span>
<span class="hljs-comment">				key values for this index, for each</span>
<span class="hljs-comment">				n-column prefix where 1 &lt;= n &lt;=</span>
<span class="hljs-comment">				dict_get_n_unique(index) (the array is</span>
<span class="hljs-comment">				indexed from 0 to n_uniq-1); we</span>
<span class="hljs-comment">				periodically calculate new</span>
<span class="hljs-comment">				estimates */</span>
	<span class="hljs-keyword">ib_uint64_t</span>*	stat_n_sample_sizes;
				<span class="hljs-comment">/*!&lt; number of pages that were sampled</span>
<span class="hljs-comment">				to calculate each of stat_n_diff_key_vals[],</span>
<span class="hljs-comment">				e.g. stat_n_sample_sizes[3] pages were sampled</span>
<span class="hljs-comment">				to get the number stat_n_diff_key_vals[3]. */</span>
	<span class="hljs-keyword">ib_uint64_t</span>*	stat_n_non_null_key_vals;
				<span class="hljs-comment">/* approximate number of non-null key values</span>
<span class="hljs-comment">				for this index, for each column where</span>
<span class="hljs-comment">				1 &lt;= n &lt;= dict_get_n_unique(index) (the array</span>
<span class="hljs-comment">				is indexed from 0 to n_uniq-1); This</span>
<span class="hljs-comment">				is used when innodb_stats_method is</span>
<span class="hljs-comment">				"nulls_ignored". */</span>
	ulint		stat_index_size;
				<span class="hljs-comment">/*!&lt; approximate index size in</span>
<span class="hljs-comment">				database pages */</span>
	ulint		stat_n_leaf_pages;
				<span class="hljs-comment">/*!&lt; approximate number of leaf pages in the</span>
<span class="hljs-comment">				index tree */</span>
	<span class="hljs-comment">/* @} */</span>
	<span class="hljs-keyword">last_ops_cur_t</span>*	last_ins_cur;
				<span class="hljs-comment">/*!&lt; cache the last insert position.</span>
<span class="hljs-comment">				Currently limited to auto-generated</span>
<span class="hljs-comment">				clustered index on intrinsic table only. */</span>
	<span class="hljs-keyword">last_ops_cur_t</span>*	last_sel_cur;
				<span class="hljs-comment">/*!&lt; cache the last selected position</span>
<span class="hljs-comment">				Currently limited to intrinsic table only. */</span>
	<span class="hljs-keyword">rec_cache_t</span>	rec_cache;
				<span class="hljs-comment">/*!&lt; cache the field that needs to be</span>
<span class="hljs-comment">				re-computed on each insert.</span>
<span class="hljs-comment">				Limited to intrinsic table as this is common</span>
<span class="hljs-comment">				share and can't be used without protection</span>
<span class="hljs-comment">				if table is accessible to multiple-threads. */</span>
	<span class="hljs-keyword">rtr_ssn_t</span>	rtr_ssn;<span class="hljs-comment">/*!&lt; Node sequence number for RTree */</span>
	<span class="hljs-keyword">rtr_info_track_t</span>*
			rtr_track;<span class="hljs-comment">/*!&lt; tracking all R-Tree search cursors */</span>
	<span class="hljs-keyword">trx_id_t</span>	trx_id; <span class="hljs-comment">/*!&lt; id of the transaction that created this</span>
<span class="hljs-comment">				index, or 0 if the index existed</span>
<span class="hljs-comment">				when InnoDB was started up */</span>
	<span class="hljs-keyword">zip_pad_info_t</span>	zip_pad;<span class="hljs-comment">/*!&lt; Information about state of</span>
<span class="hljs-comment">				compression failures and successes */</span>
	<span class="hljs-keyword">rw_lock_t</span>	lock;	<span class="hljs-comment">/*!&lt; read-write lock protecting the</span>
<span class="hljs-comment">				upper levels of the index tree */</span>

	<span class="hljs-comment">/** Determine if the index has been committed to the</span>
<span class="hljs-comment">	data dictionary.</span>
<span class="hljs-comment">	@return whether the index definition has been committed */</span>
	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">is_committed</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>
<span class="hljs-function">	</span>{
		ut_ad(!uncommitted || !(type &amp; DICT_CLUSTERED));
		<span class="hljs-keyword">return</span>(UNIV_LIKELY(!uncommitted));
	}

	<span class="hljs-comment">/** Flag an index committed or uncommitted.</span>
<span class="hljs-comment">	@param[in]	committed	whether the index is committed */</span>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_committed</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> committed)</span></span>
<span class="hljs-function">	</span>{
		ut_ad(!to_be_dropped);
		ut_ad(committed || !(type &amp; DICT_CLUSTERED));
		uncommitted = !committed;
	}
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* !UNIV_HOTBACKUP */</span></span>
};</code></pre>
<h3 id="columnçš„æ•°æ®ç»“æ„"><a href="#columnçš„æ•°æ®ç»“æ„" class="headerlink" title="columnçš„æ•°æ®ç»“æ„"></a>columnçš„æ•°æ®ç»“æ„</h3><pre><code class="hljs c++"><span class="hljs-comment">/** Data structure for a column in a table */</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dict_col_t</span>{</span>
	<span class="hljs-comment">/*----------------------*/</span>
	<span class="hljs-comment">/** The following are copied from dtype_t,</span>
<span class="hljs-comment">	so that all bit-fields can be packed tightly. */</span>
	<span class="hljs-comment">/* @{ */</span>
	<span class="hljs-keyword">unsigned</span>	prtype:<span class="hljs-number">32</span>;	<span class="hljs-comment">/*!&lt; precise type; MySQL data</span>
<span class="hljs-comment">					type, charset code, flags to</span>
<span class="hljs-comment">					indicate nullability,</span>
<span class="hljs-comment">					signedness, whether this is a</span>
<span class="hljs-comment">					binary string, whether this is</span>
<span class="hljs-comment">					a true VARCHAR where MySQL</span>
<span class="hljs-comment">					uses 2 bytes to store the length */</span>
	<span class="hljs-keyword">unsigned</span>	mtype:<span class="hljs-number">8</span>;	<span class="hljs-comment">/*!&lt; main data type */</span>

	<span class="hljs-comment">/* the remaining fields do not affect alphabetical ordering: */</span>

	<span class="hljs-keyword">unsigned</span>	len:<span class="hljs-number">16</span>;		<span class="hljs-comment">/*!&lt; length; for MySQL data this</span>
<span class="hljs-comment">					is field-&gt;pack_length(),</span>
<span class="hljs-comment">					except that for a &gt;= 5.0.3</span>
<span class="hljs-comment">					type true VARCHAR this is the</span>
<span class="hljs-comment">					maximum byte length of the</span>
<span class="hljs-comment">					string data (in addition to</span>
<span class="hljs-comment">					the string, MySQL uses 1 or 2</span>
<span class="hljs-comment">					bytes to store the string length) */</span>

	<span class="hljs-keyword">unsigned</span>	mbminmaxlen:<span class="hljs-number">5</span>;	<span class="hljs-comment">/*!&lt; minimum and maximum length of a</span>
<span class="hljs-comment">					character, in bytes;</span>
<span class="hljs-comment">					DATA_MBMINMAXLEN(mbminlen,mbmaxlen);</span>
<span class="hljs-comment">					mbminlen=DATA_MBMINLEN(mbminmaxlen);</span>
<span class="hljs-comment">					mbmaxlen=DATA_MBMINLEN(mbminmaxlen) */</span>
	<span class="hljs-comment">/*----------------------*/</span>
	<span class="hljs-comment">/* End of definitions copied from dtype_t */</span>
	<span class="hljs-comment">/* @} */</span>

	<span class="hljs-keyword">unsigned</span>	ind:<span class="hljs-number">10</span>;		<span class="hljs-comment">/*!&lt; table column position</span>
<span class="hljs-comment">					(starting from 0) */</span>
	<span class="hljs-keyword">unsigned</span>	ord_part:<span class="hljs-number">1</span>;	<span class="hljs-comment">/*!&lt; nonzero if this column</span>
<span class="hljs-comment">					appears in the ordering fields</span>
<span class="hljs-comment">					of an index */</span>
	<span class="hljs-keyword">unsigned</span>	max_prefix:<span class="hljs-number">12</span>;	<span class="hljs-comment">/*!&lt; maximum index prefix length on</span>
<span class="hljs-comment">					this column. Our current max limit is</span>
<span class="hljs-comment">					3072 for Barracuda table */</span>
};</code></pre>
<h2 id="2-innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹"><a href="#2-innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹" class="headerlink" title="2. innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹"></a>2. innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹</h2><p>åœ¨mysql_mainå‡½æ•°é‡Œé¢æœ‰ä¸€è¡Œä»£ç æ˜¯åŠ è½½ç»„ä»¶:</p>
<pre><code class="hljs c++"><span class="hljs-comment">//...</span>
<span class="hljs-comment">//MySQL 5.7.19ç‰ˆæœ¬mysqld.ccæ–‡ä»¶çš„4673è¡Œ</span>
  <span class="hljs-keyword">if</span> (init_server_components())
    unireg_abort(MYSQLD_ABORT_EXIT);
<span class="hljs-comment">//...</span></code></pre>
<p>å…¶ä¸­æœ‰å…³äºæ’ä»¶çš„åˆå§‹åŒ–çš„å‡½æ•°:</p>
<pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">init_server_components</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">//...</span>
	<span class="hljs-comment">/*</span>
<span class="hljs-comment">    Skip reading the plugin table when starting with --help in order</span>
<span class="hljs-comment">    to also skip initializing InnoDB. This provides a simpler and more</span>
<span class="hljs-comment">    uniform handling of various startup use cases, e.g. when the data</span>
<span class="hljs-comment">    directory does not exist, exists but is empty, exists with InnoDB</span>
<span class="hljs-comment">    system tablespaces present etc.</span>
<span class="hljs-comment">  */</span>
  <span class="hljs-keyword">if</span> (plugin_init(&amp;remaining_argc, remaining_argv,
                  (opt_noacl ? PLUGIN_INIT_SKIP_PLUGIN_TABLE : <span class="hljs-number">0</span>) |
                  (opt_help ? (PLUGIN_INIT_SKIP_INITIALIZATION |
                               PLUGIN_INIT_SKIP_PLUGIN_TABLE) : <span class="hljs-number">0</span>)))
  {
    sql_print_error(<span class="hljs-string">"Failed to initialize plugins."</span>);
    unireg_abort(MYSQLD_ABORT_EXIT);
  }
    <span class="hljs-comment">//...</span>
}</code></pre>
<p><code>plugin_init</code>å‡½æ•°é‡Œé¢åˆæœ‰:</p>
<pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">plugin_init</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *argc, <span class="hljs-keyword">char</span> **argv, <span class="hljs-keyword">int</span> flags)</span></span>
<span class="hljs-function"></span>{
	<span class="hljs-comment">//...</span>
      <span class="hljs-comment">/* Register all dynamic plugins */</span>
  <span class="hljs-keyword">if</span> (!(flags &amp; PLUGIN_INIT_SKIP_DYNAMIC_LOADING))
  {
    <span class="hljs-function">I_List_iterator&lt;i_string&gt; <span class="hljs-title">iter</span><span class="hljs-params">(opt_plugin_load_list)</span></span>;
    i_string *item;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">NULL</span> != (item= iter++))
      plugin_load_list(&amp;tmp_root, argc, argv, item-&gt;ptr);

    <span class="hljs-keyword">if</span> (!(flags &amp; PLUGIN_INIT_SKIP_PLUGIN_TABLE))
      plugin_load(&amp;tmp_root, argc, argv);
  }
    <span class="hljs-comment">//...</span>
}</code></pre>
<p>å…¶ä¸­åŠ è½½æ’ä»¶å‡½æ•°:</p>
<pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">plugin_load</span><span class="hljs-params">(MEM_ROOT *tmp_root, <span class="hljs-keyword">int</span> *argc, <span class="hljs-keyword">char</span> **argv)</span></span>
<span class="hljs-function"></span>{
    <span class="hljs-comment">//...</span>
     <span class="hljs-keyword">if</span> (plugin_add(tmp_root, &amp;name, &amp;dl, argc, argv, REPORT_TO_LOG))
      sql_print_warning(<span class="hljs-string">"Couldn't load plugin named '%s' with soname '%s'."</span>,
                        str_name.c_ptr(), str_dl.c_ptr());
    <span class="hljs-comment">//...</span>
}</code></pre>
<p>å…¶ä¸­çš„<code>plugin_add</code>:</p>
<pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">plugin_add</span><span class="hljs-params">(MEM_ROOT *tmp_root,</span></span>
<span class="hljs-function"><span class="hljs-params">                       <span class="hljs-keyword">const</span> LEX_STRING *name, <span class="hljs-keyword">const</span> LEX_STRING *dl,</span></span>
<span class="hljs-function"><span class="hljs-params">                       <span class="hljs-keyword">int</span> *argc, <span class="hljs-keyword">char</span> **argv, <span class="hljs-keyword">int</span> report)</span></span>
<span class="hljs-function"></span>{
    st_plugin_int tmp;
  	st_mysql_plugin *plugin;
  	DBUG_ENTER(<span class="hljs-string">"plugin_add"</span>);
  	LEX_CSTRING name_cstr= {name-&gt;str, name-&gt;length};
    <span class="hljs-comment">//...</span>
}</code></pre>
<p>å…¶ä¸­<code>st_mysql_plugin</code>:</p>
<pre><code class="hljs c++"><span class="hljs-comment">/*</span>
<span class="hljs-comment">  Plugin description structure.</span>
<span class="hljs-comment">*/</span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">st_mysql_plugin</span></span>
<span class="hljs-class">{</span>
  <span class="hljs-keyword">int</span> type;             <span class="hljs-comment">/* the plugin type (a MYSQL_XXX_PLUGIN value)   */</span>
  <span class="hljs-keyword">void</span> *info;           <span class="hljs-comment">/* pointer to type-specific plugin descriptor   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *name;     <span class="hljs-comment">/* plugin name                                  */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *author;   <span class="hljs-comment">/* plugin author (for I_S.PLUGINS)              */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *descr;    <span class="hljs-comment">/* general descriptive text (for I_S.PLUGINS)   */</span>
  <span class="hljs-keyword">int</span> license;          <span class="hljs-comment">/* the plugin license (PLUGIN_LICENSE_XXX)      */</span>
  <span class="hljs-keyword">int</span> (*init)(MYSQL_PLUGIN);  <span class="hljs-comment">/* the function to invoke when plugin is loaded */</span>
  <span class="hljs-keyword">int</span> (*deinit)(MYSQL_PLUGIN);<span class="hljs-comment">/* the function to invoke when plugin is unloaded */</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> version; <span class="hljs-comment">/* plugin version (for I_S.PLUGINS)             */</span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">st_mysql_show_var</span> *<span class="hljs-title">status_vars</span>;</span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">st_mysql_sys_var</span> **<span class="hljs-title">system_vars</span>;</span>
  <span class="hljs-keyword">void</span> * __reserved1;   <span class="hljs-comment">/* reserved for dependency checking             */</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> flags;  <span class="hljs-comment">/* flags for plugin */</span>
};</code></pre>
<p>å…¶ä¸­çš„:</p>
<pre><code class="hljs smali">int (*init)(MYSQ<span class="hljs-class">L_PLUGIN);</span>  /* the function to<span class="hljs-built_in"> invoke </span>when plugin is loaded */</code></pre>
<p>è¿™ä¸ªinitå‡½æ•°æŒ‡é’ˆæ˜¯è°ƒç”¨æ’ä»¶çš„ã€‚</p>
<p>Innodbæ’ä»¶çš„åŠ è½½å®šä¹‰åœ¨mysql/include/mysql/Plugin.hä¸­çš„mysql_declare_plugin,å…·ä½“çš„è°ƒç”¨ä½ç½®åœ¨ha_innodb.ccä¸­ï¼Œéƒ½æ˜¯ä»¥å˜é‡çš„æ–¹å¼å®šä¹‰ã€‚Ha_innodb.ccæ˜¯å®šä¹‰innodbå­˜å‚¨å¼•æ“çš„åˆå§‹åŒ–ä»¥åŠç›¸å…³é‡è¦æ¥å£çš„å®šä¹‰ã€‚</p>
<p>æ’ä»¶çš„å‡½æ•°å¦‚ä¸‹:</p>
<pre><code class="hljs c++">mysql_declare_plugin(innobase)
{
  MYSQL_STORAGE_ENGINE_PLUGIN,
  &amp;innobase_storage_engine,
  innobase_hton_name,
  plugin_author,
  <span class="hljs-string">"Supports transactions, row-level locking, and foreign keys"</span>,
  PLUGIN_LICENSE_GPL,
  innobase_init, <span class="hljs-comment">/* Plugin Init */</span>
  <span class="hljs-literal">NULL</span>, <span class="hljs-comment">/* Plugin Deinit */</span>
  INNODB_VERSION_SHORT,
  innodb_status_variables_export,<span class="hljs-comment">/* status variables             */</span>
  innobase_system_variables, <span class="hljs-comment">/* system variables */</span>
  <span class="hljs-literal">NULL</span>, <span class="hljs-comment">/* reserved */</span>
  <span class="hljs-number">0</span>,    <span class="hljs-comment">/* flags */</span>
},
i_s_innodb_trx,
i_s_innodb_locks,
i_s_innodb_lock_waits,
i_s_innodb_cmp,
<span class="hljs-comment">//...</span>

mysql_declare_plugin_end;</code></pre>
<p>å½“æ’ä»¶è¢«è½½å…¥çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨ä¸Šé¢ä»£ç ä¸­çš„innobase_init()å‡½æ•°:</p>
<pre><code class="hljs c++"><span class="hljs-keyword">static</span>
<span class="hljs-keyword">int</span>
innobase_init(
<span class="hljs-comment">/*==========*/</span>
	<span class="hljs-keyword">void</span>	*p)	<span class="hljs-comment">/*!&lt; in: InnoDB handlerton */</span>
{
	<span class="hljs-comment">//...</span>
	<span class="hljs-comment">/* Since we in this module access directly the fields of a trx</span>
<span class="hljs-comment">	struct, and due to different headers and flags it might happen that</span>
<span class="hljs-comment">	ib_mutex_t has a different size in this module and in InnoDB</span>
<span class="hljs-comment">	modules, we check at run time that the size is the same in</span>
<span class="hljs-comment">	these compilation modules. */</span>

	err = innobase_start_or_create_for_mysql();
	<span class="hljs-comment">//...</span>
}</code></pre>
<p>å…¶ä¸­</p>
<pre><code>&lt;span class="hljs-keyword"&gt;if&lt;/span&gt; (!srv_read_only_mode) &amp;#123;

    os_thread_create(
        srv_master_thread,
        &lt;span class="hljs-literal"&gt;NULL&lt;/span&gt;, thread_ids + (&lt;span class="hljs-number"&gt;1&lt;/span&gt; + SRV_MAX_N_IO_THREADS));

    srv_start_state_set(SRV_START_STATE_MASTER);
&amp;#125;
&lt;span class="hljs-comment"&gt;//...&lt;/span&gt;
</code></pre><p>}&lt;/code&gt;&lt;/pre&gt;&lt;/escape&gt;</p>
<p>è°ƒç”¨äº†<code>srv_master_thread</code>äº§ç”Ÿmasterçº¿ç¨‹:</p>
<pre><code class="hljs c++"><span class="hljs-comment">/*********************************************************************/</span><span class="hljs-comment">/**</span>
<span class="hljs-comment">The master thread controlling the server.</span>
<span class="hljs-comment">@return a dummy parameter */</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span>
<span class="hljs-keyword">os_thread_ret_t</span>
DECLARE_THREAD(srv_master_thread)(
<span class="hljs-comment">/*==============================*/</span>
	<span class="hljs-keyword">void</span>*	arg MY_ATTRIBUTE((unused)))
			<span class="hljs-comment">/*!&lt; in: a dummy parameter required by</span>
<span class="hljs-comment">			os_thread_create */</span>;</code></pre>
<p>ç”±æ­¤è¿›å…¥masterçº¿ç¨‹</p>
<h2 id="3-Master-Threadå·¥ä½œæ–¹å¼"><a href="#3-Master-Threadå·¥ä½œæ–¹å¼" class="headerlink" title="3. Master Threadå·¥ä½œæ–¹å¼"></a>3. Master Threadå·¥ä½œæ–¹å¼</h2><p>æµç¨‹å›¾å¦‚ä¸‹</p>
<p>ä¸Šé¢çš„<code>srv_master_thread</code>å·²ç»å®šä½åˆ°çš„å‡½æ•°çš„ä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs c++"><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span>
<span class="hljs-keyword">os_thread_ret_t</span>
DECLARE_THREAD(srv_master_thread)(
<span class="hljs-comment">/*==============================*/</span>
	<span class="hljs-keyword">void</span>*	arg MY_ATTRIBUTE((unused)))
			<span class="hljs-comment">/*!&lt; in: a dummy parameter required by</span>
<span class="hljs-comment">			os_thread_create */</span>
{
	<span class="hljs-comment">//...çº¿ç¨‹åˆå§‹åŒ–</span>
loop:
	<span class="hljs-keyword">if</span> (srv_force_recovery &gt;= SRV_FORCE_NO_BACKGROUND) {
        <span class="hljs-comment">/*å‡ºç°æ•…éšœéœ€è¦å›å¤æ—¶å€™,å¦‚æœè®¾ç½®æ¢å¤çº§åˆ«ä¸ºSRV_FORCE_NO_BACKGROUNDåˆ™ä¼šæŒ‚èµ·ä¸»çº¿ç¨‹çš„è¿è¡Œ,æ‰€ä»¥è¿›å…¥æŒ‚èµ·*/</span>
		<span class="hljs-keyword">goto</span> suspend_thread;
	}

	<span class="hljs-keyword">while</span> (srv_shutdown_state == SRV_SHUTDOWN_NONE) {
		srv_master_sleep();
		MONITOR_INC(MONITOR_MASTER_THREAD_SLEEP);
		<span class="hljs-keyword">if</span> (srv_check_activity(old_activity_count)) {
			old_activity_count = srv_get_activity_count();
			srv_master_do_active_tasks();
		} <span class="hljs-keyword">else</span> {
			srv_master_do_idle_tasks();
		}
	}

	<span class="hljs-keyword">while</span> (srv_shutdown_state != SRV_SHUTDOWN_EXIT_THREADS
	       &amp;&amp; srv_master_do_shutdown_tasks(&amp;last_print_time)) {
        <span class="hljs-comment">/**/</span>
		<span class="hljs-comment">/* Shouldn't loop here in case of very fast shutdown */</span>
		ut_ad(srv_fast_shutdown &lt; <span class="hljs-number">2</span>);
	}

suspend_thread:
	srv_main_thread_op_info = <span class="hljs-string">"suspending"</span>;

	srv_suspend_thread(slot);

	<span class="hljs-comment">/* DO NOT CHANGE THIS STRING. innobase_start_or_create_for_mysql()</span>
<span class="hljs-comment">	waits for database activity to die down when converting &lt; 4.1.x</span>
<span class="hljs-comment">	databases, and relies on this string being exactly as it is. InnoDB</span>
<span class="hljs-comment">	manual also mentions this string in several places. */</span>
	srv_main_thread_op_info = <span class="hljs-string">"waiting for server activity"</span>;

	os_event_wait(slot-&gt;event);

	<span class="hljs-keyword">if</span> (srv_shutdown_state != SRV_SHUTDOWN_EXIT_THREADS) {
		<span class="hljs-keyword">goto</span> loop;
	}

	my_thread_end();
	os_thread_exit();
	DBUG_RETURN(<span class="hljs-number">0</span>);
}</code></pre>
<p>å¯ä»¥çŸ¥é“ä¼ªä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs isbl"><span class="hljs-variable"><span class="hljs-keyword">if</span></span> <span class="hljs-variable">InnoDB</span> <span class="hljs-variable">is</span> <span class="hljs-variable">idle</span>:
	<span class="hljs-function"><span class="hljs-title">srv_master_do_idle_tasks</span>();</span>
<span class="hljs-function"><span class="hljs-variable"><span class="hljs-keyword">else</span></span></span>
<span class="hljs-function">	<span class="hljs-title">srv_master_do_active_tasks</span>();</span></code></pre>
<p>åœ¨å›¾2ä¸­å¯ä»¥çœ‹åˆ°ï¼Œmaster threadä½œä¸ºåå°ç¨‹åºï¼Œä¸€ç›´ä¸åœçš„åœ¨loopï¼Œè€Œloopè¿‡ç¨‹ä¸­ä¼šé€‰æ‹©active task æˆ–è€…idle taskå‡½æ•°æ‰§è¡Œ</p>
<p>  è‹¥flush loopä¸­ä¹Ÿæ²¡æœ‰ä»€ä¹ˆäº‹æƒ…å¯ä»¥åšäº†ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šåˆ‡æ¢åˆ°suspend__loopï¼Œå°†Master ThreadæŒ‚èµ·ï¼Œç­‰å¾…äº‹ä»¶çš„å‘ç”Ÿã€‚è‹¥ç”¨æˆ·å¯ç”¨ï¼ˆenableï¼‰äº†InnoDBå­˜å‚¨å¼•æ“ï¼Œå´æ²¡æœ‰ä½¿ç”¨ä»»ä½•InnoDBå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œé‚£ä¹ˆMaster Threadæ€»æ˜¯å¤„äºæŒ‚èµ·çš„çŠ¶æ€<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="  InnoDBå­˜å‚¨å¼•æ“çš„å¼€å‘å›¢é˜Ÿå‚è€ƒäº†Googleçš„patchï¼Œæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•æ¥ä¿®æ­£è¯¥é—®é¢˜ã€‚å› æ­¤InnoDB Pluginï¼ˆä»InnoDB1.0.xç‰ˆæœ¬å¼€å§‹ï¼‰æä¾›äº†å‚æ•°innodb_io_capacityï¼Œç”¨æ¥è¡¨ç¤ºç£ç›˜IOçš„ååé‡ï¼Œé»˜è®¤å€¼ä¸º200ã€‚å¯¹äºåˆ·æ–°åˆ°ç£ç›˜é¡µçš„æ•°é‡ï¼Œä¼šæŒ‰ç…§innodb_io_capacityçš„ç™¾åˆ†æ¯”æ¥è¿›è¡Œæ§åˆ¶ã€‚è§„åˆ™å¦‚ä¸‹ï¼š
"></span></a><a href="MySQLæŠ€æœ¯å†…å¹•:innodbå­˜å‚¨å¼•æ“2.5">4</a></sup>ã€‚</p>
<ul>
<li><p>åœ¨srv_shutdown_stateçš„å€¼ä¸ç­‰äºSRV_SHUTDOWN_NONEçš„æƒ…å†µä¸‹ï¼Œmaster threadä¼šå»æ‰§è¡Œshutdown taskã€‚è¾“å‡ºå€¼srv_activeï¼Œsrv_idleï¼Œsrv_shutdownçš„å€¼åˆ†åˆ«æ˜¯åœ¨å‡½æ•°srv_master_do_active_taskï¼Œsrv_master_do_idle_taskï¼Œsrv_master_do_shutdown_taskä¸­++ã€‚</p>
</li>
<li><p>è€Œsrv_master_do_active_taskçš„æ‰§è¡Œæ˜¯ç”±å½“å‰activity_countä¸old_activity_countçš„å€¼å†³å®šï¼Œåªè¦è¿™ä¸¤ä¸ªå€¼ä¸ç›¸ç­‰ï¼Œåˆ™masterè°ƒç”¨active taskã€‚åœ¨æ‰§è¡Œæ•°æ®åº“æ›´æ”¹æ“ä½œï¼Œå¦‚æ’å…¥ï¼Œåˆ é™¤ï¼Œæ›´æ–°ï¼Œè¡¨æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå½“å‰çš„activity countçš„å€¼ä¼šå¢åŠ ï¼Œç³»ç»Ÿè°ƒç”¨active taskã€‚æ‰€ä»¥è¯´ï¼Œsrv_activeçš„å€¼å¯ä»¥åæ˜ å‡ºç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µ.</p>
</li>
<li><p>å€¼å¾—æ³¨æ„çš„æ˜¯background thread éƒ¨åˆ†çš„è¾“å‡ºå€¼æ˜¯å†å²ç»Ÿè®¡å€¼ï¼Œå³mysqldæœåŠ¡å¯åŠ¨ä¹‹åä¼šä¸€ç›´é€’å¢ã€‚</p>
</li>
</ul>
<p><code>srv_master_do_active_tasks</code>åšçš„äº‹æƒ…å¦‚ä¸‹:</p>
<p>å½“æœåŠ¡å™¨å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼Œæ‰§è¡Œä¸»çº¿ç¨‹åº”è¯¥æ‰§è¡Œçš„ä»»åŠ¡ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ä»»åŠ¡:</p>
<ol>
<li>ç¬¬ä¸€ç±»æ˜¯åœ¨æ­¤åŠŸèƒ½çš„æ¯æ¬¡å¯åŠ¨æ—¶æ‰§è¡Œçš„æ­¤ç±»ä»»åŠ¡ã€‚æˆ‘ä»¬å‡è®¾åœ¨æœåŠ¡å™¨å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶å¤§è‡´æ¯ç§’è°ƒç”¨ä¸€æ¬¡æ­¤åŠŸèƒ½ã€‚</li>
<li>ç¬¬äºŒç±»æ˜¯æŒ‰ä¸€å®šé—´éš”æ‰§è¡Œçš„æ­¤ç±»ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼špurge, dict_LRU cleanupç­‰ã€‚</li>
</ol>
<p>å…·ä½“ä»£ç å¦‚ä¸‹:</p>
<ul>
<li><p>æ£€æŸ¥å‰©ä½™çš„æ—¥å¿—ç©ºé—´</p>
<pre><code class="hljs c++"><span class="hljs-comment">/* ç¡®ä¿redoæ—¥å¿—æ–‡ä»¶ä¸­æœ‰è¶³å¤Ÿçš„å¯é‡ç”¨ç©ºé—´*/</span>
	srv_main_thread_op_info = <span class="hljs-string">"checking free log space"</span>;
	<span class="hljs-comment">/*æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ·æ–°æ—¥å¿—ç¼“å†²åŒºæˆ–æ–°çš„æ£€æŸ¥ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ‰§è¡Œæ­¤æ“ä½œã€‚ å½“æ•°æ®åº“æ“ä½œä¿®æ”¹äº†å¤§çº¦4ä¸ªä»¥ä¸Šçš„é¡µé¢æ—¶ï¼Œåº”è°ƒç”¨æ­¤æ–¹æ³•ã€‚ æ³¨æ„ï¼Œä»…å½“OSçº¿ç¨‹é™¤å­—å…¸äº’æ–¥é”å¤–æ²¡æœ‰å…¶ä»–åŒæ­¥å¯¹è±¡æ—¶ï¼Œæ‰å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°ã€‚*/</span>
	log_free_check();</code></pre>
</li>
<li><p>æ’å…¥ç¼“å­˜<em>ç¼“å­˜çš„insertæ“ä½œinsert buffer,ç¼©å†™ibuf</em><sup><a href="#fn_3" id="reffn_3">3</a></sup><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="  InnoDBå­˜å‚¨å¼•æ“çš„å¼€å‘å›¢é˜Ÿå‚è€ƒäº†Googleçš„patchï¼Œæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•æ¥ä¿®æ­£è¯¥é—®é¢˜ã€‚å› æ­¤InnoDB Pluginï¼ˆä»InnoDB1.0.xç‰ˆæœ¬å¼€å§‹ï¼‰æä¾›äº†å‚æ•°innodb_io_capacityï¼Œç”¨æ¥è¡¨ç¤ºç£ç›˜IOçš„ååé‡ï¼Œé»˜è®¤å€¼ä¸º200ã€‚å¯¹äºåˆ·æ–°åˆ°ç£ç›˜é¡µçš„æ•°é‡ï¼Œä¼šæŒ‰ç…§innodb_io_capacityçš„ç™¾åˆ†æ¯”æ¥è¿›è¡Œæ§åˆ¶ã€‚è§„åˆ™å¦‚ä¸‹ï¼š
"></span></a><a href="MySQLæŠ€æœ¯å†…å¹•:innodbå­˜å‚¨å¼•æ“2.5">4</a></sup></p>
<p>åˆå¹¶æ’å…¥ç¼“å†²ï¼ˆInsert Bufferï¼‰å¹¶ä¸æ˜¯æ¯ç§’éƒ½ä¼šå‘ç”Ÿçš„ã€‚InnoDBå­˜å‚¨å¼•æ“ä¼šåˆ¤æ–­å½“å‰ä¸€ç§’å†…å‘ç”Ÿçš„IOæ¬¡æ•°æ˜¯å¦å°äº5æ¬¡ï¼Œå¦‚æœå°äº5æ¬¡ï¼ŒInnoDBè®¤ä¸ºå½“å‰çš„IOå‹åŠ›å¾ˆå°ï¼Œå¯ä»¥æ‰§è¡Œåˆå¹¶æ’å…¥ç¼“å†²çš„æ“ä½œã€‚<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="  InnoDBå­˜å‚¨å¼•æ“çš„å¼€å‘å›¢é˜Ÿå‚è€ƒäº†Googleçš„patchï¼Œæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•æ¥ä¿®æ­£è¯¥é—®é¢˜ã€‚å› æ­¤InnoDB Pluginï¼ˆä»InnoDB1.0.xç‰ˆæœ¬å¼€å§‹ï¼‰æä¾›äº†å‚æ•°innodb_io_capacityï¼Œç”¨æ¥è¡¨ç¤ºç£ç›˜IOçš„ååé‡ï¼Œé»˜è®¤å€¼ä¸º200ã€‚å¯¹äºåˆ·æ–°åˆ°ç£ç›˜é¡µçš„æ•°é‡ï¼Œä¼šæŒ‰ç…§innodb_io_capacityçš„ç™¾åˆ†æ¯”æ¥è¿›è¡Œæ§åˆ¶ã€‚è§„åˆ™å¦‚ä¸‹ï¼š
"></span></a><a href="MySQLæŠ€æœ¯å†…å¹•:innodbå­˜å‚¨å¼•æ“2.5">4</a></sup></p>
<pre><code class="hljs c++"><span class="hljs-comment">/* Do an ibuf merge */</span>
	srv_main_thread_op_info = <span class="hljs-string">"doing insert buffer merge"</span>;
	counter_time = ut_time_us(<span class="hljs-literal">NULL</span>);
	ibuf_merge_in_background(<span class="hljs-literal">false</span>);
	MONITOR_INC_TIME_IN_MICRO_SECS(
		MONITOR_SRV_IBUF_MERGE_MICROSECOND, counter_time);</code></pre>
<p><code>ibuf_merge_in_background</code>çš„æ€è·¯</p>
<p>â‘åœ¨åˆå¹¶æ’å…¥ç¼“å†²æ—¶ï¼Œåˆå¹¶æ’å…¥ç¼“å†²çš„æ•°é‡ä¸ºinnodb_io_capacityå€¼çš„5%ï¼›</p>
<p>â‘åœ¨ä»ç¼“å†²åŒºåˆ·æ–°è„é¡µæ—¶ï¼Œåˆ·æ–°è„é¡µçš„æ•°é‡ä¸ºinnodb_io_capacityã€‚</p>
<p>è‹¥ç”¨æˆ·ä½¿ç”¨äº†SSDç±»çš„ç£ç›˜ï¼Œæˆ–è€…å°†å‡ å—ç£ç›˜åšäº†RAIDï¼Œå½“å­˜å‚¨è®¾å¤‡æ‹¥æœ‰æ›´é«˜çš„IOé€Ÿåº¦æ—¶ï¼Œå®Œå…¨å¯ä»¥å°†innodb_io_capacityçš„å€¼è°ƒå¾—å†é«˜ç‚¹ï¼Œç›´åˆ°ç¬¦åˆç£ç›˜IOçš„ååé‡ä¸ºæ­¢ã€‚</p>
<p>æºç å¦‚ä¸‹:</p>
<pre><code class="hljs c++"><span class="hljs-comment">/*é€šè¿‡å°†é¡µé¢è¯»åˆ°ç¼“å†²æ± æ¥æ”¶ç¼©æ›´æ”¹ç¼“å†²åŒºã€‚</span>
<span class="hljs-comment">@param[in] fullå¦‚æœä¸ºtrueï¼Œåˆ™åŸºäºPCT_IOï¼ˆ100ï¼‰è¿›è¡Œå®Œå…¨æ”¶ç¼©ã€‚ å¦‚æœä¸ºfalseï¼Œåˆ™åŸºäºæ›´æ”¹ç¼“å†²åŒºçš„å½“å‰å¤§å°ç¡®å®šåˆåŒæ‰¹çš„å¤§å°ã€‚ </span>
<span class="hljs-comment">@return æ¡ç›®çš„ç»„åˆå¤§å°çš„ä¸‹é™ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œè¿™äº›æ¡ç›®å°†ä»ibufæ ‘åˆå¹¶åˆ°è¯»å–çš„é¡µé¢ï¼Œå¦‚æœibufä¸ºç©ºï¼Œåˆ™è¿”å›0*/</span>
<span class="hljs-function">ulint <span class="hljs-title">ibuf_merge_in_background</span><span class="hljs-params">(<span class="hljs-keyword">bool</span>	full)</span></span>
<span class="hljs-function"></span>{
	ulint	sum_bytes	= <span class="hljs-number">0</span>;
	ulint	sum_pages	= <span class="hljs-number">0</span>;
	ulint	n_pag2;
	ulint	n_pages;

<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined UNIV_DEBUG || defined UNIV_IBUF_DEBUG</span>
	<span class="hljs-keyword">if</span> (srv_ibuf_disable_background_merge) {
		<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
	}
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">/* UNIV_DEBUG || UNIV_IBUF_DEBUG */</span></span>

	<span class="hljs-keyword">if</span> (full) {
		<span class="hljs-comment">/* Caller has requested a full batch */</span>
        <span class="hljs-comment">/*IOæ“ä½œæ•°ï¼Œå³å®¹é‡çš„Xï¼…ã€‚ PCT_IOï¼ˆ5)è¿”å›çš„IOæ“ä½œæ•°ä¸ºæœ€å¤§å€¼çš„5ï¼…ï¼Œå…¶ä¸­æœ€å¤§å€¼ä¸ºsrv_io_capacity(é»˜è®¤			ä¸º200)ã€‚*/</span>
		n_pages = PCT_IO(<span class="hljs-number">100</span>);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-comment">/* By default we do a batch of 5% of the io_capacity */</span>
		n_pages = PCT_IO(<span class="hljs-number">5</span>);

		mutex_enter(&amp;ibuf_mutex);

		<span class="hljs-comment">/* å¦‚æœibuf-&gt; sizeå¤§äºmax_sizeçš„ä¸€åŠï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è¿›è¡Œæ›´å‰§çƒˆçš„æ”¶ç¼© */</span>
        <span class="hljs-comment">/*+1æ˜¯ä¸ºäº†é¿å…è¢«é›¶é™¤*/</span>
		<span class="hljs-keyword">if</span> (ibuf-&gt;<span class="hljs-built_in">size</span> &gt; ibuf-&gt;max_size / <span class="hljs-number">2</span>) {
			ulint diff = ibuf-&gt;<span class="hljs-built_in">size</span> - ibuf-&gt;max_size / <span class="hljs-number">2</span>;
			n_pages += PCT_IO((diff * <span class="hljs-number">100</span>)
					   / (ibuf-&gt;max_size + <span class="hljs-number">1</span>));
		}

		mutex_exit(&amp;ibuf_mutex);
	}

	<span class="hljs-keyword">while</span> (sum_pages &lt; n_pages) {
		ulint	n_bytes;

		n_bytes = ibuf_merge(&amp;n_pag2, <span class="hljs-literal">false</span>);

		<span class="hljs-keyword">if</span> (n_bytes == <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">return</span>(sum_bytes);
		}

		sum_bytes += n_bytes;
		sum_pages += n_pag2;
	}

	<span class="hljs-keyword">return</span>(sum_bytes);
}</code></pre>
</li>
<li><p>æ—¥å¿—ç¼“å†²åˆ·æ–°åˆ°ç£ç›˜,å³ä½¿è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰æäº¤</p>
 <pre><code class="hljs C++">  <span class="hljs-comment">/* Flush logs if needed */</span>
srv_main_thread_op_info = <span class="hljs-string">"flushing log"</span>;
srv_sync_log_buffer_in_background();
  MONITOR_INC_TIME_IN_MICRO_SECS(
  		MONITOR_SRV_LOG_FLUSH_MICROSECOND, counter_time);</code></pre>
<p> å…¶ä¸­å¯¹<code>srv_sync_log_buffer_in_background()</code>çš„è§£è¯»å¦‚ä¸‹:</p>
 <pre><code class="hljs c++"><span class="hljs-comment">/*ä¸»çº¿ç¨‹çš„ä»»åŠ¡æ˜¯ç¡®ä¿åœ¨åå°æ¯ç§’åˆ·æ–°ä¸€æ¬¡æ—¥å¿—æ–‡ä»¶ã€‚ è¿™æ˜¯ä¸ºäº†ç¡®ä¿å½“innodb_flush_logs_at_trx_commitï¼= 1å´©æºƒæ—¶ï¼Œä¸¢å¤±çš„trxä¸ä¼šè¶…è¿‡ä¸€ç§’é’Ÿã€‚*/</span>
srv_sync_log_buffer_in_background(<span class="hljs-keyword">void</span>)
<span class="hljs-comment">/*===================================*/</span>
{
	<span class="hljs-keyword">time_t</span>	current_time = time(<span class="hljs-literal">NULL</span>);

	srv_main_thread_op_info = <span class="hljs-string">"flushing log"</span>;
	<span class="hljs-keyword">if</span> (difftime(current_time, srv_last_log_flush_time)
	    &gt;= srv_flush_log_at_timeout) {<span class="hljs-comment">//srv_flush_log_at_timeout=1,å³1ç§’</span>
		log_buffer_sync_in_background(<span class="hljs-literal">true</span>);<span class="hljs-comment">/*æ­¤å‡½æ•°å°†æ—¥å¿—ç¼“å†²åŒºå†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚æœè®¾ç½®äº†â€œ flushâ€ï¼Œåˆ™ä¹Ÿ												ä¼šå¼ºåˆ¶åˆ·æ–°æ—¥å¿—æ–‡ä»¶ã€‚ ä»…åº”ä»åå°ä¸»çº¿ç¨‹è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸												ç­‰å¾…å†™å…¥ï¼ˆ+å¯èƒ½çš„åˆ·æ–°ï¼‰å®Œæˆã€‚*/</span>
		srv_last_log_flush_time = current_time;
		srv_log_writes_and_flush++;
	}
}</code></pre>
</li>
</ul>
<p><code>srv_master_do_idle_tasks</code>çš„å·¥ä½œä¸»è¦å¦‚ä¸‹:</p>
<p>æ¯å½“æœåŠ¡å™¨ç©ºé—²æ—¶ï¼Œæ‰§è¡Œä¸»çº¿ç¨‹åº”è¯¥æ‰§è¡Œçš„ä»»åŠ¡ã€‚ æˆ‘ä»¬ä¼šåœ¨æ­¤åŠŸèƒ½æœŸé—´æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ï¼Œå¦‚æœæœåŠ¡å™¨å·²è¿›å…¥å…³é—­é˜¶æ®µï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨æœªå®Œæˆæ‰€éœ€ä»»åŠ¡çš„æƒ…å†µä¸‹ä»å‡½æ•°è¿”å›ã€‚</p>
<p><strong>æ³¨æ„:æ‰§è¡Œæ­¤åŠŸèƒ½æ—¶æœåŠ¡å™¨å¯ä»¥è¿›å…¥æ´»åŠ¨çŠ¶æ€ï¼Œä½†å‡½æ•°ä¸ä¼šç›‘æµ‹ï¼Œå› ä¸ºæœ¬å‡½æ•°å’Œåœ¨æœåŠ¡å™¨å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶æ‰§è¡Œæˆ–å¤šæˆ–å°‘çš„ç›¸åŒçš„ä»»åŠ¡ã€‚</strong></p>
<p>å¦‚æœç¦ç”¨ä¸»çº¿ç¨‹ï¼Œå¾ªç¯sleep10ç§’:</p>
<pre><code class="hljs c++">ut_d(srv_master_do_disabled_loop());</code></pre>
<p>å› ä¸ºç©ºé—²,æœ‰æ—¶é—´è¿›è¡Œå…¨ç¼“å†²åŒºçš„æ’å…¥åˆå¹¶:</p>
<pre><code class="hljs c++">ibuf_merge_in_background(<span class="hljs-literal">true</span>);</code></pre>
<p>å…¶ä½™çš„å°±æ˜¯ä¸€äº›åç»­çš„å¤„ç†</p>
<h2 id="4-page-cleançº¿ç¨‹"><a href="#4-page-cleançº¿ç¨‹" class="headerlink" title="4. page cleançº¿ç¨‹"></a>4. page cleançº¿ç¨‹</h2><p>åœ¨ä¸Šè¿°<a href="#2. innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹">2. innodbçº¿ç¨‹çš„äº§ç”Ÿè¿‡ç¨‹</a>ä¸­å·²ç»æåˆ°çš„<code>innobase_start_or_create_for_mysql</code>ä¸­æœ‰page cleançº¿ç¨‹:</p>
<pre><code class="hljs c++">innobase_start_or_create_for_mysql(<span class="hljs-keyword">void</span>)
<span class="hljs-comment">/*====================================*/</span>
{
    <span class="hljs-comment">//...</span>
	<span class="hljs-comment">/* å³ä½¿åœ¨åªè¯»æ¨¡å¼ä¸‹ï¼Œå†…éƒ¨è¡¨æ“ä½œä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿåˆ·æ–°æ“ä½œã€‚ */</span>
	buf_flush_page_cleaner_init();
	os_thread_create(buf_flush_page_cleaner_coordinator,<span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);
	<span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; srv_n_page_cleaners; ++i) {
		os_thread_create(buf_flush_page_cleaner_worker,<span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);
	}
	<span class="hljs-comment">/* Make sure page cleaner is active. */</span>
	<span class="hljs-keyword">while</span> (!buf_page_cleaner_is_active) {
		os_thread_sleep(<span class="hljs-number">10000</span>);
	}
    <span class="hljs-comment">//...</span>
}</code></pre>
<p>å…¶ä¸­çš„<code>buf_flush_page_cleaner_worker</code>æ˜¯Page Cleaner Thread,ä¸ºäº†æå‡æ‰©å±•æ€§å’Œåˆ·è„æ•ˆç‡ï¼Œåœ¨innodb1.2.Xç‰ˆæœ¬é‡Œå¼•å…¥äº†å¤šä¸ªpage cleanerçº¿ç¨‹ã€‚ä»è€Œè¾¾åˆ°å¹¶è¡Œåˆ·è„çš„æ•ˆæœ<sup><a href="#fn_5" id="reffn_5">5</a></sup></p>
<p>åœ¨è¯¥ç‰ˆæœ¬ä¸­ï¼ŒPage cleanerå¹¶æœªå’Œbuffer poolç»‘å®šï¼Œå…¶æ¨¡å‹ä¸ºä¸€ä¸ªåè°ƒçº¿ç¨‹ + å¤šä¸ªå·¥ä½œçº¿ç¨‹ï¼Œåè°ƒçº¿ç¨‹æœ¬èº«ä¹Ÿæ˜¯å·¥ä½œçº¿ç¨‹ã€‚å› æ­¤å¦‚æœinnodb_page_cleanersè®¾ç½®ä¸º8ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªåè°ƒçº¿ç¨‹ï¼ŒåŠ 7ä¸ªå·¥ä½œçº¿ç¨‹</p>
<ul>
<li><p><strong>åè°ƒçº¿ç¨‹çš„å…¥å£å‡½æ•°ä¸º</strong><code>buf_flush_page_cleaner_coordinator</code>:</p>
<p>å†³å®šäº†éœ€è¦flushçš„pageæ•°å’Œlsn_limitåï¼Œä¼šè®¾ç½®slotæ•°ç»„ï¼Œå°†å…¶ä¸­æ¯ä¸ªslotçš„çŠ¶æ€è®¾ç½®ä¸ºPAGE_CLEANER_STATE_REQUESTED, å¹¶è®¾ç½®ç›®æ ‡pageæ•°åŠlsn_limitï¼Œç„¶åå”¤é†’workerçº¿ç¨‹ (pc_request)\</p>
<p>ä¸»å¾ªç¯:</p>
<p>å®é™…æ­£å¸¸è¿è¡Œæƒ…å†µä¸‹çš„å·¥ä½œéƒ½åŒ…å«åœ¨</p>
<p>ä¹‹ä¸­.</p>
<ol>
<li><p>é¦–å…ˆå¦‚æœæ²¡æœ‰æ´»è·ƒçš„change buffer å¹¶ä¸”æ²¡æœ‰pendingçš„ç‰©ç†å—ï¼Œå¹¶ä¸”ä¸Šæ¬¡åˆ·æ–°çš„å—æ•°é‡ä¸º0åˆ™ä¸éœ€è¦ç¡çœ 1ç§’:</p>
<pre><code class="hljs c++"><span class="hljs-comment">/* å¦‚æœæœåŠ¡å™¨ç©ºé—²å¹¶ä¸”ç¼“å†²æ± ä¸­æ²¡æœ‰å¾…å¤„ç†çš„IOï¼Œå¹¶ä¸”æœ‰å·¥ä½œè¦åšï¼Œåˆ™page_cleanerä¼šè·³è¿‡ç¡çœ ã€‚ */</span>
<span class="hljs-keyword">if</span> (srv_check_activity(last_activity)
    || buf_get_n_pending_read_ios()
    || n_flushed == <span class="hljs-number">0</span>) {
	ret_sleep = pc_sleep_if_needed(next_loop_time, sig_count);<span class="hljs-comment">//ç¡çœ ä¸€ç§’</span>
	<span class="hljs-keyword">if</span> (srv_shutdown_state != SRV_SHUTDOWN_NONE) {
		<span class="hljs-keyword">break</span>;
	}
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ut_time_ms() &gt; next_loop_time) {
          <span class="hljs-comment">//å¦‚æœå½“å‰æ—¶é—´å¤§äº ä¸Šæ¬¡åˆ·æ–° æ—¶é—´+1 ç§’åˆ™ è®¾ç½®ä¸ºOS_SYNC_TIME_EXCEEDED</span>
	ret_sleep = OS_SYNC_TIME_EXCEEDED;
} <span class="hljs-keyword">else</span> {
	ret_sleep = <span class="hljs-number">0</span>;
}</code></pre>
<p>ä½†æ˜¯è¿™ä¸ªç¡çœ æ˜¯å¯ä»¥è¢«å”¤é†’çš„ï¼Œæ¯”å¦‚åŒæ­¥åˆ·æ–°åº”è¯¥å°±ä¼šå”¤é†’å®ƒï¼ˆbuf_flush_request_forceå‡½æ•°ï¼‰ã€‚å‚è€ƒå‡½æ•°os_event::wait_time_low</p>
</li>
<li><p>IOèƒ½åŠ›ä¸è¶³è­¦å‘Š</p>
<pre><code class="hljs c++"><span class="hljs-keyword">if</span> (curr_time &gt; next_loop_time + <span class="hljs-number">3000</span>) {<span class="hljs-comment">//å¦‚æœåˆ·æ–°æ—¶é—´ å¤§äºäº† ä¸Šæ¬¡æ—¶é—´ +1 ç§’+3 ç§’ åˆ™æŠ¥info</span>
				<span class="hljs-keyword">if</span> (warn_count == <span class="hljs-number">0</span>) {
					ib::info() &lt;&lt; <span class="hljs-string">"page_cleaner: 1000ms"</span>
						<span class="hljs-string">" intended loop took "</span>
						&lt;&lt; <span class="hljs-number">1000</span> + curr_time
						   - next_loop_time
						&lt;&lt; <span class="hljs-string">"ms. The settings might not"</span>
						<span class="hljs-string">" be optimal. (flushed="</span>
						&lt;&lt; n_flushed_last
						&lt;&lt; <span class="hljs-string">" and evicted="</span>
						&lt;&lt; n_evicted
						&lt;&lt; <span class="hljs-string">", during the time.)"</span>;
					<span class="hljs-keyword">if</span> (warn_interval &gt; <span class="hljs-number">300</span>) {
						warn_interval = <span class="hljs-number">600</span>;
					} <span class="hljs-keyword">else</span> {
						warn_interval *= <span class="hljs-number">2</span>;
					}

					warn_count = warn_interval;
				} <span class="hljs-keyword">else</span> {
					--warn_count;
				}
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-comment">/* reset counter */</span>
				warn_interval = <span class="hljs-number">1</span>;
				warn_count = <span class="hljs-number">0</span>;
			}</code></pre>
</li>
<li><p>åŒæ­¥åˆ·æ–°åˆ¤æ–­</p>
<p><strong>è§¦å‘æ¡ä»¶</strong>:</p>
<pre><code class="hljs c++"><span class="hljs-keyword">if</span> (ret_sleep != OS_SYNC_TIME_EXCEEDED
		    &amp;&amp; srv_flush_sync
		    &amp;&amp; buf_flush_sync_lsn &gt; <span class="hljs-number">0</span>)</code></pre>
<p>åŒæ­¥ä¼šå”¤é†’æ­£åœ¨ç¡çœ çŠ¶æ€çš„page cleanåè°ƒå·¥ä½œçº¿ç¨‹,é‚£ä¹ˆç¡çœ åº”è¯¥ä¸ä¼šæ»¡è¶³ä¸€ç§’çš„æ¡ä»¶,æ‰€ä»¥ä¸ä¼šè¢«æ ‡è®°ä¸ºOS_SYNC_TIME_EXCEEDEDï¼ŒåŒæ—¶srv_flush_syncå’Œbuf_flush_sync_lsnå‡ä¼šè¢«è®¾ç½®,æ¥ä¸‹æ¥å°±æ˜¯å”¤é†’å·¥ä½œçº¿ç¨‹è¿›è¡Œåˆ·æ–°ï¼ŒåŒæ—¶æœ¬åè°ƒçº¿ç¨‹ä¹Ÿå®Œæˆéƒ¨åˆ†ä»»åŠ¡ã€‚</p>
<p>  å·¥ä½œä»£ç :</p>
<pre><code class="hljs c++"><span class="hljs-comment">/* Request flushing for threads */</span>
pc_request(ULINT_MAX, lsn_limit);<span class="hljs-comment">//å”¤é†’page clean å·¥ä½œçº¿ç¨‹å¹²æ´»</span>
       
ulint tm = ut_time_ms();
       
<span class="hljs-comment">/* Coordinator also treats requests */</span>
<span class="hljs-keyword">while</span> (pc_flush_slot() &gt; <span class="hljs-number">0</span>) {}<span class="hljs-comment">////åè°ƒè€…åŒæ ·å®Œæˆéƒ¨åˆ†ä»»åŠ¡</span></code></pre>
<p>  <strong>å”¤é†’æ“ä½œ</strong>:</p>
<p>åœ¨checkpointæˆ–è€…DMLè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­éƒ½ä¼šé€šè¿‡log_free_checkæ£€æŸ¥æ˜¯å¦redo logå¤„äºå®‰å…¨çš„çŠ¶æ€ï¼Œå¦‚æœä¸å®‰å…¨å°±ä¼šè°ƒç”¨å¦‚ä¸‹ä»£ç ï¼ˆlog_preflush_pool_modified_pageså‡½æ•°ä¸­ï¼‰å”¤é†’page cleançº¿ç¨‹è¿›è¡ŒåŒæ­¥åˆ·æ–°</p>
<pre><code class="hljs c++"><span class="hljs-keyword">if</span> (srv_flush_sync) {        <span class="hljs-comment">/* wake page cleaner for IO burst */</span>
         buf_flush_request_force(new_oldest); <span class="hljs-comment">//è®¾ç½®å…¨å±€å˜é‡åŒæ—¶é€šè¿‡broadcastå”¤é†’åŒæ­¥åˆ·æ–°</span>
     }
     buf_flush_wait_flushed(new_oldest); <span class="hljs-comment">//æ‰€æœ‰çº¿ç¨‹ç­‰å¾…åŒæ­¥åˆ·æ–°å®Œæˆ</span></code></pre>
</li>
<li><p>æ´»è·ƒåˆ·æ–°</p>
<p><strong>è§¦å‘æ¡ä»¶</strong>:</p>
<pre><code class="hljs c++"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (srv_check_activity(last_activity))</code></pre>
<p>è¿™é‡Œåˆ¤æ–­æ˜¯å¦æœ‰æ´»è·ƒçš„çº¿ç¨‹ï¼Œæ‰€è°“æ´»è·ƒå°±æ˜¯è°ƒç”¨srv_inc_activity_countå‡½æ•°è¿›è¡Œå¢åŠ çš„ï¼Œä¸€èˆ¬æ¥è®²DMLå’ŒDDLä¼šæ ‡è®°ä¸ºæ´»è·ƒï¼Œpurgeçº¿ç¨‹åŠå…¶å·¥ä½œçº¿ç¨‹å·¥ä½œæœŸé—´ä¼šæ ‡è®°ä¸ºæ´»è·ƒã€‚å¯ä»¥å°†æ–­ç‚¹åšåˆ°srv_inc_activity_countè¿›è¡Œdebugã€‚æ‰€ä»¥çº¿ä¸Šæ•°æ®åº“DMLæ¯”è¾ƒå¤šæ‰€ä»¥ä¸€èˆ¬éƒ½ä¼šæ˜¯æ´»è·ƒåˆ·æ–°ã€‚</p>
<p><strong>å·¥ä½œä»£ç </strong>:</p>
<p>è¿™é‡Œæ¶‰åŠåˆ°åˆ·æ–°å¤šå°‘ä¸ªå—è®¡ç®—ä¸»è¦å‡½æ•°ä¸º <code>page_cleaner_flush_pages_recommendation</code></p>
<pre><code class="hljs c++">ulint	n_to_flush;
<span class="hljs-keyword">lsn_t</span>	lsn_limit = <span class="hljs-number">0</span>;
     
<span class="hljs-comment">/* Estimate pages from flush_list to be flushed */</span>
<span class="hljs-keyword">if</span> (ret_sleep == OS_SYNC_TIME_EXCEEDED) {
	last_activity = srv_get_activity_count();
	n_to_flush =
		page_cleaner_flush_pages_recommendation(
			&amp;lsn_limit, last_pages);
} <span class="hljs-keyword">else</span> {
	n_to_flush = <span class="hljs-number">0</span>;
}
     
<span class="hljs-comment">//...</span>
     
pc_wait_finished(&amp;n_flushed_lru, &amp;n_flushed_list);</code></pre>
<p> <code>page_cleaner_flush_pages_recommendation</code>:</p>
<p>æ­¤å‡½æ•°æœ€åè®¡ç®—å‡ºäº†éœ€è¦åˆ·æ–°çš„å—ï¼Œå…¶ä¸­åˆ·æ–°æ¯”ç‡è®¡ç®—çš„çš„é‡ç‚¹å‡½æ•°ä¸ºaf_get_pct_for_dirtyå’Œaf_get_pct_for_lsn ä¸‹é¢å°†ç»™å‡ºä»£ç æ³¨é‡Šï¼Œå…¶å®å‰æ–‡ä¸­çš„ç®—æ³•å°±æ¥è‡ªaf_get_pct_for_dirtyã€‚</p>
<pre><code class="hljs c++"> 
{
&nbsp;&nbsp;&nbsp;&nbsp;cur_lsn&nbsp;=&nbsp;log_get_lsn();<span class="hljs-comment">//è·å–å½“å‰çš„lsn&nbsp;åœ¨&nbsp;redo&nbsp;bufferä¸­çš„</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(prev_lsn&nbsp;==&nbsp;<span class="hljs-number">0</span>)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//é™æ€å˜é‡å¦‚æœæ˜¯0åˆ™ä»£è¡¨æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ¬å‡½æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;First&nbsp;time&nbsp;around.&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_lsn&nbsp;=&nbsp;cur_lsn;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_time&nbsp;=&nbsp;ut_time();&nbsp;<span class="hljs-comment">//è·å–å½“å‰æ—¶é—´</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(prev_lsn&nbsp;==&nbsp;cur_lsn)&nbsp;{&nbsp;<span class="hljs-comment">//å¦‚æœæ²¡æœ‰redoæ—¥å¿—ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;sum_pages&nbsp;+=&nbsp;last_pages_in;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">time_t</span>&nbsp;&nbsp;curr_time&nbsp;=&nbsp;ut_time();&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">double</span>&nbsp;&nbsp;time_elapsed&nbsp;=&nbsp;difftime(curr_time,&nbsp;prev_time);
&nbsp;&nbsp;&nbsp;&nbsp;avg_page_rate&nbsp;=&nbsp;<span class="hljs-keyword">static_cast</span>&lt;ulint&gt;(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">double</span>&gt;(sum_pages)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;time_elapsed)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;avg_page_rate)&nbsp;/&nbsp;<span class="hljs-number">2</span>);&nbsp;<span class="hljs-comment">//ç®—å‡ºä¸Šæ¬¡åˆ·æ–°æ¯ç§’åˆ·æ–°çš„pagesæ•°é‡ï¼ŒåŒæ—¶åŠ ä¸Šæ¬¡è®¡ç®—çš„æ¯ç§’å¹³å‡åˆ·æ–°å—æ•°&nbsp;ç„¶åé™¤ä»¥2&nbsp;å¾—åˆ°ä¸€ä¸ªæ¯ç§’åˆ·æ–°çš„pagesæ•°é‡&nbsp;ï¼ï¼ï¼ç¬¬ä¸€ä¸ªè®¡ç®—æ¡ä»¶avg_page_rate&nbsp;ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;How&nbsp;much&nbsp;LSN&nbsp;we&nbsp;have&nbsp;generated&nbsp;since&nbsp;last&nbsp;call.&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lsn_rate&nbsp;=&nbsp;<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">lsn_t</span>&gt;(
            <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">double</span>&gt;(cur_lsn&nbsp;-&nbsp;prev_lsn)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;time_elapsed);<span class="hljs-comment">//è®¡ç®—redo&nbsp;lsnç”Ÿæˆç‡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lsn_avg_rate&nbsp;=&nbsp;(lsn_avg_rate&nbsp;+&nbsp;lsn_rate)&nbsp;/&nbsp;<span class="hljs-number">2</span>;<span class="hljs-comment">//è®¡ç®—redoæ¯ç§’å¹³å‡ç”Ÿæˆç‡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;aggregate&nbsp;stats&nbsp;of&nbsp;all&nbsp;slots&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_enter(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;flush_tm&nbsp;=&nbsp;page_cleaner-&gt;flush_time;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;flush_pass&nbsp;=&nbsp;page_cleaner-&gt;flush_pass;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;flush_time&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;flush_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;list_tm&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;list_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">for</span>&nbsp;(ulint&nbsp;i&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;i&nbsp;&lt;&nbsp;page_cleaner-&gt;n_slots;&nbsp;i++)&nbsp;{<span class="hljs-comment">//æ‰«ææ‰€æœ‰çš„æ§½</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">page_cleaner_slot_t</span>*&nbsp;&nbsp;&nbsp;&nbsp;slot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot&nbsp;=&nbsp;&amp;page_cleaner-&gt;slots[i];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_tm&nbsp;&nbsp;&nbsp;+=&nbsp;slot-&gt;flush_list_time;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_pass&nbsp;+=&nbsp;slot-&gt;flush_list_pass;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot-&gt;flush_list_time&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot-&gt;flush_list_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_exit(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;oldest_lsn&nbsp;=&nbsp;buf_pool_get_oldest_modification();&nbsp;<span class="hljs-comment">//è·å–flush&nbsp;listä¸­æœ€è€çš„ls</span>
&nbsp;&nbsp;&nbsp;&nbsp;ut_ad(oldest_lsn&nbsp;&lt;=&nbsp;log_get_lsn());<span class="hljs-comment">//æ–­è¨€</span>
&nbsp;&nbsp;&nbsp;&nbsp;age&nbsp;=&nbsp;cur_lsn&nbsp;&gt;&nbsp;oldest_lsn&nbsp;?&nbsp;cur_lsn&nbsp;-&nbsp;oldest_lsn&nbsp;:&nbsp;<span class="hljs-number">0</span>;&nbsp;<span class="hljs-comment">//è·å–å½“å‰LSNå’Œæœ€è€LSNçš„ä¹‹é—´çš„å·®å€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_for_dirty&nbsp;=&nbsp;af_get_pct_for_dirty();&nbsp;<span class="hljs-comment">//è®¡ç®—å‡ºä¸€ä¸ªåˆ·æ–°ç™¾åˆ†æ¯”&nbsp;(æ¯”å¦‚100)&nbsp;!!!!é‡ç‚¹</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_for_lsn&nbsp;=&nbsp;af_get_pct_for_lsn(age);<span class="hljs-comment">//è®¡ç®—å‡ºlsnçš„æ¯”ç‡&nbsp;ç™¾åˆ†æ¯”(låˆ—å¦‚4.5)&nbsp;</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_total&nbsp;=&nbsp;ut_max(pct_for_dirty,&nbsp;pct_for_lsn);<span class="hljs-comment">//å–ä»–ä»¬çš„å¤§å€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;Estimate&nbsp;pages&nbsp;to&nbsp;be&nbsp;flushed&nbsp;for&nbsp;the&nbsp;lsn&nbsp;progress&nbsp;*/</span><span class="hljs-comment">//è®¡ç®—target_lsn</span>
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">lsn_t</span>&nbsp;&nbsp;&nbsp;target_lsn&nbsp;=&nbsp;oldest_lsn
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;lsn_avg_rate&nbsp;*&nbsp;buf_flush_lsn_scan_factor;&nbsp;<span class="hljs-comment">//è®¡ç®—ä¸‹ä¸€æ¬¡åˆ·æ–°çš„&nbsp;&nbsp;ç›®æ ‡lsn&nbsp;åŠtarget_lsnbuf_flush_lsn_scan_factoræ˜¯å®šå€¼3</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span>&nbsp;(ulint&nbsp;i&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;i&nbsp;&lt;&nbsp;srv_buf_pool_instances;&nbsp;i++)&nbsp;{
        <span class="hljs-comment">//å¾ªç¯æ•´ä¸ªbuffer&nbsp;instanceæ‰¾åˆ°å°äºtarget_lsnçš„è„å—</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">buf_pool_t</span>*&nbsp;buf_pool&nbsp;=&nbsp;buf_pool_from_array(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_for_lsn&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf_flush_list_mutex_enter(buf_pool);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <span class="hljs-keyword">for</span>&nbsp;(<span class="hljs-keyword">buf_page_t</span>*&nbsp;b&nbsp;=&nbsp;UT_LIST_GET_LAST(buf_pool-&gt;flush_list);
             <span class="hljs-comment">//æ¯ä¸ªinnodb&nbsp;bufferçš„æœ«å°¾çš„flush&nbsp;list&nbsp;è¿›è¡Œæ‰«æï¼Œå¤´æ’æ³•?</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;!=&nbsp;<span class="hljs-literal">NULL</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;=&nbsp;UT_LIST_GET_PREV(<span class="hljs-built_in">list</span>,&nbsp;b))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="hljs-keyword">if</span>&nbsp;(b-&gt;oldest_modification&nbsp;&gt;&nbsp;target_lsn)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span class="hljs-keyword">break</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++pages_for_lsn;&nbsp;
            <span class="hljs-comment">//æŸä¸ª&nbsp;innodb&nbsp;buffer&nbsp;å®ä¾‹ä¸­&nbsp;flush&nbsp;list&nbsp;å°äºè¿™ä¸ª&nbsp;&nbsp;target&nbsp;lsn&nbsp;çš„&nbsp;pageè®¡æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf_flush_list_mutex_exit(buf_pool);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;+=&nbsp;pages_for_lsn;&nbsp;
        <span class="hljs-comment">//è¿™é‡Œæ±‡æ€»æ‰€æœ‰&nbsp;innodb&nbsp;bufferå®ä¾‹ä¸­&nbsp;&nbsp;flush&nbsp;list&nbsp;å°äºè¿™ä¸ª&nbsp;&nbsp;target&nbsp;lsn&nbsp;çš„&nbsp;page&nbsp;æ€»æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_enter(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ut_ad(page_cleaner-&gt;slots[i].state
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;PAGE_CLEANER_STATE_NONE);<span class="hljs-comment">//æ–­è¨€æ‰€æœ‰çš„æ§½å¤„äºæ²¡æœ‰åˆ·æ–°çŠ¶æ€</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;slots[i].n_pages_requested
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;pages_for_lsn&nbsp;/&nbsp;buf_flush_lsn_scan_factor&nbsp;+&nbsp;<span class="hljs-number">1</span>;&nbsp;<span class="hljs-comment">//ç¡®è®¤æ§½çš„n_pages_requestedå€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_exit(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;/=&nbsp;buf_flush_lsn_scan_factor;<span class="hljs-comment">//buf_flush_lsn_scan_factorä¸ºå®šå€¼3</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;Cap&nbsp;the&nbsp;maximum&nbsp;IO&nbsp;capacity&nbsp;that&nbsp;we&nbsp;are&nbsp;going&nbsp;to&nbsp;use&nbsp;by</span>
<span class="hljs-comment">&nbsp;&nbsp;&nbsp;&nbsp;max_io_capacity.&nbsp;Limit&nbsp;the&nbsp;value&nbsp;to&nbsp;avoid&nbsp;too&nbsp;quick&nbsp;increase&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;PCT_IO(pct_total);&nbsp;<span class="hljs-comment">//æ ¹æ®&nbsp;å‰é¢å¾—åˆ°çš„&nbsp;pct_total&nbsp;å’Œ&nbsp;srv_io_capacityå‚æ•°å¾—åˆ°&nbsp;åˆ·æ–°çš„å—æ•°&nbsp;!!!ç¬¬äºŒä¸ªè®¡ç®—å‚æ•°ç”Ÿæˆã€‚</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(age&nbsp;&lt;&nbsp;log_get_max_modified_age_async())&nbsp;{&nbsp;<span class="hljs-comment">//å¦‚æœæ—¥è´¨é‡å°äº&nbsp;å¼‚æ­¥åˆ·æ–°çš„èŒƒç•´</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;pages_for_lsn&nbsp;= <span class="hljs-built_in">std</span>::<span class="hljs-built_in">min</span>&lt;ulint&gt;(sum_pages_for_lsn,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srv_max_io_capacity&nbsp;*&nbsp;<span class="hljs-number">2</span>);&nbsp;<span class="hljs-comment">//å³ä¾¿æ˜¯éœ€è¦åˆ·æ–°çš„å—æ•°å¾ˆå¤šï¼Œæœ€å¤šåªèƒ½åˆ·max_io_capacity*2çš„æ•°é‡!!!ç¬¬ä¸‰ä¸ªè®¡ç®—å‚æ•°ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;(n_pages&nbsp;+&nbsp;avg_page_rate&nbsp;+&nbsp;pages_for_lsn)&nbsp;/&nbsp;<span class="hljs-number">3</span>;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;3éƒ¨åˆ†ç»„æˆ&nbsp;1ã€æ ¹æ®å‚æ•°è®¡ç®—å‡ºæ¥çš„IOèƒ½åŠ›&nbsp;2ã€ä»¥å¾€æ¯ç§’åˆ·æ–°é¡µçš„æ•°é‡&nbsp;3ã€æ ¹æ®target&nbsp;lsn&nbsp;è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéœ€è¦åˆ·æ–°çš„å—æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
    <span class="hljs-keyword">if</span>&nbsp;(n_pages&nbsp;&gt;&nbsp;srv_max_io_capacity)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;srv_max_io_capacity;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">return</span>(n_pages);
}</code></pre>
<p> af_get_pct_for_dirtyå‡½æ•°:</p>
<pre><code class="hljs c++"> 
{
&nbsp;&nbsp;&nbsp;&nbsp;cur_lsn&nbsp;=&nbsp;log_get_lsn();<span class="hljs-comment">//è·å–å½“å‰çš„lsn&nbsp;åœ¨&nbsp;redo&nbsp;bufferä¸­çš„</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(prev_lsn&nbsp;==&nbsp;<span class="hljs-number">0</span>)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//é™æ€å˜é‡å¦‚æœæ˜¯0åˆ™ä»£è¡¨æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ¬å‡½æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;First&nbsp;time&nbsp;around.&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_lsn&nbsp;=&nbsp;cur_lsn;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev_time&nbsp;=&nbsp;ut_time();&nbsp;<span class="hljs-comment">//è·å–å½“å‰æ—¶é—´</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">if</span>&nbsp;(prev_lsn&nbsp;==&nbsp;cur_lsn)&nbsp;{&nbsp;<span class="hljs-comment">//å¦‚æœæ²¡æœ‰redoæ—¥å¿—ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;sum_pages&nbsp;+=&nbsp;last_pages_in;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">time_t</span>&nbsp;&nbsp;curr_time&nbsp;=&nbsp;ut_time();&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">double</span>&nbsp;&nbsp;time_elapsed&nbsp;=&nbsp;difftime(curr_time,&nbsp;prev_time);
&nbsp;&nbsp;&nbsp;&nbsp;avg_page_rate&nbsp;=&nbsp;<span class="hljs-keyword">static_cast</span>&lt;ulint&gt;(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">double</span>&gt;(sum_pages)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;time_elapsed)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;avg_page_rate)&nbsp;/&nbsp;<span class="hljs-number">2</span>);&nbsp;<span class="hljs-comment">//ç®—å‡ºä¸Šæ¬¡åˆ·æ–°æ¯ç§’åˆ·æ–°çš„pagesæ•°é‡ï¼ŒåŒæ—¶åŠ ä¸Šæ¬¡è®¡ç®—çš„æ¯ç§’å¹³å‡åˆ·æ–°å—æ•°&nbsp;ç„¶åé™¤ä»¥2&nbsp;å¾—åˆ°ä¸€ä¸ªæ¯ç§’åˆ·æ–°çš„pagesæ•°é‡&nbsp;ï¼ï¼ï¼ç¬¬ä¸€ä¸ªè®¡ç®—æ¡ä»¶avg_page_rate&nbsp;ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;How&nbsp;much&nbsp;LSN&nbsp;we&nbsp;have&nbsp;generated&nbsp;since&nbsp;last&nbsp;call.&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;lsn_rate&nbsp;=&nbsp;<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">lsn_t</span>&gt;(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">double</span>&gt;(cur_lsn&nbsp;-&nbsp;prev_lsn)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;time_elapsed);<span class="hljs-comment">//è®¡ç®—redo&nbsp;lsnç”Ÿæˆç‡</span>
&nbsp;&nbsp;&nbsp;&nbsp;lsn_avg_rate&nbsp;=&nbsp;(lsn_avg_rate&nbsp;+&nbsp;lsn_rate)&nbsp;/&nbsp;<span class="hljs-number">2</span>;<span class="hljs-comment">//è®¡ç®—redoæ¯ç§’å¹³å‡ç”Ÿæˆç‡</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;aggregate&nbsp;stats&nbsp;of&nbsp;all&nbsp;slots&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;mutex_enter(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;flush_tm&nbsp;=&nbsp;page_cleaner-&gt;flush_time;
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;flush_pass&nbsp;=&nbsp;page_cleaner-&gt;flush_pass;
&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;flush_time&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;flush_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;list_tm&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;list_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">for</span>&nbsp;(ulint&nbsp;i&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;i&nbsp;&lt;&nbsp;page_cleaner-&gt;n_slots;&nbsp;i++)&nbsp;{<span class="hljs-comment">//æ‰«ææ‰€æœ‰çš„æ§½</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">page_cleaner_slot_t</span>*&nbsp;&nbsp;&nbsp;&nbsp;slot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot&nbsp;=&nbsp;&amp;page_cleaner-&gt;slots[i];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_tm&nbsp;&nbsp;&nbsp;+=&nbsp;slot-&gt;flush_list_time;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_pass&nbsp;+=&nbsp;slot-&gt;flush_list_pass;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot-&gt;flush_list_time&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot-&gt;flush_list_pass&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;mutex_exit(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;oldest_lsn&nbsp;=&nbsp;buf_pool_get_oldest_modification();&nbsp;<span class="hljs-comment">//è·å–flush&nbsp;listä¸­æœ€è€çš„ls</span>
&nbsp;&nbsp;&nbsp;&nbsp;ut_ad(oldest_lsn&nbsp;&lt;=&nbsp;log_get_lsn());<span class="hljs-comment">//æ–­è¨€</span>
&nbsp;&nbsp;&nbsp;&nbsp;age&nbsp;=&nbsp;cur_lsn&nbsp;&gt;&nbsp;oldest_lsn&nbsp;?&nbsp;cur_lsn&nbsp;-&nbsp;oldest_lsn&nbsp;:&nbsp;<span class="hljs-number">0</span>;&nbsp;<span class="hljs-comment">//è·å–å½“å‰LSNå’Œæœ€è€LSNçš„ä¹‹é—´çš„å·®å€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_for_dirty&nbsp;=&nbsp;af_get_pct_for_dirty();&nbsp;<span class="hljs-comment">//è®¡ç®—å‡ºä¸€ä¸ªåˆ·æ–°ç™¾åˆ†æ¯”&nbsp;(æ¯”å¦‚100)&nbsp;!!!!é‡ç‚¹</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_for_lsn&nbsp;=&nbsp;af_get_pct_for_lsn(age);<span class="hljs-comment">//è®¡ç®—å‡ºlsnçš„æ¯”ç‡&nbsp;ç™¾åˆ†æ¯”(låˆ—å¦‚4.5)&nbsp;</span>
&nbsp;&nbsp;&nbsp;&nbsp;pct_total&nbsp;=&nbsp;ut_max(pct_for_dirty,&nbsp;pct_for_lsn);<span class="hljs-comment">//å–ä»–ä»¬çš„å¤§å€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;Estimate&nbsp;pages&nbsp;to&nbsp;be&nbsp;flushed&nbsp;for&nbsp;the&nbsp;lsn&nbsp;progress&nbsp;*/</span><span class="hljs-comment">//è®¡ç®—target_lsn</span>
&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">lsn_t</span>&nbsp;&nbsp;&nbsp;target_lsn&nbsp;=&nbsp;oldest_lsn
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;lsn_avg_rate&nbsp;*&nbsp;buf_flush_lsn_scan_factor;&nbsp;<span class="hljs-comment">//è®¡ç®—ä¸‹ä¸€æ¬¡åˆ·æ–°çš„&nbsp;&nbsp;ç›®æ ‡lsn&nbsp;åŠtarget_lsnbuf_flush_lsn_scan_factoræ˜¯å®šå€¼3</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span>&nbsp;(ulint&nbsp;i&nbsp;=&nbsp;<span class="hljs-number">0</span>;&nbsp;i&nbsp;&lt;&nbsp;srv_buf_pool_instances;&nbsp;i++)&nbsp;{
        <span class="hljs-comment">//å¾ªç¯æ•´ä¸ªbuffer&nbsp;instanceæ‰¾åˆ°å°äºtarget_lsnçš„è„å—</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">buf_pool_t</span>*&nbsp;buf_pool&nbsp;=&nbsp;buf_pool_from_array(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_for_lsn&nbsp;=&nbsp;<span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf_flush_list_mutex_enter(buf_pool);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <span class="hljs-keyword">for</span>&nbsp;(<span class="hljs-keyword">buf_page_t</span>*&nbsp;b&nbsp;=&nbsp;UT_LIST_GET_LAST(buf_pool-&gt;flush_list);
             <span class="hljs-comment">//æ¯ä¸ªinnodb&nbsp;bufferçš„æœ«å°¾çš„flush&nbsp;list&nbsp;è¿›è¡Œæ‰«æï¼Œå¤´æ’æ³•?</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;!=&nbsp;<span class="hljs-literal">NULL</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b&nbsp;=&nbsp;UT_LIST_GET_PREV(<span class="hljs-built_in">list</span>,&nbsp;b))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="hljs-keyword">if</span>&nbsp;(b-&gt;oldest_modification&nbsp;&gt;&nbsp;target_lsn)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span class="hljs-keyword">break</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++pages_for_lsn;&nbsp;
            <span class="hljs-comment">//æŸä¸ª&nbsp;innodb&nbsp;buffer&nbsp;å®ä¾‹ä¸­&nbsp;flush&nbsp;list&nbsp;å°äºè¿™ä¸ª&nbsp;&nbsp;target&nbsp;lsn&nbsp;çš„&nbsp;pageè®¡æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf_flush_list_mutex_exit(buf_pool);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;+=&nbsp;pages_for_lsn;&nbsp;
        <span class="hljs-comment">//è¿™é‡Œæ±‡æ€»æ‰€æœ‰&nbsp;innodb&nbsp;bufferå®ä¾‹ä¸­&nbsp;&nbsp;flush&nbsp;list&nbsp;å°äºè¿™ä¸ª&nbsp;&nbsp;target&nbsp;lsn&nbsp;çš„&nbsp;page&nbsp;æ€»æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_enter(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ut_ad(page_cleaner-&gt;slots[i].state
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;PAGE_CLEANER_STATE_NONE);<span class="hljs-comment">//æ–­è¨€æ‰€æœ‰çš„æ§½å¤„äºæ²¡æœ‰åˆ·æ–°çŠ¶æ€</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page_cleaner-&gt;slots[i].n_pages_requested
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;pages_for_lsn&nbsp;/&nbsp;buf_flush_lsn_scan_factor&nbsp;+&nbsp;<span class="hljs-number">1</span>;&nbsp;<span class="hljs-comment">//ç¡®è®¤æ§½çš„n_pages_requestedå€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutex_exit(&amp;page_cleaner-&gt;mutex);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;sum_pages_for_lsn&nbsp;/=&nbsp;buf_flush_lsn_scan_factor;<span class="hljs-comment">//buf_flush_lsn_scan_factorä¸ºå®šå€¼3</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;Cap&nbsp;the&nbsp;maximum&nbsp;IO&nbsp;capacity&nbsp;that&nbsp;we&nbsp;are&nbsp;going&nbsp;to&nbsp;use&nbsp;by</span>
<span class="hljs-comment">&nbsp;&nbsp;&nbsp;&nbsp;max_io_capacity.&nbsp;Limit&nbsp;the&nbsp;value&nbsp;to&nbsp;avoid&nbsp;too&nbsp;quick&nbsp;increase&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;PCT_IO(pct_total);&nbsp;
    <span class="hljs-comment">//æ ¹æ®&nbsp;å‰é¢å¾—åˆ°çš„&nbsp;pct_total&nbsp;å’Œ&nbsp;srv_io_capacityå‚æ•°å¾—åˆ°&nbsp;åˆ·æ–°çš„å—æ•°&nbsp;!!!ç¬¬äºŒä¸ªè®¡ç®—å‚æ•°ç”Ÿæˆã€‚</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(age&nbsp;&lt;&nbsp;log_get_max_modified_age_async())&nbsp;{&nbsp;<span class="hljs-comment">//å¦‚æœæ—¥è´¨é‡å°äº&nbsp;å¼‚æ­¥åˆ·æ–°çš„èŒƒç•´</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulint&nbsp;&nbsp;&nbsp;pages_for_lsn&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">min</span>&lt;ulint&gt;(sum_pages_for_lsn,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				srv_max_io_capacity&nbsp;*&nbsp;<span class="hljs-number">2</span>);&nbsp;<span class="hljs-comment">//å³ä¾¿æ˜¯éœ€è¦åˆ·æ–°çš„å—æ•°å¾ˆå¤šï¼Œæœ€å¤šåªèƒ½åˆ·max_io_capacity*2çš„æ•°é‡!!!ç¬¬ä¸‰ä¸ªè®¡ç®—å‚æ•°ç”Ÿæˆ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;(n_pages&nbsp;+&nbsp;avg_page_rate&nbsp;+&nbsp;pages_for_lsn)&nbsp;/&nbsp;<span class="hljs-number">3</span>;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;3éƒ¨åˆ†ç»„æˆ&nbsp;1ã€æ ¹æ®å‚æ•°è®¡ç®—å‡ºæ¥çš„IOèƒ½åŠ›&nbsp;2ã€ä»¥å¾€æ¯ç§’åˆ·æ–°é¡µçš„æ•°é‡&nbsp;3ã€æ ¹æ®target&nbsp;lsn&nbsp;è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéœ€è¦åˆ·æ–°çš„å—æ•°</span>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">if</span>&nbsp;(n_pages&nbsp;&gt;&nbsp;srv_max_io_capacity)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_pages&nbsp;=&nbsp;srv_max_io_capacity;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;
    <span class="hljs-keyword">return</span>(n_pages);
}</code></pre>
<p>af_get_pct_for_lsnå‡½æ•°ï¼š</p>
<p>æ³¨æ„innodb_cleaner_lsn_age_factorå‚æ•°é»˜è®¤è®¾ç½®ä¸ºhigh_checkpointï¼Œå¯ä»¥çœ‹åˆ°ç®—æ³•æœ€åæ˜¯é™¤ä»¥700.5ï¼Œæ‰€æœ‰å‰æ–‡æˆ‘è¯´è¿™ä¸ªå‡½æ•°ç®—å‡ºæ¥çš„æ¯”ç‡ä¸€èˆ¬æ¯”è¾ƒå°ã€‚</p>
<pre><code class="hljs c++">
     &nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">lsn_t</span>&nbsp;&nbsp;&nbsp;af_lwm&nbsp;=&nbsp;(srv_adaptive_flushing_lwm
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;log_get_capacity())&nbsp;/&nbsp;<span class="hljs-number">100</span>;
<span class="hljs-comment">//&nbsp;srv_adaptive_flushing_lwm=10&nbsp;é‚£ä¹ˆå¤§çº¦å°±æ˜¯&nbsp;logtotalsize*(9/10)*(1/10)&nbsp;943349&nbsp;è®¡ç®—ä¸€ä¸ªlow&nbsp;water&nbsp;mark</span>
     &nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(age&nbsp;&lt;&nbsp;af_lwm)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
       <span class="hljs-comment">//å¦‚æœå½“å‰ç”Ÿæˆçš„redo&nbsp;å°äºäº†&nbsp;low&nbsp;water&nbsp;master&nbsp;åˆ™è¿”å›0&nbsp;ä¹Ÿå°±æ˜¯è¯´&nbsp;redoæ—¥å¿—é‡ç”Ÿæˆé‡ä¸é«˜åˆ™ä¸éœ€è¦æƒè¡¡</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;No&nbsp;adaptive&nbsp;flushing.&nbsp;*/</span>&nbsp;&nbsp;<span class="hljs-comment">//å¯ä»¥çœ‹å‡ºè¿™é‡Œå’Œredoè®¾ç½®çš„å¤§å°æœ‰å…³ï¼Œå¦‚æœredoæ–‡ä»¶è®¾ç½®è¶Šå¤§åˆ™af_lwmè¶Šå¤§ï¼Œè§¦å‘æƒè¡¡çš„æœºç‡è¶Šå°</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
     &nbsp;&nbsp;&nbsp;&nbsp;}
     &nbsp;&nbsp;&nbsp;&nbsp;max_async_age&nbsp;=&nbsp;log_get_max_modified_age_async();&nbsp;
<span class="hljs-comment">//è·å–éœ€è¦å¼‚æ­¥åˆ·æ–°çš„çš„ä½ç½®&nbsp;å¤§çº¦ä¸ºlogtotalsize*(9/10)*(7/8)</span>
     &nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(age&nbsp;&lt;&nbsp;max_async_age&nbsp;&amp;&amp;&nbsp;!srv_adaptive_flushing)&nbsp;{&nbsp;
       <span class="hljs-comment">//å¦‚æœå°äºå¼‚æ­¥åˆ·æ–°&nbsp;ä¸”&nbsp;è‡ªé€‚åº”flush&nbsp;æ²¡æœ‰å¼€å¯</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;We&nbsp;have&nbsp;still&nbsp;not&nbsp;reached&nbsp;the&nbsp;max_async&nbsp;point&nbsp;and</span>
<span class="hljs-comment">     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;user&nbsp;has&nbsp;disabled&nbsp;adaptive&nbsp;flushing.&nbsp;*/</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);
     &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/*&nbsp;If&nbsp;we&nbsp;are&nbsp;here&nbsp;then&nbsp;we&nbsp;know&nbsp;that&nbsp;either:</span>
<span class="hljs-comment">     &nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;User&nbsp;has&nbsp;enabled&nbsp;adaptive&nbsp;flushing</span>
<span class="hljs-comment">     &nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;User&nbsp;may&nbsp;have&nbsp;disabled&nbsp;adaptive&nbsp;flushing&nbsp;but&nbsp;we&nbsp;have&nbsp;reached</span>
<span class="hljs-comment">     &nbsp;&nbsp;&nbsp;&nbsp;max_async_age.&nbsp;*/</span>
     &nbsp;&nbsp;&nbsp;&nbsp;lsn_age_factor&nbsp;=&nbsp;(age&nbsp;*&nbsp;<span class="hljs-number">100</span>)&nbsp;/&nbsp;max_async_age;&nbsp;
<span class="hljs-comment">//æ¯”ç‡lsn_age_factor&nbsp;=&nbsp;(æœ¬æ¬¡åˆ·æ–°çš„æ—¥å¿—é‡/(logtotalsize*(9/10)*(7/8)))</span>
     &nbsp;&nbsp;&nbsp;&nbsp;ut_ad(srv_max_io_capacity&nbsp;&gt;=&nbsp;srv_io_capacity);&nbsp;
     &nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">switch</span>&nbsp;((<span class="hljs-keyword">srv_cleaner_lsn_age_factor_t</span>)srv_cleaner_lsn_age_factor)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;
       <span class="hljs-keyword">case</span>&nbsp;SRV_CLEANER_LSN_AGE_FACTOR_LEGACY:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
           <span class="hljs-keyword">return</span>(<span class="hljs-keyword">static_cast</span>&lt;ulint&gt;(
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((srv_max_io_capacity&nbsp;/&nbsp;srv_io_capacity)
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(lsn_age_factor
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-built_in">sqrt</span>((<span class="hljs-keyword">double</span>)lsn_age_factor)))
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;<span class="hljs-number">7.5</span>));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//430</span>
     &nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span>&nbsp;SRV_CLEANER_LSN_AGE_FACTOR_HIGH_CHECKPOINT:&nbsp;
           <span class="hljs-comment">//innodb_cleaner_lsn_age_factorå‚æ•°é»˜è®¤è®¾ç½®ä¸ºhigh_checkpoint</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>(<span class="hljs-keyword">static_cast</span>&lt;ulint&gt;(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((srv_max_io_capacity&nbsp;/&nbsp;srv_io_capacity)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   				<span class="hljs-comment">//&nbsp;&nbsp;((max_io_cap&nbsp;/io_cap)&nbsp;*&nbsp;(sqrt(lsn_age_factor)*lsn_age_factor*lsn_age_factor))/700.5</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;(lsn_age_factor&nbsp;*&nbsp;lsn_age_factor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//(10&nbsp;*&nbsp;(3.3*10*10))/700&nbsp;=4.3</span>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-built_in">sqrt</span>((<span class="hljs-keyword">double</span>)lsn_age_factor)))
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;<span class="hljs-number">700.5</span>));</code></pre>
</li>
</ol>
</li>
<li><p><strong>å·¥ä½œçº¿ç¨‹çš„å…¥å£å‡½æ•°ä¸º</strong><code>buf_flush_page_cleaner_worker</code>:</p>
<p>çº¿ç¨‹è¢«å”¤é†’åï¼Œä»slotæ•°ç»„ä¸­å–ä¸€ä¸ªæœªè¢«å ç”¨çš„slotï¼Œä¿®æ”¹å…¶çŠ¶æ€ï¼Œè¡¨ç¤ºå·²è¢«è°ƒåº¦ï¼Œç„¶åå¯¹è¯¥slotæ‰€å¯¹åº”çš„buffer pool instanceè¿›è¡Œæ“ä½œ</p>
</li>
</ul>
<h2 id="5-purgeçº¿ç¨‹"><a href="#5-purgeçº¿ç¨‹" class="headerlink" title="5. purgeçº¿ç¨‹"></a>5. purgeçº¿ç¨‹</h2><p><code>innobase_start_or_create_for_mysql</code>ä¸­çš„:</p>
<pre><code class="hljs c++"><span class="hljs-keyword">if</span> (!srv_read_only_mode
	    &amp;&amp; srv_force_recovery &lt; SRV_FORCE_NO_BACKGROUND) {

		os_thread_create(
			srv_purge_coordinator_thread,
			<span class="hljs-literal">NULL</span>, thread_ids + <span class="hljs-number">5</span> + SRV_MAX_N_IO_THREADS);

		ut_a(UT_ARR_SIZE(thread_ids)
		     &gt; <span class="hljs-number">5</span> + srv_n_purge_threads + SRV_MAX_N_IO_THREADS);

		<span class="hljs-comment">/* We've already created the purge coordinator thread above. */</span>
		<span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; srv_n_purge_threads; ++i) {
			os_thread_create(
				srv_worker_thread, <span class="hljs-literal">NULL</span>,
				thread_ids + <span class="hljs-number">5</span> + i + SRV_MAX_N_IO_THREADS);
		}

		srv_start_wait_for_purge_to_start();

		srv_start_state_set(SRV_START_STATE_PURGE);
	} <span class="hljs-keyword">else</span> {
		purge_sys-&gt;state = PURGE_STATE_DISABLED;
	}</code></pre>
<p>[9]:<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-architecture.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/innodb-architecture.html</a></p><section class="footnotes">true<div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><pre><code class="hljs c++"><span class="hljs-comment">/<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>**</em></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span><br><span class="hljs-comment">Starts InnoDB and creates a new database if database files</span><br><span class="hljs-comment">are not found and the user wants.</span><br><span class="hljs-comment">@return DB_SUCCESS or error code */</span><br><span class="hljs-keyword">dberr_t</span><br>innobase_start_or_create_for_mysql(<span class="hljs-keyword">void</span>)<br><span class="hljs-comment">/<em>====================================</em>/</span><br>{<br>    <span class="hljs-comment">//â€¦</span><br>    <span class="hljs-comment">/* Create the master thread which does purge and other utility</span><br><span class="hljs-comment">    operations */</span>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></code></pre></span></span></li><li><code class="hljs c++"><span id="fn:2" class="footnote-text"><span><ul>
<li>åªæœ‰åœ¨innodb_force_recoveryå‚æ•°è®¾ç½®å€¼å¤§äºSRV_FORCE_NO_BACKGROUNDçš„æƒ…å†µä¸‹ï¼Œmaster threadä¼šè¿›å…¥suspendçŠ¶æ€</li>
</ul>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></code></li><li><code class="hljs c++"><span id="fn:4" class="footnote-text"><span><img src="innodbå­˜å‚¨æ¶æ„.png" srcset="/img/loading.gif" alt="innodbå­˜å‚¨æ¶æ„">
<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></code></li><li><code class="hljs c++"><span id="fn:4" class="footnote-text"><span>InnoDBå­˜å‚¨å¼•æ“çš„å¼€å‘å›¢é˜Ÿå‚è€ƒäº†Googleçš„patchï¼Œæä¾›äº†ç±»ä¼¼çš„æ–¹æ³•æ¥ä¿®æ­£è¯¥é—®é¢˜ã€‚å› æ­¤InnoDB Pluginï¼ˆä»InnoDB1.0.xç‰ˆæœ¬å¼€å§‹ï¼‰æä¾›äº†å‚æ•°innodb_io_capacityï¼Œç”¨æ¥è¡¨ç¤ºç£ç›˜IOçš„ååé‡ï¼Œé»˜è®¤å€¼ä¸º200ã€‚å¯¹äºåˆ·æ–°åˆ°ç£ç›˜é¡µçš„æ•°é‡ï¼Œä¼šæŒ‰ç…§innodb_io_capacityçš„ç™¾åˆ†æ¯”æ¥è¿›è¡Œæ§åˆ¶ã€‚è§„åˆ™å¦‚ä¸‹ï¼š
<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></code></li><li><code class="hljs c++"><span id="fn:6" class="footnote-text"><span><escape><pre><code class="hljs c++"><span class="hljs-keyword">while</span> (srv_shutdown_state == SRV_SHUTDOWN_NONE) {
    <span class="hljs-comment">//...</span>
}</code></pre><a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></escape></span></span></code></li><li><code class="hljs c++"><span id="fn:7" class="footnote-text"><span><img src="InnoDB_Master_Thread.png" srcset="/img/loading.gif" alt="InnoDB Master Thread">
<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></code></li><li><code class="hljs c++"><span id="fn:9" class="footnote-text"><span><img src="innodb-architecture.png" srcset="/img/loading.gif" alt="InnoDB architecture diagram showing in-memory and on-disk structures">
<a href="#fnref:9" rev="footnote" class="footnote-backref"> â†©</a></span></span></code></li></ol></div></section><p></p><code class="hljs c++">
</code><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
</search>
